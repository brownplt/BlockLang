var COMPILED=!0,goog=goog||{};goog.global=this;goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;!(a[0]in c)&&c.execScript&&c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&void 0!==b?c[d]=b:c=c[d]?c[d]:c[d]={}};goog.define=function(a,b){var c=b;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(c=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,c)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e;e=c.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};
goog.addDependency=function(a,b,c){if(goog.DEPENDENCIES_ENABLED){var d;a=a.replace(/\\/g,"/");for(var e=goog.dependencies_,f=0;d=b[f];f++)e.nameToPath[d]=a,a in e.pathToNames||(e.pathToNames[a]={}),e.pathToNames[a][d]=!0;for(d=0;b=c[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,b){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?"),d=-1==d?c.length:
d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}b.write('<script type="text/javascript" src="'+a+'">\x3c/script>');
return!0}return!1},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=!0,e in d.requires))for(var g in d.requires[e])if(!goog.isProvided_(g))if(g in d.nameToPath)a(d.nameToPath[g]);else throw Error("Undefined nameToPath for "+g);e in c||(c[e]=!0,b.push(e))}}var b=[],c={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<b.length;e++)if(b[e])goog.importScript_(goog.basePath+b[e]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);
b.body.removeChild(c)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return b?a+"-"+d(b):d(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){var c=b||{},d;for(d in c){var e=(""+c[d]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e)}return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),f=!1,g=a.constructor;g;g=g.superClass_&&g.superClass_.constructor)if(g.prototype[b]===d)f=!0;else if(f)return g.prototype[b].apply(a,
e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};goog.debug={};goog.debug.Error=function(a){Error.captureStackTrace?Error.captureStackTrace(this,goog.debug.Error):this.stack=Error().stack||"";a&&(this.message=String(a))};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.string={};goog.string.Unicode={NBSP:"\u00a0"};goog.string.startsWith=function(a,b){return 0==a.lastIndexOf(b,0)};goog.string.endsWith=function(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c};goog.string.caseInsensitiveStartsWith=function(a,b){return 0==goog.string.caseInsensitiveCompare(b,a.substr(0,b.length))};goog.string.caseInsensitiveEndsWith=function(a,b){return 0==goog.string.caseInsensitiveCompare(b,a.substr(a.length-b.length,b.length))};
goog.string.caseInsensitiveEquals=function(a,b){return a.toLowerCase()==b.toLowerCase()};goog.string.subs=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")};goog.string.collapseWhitespace=function(a){return a.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmpty=function(a){return/^[\s\xa0]*$/.test(a)};goog.string.isEmptySafe=function(a){return goog.string.isEmpty(goog.string.makeSafe(a))};
goog.string.isBreakingWhitespace=function(a){return!/[^\t\n\r ]/.test(a)};goog.string.isAlpha=function(a){return!/[^a-zA-Z]/.test(a)};goog.string.isNumeric=function(a){return!/[^0-9]/.test(a)};goog.string.isAlphaNumeric=function(a){return!/[^a-zA-Z0-9]/.test(a)};goog.string.isSpace=function(a){return" "==a};goog.string.isUnicodeChar=function(a){return 1==a.length&&" "<=a&&"~">=a||"\u0080"<=a&&"\ufffd">=a};goog.string.stripNewlines=function(a){return a.replace(/(\r\n|\r|\n)+/g," ")};
goog.string.canonicalizeNewlines=function(a){return a.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(a){return a.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(a){return a.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
goog.string.trimLeft=function(a){return a.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(a){return a.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(a,b){var c=String(a).toLowerCase(),d=String(b).toLowerCase();return c<d?-1:c==d?0:1};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;
goog.string.numerateCompare=function(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(goog.string.numerateCompareRegExp_),d=b.toLowerCase().match(goog.string.numerateCompareRegExp_),e=Math.min(c.length,d.length),f=0;f<e;f++){var g=c[f],k=d[f];if(g!=k)return c=parseInt(g,10),!isNaN(c)&&(d=parseInt(k,10),!isNaN(d)&&c-d)?c-d:g<k?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1};goog.string.urlEncode=function(a){return encodeURIComponent(String(a))};
goog.string.urlDecode=function(a){return decodeURIComponent(a.replace(/\+/g," "))};goog.string.newLineToBr=function(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")};
goog.string.htmlEscape=function(a,b){if(b)return a.replace(goog.string.amperRe_,"&amp;").replace(goog.string.ltRe_,"&lt;").replace(goog.string.gtRe_,"&gt;").replace(goog.string.quotRe_,"&quot;");if(!goog.string.allRe_.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(goog.string.amperRe_,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(goog.string.ltRe_,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(goog.string.gtRe_,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(goog.string.quotRe_,"&quot;"));return a};
goog.string.amperRe_=/&/g;goog.string.ltRe_=/</g;goog.string.gtRe_=/>/g;goog.string.quotRe_=/\"/g;goog.string.allRe_=/[&<>\"]/;goog.string.unescapeEntities=function(a){return goog.string.contains(a,"&")?"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(a):goog.string.unescapePureXmlEntities_(a):a};
goog.string.unescapeEntitiesUsingDom_=function(a){var b={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},c=document.createElement("div");return a.replace(goog.string.HTML_ENTITY_PATTERN_,function(a,e){var f=b[a];if(f)return f;if("#"==e.charAt(0)){var g=Number("0"+e.substr(1));isNaN(g)||(f=String.fromCharCode(g))}f||(c.innerHTML=a+" ",f=c.firstChild.nodeValue.slice(0,-1));return b[a]=f})};
goog.string.unescapePureXmlEntities_=function(a){return a.replace(/&([^;]+);/g,function(a,c){switch(c){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:if("#"==c.charAt(0)){var d=Number("0"+c.substr(1));if(!isNaN(d))return String.fromCharCode(d)}return a}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(a,b){return goog.string.newLineToBr(a.replace(/  /g," &#160;"),b)};
goog.string.stripQuotes=function(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a};goog.string.truncate=function(a,b,c){c&&(a=goog.string.unescapeEntities(a));a.length>b&&(a=a.substring(0,b-3)+"...");c&&(a=goog.string.htmlEscape(a));return a};
goog.string.truncateMiddle=function(a,b,c,d){c&&(a=goog.string.unescapeEntities(a));if(d&&a.length>b){d>b&&(d=b);var e=a.length-d;a=a.substring(0,b-d)+"..."+a.substring(e)}else a.length>b&&(d=Math.floor(b/2),e=a.length-d,a=a.substring(0,d+b%2)+"..."+a.substring(e));c&&(a=goog.string.htmlEscape(a));return a};goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};
goog.string.quote=function(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0);b[c+1]=goog.string.specialEscapeChars_[d]||(31<e&&127>e?d:goog.string.escapeChar(d))}b.push('"');return b.join("")};goog.string.escapeString=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=goog.string.escapeChar(a.charAt(c));return b.join("")};
goog.string.escapeChar=function(a){if(a in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[a];if(a in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[a]=goog.string.specialEscapeChars_[a];var b=a,c=a.charCodeAt(0);if(31<c&&127>c)b=a;else{if(256>c){if(b="\\x",16>c||256<c)b+="0"}else b="\\u",4096>c&&(b+="0");b+=c.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[a]=b};goog.string.toMap=function(a){for(var b={},c=0;c<a.length;c++)b[a.charAt(c)]=!0;return b};
goog.string.contains=function(a,b){return-1!=a.indexOf(b)};goog.string.countOf=function(a,b){return a&&b?a.split(b).length-1:0};goog.string.removeAt=function(a,b,c){var d=a;0<=b&&(b<a.length&&0<c)&&(d=a.substr(0,b)+a.substr(b+c,a.length-b-c));return d};goog.string.remove=function(a,b){var c=RegExp(goog.string.regExpEscape(b),"");return a.replace(c,"")};goog.string.removeAll=function(a,b){var c=RegExp(goog.string.regExpEscape(b),"g");return a.replace(c,"")};
goog.string.regExpEscape=function(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(a,b){return Array(b+1).join(a)};goog.string.padNumber=function(a,b,c){a=goog.isDef(c)?a.toFixed(c):String(a);c=a.indexOf(".");-1==c&&(c=a.length);return goog.string.repeat("0",Math.max(0,b-c))+a};goog.string.makeSafe=function(a){return null==a?"":String(a)};goog.string.buildString=function(a){return Array.prototype.join.call(arguments,"")};
goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)};
goog.string.compareVersions=function(a,b){for(var c=0,d=goog.string.trim(String(a)).split("."),e=goog.string.trim(String(b)).split("."),f=Math.max(d.length,e.length),g=0;0==c&&g<f;g++){var k=d[g]||"",l=e[g]||"",m=RegExp("(\\d*)(\\D*)","g"),p=RegExp("(\\d*)(\\D*)","g");do{var q=m.exec(k)||["","",""],t=p.exec(l)||["","",""];if(0==q[0].length&&0==t[0].length)break;var c=0==q[1].length?0:parseInt(q[1],10),D=0==t[1].length?0:parseInt(t[1],10),c=goog.string.compareElements_(c,D)||goog.string.compareElements_(0==
q[2].length,0==t[2].length)||goog.string.compareElements_(q[2],t[2])}while(0==c)}return c};goog.string.compareElements_=function(a,b){return a<b?-1:a>b?1:0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(a){for(var b=0,c=0;c<a.length;++c)b=31*b+a.charCodeAt(c),b%=goog.string.HASHCODE_MAX_;return b};goog.string.uniqueStringCounter_=2147483648*Math.random()|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};
goog.string.toNumber=function(a){var b=Number(a);return 0==b&&goog.string.isEmpty(a)?NaN:b};goog.string.isLowerCamelCase=function(a){return/^[a-z]+([A-Z][a-z]*)*$/.test(a)};goog.string.isUpperCamelCase=function(a){return/^([A-Z][a-z]*)+$/.test(a)};goog.string.toCamelCase=function(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};goog.string.toSelectorCase=function(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()};
goog.string.toTitleCase=function(a,b){var c=goog.isString(b)?goog.string.regExpEscape(b):"\\s";return a.replace(RegExp("(^"+(c?"|["+c+"]+":"")+")([a-z])","g"),function(a,b,c){return b+c.toUpperCase()})};goog.string.parseInt=function(a){isFinite(a)&&(a=String(a));return goog.isString(a)?/^\s*-?0x/i.test(a)?parseInt(a,16):parseInt(a,10):NaN};goog.string.splitLimit=function(a,b,c){a=a.split(b);for(var d=[];0<c&&a.length;)d.push(a.shift()),c--;a.length&&d.push(a.join(b));return d};goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(a,b){b.unshift(a);goog.debug.Error.call(this,goog.string.subs.apply(null,b));b.shift();this.messagePattern=a};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.doAssertFailure_=function(a,b,c,d){var e="Assertion failed";if(c)var e=e+(": "+c),f=d;else a&&(e+=": "+a,f=b);throw new goog.asserts.AssertionError(""+e,f||[]);};
goog.asserts.assert=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!a&&goog.asserts.doAssertFailure_("",null,b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.fail=function(a,b){if(goog.asserts.ENABLE_ASSERTS)throw new goog.asserts.AssertionError("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};
goog.asserts.assertNumber=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(a)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertString=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isString(a)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertFunction=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(a)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertObject=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(a)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertArray=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(a)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertBoolean=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(a)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertInstanceof=function(a,b,c,d){goog.asserts.ENABLE_ASSERTS&&!(a instanceof b)&&goog.asserts.doAssertFailure_("instanceof check failed.",null,c,Array.prototype.slice.call(arguments,3));return a};goog.events={};goog.events.Listenable=function(){};goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(1E6*Math.random()|0);goog.events.Listenable.addImplementation=function(a){a.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=!0};goog.events.Listenable.isImplementedBy=function(a){return!(!a||!a[goog.events.Listenable.IMPLEMENTED_BY_PROP])};goog.events.ListenableKey=function(){};goog.events.ListenableKey.counter_=0;goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_};goog.events.Listener=function(a,b,c,d,e,f){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=Error().stack);this.listener=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.handler=f;this.key=goog.events.ListenableKey.reserveKey();this.removed=this.callOnce=!1};goog.events.Listener.ENABLE_MONITORING=!1;goog.events.Listener.prototype.markAsRemoved=function(){this.removed=!0;this.handler=this.src=this.proxy=this.listener=null};goog.object={};goog.object.forEach=function(a,b,c){for(var d in a)b.call(c,a[d],d,a)};goog.object.filter=function(a,b,c){var d={},e;for(e in a)b.call(c,a[e],e,a)&&(d[e]=a[e]);return d};goog.object.map=function(a,b,c){var d={},e;for(e in a)d[e]=b.call(c,a[e],e,a);return d};goog.object.some=function(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return!0;return!1};goog.object.every=function(a,b,c){for(var d in a)if(!b.call(c,a[d],d,a))return!1;return!0};
goog.object.getCount=function(a){var b=0,c;for(c in a)b++;return b};goog.object.getAnyKey=function(a){for(var b in a)return b};goog.object.getAnyValue=function(a){for(var b in a)return a[b]};goog.object.contains=function(a,b){return goog.object.containsValue(a,b)};goog.object.getValues=function(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};goog.object.getKeys=function(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};
goog.object.getValueByKeys=function(a,b){for(var c=goog.isArrayLike(b),d=c?b:arguments,c=c?0:1;c<d.length&&!(a=a[d[c]],!goog.isDef(a));c++);return a};goog.object.containsKey=function(a,b){return b in a};goog.object.containsValue=function(a,b){for(var c in a)if(a[c]==b)return!0;return!1};goog.object.findKey=function(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d};goog.object.findValue=function(a,b,c){return(b=goog.object.findKey(a,b,c))&&a[b]};
goog.object.isEmpty=function(a){for(var b in a)return!1;return!0};goog.object.clear=function(a){for(var b in a)delete a[b]};goog.object.remove=function(a,b){var c;(c=b in a)&&delete a[b];return c};goog.object.add=function(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');goog.object.set(a,b,c)};goog.object.get=function(a,b,c){return b in a?a[b]:c};goog.object.set=function(a,b,c){a[b]=c};goog.object.setIfUndefined=function(a,b,c){return b in a?a[b]:a[b]=c};
goog.object.clone=function(a){var b={},c;for(c in a)b[c]=a[c];return b};goog.object.unsafeClone=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.object.unsafeClone(a[c]);return b}return a};goog.object.transpose=function(a){var b={},c;for(c in a)b[a[c]]=c;return b};goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.object.extend=function(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<goog.object.PROTOTYPE_FIELDS_.length;f++)c=goog.object.PROTOTYPE_FIELDS_[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};
goog.object.create=function(a){var b=arguments.length;if(1==b&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(b%2)throw Error("Uneven number of arguments");for(var c={},d=0;d<b;d+=2)c[arguments[d]]=arguments[d+1];return c};goog.object.createSet=function(a){var b=arguments.length;if(1==b&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};
goog.object.createImmutableView=function(a){var b=a;Object.isFrozen&&!Object.isFrozen(a)&&(b=Object.create(a),Object.freeze(b));return b};goog.object.isImmutableView=function(a){return!!Object.isFrozen&&Object.isFrozen(a)};goog.userAgent={};goog.userAgent.ASSUME_IE=!1;goog.userAgent.ASSUME_GECKO=!1;goog.userAgent.ASSUME_WEBKIT=!1;goog.userAgent.ASSUME_MOBILE_WEBKIT=!1;goog.userAgent.ASSUME_OPERA=!1;goog.userAgent.ASSUME_ANY_VERSION=!1;goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;
goog.userAgent.getUserAgentString=function(){return goog.global.navigator?goog.global.navigator.userAgent:null};goog.userAgent.getNavigator=function(){return goog.global.navigator};
goog.userAgent.init_=function(){goog.userAgent.detectedOpera_=!1;goog.userAgent.detectedIe_=!1;goog.userAgent.detectedWebkit_=!1;goog.userAgent.detectedMobile_=!1;goog.userAgent.detectedGecko_=!1;var a;if(!goog.userAgent.BROWSER_KNOWN_&&(a=goog.userAgent.getUserAgentString())){var b=goog.userAgent.getNavigator();goog.userAgent.detectedOpera_=0==a.indexOf("Opera");goog.userAgent.detectedIe_=!goog.userAgent.detectedOpera_&&-1!=a.indexOf("MSIE");goog.userAgent.detectedWebkit_=!goog.userAgent.detectedOpera_&&
-1!=a.indexOf("WebKit");goog.userAgent.detectedMobile_=goog.userAgent.detectedWebkit_&&-1!=a.indexOf("Mobile");goog.userAgent.detectedGecko_=!goog.userAgent.detectedOpera_&&!goog.userAgent.detectedWebkit_&&"Gecko"==b.product}};goog.userAgent.BROWSER_KNOWN_||goog.userAgent.init_();goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.userAgent.detectedOpera_;goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.userAgent.detectedIe_;
goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.userAgent.detectedGecko_;goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.userAgent.detectedWebkit_;goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.detectedMobile_;goog.userAgent.SAFARI=goog.userAgent.WEBKIT;goog.userAgent.determinePlatform_=function(){var a=goog.userAgent.getNavigator();return a&&a.platform||""};
goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.userAgent.ASSUME_MAC=!1;goog.userAgent.ASSUME_WINDOWS=!1;goog.userAgent.ASSUME_LINUX=!1;goog.userAgent.ASSUME_X11=!1;goog.userAgent.ASSUME_ANDROID=!1;goog.userAgent.ASSUME_IPHONE=!1;goog.userAgent.ASSUME_IPAD=!1;goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD;
goog.userAgent.initPlatform_=function(){goog.userAgent.detectedMac_=goog.string.contains(goog.userAgent.PLATFORM,"Mac");goog.userAgent.detectedWindows_=goog.string.contains(goog.userAgent.PLATFORM,"Win");goog.userAgent.detectedLinux_=goog.string.contains(goog.userAgent.PLATFORM,"Linux");goog.userAgent.detectedX11_=!!goog.userAgent.getNavigator()&&goog.string.contains(goog.userAgent.getNavigator().appVersion||"","X11");var a=goog.userAgent.getUserAgentString();goog.userAgent.detectedAndroid_=!!a&&
0<=a.indexOf("Android");goog.userAgent.detectedIPhone_=!!a&&0<=a.indexOf("iPhone");goog.userAgent.detectedIPad_=!!a&&0<=a.indexOf("iPad")};goog.userAgent.PLATFORM_KNOWN_||goog.userAgent.initPlatform_();goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.userAgent.detectedMac_;goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.userAgent.detectedWindows_;
goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.detectedLinux_;goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.detectedX11_;goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.userAgent.detectedAndroid_;goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.userAgent.detectedIPhone_;
goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.userAgent.detectedIPad_;
goog.userAgent.determineVersion_=function(){var a="",b;goog.userAgent.OPERA&&goog.global.opera?(a=goog.global.opera.version,a="function"==typeof a?a():a):(goog.userAgent.GECKO?b=/rv\:([^\);]+)(\)|;)/:goog.userAgent.IE?b=/MSIE\s+([^\);]+)(\)|;)/:goog.userAgent.WEBKIT&&(b=/WebKit\/(\S+)/),b&&(a=(a=b.exec(goog.userAgent.getUserAgentString()))?a[1]:""));return goog.userAgent.IE&&(b=goog.userAgent.getDocumentMode_(),b>parseFloat(a))?String(b):a};
goog.userAgent.getDocumentMode_=function(){var a=goog.global.document;return a?a.documentMode:void 0};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(a,b){return goog.string.compareVersions(a,b)};goog.userAgent.isVersionOrHigherCache_={};
goog.userAgent.isVersionOrHigher=function(a){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[a]||(goog.userAgent.isVersionOrHigherCache_[a]=0<=goog.string.compareVersions(goog.userAgent.VERSION,a))};goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher;goog.userAgent.isDocumentModeOrHigher=function(a){return goog.userAgent.IE&&goog.userAgent.DOCUMENT_MODE>=a};goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;
goog.userAgent.DOCUMENT_MODE=function(){var a=goog.global.document;return!a||!goog.userAgent.IE?void 0:goog.userAgent.getDocumentMode_()||("CSS1Compat"==a.compatMode?parseInt(goog.userAgent.VERSION,10):5)}();goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||
goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!(!goog.global.document||!(document.documentElement&&"ontouchstart"in document.documentElement))||!(!goog.global.navigator||!goog.global.navigator.msMaxTouchPoints)};goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE;goog.array.peek=function(a){return a[a.length-1]};goog.array.ARRAY_PROTOTYPE_=Array.prototype;
goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.indexOf?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(goog.isString(a))return!goog.isString(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};
goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.lastIndexOf?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(a,b,null==c?a.length-1:c)}:function(a,b,c){c=null==c?a.length-1:c;0>c&&(c=Math.max(0,a.length+c));if(goog.isString(a))return!goog.isString(b)||1!=b.length?-1:a.lastIndexOf(b,c);for(;0<=c;c--)if(c in a&&a[c]===b)return c;return-1};
goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.forEach?function(a,b,c){goog.asserts.assert(null!=a.length);goog.array.ARRAY_PROTOTYPE_.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};goog.array.forEachRight=function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,d=d-1;0<=d;--d)d in e&&b.call(c,e[d],d,a)};
goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.filter?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=goog.isString(a)?a.split(""):a,k=0;k<d;k++)if(k in g){var l=g[k];b.call(c,l,k,a)&&(e[f++]=l)}return e};
goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.map?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=goog.isString(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e};goog.array.reduce=function(a,b,c,d){if(a.reduce)return d?a.reduce(goog.bind(b,d),c):a.reduce(b,c);var e=c;goog.array.forEach(a,function(c,g){e=b.call(d,e,c,g,a)});return e};
goog.array.reduceRight=function(a,b,c,d){if(a.reduceRight)return d?a.reduceRight(goog.bind(b,d),c):a.reduceRight(b,c);var e=c;goog.array.forEachRight(a,function(c,g){e=b.call(d,e,c,g,a)});return e};
goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.some?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.every?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};goog.array.count=function(a,b,c){var d=0;goog.array.forEach(a,function(a,f,g){b.call(c,a,f,g)&&++d},c);return d};
goog.array.find=function(a,b,c){b=goog.array.findIndex(a,b,c);return 0>b?null:goog.isString(a)?a.charAt(b):a[b]};goog.array.findIndex=function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1};goog.array.findRight=function(a,b,c){b=goog.array.findIndexRight(a,b,c);return 0>b?null:goog.isString(a)?a.charAt(b):a[b]};
goog.array.findIndexRight=function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,d=d-1;0<=d;d--)if(d in e&&b.call(c,e[d],d,a))return d;return-1};goog.array.contains=function(a,b){return 0<=goog.array.indexOf(a,b)};goog.array.isEmpty=function(a){return 0==a.length};goog.array.clear=function(a){if(!goog.isArray(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0};goog.array.insert=function(a,b){goog.array.contains(a,b)||a.push(b)};
goog.array.insertAt=function(a,b,c){goog.array.splice(a,c,0,b)};goog.array.insertArrayAt=function(a,b,c){goog.partial(goog.array.splice,a,c,0).apply(null,b)};goog.array.insertBefore=function(a,b,c){var d;2==arguments.length||0>(d=goog.array.indexOf(a,c))?a.push(b):goog.array.insertAt(a,b,d)};goog.array.remove=function(a,b){var c=goog.array.indexOf(a,b),d;(d=0<=c)&&goog.array.removeAt(a,c);return d};
goog.array.removeAt=function(a,b){goog.asserts.assert(null!=a.length);return 1==goog.array.ARRAY_PROTOTYPE_.splice.call(a,b,1).length};goog.array.removeIf=function(a,b,c){b=goog.array.findIndex(a,b,c);return 0<=b?(goog.array.removeAt(a,b),!0):!1};goog.array.concat=function(a){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.toArray=function(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};goog.array.clone=goog.array.toArray;
goog.array.extend=function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(goog.isArray(d)||(e=goog.isArrayLike(d))&&Object.prototype.hasOwnProperty.call(d,"callee"))a.push.apply(a,d);else if(e)for(var f=a.length,g=d.length,k=0;k<g;k++)a[f+k]=d[k];else a.push(d)}};goog.array.splice=function(a,b,c,d){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.splice.apply(a,goog.array.slice(arguments,1))};
goog.array.slice=function(a,b,c){goog.asserts.assert(null!=a.length);return 2>=arguments.length?goog.array.ARRAY_PROTOTYPE_.slice.call(a,b):goog.array.ARRAY_PROTOTYPE_.slice.call(a,b,c)};goog.array.removeDuplicates=function(a,b){for(var c=b||a,d={},e=0,f=0;f<a.length;){var g=a[f++],k=goog.isObject(g)?"o"+goog.getUid(g):(typeof g).charAt(0)+g;Object.prototype.hasOwnProperty.call(d,k)||(d[k]=!0,c[e++]=g)}c.length=e};
goog.array.binarySearch=function(a,b,c){return goog.array.binarySearch_(a,c||goog.array.defaultCompare,!1,b)};goog.array.binarySelect=function(a,b,c){return goog.array.binarySearch_(a,b,!0,void 0,c)};goog.array.binarySearch_=function(a,b,c,d,e){for(var f=0,g=a.length,k;f<g;){var l=f+g>>1,m;m=c?b.call(e,a[l],l,a):b(d,a[l]);0<m?f=l+1:(g=l,k=!m)}return k?f:~f};goog.array.sort=function(a,b){goog.asserts.assert(null!=a.length);goog.array.ARRAY_PROTOTYPE_.sort.call(a,b||goog.array.defaultCompare)};
goog.array.stableSort=function(a,b){for(var c=0;c<a.length;c++)a[c]={index:c,value:a[c]};var d=b||goog.array.defaultCompare;goog.array.sort(a,function(a,b){return d(a.value,b.value)||a.index-b.index});for(c=0;c<a.length;c++)a[c]=a[c].value};goog.array.sortObjectsByKey=function(a,b,c){var d=c||goog.array.defaultCompare;goog.array.sort(a,function(a,c){return d(a[b],c[b])})};
goog.array.isSorted=function(a,b,c){b=b||goog.array.defaultCompare;for(var d=1;d<a.length;d++){var e=b(a[d-1],a[d]);if(0<e||0==e&&c)return!1}return!0};goog.array.equals=function(a,b,c){if(!goog.isArrayLike(a)||!goog.isArrayLike(b)||a.length!=b.length)return!1;var d=a.length;c=c||goog.array.defaultCompareEquality;for(var e=0;e<d;e++)if(!c(a[e],b[e]))return!1;return!0};goog.array.compare=function(a,b,c){return goog.array.equals(a,b,c)};
goog.array.compare3=function(a,b,c){c=c||goog.array.defaultCompare;for(var d=Math.min(a.length,b.length),e=0;e<d;e++){var f=c(a[e],b[e]);if(0!=f)return f}return goog.array.defaultCompare(a.length,b.length)};goog.array.defaultCompare=function(a,b){return a>b?1:a<b?-1:0};goog.array.defaultCompareEquality=function(a,b){return a===b};goog.array.binaryInsert=function(a,b,c){c=goog.array.binarySearch(a,b,c);return 0>c?(goog.array.insertAt(a,b,-(c+1)),!0):!1};
goog.array.binaryRemove=function(a,b,c){b=goog.array.binarySearch(a,b,c);return 0<=b?goog.array.removeAt(a,b):!1};goog.array.bucket=function(a,b,c){for(var d={},e=0;e<a.length;e++){var f=a[e],g=b.call(c,f,e,a);goog.isDef(g)&&(d[g]||(d[g]=[])).push(f)}return d};goog.array.toObject=function(a,b,c){var d={};goog.array.forEach(a,function(e,f){d[b.call(c,e,f,a)]=e});return d};
goog.array.range=function(a,b,c){var d=[],e=0,f=a;c=c||1;void 0!==b&&(e=a,f=b);if(0>c*(f-e))return[];if(0<c)for(a=e;a<f;a+=c)d.push(a);else for(a=e;a>f;a+=c)d.push(a);return d};goog.array.repeat=function(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c};goog.array.flatten=function(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];goog.isArray(d)?b.push.apply(b,goog.array.flatten.apply(null,d)):b.push(d)}return b};
goog.array.rotate=function(a,b){goog.asserts.assert(null!=a.length);a.length&&(b%=a.length,0<b?goog.array.ARRAY_PROTOTYPE_.unshift.apply(a,a.splice(-b,b)):0>b&&goog.array.ARRAY_PROTOTYPE_.push.apply(a,a.splice(0,-b)));return a};goog.array.zip=function(a){if(!arguments.length)return[];for(var b=[],c=0;;c++){for(var d=[],e=0;e<arguments.length;e++){var f=arguments[e];if(c>=f.length)return b;d.push(f[c])}b.push(d)}};
goog.array.shuffle=function(a,b){for(var c=b||Math.random,d=a.length-1;0<d;d--){var e=Math.floor(c()*(d+1)),f=a[d];a[d]=a[e];a[e]=f}};goog.debug.entryPointRegistry={};goog.debug.EntryPointMonitor=function(){};goog.debug.entryPointRegistry.refList_=[];goog.debug.entryPointRegistry.monitors_=[];goog.debug.entryPointRegistry.monitorsMayExist_=!1;goog.debug.entryPointRegistry.register=function(a){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=a;if(goog.debug.entryPointRegistry.monitorsMayExist_)for(var b=goog.debug.entryPointRegistry.monitors_,c=0;c<b.length;c++)a(goog.bind(b[c].wrap,b[c]))};
goog.debug.entryPointRegistry.monitorAll=function(a){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var b=goog.bind(a.wrap,a),c=0;c<goog.debug.entryPointRegistry.refList_.length;c++)goog.debug.entryPointRegistry.refList_[c](b);goog.debug.entryPointRegistry.monitors_.push(a)};
goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(a){var b=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(a==b[b.length-1],"Only the most recent monitor can be unwrapped.");a=goog.bind(a.unwrap,a);for(var c=0;c<goog.debug.entryPointRegistry.refList_.length;c++)goog.debug.entryPointRegistry.refList_[c](a);b.length--};goog.events.EventType={CLICK:"click",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",SELECTSTART:"selectstart",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",
DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONTEXTMENU:"contextmenu",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",
COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",TRANSITIONEND:goog.userAgent.WEBKIT?"webkitTransitionEnd":goog.userAgent.OPERA?"oTransitionEnd":"transitionend",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",
MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROVER:"MSPointerOver",MSPOINTEROUT:"MSPointerOut",MSPOINTERUP:"MSPointerUp",TEXTINPUT:"textinput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend"};goog.disposable={};goog.disposable.IDisposable=function(){};goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(this.creationStack=Error().stack,goog.Disposable.instances_[goog.getUid(this)]=this)};goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2};goog.Disposable.MONITORING_MODE=0;goog.Disposable.instances_={};goog.Disposable.getUndisposedObjects=function(){var a=[],b;for(b in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(b)&&a.push(goog.Disposable.instances_[Number(b)]);return a};
goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=!1;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;
goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var a=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(a))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");delete goog.Disposable.instances_[a]}};
goog.Disposable.prototype.registerDisposable=function(a){this.addOnDisposeCallback(goog.partial(goog.dispose,a))};goog.Disposable.prototype.addOnDisposeCallback=function(a,b){this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]);this.onDisposeCallbacks_.push(goog.bind(a,b))};goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()};
goog.Disposable.isDisposed=function(a){return a&&"function"==typeof a.isDisposed?a.isDisposed():!1};goog.dispose=function(a){a&&"function"==typeof a.dispose&&a.dispose()};goog.disposeAll=function(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];goog.isArrayLike(d)?goog.disposeAll.apply(null,d):goog.dispose(d)}};goog.events.Event=function(a,b){this.type=a;this.currentTarget=this.target=b};goog.events.Event.prototype.disposeInternal=function(){};goog.events.Event.prototype.dispose=function(){};goog.events.Event.prototype.propagationStopped_=!1;goog.events.Event.prototype.defaultPrevented=!1;goog.events.Event.prototype.returnValue_=!0;goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0};
goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0;this.returnValue_=!1};goog.events.Event.stopPropagation=function(a){a.stopPropagation()};goog.events.Event.preventDefault=function(a){a.preventDefault()};goog.reflect={};goog.reflect.object=function(a,b){return b};goog.reflect.sinkValue=function(a){goog.reflect.sinkValue[" "](a);return a};goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(a,b){try{return goog.reflect.sinkValue(a[b]),!0}catch(c){}return!1};goog.events.BrowserEvent=function(a,b){a&&this.init(a,b)};goog.inherits(goog.events.BrowserEvent,goog.events.Event);goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};goog.events.BrowserEvent.IEButtonMap=[1,4,2];goog.events.BrowserEvent.prototype.target=null;goog.events.BrowserEvent.prototype.relatedTarget=null;goog.events.BrowserEvent.prototype.offsetX=0;goog.events.BrowserEvent.prototype.offsetY=0;goog.events.BrowserEvent.prototype.clientX=0;
goog.events.BrowserEvent.prototype.clientY=0;goog.events.BrowserEvent.prototype.screenX=0;goog.events.BrowserEvent.prototype.screenY=0;goog.events.BrowserEvent.prototype.button=0;goog.events.BrowserEvent.prototype.keyCode=0;goog.events.BrowserEvent.prototype.charCode=0;goog.events.BrowserEvent.prototype.ctrlKey=!1;goog.events.BrowserEvent.prototype.altKey=!1;goog.events.BrowserEvent.prototype.shiftKey=!1;goog.events.BrowserEvent.prototype.metaKey=!1;
goog.events.BrowserEvent.prototype.platformModifierKey=!1;goog.events.BrowserEvent.prototype.event_=null;
goog.events.BrowserEvent.prototype.init=function(a,b){var c=this.type=a.type;goog.events.Event.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;d?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(d,"nodeName")||(d=null)):c==goog.events.EventType.MOUSEOVER?d=a.fromElement:c==goog.events.EventType.MOUSEOUT&&(d=a.toElement);this.relatedTarget=d;this.offsetX=goog.userAgent.WEBKIT||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=goog.userAgent.WEBKIT||void 0!==
a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.platformModifierKey=goog.userAgent.MAC?a.metaKey:a.ctrlKey;this.state=a.state;this.event_=a;a.defaultPrevented&&this.preventDefault();
delete this.propagationStopped_};goog.events.BrowserEvent.prototype.isButton=function(a){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==a:"click"==this.type?a==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[a])};goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)};
goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0};
goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var a=this.event_;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};goog.events.BrowserEvent.prototype.disposeInternal=function(){};goog.events.listeners_={};goog.events.listenerTree_={};goog.events.sources_={};goog.events.onString_="on";goog.events.onStringMap_={};goog.events.keySeparator_="_";goog.events.listen=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++)goog.events.listen(a,b[f],c,d,e);return null}c=goog.events.wrapListener_(c);return goog.events.Listenable.isImplementedBy(a)?a.listen(b,c,d,e):goog.events.listen_(a,b,c,!1,d,e)};
goog.events.listen_=function(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");e=!!e;var g=goog.events.listenerTree_;b in g||(g[b]={count_:0,remaining_:0});g=g[b];e in g||(g[e]={count_:0,remaining_:0},g.count_++);var g=g[e],k=goog.getUid(a),l;g.remaining_++;if(g[k]){l=g[k];for(var m=0;m<l.length;m++)if(g=l[m],g.listener==c&&g.handler==f){if(g.removed)break;d||(l[m].callOnce=!1);return l[m]}}else l=g[k]=[],g.count_++;m=goog.events.getProxy();g=new goog.events.Listener(c,m,a,b,e,f);g.callOnce=d;
m.src=a;m.listener=g;l.push(g);goog.events.sources_[k]||(goog.events.sources_[k]=[]);goog.events.sources_[k].push(g);a.addEventListener?a.addEventListener(b,m,e):a.attachEvent(goog.events.getOnString_(b),m);return goog.events.listeners_[g.key]=g};goog.events.getProxy=function(){var a=goog.events.handleBrowserEvent_,b=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b};
goog.events.listenOnce=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++)goog.events.listenOnce(a,b[f],c,d,e);return null}c=goog.events.wrapListener_(c);return goog.events.Listenable.isImplementedBy(a)?a.listenOnce(b,c,d,e):goog.events.listen_(a,b,c,!0,d,e)};goog.events.listenWithWrapper=function(a,b,c,d,e){b.listen(a,c,d,e)};
goog.events.unlisten=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++)goog.events.unlisten(a,b[f],c,d,e);return null}c=goog.events.wrapListener_(c);if(goog.events.Listenable.isImplementedBy(a))return a.unlisten(b,c,d,e);d=!!d;a=goog.events.getListeners_(a,b,d);if(!a)return!1;for(f=0;f<a.length;f++)if(a[f].listener==c&&a[f].capture==d&&a[f].handler==e)return goog.events.unlistenByKey(a[f]);return!1};
goog.events.unlistenByKey=function(a){if(goog.isNumber(a)||!a||a.removed)return!1;var b=a.src;if(goog.events.Listenable.isImplementedBy(b))return b.unlistenByKey(a);var c=a.type,d=a.proxy,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(goog.events.getOnString_(c),d);b=goog.getUid(b);goog.events.sources_[b]&&(d=goog.events.sources_[b],goog.array.remove(d,a),0==d.length&&delete goog.events.sources_[b]);a.markAsRemoved();if(d=goog.events.listenerTree_[c][e][b])goog.array.remove(d,
a),0==d.length&&(delete goog.events.listenerTree_[c][e][b],goog.events.listenerTree_[c][e].count_--),0==goog.events.listenerTree_[c][e].count_&&(delete goog.events.listenerTree_[c][e],goog.events.listenerTree_[c].count_--),0==goog.events.listenerTree_[c].count_&&delete goog.events.listenerTree_[c];delete goog.events.listeners_[a.key];return!0};goog.events.unlistenWithWrapper=function(a,b,c,d,e){b.unlisten(a,c,d,e)};
goog.events.removeAll=function(a,b){var c=0,d=null==b;if(null!=a){if(a&&goog.events.Listenable.isImplementedBy(a))return a.removeAllListeners(b);var e=goog.getUid(a);if(goog.events.sources_[e])for(var e=goog.events.sources_[e],f=e.length-1;0<=f;f--){var g=e[f];if(d||b==g.type)goog.events.unlistenByKey(g),c++}}else goog.object.forEach(goog.events.listeners_,function(a){goog.events.unlistenByKey(a);c++});return c};
goog.events.removeAllNativeListeners=function(){var a=0;goog.object.forEach(goog.events.listeners_,function(b){goog.events.unlistenByKey(b);a++});return a};goog.events.getListeners=function(a,b,c){return goog.events.Listenable.isImplementedBy(a)?a.getListeners(b,c):goog.events.getListeners_(a,b,c)||[]};goog.events.getListeners_=function(a,b,c){var d=goog.events.listenerTree_;return b in d&&(d=d[b],c in d&&(d=d[c],a=goog.getUid(a),d[a]))?d[a]:null};
goog.events.getListener=function(a,b,c,d,e){d=!!d;c=goog.events.wrapListener_(c);if(goog.events.Listenable.isImplementedBy(a))return a.getListener(b,c,d,e);if(a=goog.events.getListeners_(a,b,d))for(b=0;b<a.length;b++)if(!a[b].removed&&a[b].listener==c&&a[b].capture==d&&a[b].handler==e)return a[b];return null};
goog.events.hasListener=function(a,b,c){if(goog.events.Listenable.isImplementedBy(a))return a.hasListener(b,c);a=goog.getUid(a);var d=goog.events.sources_[a];if(d){var e=goog.isDef(b),f=goog.isDef(c);return e&&f?(d=goog.events.listenerTree_[b],!!d&&!!d[c]&&a in d[c]):!e&&!f?!0:goog.array.some(d,function(a){return e&&a.type==b||f&&a.capture==c})}return!1};goog.events.expose=function(a){var b=[],c;for(c in a)a[c]&&a[c].id?b.push(c+" = "+a[c]+" ("+a[c].id+")"):b.push(c+" = "+a[c]);return b.join("\n")};
goog.events.getOnString_=function(a){return a in goog.events.onStringMap_?goog.events.onStringMap_[a]:goog.events.onStringMap_[a]=goog.events.onString_+a};goog.events.fireListeners=function(a,b,c,d){if(goog.events.Listenable.isImplementedBy(a))return a.fireListeners(b,c,d);var e=goog.events.listenerTree_;return b in e&&(e=e[b],c in e)?goog.events.fireListeners_(e[c],a,b,c,d):!0};
goog.events.fireListeners_=function(a,b,c,d,e){c=1;d=goog.getUid(b);if(a[d]){b=--a.remaining_;d=goog.array.clone(a[d]);try{for(var f=0;f<d.length;f++){var g=d[f];g&&!g.removed&&(c&=!1!==goog.events.fireListener(g,e))}}finally{a.remaining_=Math.max(b,a.remaining_)}}return Boolean(c)};goog.events.fireListener=function(a,b){var c=a.listener,d=a.handler||a.src;a.callOnce&&goog.events.unlistenByKey(a);return c.call(d,b)};goog.events.getTotalListenerCount=function(){return goog.object.getCount(goog.events.listeners_)};
goog.events.dispatchEvent=function(a,b){goog.asserts.assert(goog.events.Listenable.isImplementedBy(a),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance.");return a.dispatchEvent(b)};goog.events.protectBrowserEventEntryPoint=function(a){goog.events.handleBrowserEvent_=a.protectEntryPoint(goog.events.handleBrowserEvent_)};
goog.events.handleBrowserEvent_=function(a,b){if(a.removed)return!0;var c=a.type,d=goog.events.listenerTree_;if(!(c in d))return!0;var d=d[c],e,f;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){e=b||goog.getObjectByName("window.event");var g=!0 in d,k=!1 in d;if(g){if(goog.events.isMarkedIeEvent_(e))return!0;goog.events.markIeEvent_(e)}var l=new goog.events.BrowserEvent;l.init(e,this);e=!0;try{if(g){for(var m=[],p=l.currentTarget;p;p=p.parentNode)m.push(p);f=d[!0];f.remaining_=f.count_;for(var q=
m.length-1;!l.propagationStopped_&&0<=q&&f.remaining_;q--)l.currentTarget=m[q],e&=goog.events.fireListeners_(f,m[q],c,!0,l);if(k){f=d[!1];f.remaining_=f.count_;for(q=0;!l.propagationStopped_&&q<m.length&&f.remaining_;q++)l.currentTarget=m[q],e&=goog.events.fireListeners_(f,m[q],c,!1,l)}}else e=goog.events.fireListener(a,l)}finally{m&&(m.length=0)}return e}c=new goog.events.BrowserEvent(b,this);return e=goog.events.fireListener(a,c)};
goog.events.markIeEvent_=function(a){var b=!1;if(0==a.keyCode)try{a.keyCode=-1;return}catch(c){b=!0}if(b||void 0==a.returnValue)a.returnValue=!0};goog.events.isMarkedIeEvent_=function(a){return 0>a.keyCode||void 0!=a.returnValue};goog.events.uniqueIdCounter_=0;goog.events.getUniqueId=function(a){return a+"_"+goog.events.uniqueIdCounter_++};goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1E9*Math.random()>>>0);
goog.events.wrapListener_=function(a){goog.asserts.assert(a,"Listener can not be null.");if(goog.isFunction(a))return a;goog.asserts.assert(a.handleEvent,"An object listener must have handleEvent method.");return a[goog.events.LISTENER_WRAPPER_PROP_]||(a[goog.events.LISTENER_WRAPPER_PROP_]=function(b){return a.handleEvent(b)})};goog.debug.entryPointRegistry.register(function(a){goog.events.handleBrowserEvent_=a(goog.events.handleBrowserEvent_)});var Ray={Util:{}},Util=Ray.Util;Util.install=function(a){goog.object.forEach(Util,function(b,c){"install"!==c&&(a[c]=b)})};Util.construct=function(a,b,c){function d(){return a.apply(this,b.concat(c))}d.prototype=a.proto;var e=new d;e.constructor=a;return e};Util.product=function(a,b){var c=a.slice(),d=b?b.slice():[],e=function(){this.__args__=c;for(var a=0;a<c.length;a++)this[c[a]]=arguments[a];this.__types__=d;for(a=0;a<d.length;a++)this[d[a]]=arguments[a+c.length]};e.__args__=c;e.__types__=d;return e};
Util.clone_constructor=function(a){function b(a){a=d[a];return"object"===typeof a?Util.clone_constructor.R.clone(a):a}var c=this.__types__,d=this;a=goog.array.map(this.__args__,b);c=goog.array.map(c,b);return Util.construct(this.__node_constructor__,a,c)};Ray.Env={};var EmptyEnv=function(){};EmptyEnv.prototype={clone:function(){return new EmptyEnv},toString:function(){return"empty-env"},lookup:function(a){return null},extend:function(a,b){return new ExtendEnv(a,b,this)},allBoundNames:function(){return[]},dict:function(a){return a}};Ray.Env.EmptyEnv=EmptyEnv;var ExtendEnv=function(a,b,c){this.name=a;this.value=b;this.env=c};
ExtendEnv.prototype={clone:function(){return new ExtendEnv(this.name,this.value,this.env.clone())},toString:function(){return"("+this.name+": "+this.value.display()+", "+this.env.toString()+")"},lookup:function(a){return this.name===a?this.value:this.env.lookup(a)},extend:function(a,b){return new ExtendEnv(a,b,this)},allBoundNames:function(){return[this.name].concat(this.env.allBoundNames())},dict:function(a){a[this.name]=this.value;return this.env.dict(a)}};Ray.Env.ExtendEnv=ExtendEnv;
var FastEnv=function(){this.env={}};
FastEnv.prototype={clone:function(){var a=new FastEnv;goog.object.forEach(this.env,function(b,c){a.extend(c,b)});return a},toString:function(){var a="";goog.object.forEach(this.env,function(b,c){a+="("+c+": "+b.display()+", "});for(var a=a+"empty-env",b=goog.object.getKeys(this.env),c=0;c<b.length;c++)a+=")";return a},lookup:function(a){return this.env[a]||null},extend:function(a,b){this.env[a]=b;return this},allBoundNames:function(){return goog.object.getKeys(this.env)},dict:function(a){goog.oject.forEach(this.env,
function(b,c){a[c]=b});return a}};Ray.Env.emptyEnv=function(){return new EmptyEnv};Ray.Env.extendEnv=function(a,b,c){return this.env.extend(a,b)};Ray.Env.emptyFastEnv=function(){return new FastEnv};Ray.Globals={};Ray.Globals.Expressions={};var Expressions=Ray.Globals.Expressions;Expressions.Pair=0;Expressions.Empty=1;Expressions.Num=2;Expressions.Char=15;Expressions.Boolean=3;Expressions.Str=5;Expressions.Primitive=4;Expressions.Lambda=6;Expressions.Name=7;Expressions.Cond=8;Expressions.If=9;Expressions.And=10;Expressions.Or=11;Expressions.App=12;Expressions.Arguments=13;Expressions.ArgumentSpec=14;Ray.Globals.Values={};var Values=Ray.Globals.Values;Values.Pair=0;Values.Empty=1;
Values.Boolean=2;Values.Num=3;Values.Str=4;Values.Char=5;Values.Primitive=6;Values.Closure=7;Values.ArgumentSpec=8;Values.Arguments=9;Ray.Globals.Types={};var Types=Ray.Globals.Types;Types.Unknown=0;Types.Num=1;Types.Str=2;Types.Char=3;Types.Boolean=4;Types.List=5;Types.ListOfTypes=6;Types.NArityType=7;Types.ArgumentsType=8;Types.FunctionType=9;Ray.Globals.Blocks={};var Blocks=Ray.Globals.Blocks;Blocks.Num=0;Blocks.Char=1;Blocks.Str=2;Blocks.Boolean=3;Blocks.Cond=4;Blocks.If=5;Blocks.Cons=6;
Blocks.First=7;Blocks.Rest=8;Blocks.Empty=9;Blocks.List=10;Blocks.App=11;Blocks.Argument=12;Blocks.And=13;Blocks.Or=14;Blocks.Example=15;Ray.Globals.Priorities={};var Priorities=Ray.Globals.Priorities;Priorities.BASIC_NUMBER_OPERATION=3;Priorities.PRIMITIVE_DATA_VALUE=2;Priorities.ARGUMENT=1;Ray.Types={};Ray.Types.BOOLEAN_TYPE_NAME="boolean";Ray.Types.STRING_TYPE_NAME="string";Ray.Types.CHARACTER_TYPE_NAME="character";Ray.Types.NUMBER_TYPE_NAME="number";Ray.Types.UNKNOWN_TYPE_NAME="unknown";Ray.Types.LIST_TYPE_NAME="list";Ray.Types.LIST_OF_TYPES_TYPE_NAME="list_of_types";Ray.Types.N_ARITY_TYPE_NAME="n_arity";Ray.Types.ARGUMENTS_TYPE_NAME="args";Ray.Types.FUNCTION_TYPE_NAME="function";
var uniques=function(a){var b=[];goog.array.forEach(a,function(a){goog.array.contains(b,a)||b.push(a)});return b};Ray.Types.getAtomicType=function(a){return Ray.Types.atomicTypes_[a]};Ray.Types.atomicTypes_={};
var AtomicType=function(a,b,c){function d(){this.outputType_=a}var e=c||goog.string.toTitleCase(a);d.prototype.getAllBaseTypes=function(){return[a]};d.prototype.clone=function(){return new d};d.prototype.display=function(){return e};d.key=function(){return a};d.prototype.key=d.key;b||(Ray.Types.atomicTypes_[a]=d);return d};Ray.Types.Boolean=AtomicType(Ray.Types.BOOLEAN_TYPE_NAME);Ray.Types.Num=AtomicType(Ray.Types.NUMBER_TYPE_NAME);Ray.Types.Str=AtomicType(Ray.Types.STRING_TYPE_NAME);
Ray.Types.Char=AtomicType(Ray.Types.CHARACTER_TYPE_NAME);Ray.Types.Unknown=AtomicType(Ray.Types.UNKNOWN_TYPE_NAME,!0,"???");Ray.Types.getBaseTypes=function(){var a=goog.object.getValues(Ray.Types.atomicTypes_);a.push(Ray.Types.Unknown);return a};Ray.Types.isAtomicType=function(a){return!!Ray.Types.getAtomicType(a.outputType_)};Ray.Types.isUnknown=function(a){return a.outputType_===Ray.Types.UNKNOWN_TYPE_NAME};var ListType=function(a){this.outputType_=Ray.Types.LIST_TYPE_NAME;this.elementType=a};
ListType.prototype.getAllBaseTypes=function(){return this.elementType.getAllBaseTypes()};ListType.prototype.clone=function(){return new ListType(this.elementType.clone())};ListType.prototype.display=function(){return"(Listof "+this.elementType.display()+")"};Ray.Types.List=ListType;var ListOfTypes=function(a){this.outputType_=Ray.Types.LIST_OF_TYPES_TYPE_NAME;this.list=a};
ListOfTypes.prototype.getAllBaseTypes=function(){var a=goog.array.reduce(this.list,function(a,c){return a.concat(c.getAllBaseTypes())},[]);return uniques(a)};ListOfTypes.prototype.clone=function(){return new ListOfTypes(goog.array.map(this.list,function(a){return a.clone()}))};ListOfTypes.prototype.display=function(){return"("+goog.array.map(this.list,function(a){return a.display()}).join(" * ")+")"};Ray.Types.ListOfTypes=ListOfTypes;
var NArityType=function(a){this.outputType_=Ray.Types.N_ARITY_TYPE_NAME;this.elementType=a};NArityType.prototype.getAllBaseTypes=function(){return this.elementType.getAllBaseTypes()};NArityType.prototype.clone=function(){return new NArityType(this.elementType.clone())};NArityType.prototype.display=function(){return"("+this.elementType.display()+" ...)"};Ray.Types.NArityType=NArityType;
var ArgumentsType=function(a,b){this.outputType_=Ray.Types.ARGUMENTS_TYPE_NAME;this.positionalArgTypes=a||new ListOfTypes([]);this.restArgType=b||null};ArgumentsType.prototype.getAllBaseTypes=function(){var a=[];this.positionalArgTypes&&(a=a.concat(this.positionalArgTypes.getAllBaseTypes()));this.restArgType&&(a=a.concat(this.restArgType.getAllBaseTypes()));return uniques(a)};ArgumentsType.prototype.clone=function(){return new ArgumentsType(this.positionalArgTypes.clone(),this.restArgType.clone())};
ArgumentsType.prototype.display=function(){return"{"+this.positionalArgTypes.display()+(this.restArgType?" "+this.restArgType.display():"")+"}"};Ray.Types.ArgumentsType=ArgumentsType;Ray.Types.getAllArgumentTypes=function(a){var b=[];a.positionalArgTypes&&(b=b.concat(a.positionalArgTypes.list));a.restArgType&&b.push(a.restArgType.elementType);return b};var FunctionType=function(a,b){this.outputType_=Ray.Types.FUNCTION_TYPE_NAME;this.argumentsType=a;this.returnType=b};
FunctionType.prototype.getAllBaseTypes=function(){var a=this.argumentsType.getAllBaseTypes();return uniques(a.concat(this.returnType.getAllBaseTypes()))};FunctionType.prototype.clone=function(){return new FunctionType(this.argumentsType.clone(),this.returnType.clone())};FunctionType.prototype.display=function(){return"("+this.argumentsType.display()+" -> "+this.returnType.display()+")"};Ray.Types.FunctionType=FunctionType;Ray.Types.bool=function(){return new Ray.Types.Boolean};Ray.Types.num=function(){return new Ray.Types.Num};
Ray.Types.str=function(){return new Ray.Types.Str};Ray.Types._char=function(){return new Ray.Types.Char};Ray.Types.unknown=function(){return new Ray.Types.Unknown};Ray.Types.list=function(a){return new Ray.Types.List(a)};Ray.Types.ty_list=function(a){return new Ray.Types.ListOfTypes(a)};Ray.Types.ty_n_arity=function(a){return new Ray.Types.NArityType(a)};Ray.Types.positionalArgs=function(){return new Ray.Types.ArgumentsType(new Ray.Types.ListOfTypes(Array.prototype.slice.call(arguments,0)))};
Ray.Types.restArg=function(a){return new Ray.Types.ArgumentsType(new Ray.Types.ListOfTypes([]),new Ray.Types.NArityType(a))};Ray.Types.args=function(a,b){return new Ray.Types.ArgumentsType(a,b)};Ray.Types.fn=function(a,b){return new Ray.Types.FunctionType(a,b)};
Ray.Types.areMatchingTypes=function(a,b){if(b.outputType_===Ray.Types.UNKNOWN_TYPE_NAME||a.outputType_===Ray.Types.UNKNOWN_TYPE_NAME)return!0;switch(a.outputType_){case Ray.Types.BOOLEAN_TYPE_NAME:return b.outputType_===Ray.Types.BOOLEAN_TYPE_NAME;case Ray.Types.NUMBER_TYPE_NAME:return b.outputType_===Ray.Types.NUMBER_TYPE_NAME;case Ray.Types.STRING_TYPE_NAME:return b.outputType_===Ray.Types.STRING_TYPE_NAME;case Ray.Types.CHARACTER_TYPE_NAME:return b.outputType_===Ray.Types.CHARACTER_TYPE_NAME;case Ray.Types.LIST_TYPE_NAME:return b.outputType_===
Ray.Types.LIST_TYPE_NAME&&Ray.Types.areMatchingTypes(a.elementType,b.elementType);case Ray.Types.LIST_OF_TYPES_TYPE_NAME:return b.outputType_===Ray.Types.LIST_OF_TYPES_TYPE_NAME&&goog.array.every(goog.array.zip(a.list,b.list),function(a){return Ray.Types.areMatchingTypes(a[0],a[1])});case Ray.Types.N_ARITY_TYPE_NAME:return b.outputType_===Ray.Types.N_ARITY_TYPE_NAME&&Ray.Types.areMatchingTypes(a.elementType,b.elementType);case Ray.Types.ARGUMENTS_TYPE_NAME:return b.outputType_===Ray.Types.ARGUMENTS_TYPE_NAME&&
Ray.Types.areMatchingTypes(a.positionalArgTypes,b.positionalArgTypes)?a.restArgType&&b.restArgType?Ray.Types.areMatchingTypes(a.restArgType,b.restArgType):!a.restArgType&&!b.restArgType:!1;case Ray.Types.FUNCTION_TYPE_NAME:return b.outputType_===Ray.Types.FUNCTION_TYPE_NAME&&Ray.Types.areMatchingTypes(a.argumentsType,b.argumentsType)&&Ray.Types.areMatchingTypes(a.returnType,b.returnType);default:return!1}};
Ray.Types.areSameType=function(a,b){switch(a.outputType_){case Ray.Types.UNKNOWN_TYPE_NAME:return b.outputType_===Ray.Types.UNKNOWN_TYPE_NAME;case Ray.Types.BOOLEAN_TYPE_NAME:return b.outputType_===Ray.Types.BOOLEAN_TYPE_NAME;case Ray.Types.NUMBER_TYPE_NAME:return b.outputType_===Ray.Types.NUMBER_TYPE_NAME;case Ray.Types.STRING_TYPE_NAME:return b.outputType_===Ray.Types.STRING_TYPE_NAME;case Ray.Types.CHARACTER_TYPE_NAME:return b.outputType_===Ray.Types.CHARACTER_TYPE_NAME;case Ray.Types.LIST_TYPE_NAME:return b.outputType_===
Ray.Types.LIST_TYPE_NAME&&Ray.Types.areSameType(a.elementType,b.elementType);case Ray.Types.LIST_OF_TYPES_TYPE_NAME:return b.outputType_===Ray.Types.LIST_OF_TYPES_TYPE_NAME&&goog.array.every(goog.array.zip(a.list,b.list),function(a){return Ray.Types.areSameType(a[0],a[1])});case Ray.Types.N_ARITY_TYPE_NAME:return b.outputType_===Ray.Types.N_ARITY_TYPE_NAME&&Ray.Types.areSameType(a.elementType,b.elementType);case Ray.Types.ARGUMENTS_TYPE_NAME:return b.outputType_===Ray.Types.ARGUMENTS_TYPE_NAME&&Ray.Types.areSameType(a.positionalArgTypes,
b.positionalArgTypes)?a.restArgType&&b.restArgType?Ray.Types.areSameType(a.restArgType,b.restArgType):!a.restArgType&&!b.restArgType:!1;case Ray.Types.FUNCTION_TYPE_NAME:return b.outputType_===Ray.Types.FUNCTION_TYPE_NAME&&Ray.Types.areSameType(a.argumentsType,b.argumentsType)&&Ray.Types.areSameType(a.returnType,b.returnType);default:return!1}};
Ray.Types.principalType_=function(a,b){if(a.outputType_===Ray.Types.UNKNOWN_TYPE_NAME)return b;if(b.outputType_===Ray.Types.UNKNOWN_TYPE_NAME)return a;switch(a.outputType_){case Ray.Types.BOOLEAN_TYPE_NAME:case Ray.Types.NUMBER_TYPE_NAME:case Ray.Types.STRING_TYPE_NAME:case Ray.Types.CHARACTER_TYPE_NAME:return a;case Ray.Types.LIST_TYPE_NAME:return new Ray.Types.List(Ray.Types.principalType_(a.elementType,b.elementType));case Ray.Types.LIST_OF_TYPES_TYPE_NAME:return new Ray.Types.ListOfTypes(goog.array.map(goog.array.zip(a.list,
b.list),function(a){return Ray.Types.principalType_(a[0],a[1])}));case Ray.Types.N_ARITY_TYPE_NAME:return new Ray.Types.NArityType(Ray.Types.principalType_(a.elementType,b.elementType));case Ray.Types.ARGUMENTS_TYPE_NAME:var c=goog.array.map(goog.array.zip(a.positionalArgTypes,b.positionalArgTypes),function(a){return Ray.Types.principalType_(a[0],a[1])}),d=a.restArgType?Ray.Types.principalType_(a.restArgType,b.restArgType):null;return new Ray.Types.ArgumentsType(c,d);case Ray.Types.FUNCTION_TYPE_NAME:return new Ray.Types.FunctionType(Ray.Types.principalType_(a.argumentsType,
b.argumentsType),Ray.Types.principalType_(a.returnType,b.returnType));default:throw"Unknown type for ty1!";}};Ray.Types.principalType=function(a){return goog.array.reduce(a,function(a,c){return Ray.Types.principalType_(a,c)},new Ray.Types.Unknown)};Ray.Types.textToType=function(a){a=Ray.Types.atomicTypes_[a.toLowerCase()];if(!a)throw"text couldn't be parsed to type!";return new a};(function(a){function b(a,b,c){null!=a&&("number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function c(){return new b(null)}function d(a,b,c,d,e,f){for(;0<=--f;){var h=b*this[a++]+c[d]+e;e=Math.floor(h/67108864);c[d++]=h&67108863}return e}function e(a,b,c,d,e,f){var h=b&32767;for(b>>=15;0<=--f;){var g=this[a]&32767,k=this[a++]>>15,l=b*g+k*h,g=h*g+((l&32767)<<15)+c[d]+(e&1073741823);e=(g>>>30)+(l>>>15)+b*k+(e>>>30);c[d++]=g&1073741823}return e}
function f(a,b,c,d,e,f){var h=b&16383;for(b>>=14;0<=--f;){var g=this[a]&16383,k=this[a++]>>14,l=b*g+k*h,g=h*g+((l&16383)<<14)+c[d]+e;e=(g>>28)+(l>>14)+b*k;c[d++]=g&268435455}return e}function g(a,b){var c=Wa[a.charCodeAt(b)];return null==c?-1:c}function k(a){var b=c();b.fromInt(a);return b}function l(a){var b=this.s-a.s;if(0!=b)return b;var c=this.t,b=0>this.s?a.t-c:c-a.t;if(0!=b)return b;for(;0<=--c;)if(0!=(b=this[c]-a[c]))return b;return 0}function m(a){var b=1,c;if(0!=(c=a>>>16))a=c,b+=16;if(0!=
(c=a>>8))a=c,b+=8;if(0!=(c=a>>4))a=c,b+=4;if(0!=(c=a>>2))a=c,b+=2;0!=a>>1&&(b+=1);return b}function p(a){var d=c();this.abs().divRemTo(a,null,d);0>this.s&&0<d.compareTo(b.ZERO)&&a.subTo(d,d);return d}function q(a){this.m=a}function t(a){this.m=a;this.mp=a.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<a.DB-15)-1;this.mt2=2*a.t}function D(a){return 0==this.compareTo(a)}function C(a,b){return a&b}function T(a,b){return a|b}function ba(a,b){return a^b}function J(a,b){return a&~b}
function ma(a){var b=c();this.addTo(a,b);return b}function ca(a){var b=c();this.subTo(a,b);return b}function va(a){var b=c();this.multiplyTo(a,b);return b}function Xa(a){var b=c();this.divRemTo(a,b,null);return b}function Fa(a){var b=c();this.divRemTo(a,null,b);return b}function Ya(a){var b=c(),d=c();this.divRemTo(a,b,d);return[b,d]}function Da(){}function Pa(a){return a}function Qa(a){return this.exp(a,new Da)}function Ca(a){this.r2=c();this.q3=c();b.ONE.dlShiftTo(2*a.t,this.r2);this.mu=this.r2.divide(a);
this.m=a}function Ra(a){var b=0>this.s?this.negate():this.clone();a=0>a.s?a.negate():a.clone();if(0>b.compareTo(a)){var c=b,b=a;a=c}var c=b.getLowestSetBit(),d=a.getLowestSetBit();if(0>d)return b;c<d&&(d=c);0<d&&(b.rShiftTo(d,b),a.rShiftTo(d,a));for(;0<b.signum();)0<(c=b.getLowestSetBit())&&b.rShiftTo(c,b),0<(c=a.getLowestSetBit())&&a.rShiftTo(c,a),0<=b.compareTo(a)?(b.subTo(a,b),b.rShiftTo(1,b)):(a.subTo(b,a),a.rShiftTo(1,a));0<d&&a.lShiftTo(d,a);return a}var u={};a.Numbers=u;var ka=function(a,b,
c){c=c||{};return function(d,e){if(c.isXSpecialCase&&c.isXSpecialCase(d))return c.onXSpecialCase(d,e);if(c.isYSpecialCase&&c.isYSpecialCase(e))return c.onYSpecialCase(d,e);if("number"===typeof d&&"number"===typeof e)return a(d,e);"number"===typeof d&&(d=La(d,e));"number"===typeof e&&(e=La(e,d));d.level<e.level&&(d=d.liftTo(e));e.level<d.level&&(e=e.liftTo(d));return b(d,e)}},na=function(a){var b=a.match(xb);return b?(a=b[1].match(/^([^.]*)(.*)$/),b=Number(b[2]),0===a[2].length?a[1]+Sa(b):b>=a[2].length-
1?a[1]+a[2].substring(1)+Sa(b-(a[2].length-1)):a[1]+a[2].substring(1,1+b)):a},Sa=function(a){var b=[];b.length=a;for(var c=0;c<a;c++)b[c]="0";return b.join("")},La=function(a,b){switch(b.level){case 0:return U(a);case 1:return new B(a,1);case 2:return new n(a);case 3:return new w(a,0);default:v("IMPOSSIBLE: cannot lift fixnum integer to "+b.toString(),a,b)}},v=function(a,b,c){u.onThrowRuntimeError(a,b,c)},xa=function(a){return"number"===typeof a||a instanceof B||a instanceof n||a instanceof w||a instanceof
b},s=function(a){return"number"===typeof a||xa(a)&&a.isRational()},x=function(a){return"number"===typeof a||xa(a)&&a.isReal()},H=function(a){return"number"===typeof a||xa(a)&&a.isExact()},K=function(a){return"number"===typeof a?!1:xa(a)&&a.isInexact()},M=function(a){return"number"===typeof a||xa(a)&&a.isInteger()},V=function(a){return"number"===typeof a||xa(a)&&a.isInteger()&&a.isExact()},ea=function(a){return"number"===typeof a?a:a.toFixnum()},ga=function(a){return"number"===typeof a?a:a.toExact()},
Ja=function(a){return"number"===typeof a?n.makeInstance(a):a.toInexact()},A=function(a,b){return"number"===typeof a&&"number"===typeof b&&ta(a+b)?U(a).add(U(b)):a instanceof n&&b instanceof n?a.add(b):ya(a,b)},ya=ka(function(a,b){var c=a+b;return ta(c)?U(a).add(U(b)):c},function(a,b){return a.add(b)},{isXSpecialCase:function(a){return V(a)&&O(a)},onXSpecialCase:function(a,b){return b},isYSpecialCase:function(a){return V(a)&&O(a)},onYSpecialCase:function(a,b){return a}}),X=ka(function(a,b){var c=a-
b;return ta(c)?U(a).subtract(U(b)):c},function(a,b){return a.subtract(b)},{isXSpecialCase:function(a){return V(a)&&O(a)},onXSpecialCase:function(a,b){return I(b)},isYSpecialCase:function(a){return V(a)&&O(a)},onYSpecialCase:function(a,b){return a}}),E=function(a,b){var c;return"number"===typeof a&&"number"===typeof b?(c=a*b,ta(c)?U(a).multiply(U(b)):c):a instanceof n&&b instanceof n?a.multiply(b):ha(a,b)},ha=ka(function(a,b){var c=a*b;return ta(c)?U(a).multiply(U(b)):c},function(a,b){return a.multiply(b)},
{isXSpecialCase:function(a){return V(a)&&(O(a)||Na(a)||gb(a))},onXSpecialCase:function(a,b){if(O(a))return 0;if(Na(a))return b;if(gb(a))return I(b)},isYSpecialCase:function(a){return V(a)&&(O(a)||Na(a)||gb(a))},onYSpecialCase:function(a,b){if(O(b))return 0;if(Na(b))return a;if(gb(b))return I(a)}}),G=ka(function(a,b){O(b)&&v("/: division by zero",a,b);var c=a/b;return ta(c)?U(a).divide(U(b)):Math.floor(c)!==c?B.makeInstance(a,b):c},function(a,b){return a.divide(b)},{isXSpecialCase:function(a){return P(a,
0)},onXSpecialCase:function(a,b){P(b,0)&&v("/: division by zero",a,b);return 0},isYSpecialCase:function(a){return P(a,0)},onYSpecialCase:function(a,b){v("/: division by zero",a,b)}}),y=ka(function(a,b){return a===b},function(a,b){return a.equals(b)}),P=function(a,b){if(a===b)return!0;if("number"===typeof a&&"number"===typeof b||a===Y||b===Y)return a===b;if(a instanceof w||b instanceof w)return P(oa(a),oa(b))&&P(Za(a),Za(b));var c=H(a),d=H(b);return(c&&d||!c&&!d)&&y(a,b)},za=ka(function(a,b){return a>=
b},function(a,b){(!x(a)||!x(b))&&v(">=: couldn't be applied to complex number",a,b);return a.greaterThanOrEqual(b)}),Ea=ka(function(a,b){return a<=b},function(a,b){(!x(a)||!x(b))&&v("<=: couldn't be applied to complex number",a,b);return a.lessThanOrEqual(b)}),Ka=ka(function(a,b){return a>b},function(a,b){(!x(a)||!x(b))&&v(">: couldn't be applied to complex number",a,b);return a.greaterThan(b)}),ia=ka(function(a,b){return a<b},function(a,b){(!x(a)||!x(b))&&v("<: couldn't be applied to complex number",
a,b);return a.lessThan(b)}),ob=function(){var a=ka(function(a,b){var c=Math.pow(a,b);return ta(c)?U(a).expt(U(b)):c},function(a,b){return y(b,0)?A(b,1):a.expt(b)});return function(b,c){return y(c,0)?A(c,1):x(c)&&ia(c,0)?a(G(1,b),I(c)):a(b,c)}}(),h=function(a){return P(a,0)?1:"number"===typeof a?n.makeInstance(Math.exp(a)):a.exp()},$a=function(a,b){M(a)||v("modulo: the first argument "+a+" is not an integer.",a,b);M(b)||v("modulo: the second argument "+b+" is not an integer.",a,b);var c;if("number"===
typeof a)return c=a%b,0>b?0>=c?c:c+b:0>c?c+b:c;c=yb(W(a),W(b));return ia(b,0)?Ea(c,0)?c:A(c,b):ia(c,0)?A(c,b):c},pa=function(a){return"number"===typeof a?a:a.numerator()},zb=function(a){return"number"===typeof a?1:a.denominator()},Z=function(a){return"number"===typeof a?0<=a?(a=Math.sqrt(a),Math.floor(a)===a?a:n.makeInstance(a)):w.makeInstance(0,Z(-a)):a.sqrt()},aa=function(a){return"number"===typeof a?Math.abs(a):a.abs()},W=function(a){return"number"===typeof a?a:a.floor()},Ab=function(a){return"number"===
typeof a?a:a.ceiling()},Bb=function(a){return"number"===typeof a?a:a.conjugate()},hb=function(a){return P(a,1)?0:"number"===typeof a?n.makeInstance(Math.log(a)):a.log()},Cb=function(a){return"number"===typeof a?0<a?0:n.pi:a.angle()},Db=function(a){return P(a,0)?0:"number"===typeof a?n.makeInstance(Math.tan(a)):a.tan()},pb=function(a){return P(a,0)?0:"number"===typeof a?n.makeInstance(Math.atan(a)):a.atan()},ua=function(a){return P(a,0)?1:"number"===typeof a?n.makeInstance(Math.cos(a)):a.cos()},ab=
function(a){return P(a,0)?0:"number"===typeof a?n.makeInstance(Math.sin(a)):a.sin()},qb=function(a){return P(a,1)?0:"number"===typeof a?n.makeInstance(Math.acos(a)):a.acos()},Eb=function(a){return P(a,0)?0:"number"===typeof a?n.makeInstance(Math.asin(a)):a.asin()},Za=function(a){return"number"===typeof a?0:a.imaginaryPart()},oa=function(a){return"number"===typeof a?a:a.realPart()},rb=function(a){return"number"===typeof a?a:a.round()},Ga=function(a){return E(a,a)},Fb=function(a){M(a)||v("integer-sqrt: the argument "+
a.toString()+" is not an integer.",a);return"number"===typeof a?0>a?w.makeInstance(0,Math.floor(Math.sqrt(-a))):Math.floor(Math.sqrt(a)):a.integerSqrt()},ib=function(a,b){M(a)||v("quotient: the first argument "+a.toString()+" is not an integer.",a);M(b)||v("quotient: the second argument "+b.toString()+" is not an integer.",b);return bb(a,b)},jb=function(a,b){M(a)||v("remainder: the first argument "+a.toString()+" is not an integer.",a);M(b)||v("remainder: the second argument "+b.toString()+" is not an integer.",
b);return Gb(a,b)},ta=function(a){return-9E15>a||9E15<a},I=function(a){return"number"===typeof a?-a:a.negate()},cb=function(a,b){for(var c=1;;){if(O(b))return c;y($a(b,2),0)?(a=E(a,a),b=G(b,2)):(c=E(c,a),b=X(b,1))}},da=function(a,b,c){c=c||{};return function(d,e){d instanceof B?d=pa(d):d instanceof w&&(d=oa(d));e instanceof B?e=pa(e):e instanceof w&&(e=oa(e));if("number"===typeof d&&"number"===typeof e){var f=a(d,e);if(!ta(f)||c.ignoreOverflow)return f}if(d instanceof n||e instanceof n)return c.doNotCoerseToFloating?
a(ea(d),ea(e)):n.makeInstance(a(ea(d),ea(e)));"number"===typeof d&&(d=U(d));"number"===typeof e&&(e=U(e));return b(d,e)}},sb=function(a,b,c){c=c||{};return function(d){d instanceof B?d=pa(d):d instanceof w&&(d=oa(d));if("number"===typeof d){var e=a(d);if(!ta(e)||c.ignoreOverflow)return e}if(d instanceof n)return a(ea(d));"number"===typeof d&&(d=U(d));return b(d)}},yb=da(function(a,b){return a%b},function(a,b){return p.call(a,b)}),db=da(function(a,b){for(var c;0!==b;)c=a,a=b,b=c%b;return a},function(a,
b){return Ra.call(a,b)}),O=sb(function(a){return 0===a},function(a){return D.call(a,b.ZERO)}),Na=sb(function(a){return 1===a},function(a){return D.call(a,b.ONE)}),gb=sb(function(a){return-1===a},function(a){return D.call(a,b.NEGATIVE_ONE)}),Hb=da(function(a,b){return a+b},function(a,b){return ma.call(a,b)}),Qb=da(function(a,b){return a-b},function(a,b){return ca.call(a,b)}),Q=da(function(a,b){return a*b},function(a,b){return va.call(a,b)}),bb=da(function(a,b){return(a-a%b)/b},function(a,b){return Xa.call(a,
b)}),Gb=da(function(a,b){return a%b},function(a,b){return Fa.call(a,b)}),fa=da(function(a,b){return a/b},function(a,b){return ea(a)/ea(b)},{ignoreOverflow:!0,doNotCoerseToFloating:!0}),tb=da(function(a,b){return a===b},function(a,b){return D.call(a,b)},{doNotCoerseToFloating:!0}),ub=da(function(a,b){return a>b},function(a,b){return 0<l.call(a,b)},{doNotCoerseToFloating:!0}),eb=da(function(a,b){return a<b},function(a,b){return 0>l.call(a,b)},{doNotCoerseToFloating:!0}),Ib=da(function(a,b){return a>=
b},function(a,b){return 0<=l.call(a,b)},{doNotCoerseToFloating:!0}),Rb=da(function(a,b){return a<=b},function(a,b){return 0>=l.call(a,b)},{doNotCoerseToFloating:!0}),B=function(a,b){this.n=a;this.d=b};B.prototype.toString=function(){return Na(this.d)?this.n.toString()+"":this.n.toString()+"/"+this.d.toString()};B.prototype.level=1;B.prototype.liftTo=function(a){return 2===a.level?new n(fa(this.n,this.d)):3===a.level?new w(this,0):v("invalid level of Number",this,a)};B.prototype.isFinite=function(){return!0};
B.prototype.equals=function(a){return a instanceof B&&tb(this.n,a.n)&&tb(this.d,a.d)};B.prototype.isInteger=function(){return Na(this.d)};B.prototype.isRational=function(){return!0};B.prototype.isReal=function(){return!0};B.prototype.add=function(a){return B.makeInstance(Hb(Q(this.n,a.d),Q(this.d,a.n)),Q(this.d,a.d))};B.prototype.subtract=function(a){return B.makeInstance(Qb(Q(this.n,a.d),Q(this.d,a.n)),Q(this.d,a.d))};B.prototype.negate=function(){return B.makeInstance(-this.n,this.d)};B.prototype.multiply=
function(a){return B.makeInstance(Q(this.n,a.n),Q(this.d,a.d))};B.prototype.divide=function(a){(O(this.d)||O(a.n))&&v("/: division by zero",this,a);return B.makeInstance(Q(this.n,a.d),Q(this.d,a.n))};B.prototype.toExact=function(){return this};B.prototype.toInexact=function(){return n.makeInstance(this.toFixnum())};B.prototype.isExact=function(){return!0};B.prototype.isInexact=function(){return!1};B.prototype.toFixnum=function(){return fa(this.n,this.d)};B.prototype.numerator=function(){return this.n};
B.prototype.denominator=function(){return this.d};B.prototype.greaterThan=function(a){return ub(Q(this.n,a.d),Q(this.d,a.n))};B.prototype.greaterThanOrEqual=function(a){return Ib(Q(this.n,a.d),Q(this.d,a.n))};B.prototype.lessThan=function(a){return eb(Q(this.n,a.d),Q(this.d,a.n))};B.prototype.lessThanOrEqual=function(a){return Rb(Q(this.n,a.d),Q(this.d,a.n))};B.prototype.integerSqrt=function(){var a=Z(this);return s(a)?ga(W(a)):x(a)?ga(W(a)):w.makeInstance(ga(W(oa(a))),ga(W(Za(a))))};B.prototype.sqrt=
function(){if(Ib(this.n,0)){var a=Z(this.n),b=Z(this.d);return y(W(a),a)&&y(W(b),b)?B.makeInstance(a,b):n.makeInstance(fa(a,b))}a=Z(I(this.n));b=Z(this.d);return y(W(a),a)&&y(W(b),b)?w.makeInstance(0,B.makeInstance(a,b)):w.makeInstance(0,n.makeInstance(fa(a,b)))};B.prototype.abs=function(){return B.makeInstance(aa(this.n),this.d)};B.prototype.floor=function(){var a=bb(this.n,this.d);return eb(this.n,0)?X(a,1):a};B.prototype.ceiling=function(){var a=bb(this.n,this.d);return eb(this.n,0)?a:A(a,1)};
B.prototype.conjugate=function(){return this};B.prototype.magnitude=B.prototype.abs;B.prototype.log=function(){return n.makeInstance(Math.log(this.n/this.d))};B.prototype.angle=function(){return O(this.n)?0:ub(this.n,0)?0:n.pi};B.prototype.tan=function(){return n.makeInstance(Math.tan(fa(this.n,this.d)))};B.prototype.atan=function(){return n.makeInstance(Math.atan(fa(this.n,this.d)))};B.prototype.cos=function(){return n.makeInstance(Math.cos(fa(this.n,this.d)))};B.prototype.sin=function(){return n.makeInstance(Math.sin(fa(this.n,
this.d)))};B.prototype.expt=function(a){return V(a)&&za(a,0)?cb(this,a):n.makeInstance(Math.pow(fa(this.n,this.d),fa(a.n,a.d)))};B.prototype.exp=function(){return n.makeInstance(Math.exp(fa(this.n,this.d)))};B.prototype.acos=function(){return n.makeInstance(Math.acos(fa(this.n,this.d)))};B.prototype.asin=function(){return n.makeInstance(Math.asin(fa(this.n,this.d)))};B.prototype.imaginaryPart=function(){return 0};B.prototype.realPart=function(){return this};B.prototype.round=function(){if(y(this.d,
2)){var a=fa(this.n,this.d),b=Math.floor(a),a=Math.ceil(a);return O(b%2)?b:a}return Math.round(this.n/this.d)};B.makeInstance=function(a,b){void 0===a&&v("n undefined",a,b);void 0===b&&(b=1);eb(b,0)&&(a=I(a),b=I(b));var c=db(aa(a),aa(b));a=bb(a,c);b=bb(b,c);return Na(b)||O(a)?a:new B(a,b)};var n=function(a){this.n=a},Ta=new n(Number.NaN),Sb=new n(Number.POSITIVE_INFINITY),Jb=new n(Number.NEGATIVE_INFINITY),qa=new n(Number.POSITIVE_INFINITY),kb=new n(Number.NEGATIVE_INFINITY),Y=new n(-0),Ha=new n(0);
n.pi=new n(Math.PI);n.e=new n(Math.E);n.nan=Ta;n.inf=Sb;n.neginf=Jb;n.makeInstance=function(a){return isNaN(a)?n.nan:a===Number.POSITIVE_INFINITY?n.inf:a===Number.NEGATIVE_INFINITY?n.neginf:0===a?-Infinity===1/a?Y:Ha:new n(a)};n.prototype.isExact=function(){return!1};n.prototype.isInexact=function(){return!0};n.prototype.isFinite=function(){return isFinite(this.n)||this===qa||this===kb};n.prototype.toExact=function(){(!isFinite(this.n)||isNaN(this.n))&&v("toExact: no exact representation for "+this,
this);var a=this.n.toString().match(/^(.*)\.(.*)$/);return a?(parseInt(a[1]),parseInt(a[2]),a=Math.pow(10,a[2].length),B.makeInstance(Math.round(this.n*a),a)):this.n};n.prototype.toInexact=function(){return this};n.prototype.isInexact=function(){return!0};n.prototype.level=2;n.prototype.liftTo=function(a){return 3===a.level?new w(this,0):v("invalid level of Number",this,a)};n.prototype.toString=function(){if(isNaN(this.n))return"+nan.0";if(this.n===Number.POSITIVE_INFINITY)return"+inf.0";if(this.n===
Number.NEGATIVE_INFINITY)return"-inf.0";if(this===Y)return"-0.0";var a=this.n.toString();return a.match("\\.")?a:a+".0"};n.prototype.equals=function(a,b){return a instanceof n&&this.n===a.n};n.prototype.isRational=function(){return this.isFinite()};n.prototype.isInteger=function(){return this.isFinite()&&this.n===Math.floor(this.n)};n.prototype.isReal=function(){return!0};var Aa=function(a){return ia(a,0)?-1:Ka(a,0)?1:a===Y?-1:0};n.prototype.add=function(a){return this.isFinite()&&a.isFinite()?n.makeInstance(this.n+
a.n):isNaN(this.n)||isNaN(a.n)?Ta:this.isFinite()&&!a.isFinite()?a:!this.isFinite()&&a.isFinite()?this:1===Aa(this)*Aa(a)?this:Ta};n.prototype.subtract=function(a){return this.isFinite()&&a.isFinite()?n.makeInstance(this.n-a.n):isNaN(this.n)||isNaN(a.n)?Ta:!this.isFinite()&&!a.isFinite()?Aa(this)===Aa(a)?Ta:this:this.isFinite()?E(a,-1):this};n.prototype.negate=function(){return n.makeInstance(-this.n)};n.prototype.multiply=function(a){return n.makeInstance(this.n*a.n)};n.prototype.divide=function(a){return n.makeInstance(this.n/
a.n)};n.prototype.toFixnum=function(){return this.n};n.prototype.numerator=function(){var a=this.n.toString().match(/^(.*)\.(.*)$/);if(a){var b=parseInt(a[2]),a=Math.pow(10,a[2].length),b=db(a,b);return n.makeInstance(Math.round(this.n*(a/b)))}return this};n.prototype.denominator=function(){var a=this.n.toString().match(/^(.*)\.(.*)$/);if(a){var b=parseInt(a[2]),a=Math.pow(10,a[2].length),b=db(a,b);return n.makeInstance(Math.round(a/b))}return n.makeInstance(1)};n.prototype.floor=function(){return n.makeInstance(Math.floor(this.n))};
n.prototype.ceiling=function(){return n.makeInstance(Math.ceil(this.n))};n.prototype.greaterThan=function(a){return this.n>a.n};n.prototype.greaterThanOrEqual=function(a){return this.n>=a.n};n.prototype.lessThan=function(a){return this.n<a.n};n.prototype.lessThanOrEqual=function(a){return this.n<=a.n};n.prototype.integerSqrt=function(){if(this===Y)return this;if(M(this))return 0<=this.n?n.makeInstance(Math.floor(Math.sqrt(this.n))):w.makeInstance(Ha,n.makeInstance(Math.floor(Math.sqrt(-this.n))));
v("integerSqrt: can only be applied to an integer",this)};n.prototype.sqrt=function(){return 0>this.n?w.makeInstance(0,n.makeInstance(Math.sqrt(-this.n))):n.makeInstance(Math.sqrt(this.n))};n.prototype.abs=function(){return n.makeInstance(Math.abs(this.n))};n.prototype.log=function(){return 0>this.n?(new w(this,0)).log():n.makeInstance(Math.log(this.n))};n.prototype.angle=function(){return 0===this.n?0:0<this.n?0:n.pi};n.prototype.tan=function(){return n.makeInstance(Math.tan(this.n))};n.prototype.atan=
function(){return n.makeInstance(Math.atan(this.n))};n.prototype.cos=function(){return n.makeInstance(Math.cos(this.n))};n.prototype.sin=function(){return n.makeInstance(Math.sin(this.n))};n.prototype.expt=function(a){return 1===this.n?(a.isFinite()||isNaN(a.n),this):n.makeInstance(Math.pow(this.n,a.n))};n.prototype.exp=function(){return n.makeInstance(Math.exp(this.n))};n.prototype.acos=function(){return n.makeInstance(Math.acos(this.n))};n.prototype.asin=function(){return n.makeInstance(Math.asin(this.n))};
n.prototype.imaginaryPart=function(){return 0};n.prototype.realPart=function(){return this};n.prototype.round=function(){return isFinite(this.n)?this===Y?this:0.5===Math.abs(Math.floor(this.n)-this.n)?0===Math.floor(this.n)%2?n.makeInstance(Math.floor(this.n)):n.makeInstance(Math.ceil(this.n)):n.makeInstance(Math.round(this.n)):this};n.prototype.conjugate=function(){return this};n.prototype.magnitude=n.prototype.abs;var w=function(a,b){this.r=a;this.i=b};w.makeInstance=function(a,b){void 0===b&&(b=
0);if(H(b)&&M(b)&&O(b))return a;if(K(a)||K(b))a=Ja(a),b=Ja(b);return new w(a,b)};w.prototype.toString=function(){var a=this.r.toString(),b=this.i.toString();return"-"===b[0]||"+"===b[0]?a+b+"i":a+"+"+b+"i"};w.prototype.isFinite=function(){return("number"===typeof this.r?isFinite(this.r):this.r.isFinite())&&("number"===typeof this.i?isFinite(this.i):this.i.isFinite())};w.prototype.isRational=function(){return s(this.r)&&P(this.i,0)};w.prototype.isInteger=function(){return M(this.r)&&P(this.i,0)};w.prototype.toExact=
function(){return w.makeInstance(ga(this.r),ga(this.i))};w.prototype.toInexact=function(){return w.makeInstance(Ja(this.r),Ja(this.i))};w.prototype.isExact=function(){return H(this.r)&&H(this.i)};w.prototype.isInexact=function(){return K(this.r)||K(this.i)};w.prototype.level=3;w.prototype.liftTo=function(a){v("Don't know how to lift Complex number",this,a)};w.prototype.equals=function(a){return a instanceof w&&y(this.r,a.r)&&y(this.i,a.i)};w.prototype.greaterThan=function(a){(!this.isReal()||!a.isReal())&&
v(">: expects argument of type real number",this,a);return Ka(this.r,a.r)};w.prototype.greaterThanOrEqual=function(a){(!this.isReal()||!a.isReal())&&v(">=: expects argument of type real number",this,a);return za(this.r,a.r)};w.prototype.lessThan=function(a){(!this.isReal()||!a.isReal())&&v("<: expects argument of type real number",this,a);return ia(this.r,a.r)};w.prototype.lessThanOrEqual=function(a){(!this.isReal()||!a.isReal())&&v("<=: expects argument of type real number",this,a);return Ea(this.r,
a.r)};w.prototype.abs=function(){y(this.i,0).valueOf()||v("abs: expects argument of type real number",this);return aa(this.r)};w.prototype.toFixnum=function(){y(this.i,0).valueOf()||v("toFixnum: expects argument of type real number",this);return ea(this.r)};w.prototype.numerator=function(){this.isReal()||v("numerator: can only be applied to real number",this);return pa(this.n)};w.prototype.denominator=function(){this.isReal()||v("floor: can only be applied to real number",this);return zb(this.n)};
w.prototype.add=function(a){return w.makeInstance(A(this.r,a.r),A(this.i,a.i))};w.prototype.subtract=function(a){return w.makeInstance(X(this.r,a.r),X(this.i,a.i))};w.prototype.negate=function(){return w.makeInstance(I(this.r),I(this.i))};w.prototype.multiply=function(a){if(a.isReal())return w.makeInstance(E(this.r,a.r),E(this.i,a.r));var b=X(E(this.r,a.r),E(this.i,a.i));a=A(E(this.r,a.i),E(this.i,a.r));return w.makeInstance(b,a)};w.prototype.divide=function(a){var b,c,d,e,f;if(a.isReal())return w.makeInstance(G(this.r,
a.r),G(this.i,a.r));if(this.isInexact()||a.isInexact())return b=this.r,c=this.i,d=a.r,e=a.i,Ea(aa(e),aa(d))?(f=G(e,d),a=G(A(b,E(c,f)),A(d,E(e,f))),b=G(X(c,E(b,f)),A(d,E(e,f)))):(f=G(d,e),a=G(A(E(b,f),c),A(E(d,f),e)),b=G(X(E(c,f),b),A(E(d,f),e))),w.makeInstance(a,b);c=Bb(a);b=E(this,c);c=oa(E(a,c));return w.makeInstance(G(oa(b),c),G(Za(b),c))};w.prototype.conjugate=function(){return w.makeInstance(this.r,X(0,this.i))};w.prototype.magnitude=function(){var a=A(E(this.r,this.r),E(this.i,this.i));return Z(a)};
w.prototype.isReal=function(){return P(this.i,0)};w.prototype.integerSqrt=function(){if(M(this))return Fb(this.r);v("integerSqrt: can only be applied to an integer",this)};w.prototype.sqrt=function(){if(this.isReal())return Z(this.r);var a=A(this.magnitude(),this.r),b=Z(G(a,2)),a=G(this.i,Z(E(a,2)));return w.makeInstance(b,a)};w.prototype.log=function(){var a=this.magnitude(),b=this.angle();return A(hb(a),E(b,Ba))};w.prototype.angle=function(){if(this.isReal())return Cb(this.r);if(y(0,this.r)){var a=
G(n.pi,2);return Ka(this.i,0)?a:I(a)}a=pb(G(aa(this.i),aa(this.r)));return Ka(this.r,0)?Ka(this.i,0)?a:I(a):Ka(this.i,0)?X(n.pi,a):X(a,n.pi)};var Ba=w.makeInstance(0,1),Kb=w.makeInstance(0,-1);w.prototype.tan=function(){return G(this.sin(),this.cos())};w.prototype.atan=function(){return y(this,Ba)||y(this,Kb)?Jb:E(Ba,E(n.makeInstance(0.5),hb(G(A(Ba,this),A(Ba,X(0,this))))))};w.prototype.cos=function(){if(this.isReal())return ua(this.r);var a=E(this,Ba),b=I(a),a=A(h(a),h(b));return G(a,2)};w.prototype.sin=
function(){if(this.isReal())return ab(this.r);var a=E(this,Ba),b=I(a),c=w.makeInstance(0,2),a=X(h(a),h(b));return G(a,c)};w.prototype.expt=function(a){if(V(a)&&za(a,0))return cb(this,a);a=E(a,this.log());return h(a)};w.prototype.exp=function(){var a=h(this.r),b=ua(this.i),c=ab(this.i);return E(a,A(b,E(c,Ba)))};w.prototype.acos=function(){if(this.isReal())return qb(this.r);var a=G(n.pi,2),b=E(this,Ba),c=Z(X(1,Ga(this))),b=hb(A(b,c)),b=E(b,Ba);return A(a,b)};w.prototype.asin=function(){if(this.isReal())return Eb(this.r);
var a=X(1,Ga(this)),a=Z(a);return E(2,pb(G(this,A(1,a))))};w.prototype.ceiling=function(){this.isReal()||v("ceiling: can only be applied to real number",this);return Ab(this.r)};w.prototype.floor=function(){this.isReal()||v("floor: can only be applied to real number",this);return W(this.r)};w.prototype.imaginaryPart=function(){return this.i};w.prototype.realPart=function(){return this.r};w.prototype.round=function(){this.isReal()||v("round: can only be applied to real number",this);return rb(this.r)};
var Tb=/^([+-]?\d+)\/(\d+)$/,Lb=/^([+-]?[\d\w/\.]*)([+-])([\d\w/\.]*)i$/,Ub=/^[+-]?\d+$/,lb=/^([+-]?\d*)\.(\d*)$/,xb=/^([+-]?\d*\.?\d*)[Ee](\+?\d+)$/,Ua=function(a){var b=a.match(Tb);return b?B.makeInstance(Ua(b[1]),Ua(b[2])):(b=a.match(Lb))?w.makeInstance(Ua(b[1]||"0"),Ua(b[2]+(b[3]||"1"))):"+nan.0"===a||"-nan.0"===a?n.nan:"+inf.0"===a?n.inf:"-inf.0"===a?n.neginf:"-0.0"===a?Y:a.match(lb)||a.match(xb)?n.makeInstance(Number(a)):a.match(Ub)?(b=Number(a),ta(b)?U(a):b):!1},la;"undefined"!==typeof navigator&&
"Microsoft Internet Explorer"==navigator.appName?(b.prototype.am=e,la=30):"undefined"!==typeof navigator&&"Netscape"!=navigator.appName?(b.prototype.am=d,la=26):(b.prototype.am=f,la=28);b.prototype.DB=la;b.prototype.DM=(1<<la)-1;b.prototype.DV=1<<la;b.prototype.FV=Math.pow(2,52);b.prototype.F1=52-la;b.prototype.F2=2*la-52;var Wa=[],wa,ra;wa=48;for(ra=0;9>=ra;++ra)Wa[wa++]=ra;wa=97;for(ra=10;36>ra;++ra)Wa[wa++]=ra;wa=65;for(ra=10;36>ra;++ra)Wa[wa++]=ra;q.prototype.convert=function(a){return 0>a.s||
0<=a.compareTo(this.m)?a.mod(this.m):a};q.prototype.revert=function(a){return a};q.prototype.reduce=function(a){a.divRemTo(this.m,null,a)};q.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c);this.reduce(c)};q.prototype.sqrTo=function(a,b){a.squareTo(b);this.reduce(b)};t.prototype.convert=function(a){var d=c();a.abs().dlShiftTo(this.m.t,d);d.divRemTo(this.m,null,d);0>a.s&&0<d.compareTo(b.ZERO)&&this.m.subTo(d,d);return d};t.prototype.revert=function(a){var b=c();a.copyTo(b);this.reduce(b);return b};
t.prototype.reduce=function(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=a[b]&32767,d=c*this.mpl+((c*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM,c=b+this.m.t;for(a[c]+=this.m.am(0,d,a,b,0,this.m.t);a[c]>=a.DV;)a[c]-=a.DV,a[++c]++}a.clamp();a.drShiftTo(this.m.t,a);0<=a.compareTo(this.m)&&a.subTo(this.m,a)};t.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c);this.reduce(c)};t.prototype.sqrTo=function(a,b){a.squareTo(b);this.reduce(b)};b.prototype.copyTo=function(a){for(var b=
this.t-1;0<=b;--b)a[b]=this[b];a.t=this.t;a.s=this.s};b.prototype.fromInt=function(a){this.t=1;this.s=0>a?-1:0;0<a?this[0]=a:-1>a?this[0]=a+DV:this.t=0};b.prototype.fromString=function(a,c){var d;if(16==c)d=4;else if(8==c)d=3;else if(256==c)d=8;else if(2==c)d=1;else if(32==c)d=5;else if(4==c)d=2;else{this.fromRadix(a,c);return}this.s=this.t=0;for(var e=a.length,f=!1,h=0;0<=--e;){var k=8==d?a[e]&255:g(a,e);0>k?"-"==a.charAt(e)&&(f=!0):(f=!1,0==h?this[this.t++]=k:h+d>this.DB?(this[this.t-1]|=(k&(1<<
this.DB-h)-1)<<h,this[this.t++]=k>>this.DB-h):this[this.t-1]|=k<<h,h+=d,h>=this.DB&&(h-=this.DB))}8==d&&0!=(a[0]&128)&&(this.s=-1,0<h&&(this[this.t-1]|=(1<<this.DB-h)-1<<h));this.clamp();f&&b.ZERO.subTo(this,this)};b.prototype.clamp=function(){for(var a=this.s&this.DM;0<this.t&&this[this.t-1]==a;)--this.t};b.prototype.dlShiftTo=function(a,b){var c;for(c=this.t-1;0<=c;--c)b[c+a]=this[c];for(c=a-1;0<=c;--c)b[c]=0;b.t=this.t+a;b.s=this.s};b.prototype.drShiftTo=function(a,b){for(var c=a;c<this.t;++c)b[c-
a]=this[c];b.t=Math.max(this.t-a,0);b.s=this.s};b.prototype.lShiftTo=function(a,b){var c=a%this.DB,d=this.DB-c,e=(1<<d)-1,f=Math.floor(a/this.DB),h=this.s<<c&this.DM,g;for(g=this.t-1;0<=g;--g)b[g+f+1]=this[g]>>d|h,h=(this[g]&e)<<c;for(g=f-1;0<=g;--g)b[g]=0;b[f]=h;b.t=this.t+f+1;b.s=this.s;b.clamp()};b.prototype.rShiftTo=function(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)b.t=0;else{var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b[0]=this[c]>>d;for(var h=c+1;h<this.t;++h)b[h-c-1]|=(this[h]&f)<<
e,b[h-c]=this[h]>>d;0<d&&(b[this.t-c-1]|=(this.s&f)<<e);b.t=this.t-c;b.clamp()}};b.prototype.subTo=function(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this[c]-a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a[c],b[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=0>d?-1:0;-1>d?b[c++]=this.DV+d:0<d&&(b[c++]=d);b.t=c;b.clamp()};b.prototype.multiplyTo=function(a,c){var d=this.abs(),e=a.abs(),f=d.t;for(c.t=
f+e.t;0<=--f;)c[f]=0;for(f=0;f<e.t;++f)c[f+d.t]=d.am(0,e[f],c,f,0,d.t);c.s=0;c.clamp();this.s!=a.s&&b.ZERO.subTo(c,c)};b.prototype.squareTo=function(a){for(var b=this.abs(),c=a.t=2*b.t;0<=--c;)a[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b[c],a,2*c,0,1);if((a[c+b.t]+=b.am(c+1,2*b[c],a,2*c+1,d,b.t-c-1))>=b.DV)a[c+b.t]-=b.DV,a[c+b.t+1]=1}0<a.t&&(a[a.t-1]+=b.am(c,b[c],a,2*c,0,1));a.s=0;a.clamp()};b.prototype.divRemTo=function(a,d,e){var f=a.abs();if(!(0>=f.t)){var h=this.abs();if(h.t<f.t)null!=d&&d.fromInt(0),
null!=e&&this.copyTo(e);else{null==e&&(e=c());var g=c(),k=this.s;a=a.s;var l=this.DB-m(f[f.t-1]);0<l?(f.lShiftTo(l,g),h.lShiftTo(l,e)):(f.copyTo(g),h.copyTo(e));f=g.t;h=g[f-1];if(0!=h){var x=h*(1<<this.F1)+(1<f?g[f-2]>>this.F2:0),s=this.FV/x,x=(1<<this.F1)/x,n=1<<this.F2,p=e.t,q=p-f,H=null==d?c():d;g.dlShiftTo(q,H);0<=e.compareTo(H)&&(e[e.t++]=1,e.subTo(H,e));b.ONE.dlShiftTo(f,H);for(H.subTo(g,g);g.t<f;)g[g.t++]=0;for(;0<=--q;){var K=e[--p]==h?this.DM:Math.floor(e[p]*s+(e[p-1]+n)*x);if((e[p]+=g.am(0,
K,e,q,0,f))<K){g.dlShiftTo(q,H);for(e.subTo(H,e);e[p]<--K;)e.subTo(H,e)}}null!=d&&(e.drShiftTo(f,d),k!=a&&b.ZERO.subTo(d,d));e.t=f;e.clamp();0<l&&e.rShiftTo(l,e);0>k&&b.ZERO.subTo(e,e)}}}};b.prototype.invDigit=function(){if(1>this.t)return 0;var a=this[0];if(0==(a&1))return 0;var b=a&3,b=b*(2-(a&15)*b)&15,b=b*(2-(a&255)*b)&255,b=b*(2-((a&65535)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV;return 0<b?this.DV-b:-b};b.prototype.isEven=function(){return 0==(0<this.t?this[0]&1:this.s)};b.prototype.exp=
function(a,d){if(4294967295<a||1>a)return b.ONE;var e=c(),f=c(),h=d.convert(this),g=m(a)-1;for(h.copyTo(e);0<=--g;)if(d.sqrTo(e,f),0<(a&1<<g))d.mulTo(f,h,e);else var k=e,e=f,f=k;return d.revert(e)};b.prototype.toString=function(a){if(0>this.s)return"-"+this.negate().toString(a);if(16==a)a=4;else if(8==a)a=3;else if(2==a)a=1;else if(32==a)a=5;else if(4==a)a=2;else return this.toRadix(a);var b=(1<<a)-1,c,d=!1,e=[],f=this.t,h=this.DB-f*this.DB%a;if(0<f--){if(h<this.DB&&0<(c=this[f]>>h))d=!0,e.push("0123456789abcdefghijklmnopqrstuvwxyz".charAt(c));
for(;0<=f;)h<a?(c=(this[f]&(1<<h)-1)<<a-h,c|=this[--f]>>(h+=this.DB-a)):(c=this[f]>>(h-=a)&b,0>=h&&(h+=this.DB,--f)),0<c&&(d=!0),d&&e.push("0123456789abcdefghijklmnopqrstuvwxyz".charAt(c))}return d?e.join(""):"0"};b.prototype.negate=function(){var a=c();b.ZERO.subTo(this,a);return a};b.prototype.abs=function(){return 0>this.s?this.negate():this};b.prototype.compareTo=l;b.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+m(this[this.t-1]^this.s&this.DM)};b.prototype.mod=p;b.prototype.modPowInt=
function(a,b){var c;c=256>a||b.isEven()?new q(b):new t(b);return this.exp(a,c)};b.ZERO=k(0);b.ONE=k(1);Da.prototype.convert=Pa;Da.prototype.revert=Pa;Da.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c)};Da.prototype.sqrTo=function(a,b){a.squareTo(b)};Ca.prototype.convert=function(a){if(0>a.s||a.t>2*this.m.t)return a.mod(this.m);if(0>a.compareTo(this.m))return a;var b=c();a.copyTo(b);this.reduce(b);return b};Ca.prototype.revert=function(a){return a};Ca.prototype.reduce=function(a){a.drShiftTo(this.m.t-
1,this.r2);a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp());this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>a.compareTo(this.r2);)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);0<=a.compareTo(this.m);)a.subTo(this.m,a)};Ca.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c);this.reduce(c)};Ca.prototype.sqrTo=function(a,b){a.squareTo(b);this.reduce(b)};var sa=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,
109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Wb=67108864/sa[sa.length-1];b.prototype.chunkSize=function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))};b.prototype.toRadix=function(a){null==a&&(a=10);if(0==this.signum()||2>a||36<a)return"0";var b=this.chunkSize(a),
b=Math.pow(a,b),d=k(b),e=c(),f=c(),h="";for(this.divRemTo(d,e,f);0<e.signum();)h=(b+f.intValue()).toString(a).substr(1)+h,e.divRemTo(d,e,f);return f.intValue().toString(a)+h};b.prototype.fromRadix=function(a,c){this.fromInt(0);null==c&&(c=10);for(var d=this.chunkSize(c),e=Math.pow(c,d),f=!1,h=0,k=0,l=0;l<a.length;++l){var m=g(a,l);0>m?"-"==a.charAt(l)&&0==this.signum()&&(f=!0):(k=c*k+m,++h>=d&&(this.dMultiply(e),this.dAddOffset(k,0),k=h=0))}0<h&&(this.dMultiply(Math.pow(c,h)),this.dAddOffset(k,0));
f&&b.ZERO.subTo(this,this)};b.prototype.fromNumber=function(a,c,d){if("number"==typeof c)if(2>a)this.fromInt(1);else{this.fromNumber(a,d);this.testBit(a-1)||this.bitwiseTo(b.ONE.shiftLeft(a-1),T,this);for(this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(c);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(b.ONE.shiftLeft(a-1),this)}else{d=[];var e=a&7;d.length=(a>>3)+1;c.nextBytes(d);d[0]=0<e?d[0]&(1<<e)-1:0;this.fromString(d,256)}};b.prototype.bitwiseTo=function(a,b,c){var d,e,f=Math.min(a.t,
this.t);for(d=0;d<f;++d)c[d]=b(this[d],a[d]);if(a.t<this.t){e=a.s&this.DM;for(d=f;d<this.t;++d)c[d]=b(this[d],e);c.t=this.t}else{e=this.s&this.DM;for(d=f;d<a.t;++d)c[d]=b(e,a[d]);c.t=a.t}c.s=b(this.s,a.s);c.clamp()};b.prototype.changeBit=function(a,c){var d=b.ONE.shiftLeft(a);this.bitwiseTo(d,c,d);return d};b.prototype.addTo=function(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this[c]+a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d+=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;
d+=this.s}else{for(d+=this.s;c<a.t;)d+=a[c],b[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=0>d?-1:0;0<d?b[c++]=d:-1>d&&(b[c++]=this.DV+d);b.t=c;b.clamp()};b.prototype.dMultiply=function(a){this[this.t]=this.am(0,a-1,this,0,0,this.t);++this.t;this.clamp()};b.prototype.dAddOffset=function(a,b){if(0!=a){for(;this.t<=b;)this[this.t++]=0;for(this[b]+=a;this[b]>=this.DV;)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]}};b.prototype.multiplyLowerTo=function(a,b,c){var d=Math.min(this.t+a.t,b);c.s=0;
for(c.t=d;0<d;)c[--d]=0;var e;for(e=c.t-this.t;d<e;++d)c[d+this.t]=this.am(0,a[d],c,d,0,this.t);for(e=Math.min(a.t,b);d<e;++d)this.am(0,a[d],c,d,0,b-d);c.clamp()};b.prototype.multiplyUpperTo=function(a,b,c){--b;var d=c.t=this.t+a.t-b;for(c.s=0;0<=--d;)c[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c[this.t+d-b]=this.am(b-d,a[d],c,0,0,this.t+d-b);c.clamp();c.drShiftTo(1,c)};b.prototype.modInt=function(a){if(0>=a)return 0;var b=this.DV%a,c=0>this.s?a-1:0;if(0<this.t)if(0==b)c=this[0]%a;else for(var d=
this.t-1;0<=d;--d)c=(b*c+this[d])%a;return c};b.prototype.millerRabin=function(a){var d=this.subtract(b.ONE),e=d.getLowestSetBit();if(0>=e)return!1;var f=d.shiftRight(e);a=a+1>>1;a>sa.length&&(a=sa.length);for(var h=c(),g=0;g<a;++g){h.fromInt(sa[g]);var k=h.modPow(f,this);if(0!=k.compareTo(b.ONE)&&0!=k.compareTo(d)){for(var l=1;l++<e&&0!=k.compareTo(d);)if(k=k.modPowInt(2,this),0==k.compareTo(b.ONE))return!1;if(0!=k.compareTo(d))return!1}}return!0};b.prototype.clone=function(){var a=c();this.copyTo(a);
return a};b.prototype.intValue=function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]};b.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24};b.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16};b.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1};b.prototype.toByteArray=function(){var a=this.t,
b=[];b[0]=this.s;var c=this.DB-a*this.DB%8,d,e=0;if(0<a--){if(c<this.DB&&(d=this[a]>>c)!=(this.s&this.DM)>>c)b[e++]=d|this.s<<this.DB-c;for(;0<=a;)if(8>c?(d=(this[a]&(1<<c)-1)<<8-c,d|=this[--a]>>(c+=this.DB-8)):(d=this[a]>>(c-=8)&255,0>=c&&(c+=this.DB,--a)),0!=(d&128)&&(d|=-256),0==e&&(this.s&128)!=(d&128)&&++e,0<e||d!=this.s)b[e++]=d}return b};b.prototype.equals=D;b.prototype.min=function(a){return 0>this.compareTo(a)?this:a};b.prototype.max=function(a){return 0<this.compareTo(a)?this:a};b.prototype.and=
function(a){var b=c();this.bitwiseTo(a,C,b);return b};b.prototype.or=function(a){var b=c();this.bitwiseTo(a,T,b);return b};b.prototype.xor=function(a){var b=c();this.bitwiseTo(a,ba,b);return b};b.prototype.andNot=function(a){var b=c();this.bitwiseTo(a,J,b);return b};b.prototype.not=function(){for(var a=c(),b=0;b<this.t;++b)a[b]=this.DM&~this[b];a.t=this.t;a.s=~this.s;return a};b.prototype.shiftLeft=function(a){var b=c();0>a?this.rShiftTo(-a,b):this.lShiftTo(a,b);return b};b.prototype.shiftRight=function(a){var b=
c();0>a?this.lShiftTo(-a,b):this.rShiftTo(a,b);return b};b.prototype.getLowestSetBit=function(){for(var a=0;a<this.t;++a)if(0!=this[a]){var b=a*this.DB;a=this[a];if(0==a)a=-1;else{var c=0;0==(a&65535)&&(a>>=16,c+=16);0==(a&255)&&(a>>=8,c+=8);0==(a&15)&&(a>>=4,c+=4);0==(a&3)&&(a>>=2,c+=2);0==(a&1)&&++c;a=c}return b+a}return 0>this.s?this.t*this.DB:-1};b.prototype.bitCount=function(){for(var a=0,b=this.s&this.DM,c=0;c<this.t;++c){for(var d=this[c]^b,e=0;0!=d;)d&=d-1,++e;a+=e}return a};b.prototype.testBit=
function(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:0!=(this[b]&1<<a%this.DB)};b.prototype.setBit=function(a){return this.changeBit(a,T)};b.prototype.clearBit=function(a){return this.changeBit(a,J)};b.prototype.flipBit=function(a){return this.changeBit(a,ba)};b.prototype.add=ma;b.prototype.subtract=ca;b.prototype.multiply=va;b.prototype.divide=Xa;b.prototype.remainder=Fa;b.prototype.divideAndRemainder=Ya;b.prototype.modPow=function(a,b){var d=a.bitLength(),e,f=k(1),h;if(0>=d)return f;
e=18>d?1:48>d?3:144>d?4:768>d?5:6;h=8>d?new q(b):b.isEven()?new Ca(b):new t(b);var g=[],l=3,x=e-1,s=(1<<e)-1;g[1]=h.convert(this);if(1<e){d=c();for(h.sqrTo(g[1],d);l<=s;)g[l]=c(),h.mulTo(d,g[l-2],g[l]),l+=2}for(var n=a.t-1,p,H=!0,K=c(),d=m(a[n])-1;0<=n;){d>=x?p=a[n]>>d-x&s:(p=(a[n]&(1<<d+1)-1)<<x-d,0<n&&(p|=a[n-1]>>this.DB+d-x));for(l=e;0==(p&1);)p>>=1,--l;if(0>(d-=l))d+=this.DB,--n;if(H)g[p].copyTo(f),H=!1;else{for(;1<l;)h.sqrTo(f,K),h.sqrTo(K,f),l-=2;0<l?h.sqrTo(f,K):(l=f,f=K,K=l);h.mulTo(K,g[p],
f)}for(;0<=n&&0==(a[n]&1<<d);)h.sqrTo(f,K),l=f,f=K,K=l,0>--d&&(d=this.DB-1,--n)}return h.revert(f)};b.prototype.modInverse=function(a){var c=a.isEven();if(this.isEven()&&c||0==a.signum())return b.ZERO;for(var d=a.clone(),e=this.clone(),f=k(1),h=k(0),g=k(0),l=k(1);0!=d.signum();){for(;d.isEven();){d.rShiftTo(1,d);if(c){if(!f.isEven()||!h.isEven())f.addTo(this,f),h.subTo(a,h);f.rShiftTo(1,f)}else h.isEven()||h.subTo(a,h);h.rShiftTo(1,h)}for(;e.isEven();){e.rShiftTo(1,e);if(c){if(!g.isEven()||!l.isEven())g.addTo(this,
g),l.subTo(a,l);g.rShiftTo(1,g)}else l.isEven()||l.subTo(a,l);l.rShiftTo(1,l)}0<=d.compareTo(e)?(d.subTo(e,d),c&&f.subTo(g,f),h.subTo(l,h)):(e.subTo(d,e),c&&g.subTo(f,g),l.subTo(h,l))}if(0!=e.compareTo(b.ONE))return b.ZERO;if(0<=l.compareTo(a))return l.subtract(a);if(0>l.signum())l.addTo(a,l);else return l;return 0>l.signum()?l.add(a):l};b.prototype.pow=Qa;b.prototype.gcd=Ra;b.prototype.isProbablePrime=function(a){var b,c=this.abs();if(1==c.t&&c[0]<=sa[sa.length-1]){for(b=0;b<sa.length;++b)if(c[0]==
sa[b])return!0;return!1}if(c.isEven())return!1;for(b=1;b<sa.length;){for(var d=sa[b],e=b+1;e<sa.length&&d<Wb;)d*=sa[e++];for(d=c.modInt(d);b<e;)if(0==d%sa[b++])return!1}return c.millerRabin(a)};b.NEGATIVE_ONE=b.ONE.negate();var U=function(a){"number"===typeof a&&(a+="");a=na(a);return new b(a,10)};b.prototype.level=0;b.prototype.liftTo=function(a){return 1===a.level?new B(this,1):2===a.level?(a=this.toFixnum(),a===Number.POSITIVE_INFINITY?qa:a===Number.NEGATIVE_INFINITY?kb:new n(a)):3===a.level?new w(this,
0):v("invalid level for BigInteger lift",this,a)};b.prototype.isFinite=function(){return!0};b.prototype.isInteger=function(){return!0};b.prototype.isRational=function(){return!0};b.prototype.isReal=function(){return!0};b.prototype.isExact=function(){return!0};b.prototype.isInexact=function(){return!1};b.prototype.toExact=function(){return this};b.prototype.toInexact=function(){return n.makeInstance(this.toFixnum())};b.prototype.toFixnum=function(){var a=0,b=this.toString(),c;if("-"===b[0]){for(c=
1;c<b.length;c++)a=10*a+Number(b[c]);return-a}for(c=0;c<b.length;c++)a=10*a+Number(b[c]);return a};b.prototype.greaterThan=function(a){return 0<this.compareTo(a)};b.prototype.greaterThanOrEqual=function(a){return 0<=this.compareTo(a)};b.prototype.lessThan=function(a){return 0>this.compareTo(a)};b.prototype.lessThanOrEqual=function(a){return 0>=this.compareTo(a)};b.prototype.divide=function(a){var c=Ya.call(this,a);return 0===c[1].compareTo(b.ZERO)?c[0]:A(c[0],B.makeInstance(c[1],a))};b.prototype.numerator=
function(){return this};b.prototype.denominator=function(){return 1};(function(){var a=function(a,b){for(;!Ea(Ga(b),a)||!ia(a,Ga(A(b,1)));)b=W(G(A(b,W(G(a,b))),2));return b};b.prototype.integerSqrt=function(){var b;if(0<=Aa(this))return a(this,this);b=this.negate();return w.makeInstance(0,a(b,b))}})();(function(){b.prototype.sqrt=function(){var a=this.integerSqrt(),b;if(P(Ga(a),this))return a;b=ea(this);return isFinite(b)?0<=b?n.makeInstance(Math.sqrt(b)):w.makeInstance(0,n.makeInstance(Math.sqrt(-b))):
a}})();b.prototype.floor=function(){return this};b.prototype.ceiling=function(){return this};b.prototype.expt=function(a){return Qa.call(this,a)};b.prototype.imaginaryPart=function(){return 0};b.prototype.realPart=function(){return this};var Xb=function(){return function(a,b,c){var d=512;c&&"undefined"!==typeof c.limit&&(d=c.limit);M(a)||v("toRepeatingDecimal: n "+a.toString()+" is not an integer.");M(b)||v("toRepeatingDecimal: d "+b.toString()+" is not an integer.");y(b,0)&&v("toRepeatingDecimal: d equals 0");
ia(b,0)&&v("toRepeatingDecimal: d < 0");c=ia(a,0)?"-":"";a=aa(a);c+=ib(a,b);a:{a=jb(a,b);var e=d,d=[],f={};for(f[a]=!0;;){if(0>=e--){b=[d.join(""),"..."];break a}var h=ib(E(a,10),b);a=jb(E(a,10),b);d.push(h.toString());if(f[a])break;else f[a]=!0}f=a;for(e=[];!(h=ib(E(a,10),b),a=jb(E(a,10),b),e.push(h.toString()),y(a,f)););b=d.join("");for(a=e.join("");b.length>=a.length&&b.substring(b.length-a.length)===a;)b=b.substring(0,b.length-a.length);b=[b,a]}return[c].concat(b)}}();u.fromFixnum=function(a){if(isNaN(a)||
!isFinite(a))return n.makeInstance(a);var b=Math.floor(a);return b===a?ta(b)?U(na(a+"")):b:n.makeInstance(a)};u.fromString=Ua;u.makeBignum=U;u.makeRational=B.makeInstance;u.makeFloat=n.makeInstance;u.makeComplex=w.makeInstance;u.makeComplexPolar=function(a,b){return P(b,0)?a:w.makeInstance(E(a,ua(b)),E(a,ab(b)))};u.pi=n.pi;u.e=n.e;u.nan=n.nan;u.negative_inf=n.neginf;u.inf=n.inf;u.negative_one=-1;u.zero=0;u.one=1;u.i=Ba;u.negative_i=Kb;u.negative_zero=Y;u.onThrowRuntimeError=function(a,b,c){throw Error(a);
};u.isSchemeNumber=xa;u.isRational=s;u.isReal=x;u.isExact=H;u.isInexact=K;u.isInteger=M;u.toFixnum=ea;u.toExact=ga;u.toInexact=Ja;u.add=A;u.subtract=X;u.multiply=E;u.divide=G;u.equals=y;u.eqv=P;u.approxEquals=function(a,b,c){return ia(aa(X(a,b)),c)};u.greaterThanOrEqual=za;u.lessThanOrEqual=Ea;u.greaterThan=Ka;u.lessThan=ia;u.expt=ob;u.exp=h;u.modulo=$a;u.numerator=pa;u.denominator=zb;u.integerSqrt=Fb;u.sqrt=Z;u.abs=aa;u.quotient=ib;u.remainder=jb;u.floor=W;u.ceiling=Ab;u.conjugate=Bb;u.magnitude=
function(a){return"number"===typeof a?Math.abs(a):a.magnitude()};u.log=hb;u.angle=Cb;u.tan=Db;u.atan=pb;u.cos=ua;u.sin=ab;u.tan=Db;u.acos=qb;u.asin=Eb;u.cosh=function(a){return P(a,0)?n.makeInstance(1):G(A(h(a),h(I(a))),2)};u.sinh=function(a){return G(X(h(a),h(I(a))),2)};u.imaginaryPart=Za;u.realPart=oa;u.round=rb;u.sqr=Ga;u.gcd=function(a,b){M(a)||v("gcd: the argument "+a.toString()+" is not an integer.",a);for(var c=aa(a),d,e,f=0;f<b.length;f++){e=aa(b[f]);for(M(e)||v("gcd: the argument "+e.toString()+
" is not an integer.",e);!O(e);)d=c,c=e,e=yb(d,e)}return c};u.lcm=function(a,b){M(a)||v("lcm: the argument "+a.toString()+" is not an integer.",a);var c=aa(a);if(O(c))return 0;for(var d=0;d<b.length;d++){M(b[d])||v("lcm: the argument "+b[d].toString()+" is not an integer.",b[d]);var e=db(c,b[d]);if(O(e))return 0;c=G(E(c,b[d]),e)}return c};u.toRepeatingDecimal=Xb;u.BigInteger=b;u.Rational=B;u.FloatPoint=n;u.Complex=w;u.MIN_FIXNUM=-9E15;u.MAX_FIXNUM=9E15})(this);Ray.JSNumbers=Numbers;Numbers=null;goog.functions={};goog.functions.constant=function(a){return function(){return a}};goog.functions.FALSE=goog.functions.constant(!1);goog.functions.TRUE=goog.functions.constant(!0);goog.functions.NULL=goog.functions.constant(null);goog.functions.identity=function(a,b){return a};goog.functions.error=function(a){return function(){throw Error(a);}};goog.functions.fail=function(a){return function(){throw a;}};
goog.functions.lock=function(a,b){b=b||0;return function(){return a.apply(this,Array.prototype.slice.call(arguments,0,b))}};goog.functions.withReturnValue=function(a,b){return goog.functions.sequence(a,goog.functions.constant(b))};goog.functions.compose=function(a,b){var c=arguments,d=c.length;return function(){var a;d&&(a=c[d-1].apply(this,arguments));for(var b=d-2;0<=b;b--)a=c[b].call(this,a);return a}};
goog.functions.sequence=function(a){var b=arguments,c=b.length;return function(){for(var a,e=0;e<c;e++)a=b[e].apply(this,arguments);return a}};goog.functions.and=function(a){var b=arguments,c=b.length;return function(){for(var a=0;a<c;a++)if(!b[a].apply(this,arguments))return!1;return!0}};goog.functions.or=function(a){var b=arguments,c=b.length;return function(){for(var a=0;a<c;a++)if(b[a].apply(this,arguments))return!0;return!1}};
goog.functions.not=function(a){return function(){return!a.apply(this,arguments)}};goog.functions.create=function(a,b){var c=function(){};c.prototype=a.prototype;c=new c;a.apply(c,Array.prototype.slice.call(arguments,1));return c};goog.structs={};goog.structs.Collection=function(){};goog.structs.getCount=function(a){return"function"==typeof a.getCount?a.getCount():goog.isArrayLike(a)||goog.isString(a)?a.length:goog.object.getCount(a)};goog.structs.getValues=function(a){if("function"==typeof a.getValues)return a.getValues();if(goog.isString(a))return a.split("");if(goog.isArrayLike(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return goog.object.getValues(a)};
goog.structs.getKeys=function(a){if("function"==typeof a.getKeys)return a.getKeys();if("function"!=typeof a.getValues){if(goog.isArrayLike(a)||goog.isString(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return goog.object.getKeys(a)}};goog.structs.contains=function(a,b){return"function"==typeof a.contains?a.contains(b):"function"==typeof a.containsValue?a.containsValue(b):goog.isArrayLike(a)||goog.isString(a)?goog.array.contains(a,b):goog.object.containsValue(a,b)};
goog.structs.isEmpty=function(a){return"function"==typeof a.isEmpty?a.isEmpty():goog.isArrayLike(a)||goog.isString(a)?goog.array.isEmpty(a):goog.object.isEmpty(a)};goog.structs.clear=function(a){"function"==typeof a.clear?a.clear():goog.isArrayLike(a)?goog.array.clear(a):goog.object.clear(a)};
goog.structs.forEach=function(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(goog.isArrayLike(a)||goog.isString(a))goog.array.forEach(a,b,c);else for(var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)};
goog.structs.filter=function(a,b,c){if("function"==typeof a.filter)return a.filter(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.filter(a,b,c);var d,e=goog.structs.getKeys(a),f=goog.structs.getValues(a),g=f.length;if(e){d={};for(var k=0;k<g;k++)b.call(c,f[k],e[k],a)&&(d[e[k]]=f[k])}else{d=[];for(k=0;k<g;k++)b.call(c,f[k],void 0,a)&&d.push(f[k])}return d};
goog.structs.map=function(a,b,c){if("function"==typeof a.map)return a.map(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.map(a,b,c);var d,e=goog.structs.getKeys(a),f=goog.structs.getValues(a),g=f.length;if(e){d={};for(var k=0;k<g;k++)d[e[k]]=b.call(c,f[k],e[k],a)}else{d=[];for(k=0;k<g;k++)d[k]=b.call(c,f[k],void 0,a)}return d};
goog.structs.some=function(a,b,c){if("function"==typeof a.some)return a.some(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.some(a,b,c);for(var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length,g=0;g<f;g++)if(b.call(c,e[g],d&&d[g],a))return!0;return!1};
goog.structs.every=function(a,b,c){if("function"==typeof a.every)return a.every(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.every(a,b,c);for(var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length,g=0;g<f;g++)if(!b.call(c,e[g],d&&d[g],a))return!1;return!0};goog.iter={};goog.iter.StopIteration="StopIteration"in goog.global?goog.global.StopIteration:Error("StopIteration");goog.iter.Iterator=function(){};goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration;};goog.iter.Iterator.prototype.__iterator__=function(a){return this};
goog.iter.toIterator=function(a){if(a instanceof goog.iter.Iterator)return a;if("function"==typeof a.__iterator__)return a.__iterator__(!1);if(goog.isArrayLike(a)){var b=0,c=new goog.iter.Iterator;c.next=function(){for(;;){if(b>=a.length)throw goog.iter.StopIteration;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");};
goog.iter.forEach=function(a,b,c){if(goog.isArrayLike(a))try{goog.array.forEach(a,b,c)}catch(d){if(d!==goog.iter.StopIteration)throw d;}else{a=goog.iter.toIterator(a);try{for(;;)b.call(c,a.next(),void 0,a)}catch(e){if(e!==goog.iter.StopIteration)throw e;}}};goog.iter.filter=function(a,b,c){var d=goog.iter.toIterator(a);a=new goog.iter.Iterator;a.next=function(){for(;;){var a=d.next();if(b.call(c,a,void 0,d))return a}};return a};
goog.iter.range=function(a,b,c){var d=0,e=a,f=c||1;1<arguments.length&&(d=a,e=b);if(0==f)throw Error("Range step argument must not be zero");var g=new goog.iter.Iterator;g.next=function(){if(0<f&&d>=e||0>f&&d<=e)throw goog.iter.StopIteration;var a=d;d+=f;return a};return g};goog.iter.join=function(a,b){return goog.iter.toArray(a).join(b)};goog.iter.map=function(a,b,c){var d=goog.iter.toIterator(a);a=new goog.iter.Iterator;a.next=function(){for(;;){var a=d.next();return b.call(c,a,void 0,d)}};return a};
goog.iter.reduce=function(a,b,c,d){var e=c;goog.iter.forEach(a,function(a){e=b.call(d,e,a)});return e};goog.iter.some=function(a,b,c){a=goog.iter.toIterator(a);try{for(;;)if(b.call(c,a.next(),void 0,a))return!0}catch(d){if(d!==goog.iter.StopIteration)throw d;}return!1};goog.iter.every=function(a,b,c){a=goog.iter.toIterator(a);try{for(;;)if(!b.call(c,a.next(),void 0,a))return!1}catch(d){if(d!==goog.iter.StopIteration)throw d;}return!0};
goog.iter.chain=function(a){var b=arguments,c=b.length,d=0,e=new goog.iter.Iterator;e.next=function(){try{if(d>=c)throw goog.iter.StopIteration;return goog.iter.toIterator(b[d]).next()}catch(a){if(a!==goog.iter.StopIteration||d>=c)throw a;d++;return this.next()}};return e};goog.iter.dropWhile=function(a,b,c){var d=goog.iter.toIterator(a);a=new goog.iter.Iterator;var e=!0;a.next=function(){for(;;){var a=d.next();if(!e||!b.call(c,a,void 0,d))return e=!1,a}};return a};
goog.iter.takeWhile=function(a,b,c){var d=goog.iter.toIterator(a);a=new goog.iter.Iterator;var e=!0;a.next=function(){for(;;)if(e){var a=d.next();if(b.call(c,a,void 0,d))return a;e=!1}else throw goog.iter.StopIteration;};return a};goog.iter.toArray=function(a){if(goog.isArrayLike(a))return goog.array.toArray(a);a=goog.iter.toIterator(a);var b=[];goog.iter.forEach(a,function(a){b.push(a)});return b};
goog.iter.equals=function(a,b){a=goog.iter.toIterator(a);b=goog.iter.toIterator(b);var c,d;try{for(;;){c=d=!1;var e=a.next();c=!0;var f=b.next();d=!0;if(e!=f)break}}catch(g){if(g!==goog.iter.StopIteration)throw g;if(c&&!d)return!1;if(!d)try{b.next()}catch(k){if(k!==goog.iter.StopIteration)throw k;return!0}}return!1};goog.iter.nextOrValue=function(a,b){try{return goog.iter.toIterator(a).next()}catch(c){if(c!=goog.iter.StopIteration)throw c;return b}};
goog.iter.product=function(a){if(goog.array.some(arguments,function(a){return!a.length})||!arguments.length)return new goog.iter.Iterator;var b=new goog.iter.Iterator,c=arguments,d=goog.array.repeat(0,c.length);b.next=function(){if(d){for(var a=goog.array.map(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){goog.asserts.assert(d);if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw goog.iter.StopIteration;};return b};
goog.iter.cycle=function(a){var b=goog.iter.toIterator(a),c=[],d=0;a=new goog.iter.Iterator;var e=!1;a.next=function(){var a=null;if(!e)try{return a=b.next(),c.push(a),a}catch(g){if(g!=goog.iter.StopIteration||goog.array.isEmpty(c))throw g;e=!0}a=c[d];d=(d+1)%c.length;return a};return a};goog.structs.Map=function(a,b){this.map_={};this.keys_=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)};goog.structs.Map.prototype.count_=0;goog.structs.Map.prototype.version_=0;goog.structs.Map.prototype.getCount=function(){return this.count_};
goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();for(var a=[],b=0;b<this.keys_.length;b++)a.push(this.map_[this.keys_[b]]);return a};goog.structs.Map.prototype.getKeys=function(){this.cleanupKeysArray_();return this.keys_.concat()};goog.structs.Map.prototype.containsKey=function(a){return goog.structs.Map.hasKey_(this.map_,a)};
goog.structs.Map.prototype.containsValue=function(a){for(var b=0;b<this.keys_.length;b++){var c=this.keys_[b];if(goog.structs.Map.hasKey_(this.map_,c)&&this.map_[c]==a)return!0}return!1};goog.structs.Map.prototype.equals=function(a,b){if(this===a)return!0;if(this.count_!=a.getCount())return!1;var c=b||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var d,e=0;d=this.keys_[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};goog.structs.Map.defaultEquals=function(a,b){return a===b};
goog.structs.Map.prototype.isEmpty=function(){return 0==this.count_};goog.structs.Map.prototype.clear=function(){this.map_={};this.version_=this.count_=this.keys_.length=0};goog.structs.Map.prototype.remove=function(a){return goog.structs.Map.hasKey_(this.map_,a)?(delete this.map_[a],this.count_--,this.version_++,this.keys_.length>2*this.count_&&this.cleanupKeysArray_(),!0):!1};
goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){for(var a=0,b=0;a<this.keys_.length;){var c=this.keys_[a];goog.structs.Map.hasKey_(this.map_,c)&&(this.keys_[b++]=c);a++}this.keys_.length=b}if(this.count_!=this.keys_.length){for(var d={},b=a=0;a<this.keys_.length;)c=this.keys_[a],goog.structs.Map.hasKey_(d,c)||(this.keys_[b++]=c,d[c]=1),a++;this.keys_.length=b}};
goog.structs.Map.prototype.get=function(a,b){return goog.structs.Map.hasKey_(this.map_,a)?this.map_[a]:b};goog.structs.Map.prototype.set=function(a,b){goog.structs.Map.hasKey_(this.map_,a)||(this.count_++,this.keys_.push(a),this.version_++);this.map_[a]=b};goog.structs.Map.prototype.addAll=function(a){var b;a instanceof goog.structs.Map?(b=a.getKeys(),a=a.getValues()):(b=goog.object.getKeys(a),a=goog.object.getValues(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};
goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)};goog.structs.Map.prototype.transpose=function(){for(var a=new goog.structs.Map,b=0;b<this.keys_.length;b++){var c=this.keys_[b];a.set(this.map_[c],c)}return a};goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();for(var a={},b=0;b<this.keys_.length;b++){var c=this.keys_[b];a[c]=this.map_[c]}return a};goog.structs.Map.prototype.getKeyIterator=function(){return this.__iterator__(!0)};
goog.structs.Map.prototype.getValueIterator=function(){return this.__iterator__(!1)};goog.structs.Map.prototype.__iterator__=function(a){this.cleanupKeysArray_();var b=0,c=this.keys_,d=this.map_,e=this.version_,f=this,g=new goog.iter.Iterator;g.next=function(){for(;;){if(e!=f.version_)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw goog.iter.StopIteration;var g=c[b++];return a?g:d[g]}};return g};
goog.structs.Map.hasKey_=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};goog.structs.Set=function(a){this.map_=new goog.structs.Map;a&&this.addAll(a)};goog.structs.Set.getKey_=function(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+goog.getUid(a):b.substr(0,1)+a};goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()};goog.structs.Set.prototype.add=function(a){this.map_.set(goog.structs.Set.getKey_(a),a)};goog.structs.Set.prototype.addAll=function(a){a=goog.structs.getValues(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};
goog.structs.Set.prototype.removeAll=function(a){a=goog.structs.getValues(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};goog.structs.Set.prototype.remove=function(a){return this.map_.remove(goog.structs.Set.getKey_(a))};goog.structs.Set.prototype.clear=function(){this.map_.clear()};goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()};goog.structs.Set.prototype.contains=function(a){return this.map_.containsKey(goog.structs.Set.getKey_(a))};
goog.structs.Set.prototype.containsAll=function(a){return goog.structs.every(a,this.contains,this)};goog.structs.Set.prototype.intersection=function(a){var b=new goog.structs.Set;a=goog.structs.getValues(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};goog.structs.Set.prototype.difference=function(a){var b=this.clone();b.removeAll(a);return b};goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()};goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)};
goog.structs.Set.prototype.equals=function(a){return this.getCount()==goog.structs.getCount(a)&&this.isSubsetOf(a)};goog.structs.Set.prototype.isSubsetOf=function(a){var b=goog.structs.getCount(a);if(this.getCount()>b)return!1;!(a instanceof goog.structs.Set)&&5<b&&(a=new goog.structs.Set(a));return goog.structs.every(this,function(b){return goog.structs.contains(a,b)})};goog.structs.Set.prototype.__iterator__=function(a){return this.map_.__iterator__(!1)};Ray.Runtime={};var env=Ray.Env,R=Ray.Runtime;Ray.R=R;var clone_constructor=Ray.Util.clone_constructor;clone_constructor.R=R;
var product=Ray.Util.product,construct=Ray.Util.construct,makeExpr=function(a,b){var c={};goog.object.extend(c,b);c.toString=function(){return a+"E"};c.nodeType_=a.toLowerCase()+"E";c.exprType_=Ray.Globals.Expressions[a];c.expr=!0;return c},makeValue=function(a,b){var c={};goog.object.extend(c,b);c.toString=function(){return a};c.nodeType_=a.toLowerCase();c.valueType_=Ray.Globals.Values[a];c.interp=function(){throw Error(a+" has no interp method!!!");};c.value=!0;return c},attachValueNode=function(a,
b,c){function d(b){return a.apply(this,b)}d.prototype=makeValue(b,c);c=function(){var a=new d(arguments);if(!a.__proto__.nodeType_)throw Error("No type set for this expr!!");return a};R.Value[b]=c;d.prototype.__node_constructor__=c},attachExprNode=function(a,b,c){function d(b){return a.apply(this,b)}d.prototype=makeExpr(b,c);c=function(){var a=new d(arguments);if(!a.__proto__.nodeType_)throw Error("No type set for this expr!!");return a};R.Expr[b]=c;d.prototype.__node_constructor__=c},Pair=product(["car",
"cdr"]);Pair.proto={clone:clone_constructor,display:function(){return"("+R.display(this.car)+" . "+R.display(this.cdr)+")"}};var Empty=product([]);Empty.proto={clone:clone_constructor,display:function(){return"()"}};var Boolean=product(["b"]);Boolean.proto={clone:clone_constructor,display:function(){return this.b?"true":"false"}};var Num=product(["n"]);Num.proto={clone:clone_constructor,display:function(){return String(this.n)}};var Str=product(["s"]);
Str.proto={clone:clone_constructor,display:function(){return'"'+this.s+'"'}};var Char=product(["c"]);Char.proto={clone:clone_constructor,display:function(){return"'"+this.c+"'"}};var Primitive=product(["argSpec","f"],["bodyType"]);
Primitive.proto={clone:clone_constructor,bind_arguments:function(a){this.args=R.interp(a)},evaluate_body:function(){for(var a=[],b=this.args.positionalArgs,c=this.argSpec.positionalArgs.length,d=0;d<c;d++)a.push(b[d]);if(0<this.args.keywordArgs.length)throw Error("Keyword arguments not supported for primitives");a.push(b.slice(c));return this.f.apply(this,a)},unbind_arguments:function(){this.args=null},display:function(){return"(primitive "+R.display(this.argSpec)+" ...)"}};
var Closure=product(["argSpec","body","envs"],["bodyType"]);
Closure.proto={clone:function(){return new R.Value.Closure(R.clone(this.argSpec),R.clone(this.body),R.cloneEnvs(this.envs),this.bodyType)},bind_arguments:function(a){this.saved_envs||(this.saved_envs=[]);a=this.argSpec.bind_arguments(a);this.saved_envs.unshift(R.swapEnvs(this.envs));R.pushEnv(a)},evaluate_body:function(){R.record_function_call(this,this.name_);return R.interp(this.body)},unbind_arguments:function(){this.argSpec.unbind_arguments();R.swapEnvs(this.saved_envs.shift())},display:function(){return"(lambda "+
R.display(this.argSpec)+" "+R.display(this.body)+")"}};var ArgumentSpec=product(["positionalArgs","keywordArgs","restArg"],["argsType"]);
ArgumentSpec.proto={clone:function(){return new R.Value.ArgumentSpec(goog.array.map(this.positionalArgs,goog.functions.identity),goog.object.clone(this.keywordArgs),this.restArg)},accepts:function(a){if(!(a.positionalArgs.length===this.positionalArgs.length||this.restArg&&a.positionalArgs.length>this.positionalArgs.length))return!1;var b=goog.object.getKeys(this.keywordArgs),c=new goog.structs.Set;c.addAll(b);a=goog.object.getKeys(a.keywordArgs);b=new goog.structs.Set;b.addAll(a);return 0===c.difference(b).getCount()&&
0===b.difference(c).getCount()},bind_arguments:function(a){var b=R.getEnv();this.bound_args=this.bound_args||[];for(var c=0;c<this.positionalArgs.length;c++)b=b.extend(this.positionalArgs[c],R.interp(a.positionalArgs[c]));this.restArg&&(b=b.extend(this.restArg,goog.array.map(a.positionalArgs.slice(this.positionalArgs.length),R.interp)));goog.object.forEach(this.keywordArgs,function(c,e){b=b.extend(c,R.interp(a.keywordArgs[e]))});return b},unbind_arguments:function(){return R.popEnv()},display:function(){var a=
[];goog.object.forEach(this.keywordArgs,function(b,c){a.push("#:"+c+" "+b)});return"("+this.positionalArgs.concat(a).concat(this.restArg?[". "+this.restArg]:[]).join(" ")+")"}};var Arguments=product(["positionalArgs","keywordArgs"]);Arguments.proto={clone:function(){return new R.Value.Arguments(goog.array.map(this.positionalArgs,goog.functions.identity),goog.object.clone(this.keywordArgs))}};var PairExpr=product(["car","cdr"]);
PairExpr.proto={clone:clone_constructor,interp:function(){return new R.Value.Pair(R.interp(this.car),R.interp(this.cdr))},display:function(){return"("+R.display(this.car)+" . "+R.display(this.cdr)+")"}};var EmptyExpr=product([]);EmptyExpr.proto={clone:clone_constructor,interp:function(){return new R.Value.Empty},display:function(){return"()"}};var BooleanExpr=product(["b"]);
BooleanExpr.proto={clone:clone_constructor,interp:function(){return new R.Value.Boolean(this.b)},display:function(){return this.b?"true":"false"}};var NumExpr=product(["n"]);NumExpr.proto={clone:clone_constructor,interp:function(){return new R.Value.Num(this.n)},display:function(){return String(this.n)}};var StrExpr=product(["s"]);StrExpr.proto={clone:clone_constructor,interp:function(){return new R.Value.Str(this.s)},display:function(){return'"'+this.s+'"'}};var CharExpr=product(["c"]);
CharExpr.proto={clone:clone_constructor,interp:function(){return new R.Value.Char(this.c)},display:function(){return"'"+this.c+"'"}};var PrimitiveExpr=product(["argSpec","f"],["bodyType"]);PrimitiveExpr.proto={clone:clone_constructor,interp:function(){return new R.Value.Primitive(R.interp(this.argSpec),this.f,this.bodyType)},display:function(){return"(primitive "+R.display(this.argSpec)+" ...)"}};var If=product(["pred","thenExpr","elseExpr"]);
If.proto={clone:clone_constructor,interp:function(){var a=R.interp(this.pred);return R.interp(a.b?this.thenExpr:this.elseExpr)},display:function(){return["(if",R.display(this.pred),R.display(this.thenExpr),R.display(this.elseExpr)+")"].join(" ")}};var Cond=product(["testClauses","elseClause"]);
Cond.proto={clone:function(){var a=goog.array.map(this.testClauses,function(a){return[R.clone(a[0]),R.clone(a[1])]}),b=R.clone(this.elseClause);return new R.Expr.Cond(a,b)},interp:function(){if(0===this.testClauses.length&&!this.elseClause)throw Error("At least 1 clause required in cond form!");for(var a=0;a<this.testClauses.length;a++){var b=R.interp(this.testClauses[a][0]);if("boolean"!==R.nodeType(b)||b.b)return R.interp(this.testClauses[a][1])}if(this.elseClause)return R.interp(this.elseClause);
throw Error("All test results were false, and no else clause provided!");},display:function(){var a=goog.array.map(this.testClauses,function(a){return"["+R.display(a[0])+" "+R.display(a[1])+"]"});this.elseClause&&a.push("[else "+R.display(this.elseClause)+"]");return["(cond"].concat(a).join(" ")+")"}};var And=product(["args"]);
And.proto={clone:function(){return new R.Expr.And(goog.array.map(this.args,function(a){return R.clone(a)}))},interp:function(){for(var a=new R.Value.Boolean(!0),b=0;b<this.args.length;b++)if(a=R.interp(this.args[b]),"boolean"===R.nodeType(a)&&!1===a.b)return new R.Value.Boolean(!1);return a},display:function(){var a=goog.array.map(this.args,R.display).join(" ");return"(and"+(a?" ":"")+a+")"}};var Or=product(["args"]);
Or.proto={clone:function(){return new R.Expr.Or(goog.array.map(this.args,function(a){return R.clone(a)}))},interp:function(){for(var a,b=0;b<this.args.length;b++)if(a=R.interp(this.args[b]),"boolean"!==R.nodeType(a)||!0===a.b)return a;return new R.Value.Boolean(!1)},display:function(){var a=goog.array.map(this.args,R.display).join(" ");return"(or"+(a?" ":"")+a+")"}};var Name=product(["name"]);
Name.proto={clone:clone_constructor,interp:function(){var a=R.lookup(this.name);if(a)return a;throw Error("Unbound identifier: '"+this.name+"'");},display:function(){return this.name}};var ArgumentsExpr=product(["positionalArgs","keywordArgs"]);
ArgumentsExpr.proto={clone:function(){return new R.Expr.Arguments(goog.array.map(this.positionalArgs,goog.functions.identity),goog.object.clone(this.keywordArgs))},interp:function(){var a=goog.array.map(this.positionalArgs,R.interp,R),b={};goog.object.forEach(this.keywordArgs,function(a,d){b[d]=R.interp(a)});return new R.Value.Arguments(a,b)},display:function(){var a=[];goog.object.forEach(this.keywordArgs,function(b,c){a.push("#:"+c+" "+R.display(b))});return goog.array.map(this.positionalArgs,R.display).join(" ")+
a.join(" ")+(this.restArg?" . "+R.display(this.restArg):"")}};var App=product(["f","args"]);
App.proto={clone:clone_constructor,interp:function(){var a=R.interp(this.f);if(!("closure"===R.nodeType(a)||"primitive"===R.nodeType(a)))throw Error("Tried to apply a non-function");if(!a.argSpec.accepts(this.args))throw Error("Arity mismatch in function application");a.bind_arguments(this.args);var b=a.evaluate_body();a.unbind_arguments();return b},display:function(){var a=R.display(this.args);return"("+R.display(this.f)+(a?" ":"")+a+")"}};
var ArgumentSpecExpr=product(["positionalArgs","keywordArgs","restArg"],["argsType"]);
ArgumentSpecExpr.proto={clone:function(){return new R.Expr.ArgumentSpec(goog.array.map(this.positionalArgs,goog.functions.identity),goog.object.clone(this.keywordArgs),this.restArg,this.argsType)},interp:function(){return new R.Value.ArgumentSpec(goog.array.map(this.positionalArgs,goog.functions.identity),goog.object.clone(this.keywordArgs),this.restArg,this.argsType)},display:function(){var a=goog.array.map(this.positionalArgs,goog.functions.identity);goog.object.forEach(this.keywordArgs,function(b,
c){a=a.concat("#:"+c,b)});this.restArg&&(a=a.concat(".",this.restArg));return"("+a.join(" ")+")"}};var Lambda=product(["argSpec","body"],["bodyType"]);Lambda.proto={clone:clone_constructor,interp:function(){return new R.Value.Closure(R.interp(this.argSpec),R.clone(this.body),R.cloneEnvs(),this.bodyType)},display:function(){return["(lambda",R.display(this.argSpec),R.display(this.body)+")"].join(" ")}};var Error=function(a){this.message=a};Ray.Runtime.envs=[];Ray.Runtime.topLevel_=env.emptyEnv();
Ray.Runtime.builtins=env.emptyEnv();Ray.Runtime.functionCallLimit_=100;var self=Ray.Runtime;Ray.Runtime.Expr={};attachExprNode(PairExpr,"Pair",PairExpr.proto);attachExprNode(EmptyExpr,"Empty",EmptyExpr.proto);attachExprNode(NumExpr,"Num",NumExpr.proto);attachExprNode(BooleanExpr,"Boolean",BooleanExpr.proto);attachExprNode(PrimitiveExpr,"Primitive",PrimitiveExpr.proto);attachExprNode(StrExpr,"Str",StrExpr.proto);attachExprNode(CharExpr,"Char",CharExpr.proto);attachExprNode(Lambda,"Lambda",Lambda.proto);
attachExprNode(Name,"Name",Name.proto);attachExprNode(Cond,"Cond",Cond.proto);attachExprNode(If,"If",If.proto);attachExprNode(And,"And",And.proto);attachExprNode(Or,"Or",Or.proto);attachExprNode(App,"App",App.proto);attachExprNode(ArgumentsExpr,"Arguments",ArgumentsExpr.proto);attachExprNode(ArgumentSpecExpr,"ArgumentSpec",ArgumentSpecExpr.proto);Ray.Runtime.Value={};attachValueNode(Pair,"Pair",Pair.proto);attachValueNode(Empty,"Empty",Empty.proto);attachValueNode(Num,"Num",Num.proto);
attachValueNode(Boolean,"Boolean",Boolean.proto);attachValueNode(Primitive,"Primitive",Primitive.proto);attachValueNode(Closure,"Closure",Closure.proto);attachValueNode(ArgumentSpec,"ArgumentSpec",ArgumentSpec.proto);attachValueNode(Arguments,"Arguments",Arguments.proto);attachValueNode(Str,"Str",Str.proto);attachValueNode(Char,"Char",Char.proto);
Ray.Runtime.equals=function(a,b){if(Ray.Runtime.valueType(a)!==Ray.Runtime.valueType(b))return!1;switch(Ray.Runtime.valueType(a)){case Ray.Globals.Values.Pair:return Ray.Runtime.equals(a.car,b.car)&&Ray.Runtime.equals(a.cdr,b.cdr);case Ray.Globals.Values.Empty:return!0;case Ray.Globals.Values.Boolean:return a.b===b.b;case Ray.Globals.Values.Num:return Ray.Numbers.equals(a.n,b.n);case Ray.Globals.Values.Str:return a.s===b.s;case Ray.Globals.Values.Char:return a.c===b.c;case Ray.Globals.Values.Primitive:case Ray.Globals.Values.Closure:return!1;
default:throw"Invalid valueType for valueA";}};Ray.Runtime.setFunctionCallLimit=function(a){this.functionCallLimit_=a};Ray.Runtime.bindBuiltin=function(a,b){var c=this.interp(b);if(this.builtins.lookup(a))throw Error("Trying to change a builtin binding: "+a);this.builtins=this.builtins.extend(a,c);c.__name__=a};Ray.Runtime.bindTopLevel=function(a,b){var c=this.interp(b);this.topLevel_=this.topLevel_.extend(a,c);c.__name__=a};
Ray.Runtime.bindLocal=function(a,b){var c=this.interp(b),d=this.envs[0].lookup(a);this.envs[0]=this.envs[0].extend(a,c);return d||null};Ray.Runtime.bind=function(a,b){this.bindTopLevel(a,b)};Ray.Runtime.lookup=function(a){for(var b,c=0;c<this.envs.length;c++)if(b=this.envs[c].lookup(a))return b;return(b=this.topLevel_.lookup(a))?b:(b=this.builtins.lookup(a))?b:null};Ray.Runtime.getAllBoundIdentifiers=function(){return this.topLevel_.allBoundNames().concat(this.builtins.allBoundNames())};
Ray.Runtime.nodeType=function(a){return a.nodeType_};Ray.Runtime.exprType=function(a){return a.exprType_};Ray.Runtime.valueType=function(a){return a.valueType_};Ray.Runtime.clone=function(a){return a.clone()};Ray.Runtime.setStop=function(a){return this.shouldStop_=a||!1};Ray.Runtime.stop=function(){this.envs=[];var a=this.currentFunctionName_;this.currentFunction_=null;this.functionCallCount_=0;throw Error("Stopping in:"+(a?a:"**unknown**"));};
Ray.Runtime.record_function_call=function(a,b){b&&(this.currentFunctionName_=b);this.currentFunction_===a?(this.functionCallCount_++,this.functionCallCount_>this.functionCallLimit_&&(this.shouldStop_=!0)):(this.currentFunction_=a,this.functionCallCount_=1)};Ray.Runtime.interp=function(a){return this.shouldStop_?this.stop():a.interp()};Ray.Runtime.eval=function(a){this.functionCallCount_=0;if(!a.expr)throw Error("Can't evaluate a non-expression!!");return this.interp(a)};
Ray.Runtime.swapEnvs=function(a){var b=this.envs;this.envs=a;return b};Ray.Runtime.getEnv=function(){return env.emptyEnv()};Ray.Runtime.pushEnv=function(a){this.envs.unshift(a)};Ray.Runtime.popEnv=function(){return this.envs.shift()};Ray.Runtime.cloneEnvs=function(a){return goog.array.map(a||this.envs,function(a){return a.clone()})};Ray.Runtime.display=function(a){return a.display()};Ray.Runtime.quote=function(a){return"'"+a};Ray.Runtime.app=function(a,b){return new R.Expr.App(a,b)};
Ray.Runtime.prim=function(a,b,c){return new R.Expr.Primitive(a,b,c)};Ray.Runtime.args=function(a,b){return new R.Expr.Arguments(a,b)};Ray.Runtime.positionalArgs=function(){return new R.Expr.Arguments(Array.prototype.slice.call(arguments,0),{})};Ray.Runtime.name=function(a){return new R.Expr.Name(a)};
Ray.Runtime.spec=function(a,b,c){var d=goog.array.map(a,function(a){return a[0]});a=goog.array.map(a,function(a){return a[1]});var e=c[1];return new R.Expr.ArgumentSpec(d,b,c[0],Ray.Types.args(Ray.Types.ty_list(a),Ray.Types.ty_n_arity(e)))};Ray.Runtime.p_spec=function(){var a=goog.array.toArray(arguments),b=goog.array.map(a,function(a){return a[0]}),a=goog.array.map(a,function(a){return a[1]});return new R.Expr.ArgumentSpec(b,{},null,Ray.Types.args(Ray.Types.ty_list(a),null))};
Ray.Runtime.kw_spec=function(a,b){throw Error("keywordArgs not implemented yet!");};Ray.Runtime.rest_spec=function(a,b){return new R.Expr.ArgumentSpec([],{},a,Ray.Types.restArg(b))};Ray.Runtime.fn=function(a,b,c){return new R.Expr.Lambda(a,b,c)};Ray.Runtime.num=function(a){return new R.Expr.Num(a)};Ray.Runtime.str=function(a){return new R.Expr.Str(a)};Ray.Runtime._char=function(a){return new R.Expr.Char(a)};Ray.Runtime.pair=function(a,b){return new R.Expr.Pair(a,b)};Ray.Runtime.empty=function(){return new R.Expr.Empty};
Ray.Runtime.bool=function(a){return new R.Expr.Boolean(a)};Ray.Runtime.cond=function(a,b){if(0===a.length&&!b)throw Error("At least one clause needed in cond form!");return new R.Expr.Cond(a,b||null)};Ray.Runtime._if=function(a,b,c){return new R.Expr.If(a,b,c)};Ray.Runtime.and=function(){return new R.Expr.And(goog.array.toArray(arguments))};Ray.Runtime.or=function(){return new R.Expr.Or(goog.array.toArray(arguments))};Ray.Blocks={};Ray.Blocks.TypeChecker={};Blocks=Ray.Globals.Blocks;Ray.Blocks.TypeChecker.cons=function(a,b,c){var d=Ray.Blocks.TypeChecker.expr_(a,"car",b.elementType,c);a=Ray.Blocks.TypeChecker.expr_(a,"cdr",b,c);return Ray.Types.principalType_(new Ray.Types.List(d),a)};Ray.Blocks.TypeChecker.empty=function(a,b,c){return b};Ray.Blocks.TypeChecker.first=function(a,b,c){return(a=Ray.Blocks.TypeChecker.expr_(a,"x",new Ray.Types.List(b),c))?a.elementType:a};
Ray.Blocks.TypeChecker.rest=function(a,b,c){return Ray.Blocks.TypeChecker.expr_(a,"x",b,c)};Ray.Blocks.TypeChecker.list=function(a,b,c){for(var d=[],e=0;e<a.restArgCount_;e++)a&&d.push(Ray.Blocks.TypeChecker.expr_(a,"REST_ARG"+String(e),b.elementType,c,!0));a=Ray.Types.principalType(d);return new Ray.Types.List(a)};
Ray.Blocks.TypeChecker.functionArguments=function(a,b,c,d){var e=!!a.isUserFunction_,f=b.argumentsType,g=f.positionalArgTypes.list,k=c.positionalArgs;if(k.length<g.length)return!1;c=goog.array.map(goog.array.range(k.length),function(b){return Ray.Blocks.TypeChecker.expr_(a,e?"P_ARG"+String(b):k[b],g[b],d)});if(!goog.array.every(c,function(a){return!!a}))return!1;if(!f.restArgType)return b.returnType;var l=f.restArgType.elementType,f=goog.array.map(goog.array.range(a.restArgCount_),function(b){return Ray.Blocks.TypeChecker.expr_(a,
"REST_ARG"+String(b),l,d)});return!goog.array.every(f,function(a){return!!a})?!1:b.returnType};Ray.Blocks.TypeChecker.expr_=function(a,b,c,d,e){e=!!e;a=a.getInput(b);if(!a){if(e)return new Ray.Types.Unknown;throw"Missing input";}if(!a.connection)throw"Input doesn't have a connection";a=a.connection;a.inferType(c);return a.targetConnection&&a.targetConnection.sourceBlock_?Ray.Blocks.TypeChecker.expr(a.targetConnection.sourceBlock_,c,d):c};
Ray.Blocks.TypeChecker.expr=function(a,b,c){var d;switch(a.blockClass_){case Blocks.Empty:d=Ray.Blocks.TypeChecker.empty(a,b,c);break;case Blocks.First:d=Ray.Blocks.TypeChecker.first(a,b,c);break;case Blocks.Rest:d=Ray.Blocks.TypeChecker.rest(a,b,c);break;case Blocks.Cons:d=Ray.Blocks.TypeChecker.cons(a,b,c);break;case Blocks.List:d=Ray.Blocks.TypeChecker.list(a,b,c);break;case Blocks.Num:d=new Ray.Types.Num;d=Ray.Types.areMatchingTypes(b,d)&&d;break;case Blocks.Char:d=new Ray.Types.Char;d=Ray.Types.areMatchingTypes(b,
d)&&d;break;case Blocks.Boolean:var e=new Ray.Types.Boolean;d=Ray.Types.areMatchingTypes(b,e)&&e;break;case Blocks.Str:d=new Ray.Types.Str;d=Ray.Types.areMatchingTypes(b,d)&&d;break;case Blocks.Cond:d=a.testClauseCount_;var f=[Ray.Blocks.TypeChecker.expr_(a,"CONDITION",new Ray.Types.Boolean,c)];goog.array.forEach(goog.array.range(d),function(b){f.push(Ray.Blocks.TypeChecker.expr_(a,"CONDITION"+String(b),new Ray.Types.Boolean,c))});e=new Ray.Types.Boolean;if(!goog.array.every(f,function(a){return a&&
Ray.Types.areMatchingTypes(e,a)}))return!1;var g=[Ray.Blocks.TypeChecker.expr_(a,"BODY",b,c)];goog.array.forEach(goog.array.range(d),function(d){g.push(Ray.Blocks.TypeChecker.expr_(a,"BODY"+String(d),b,c))});a.elseClause_&&g.push(Ray.Blocks.TypeChecker.expr_(a,"ELSE",b,c));d=Ray.Types.principalType(g);break;case Blocks.If:if(!Ray.Blocks.TypeChecker.expr_(a,"PRED",new Ray.Types.Boolean,c))return!1;d=Ray.Blocks.TypeChecker.expr_(a,"THEN_EXPR",b,c);var k=Ray.Blocks.TypeChecker.expr_(a,"ELSE_EXPR",b,
c);d=Ray.Types.principalType_(d,k);break;case Blocks.And:case Blocks.Or:d=a.restArgCount_;e=new Ray.Types.Boolean;d=goog.array.map(goog.array.range(d),function(b){return Ray.Blocks.TypeChecker.expr_(a,"REST_ARG"+String(b),e,c)});d=goog.array.every(d,function(a){return Ray.Types.areMatchingTypes(e,a)})&&e;break;case Blocks.App:d=a.name_;d=a.isUserFunction_?a.value_:Ray.Runtime.lookup(d);if(!d)throw"No function found for application block, can't typecheck!";k=new Ray.Types.FunctionType(d.argSpec.argsType,
d.bodyType);d=Ray.Blocks.TypeChecker.functionArguments(a,k,d.argSpec,c);break;case Blocks.Argument:d=a.getOutputType();break;default:d=a.getOutputType(!0)}if(d)return a.outputConnection.inferType(d),d;throw"Failed to typecheck";};
Ray.Blocks.TypeChecker.statement=function(a,b){switch(a.blockClass_){case Blocks.Example:var c=new Ray.Types.Unknown,d=Ray.Blocks.TypeChecker.expr_(a,"EXPR",c,b),c=Ray.Blocks.TypeChecker.expr_(a,"RESULT",c,b),d=Ray.Types.principalType_(d,c);Ray.Blocks.TypeChecker.expr_(a,"EXPR",d,b);Ray.Blocks.TypeChecker.expr_(a,"RESULT",d,b);return!0;default:throw"Unknown value for block.blockClass_!";}};
Ray.Blocks.TypeChecker.typecheckBlock=function(a){if(a.outputConnection){var b=a.getOutputType(!0),c=Ray.Blocks.TypeChecker.expr(a,a.getOutputType(!0),Ray.Env.emptyEnv());if(!c||!b)throw"Failed to Typecheck";return Ray.Types.areSameType(b,c)?c:Ray.Blocks.TypeChecker.expr(a,a.getOutputType(),Ray.Env.emptyEnv())}return Ray.Blocks.TypeChecker.statement(a,Ray.Env.emptyEnv())};var Blockly={Names:function(a){this.reservedDict_={};if(a){a=a.split(",");for(var b=0;b<a.length;b++)this.reservedDict_[Blockly.Names.PREFIX_+a[b]]=!0}this.reset()}};Blockly.Names.PREFIX_="$_";Blockly.Names.prototype.reset=function(){this.db_={};this.dbReverse_={}};Blockly.Names.prototype.getName=function(a,b){var c=Blockly.Names.PREFIX_+a.toLowerCase()+"_"+b;if(c in this.db_)return this.db_[c];var d=this.getDistinctName(a,b);return this.db_[c]=d};
Blockly.Names.prototype.getDistinctName=function(a,b){for(var c=this.safeName_(a),d="";this.dbReverse_[Blockly.Names.PREFIX_+c+d]||Blockly.Names.PREFIX_+c+d in this.reservedDict_;)d=d?d+1:2;c+=d;this.dbReverse_[Blockly.Names.PREFIX_+c]=!0;return c};Blockly.Names.prototype.safeName_=function(a){a?(a=encodeURI(a.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(a[0])&&(a="my_"+a)):a="unnamed";return a};Blockly.Names.equals=function(a,b){return a.toLowerCase()==b.toLowerCase()};Blockly.Xml={};Blockly.Xml.workspaceToDom=function(a){var b=goog.dom.createDom("workspace");a=a.getTopBlocks(!0);for(var c=0,d;d=a[c];c++){var e=Blockly.Xml.blockToDom_(d);d=d.getRelativeToSurfaceXY();e.setAttribute("x",d.x);e.setAttribute("y",d.y);b.appendChild(e)}return b};
Blockly.Xml.blockToDom_=function(a){var b=goog.dom.createDom("block");b.setAttribute("type",a.type);if(a.mutationToDom){var c=a.mutationToDom();c&&b.appendChild(c)}for(var d=0;c=a.inputList[d];d++)for(var e=0,f;f=c.titleRow[e];e++)if(f.name&&f.EDITABLE){var g=goog.dom.createDom("title",null,f.getValue());g.setAttribute("name",f.name);b.appendChild(g)}a.comment&&(c=goog.dom.createDom("comment",null,a.comment.getText()),c.setAttribute("pinned",a.comment.isVisible()),d=a.comment.getBubbleSize(),c.setAttribute("h",
d.height),c.setAttribute("w",d.width),b.appendChild(c));for(d=0;c=a.inputList[d];d++){var k,e=!0;c.type!=Blockly.DUMMY_INPUT&&(f=c.connection.targetBlock(),c.type==Blockly.INPUT_VALUE?k=goog.dom.createDom("value"):c.type==Blockly.NEXT_STATEMENT&&(k=goog.dom.createDom("statement")),f&&(k.appendChild(Blockly.Xml.blockToDom_(f)),e=!1),k.setAttribute("name",c.name),e||b.appendChild(k))}a.collapsed&&b.setAttribute("collapsed",!0);a.disabled&&b.setAttribute("disabled",!0);if(a.nextConnection&&(a=a.nextConnection.targetBlock()))k=
goog.dom.createDom("next",null,Blockly.Xml.blockToDom_(a)),b.appendChild(k);return b};Blockly.Xml.domToText=function(a){return(new XMLSerializer).serializeToString(a)};Blockly.Xml.domToPrettyText=function(a){a=Blockly.Xml.domToText(a).split("<");for(var b="",c=1;c<a.length;c++){var d=a[c];"/"==d[0]&&(b=b.substring(2));a[c]=b+"<"+d;"/"!=d[0]&&"/>"!=d.slice(-2)&&(b+="  ")}a=a.join("\n");a=a.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>");return a.replace(/^\n/,"")};
Blockly.Xml.textToDom=function(a){a=(new DOMParser).parseFromString(a,"text/xml");if(!a||!a.firstChild||"xml"!=a.firstChild.nodeName.toLowerCase()||a.firstChild!==a.lastChild)throw"Blockly.Xml.textToDom did not obtain a valid XML tree.";return a.firstChild};
Blockly.Xml.domToWorkspace=function(a,b){for(var c=0,d;d=b.childNodes[c];c++)if("block"==d.nodeName.toLowerCase()){var e=Blockly.Xml.domToBlock_(a,d),f=parseInt(d.getAttribute("x"),10);d=parseInt(d.getAttribute("y"),10);!isNaN(f)&&!isNaN(d)&&e.moveBy(f,d)}};
Blockly.Xml.domToBlock_=function(a,b){var c=b.getAttribute("type"),c=new Blockly.Block(a,c);c.initSvg();for(var d=null,e=0,f;f=b.childNodes[e];e++)if(!(3==f.nodeType&&f.data.match(/^\s*$/))){for(var g=null,k=0,l;l=f.childNodes[k];k++)if(3!=l.nodeType||!l.data.match(/^\s*$/))g=l;k=f.getAttribute("name");switch(f.nodeName.toLowerCase()){case "mutation":c.domToMutation&&c.domToMutation(f);break;case "comment":c.setCommentText(f.textContent);(g=f.getAttribute("pinned"))&&c.comment.setVisible("true"==
g);g=parseInt(f.getAttribute("w"),10);f=parseInt(f.getAttribute("h"),10);!isNaN(g)&&!isNaN(f)&&c.comment.setBubbleSize(g,f);break;case "title":c.setTitleValue(f.textContent,k);break;case "value":case "statement":f=c.getInput(k);if(!f)throw"Input does not exist: "+k;if(g&&"block"==g.nodeName.toLowerCase())if(d=Blockly.Xml.domToBlock_(a,g),d.outputConnection)f.connection.connect(d.outputConnection);else if(d.previousConnection)f.connection.connect(d.previousConnection);else throw"Child block does not have output or previous statement.";
break;case "next":if(g&&"block"==g.nodeName.toLowerCase()){if(c.nextConnection){if(c.nextConnection.targetConnection)throw"Next statement is already connected.";}else throw"Next statement does not exist.";d=Blockly.Xml.domToBlock_(a,g);if(!d.previousConnection)throw"Next block does not have previous statement.";c.nextConnection.connect(d.previousConnection)}}}(e=b.getAttribute("collapsed"))&&c.setCollapsed("true"==e);(e=b.getAttribute("disabled"))&&c.setDisabled("true"==e);d||c.render();return c};
Blockly.Xml.deleteNext=function(a){for(var b=0,c;c=a.childNodes[b];b++)if("next"==c.nodeName.toLowerCase()){a.removeChild(c);break}};Blockly.ScrollbarPair=function(a,b,c){this.element_=a;this.getMetrics_=b;this.setMetrics_=c;this.oldHostMetrics_=null;this.hScroll=new Blockly.Scrollbar(a,b,c,!0,!0);this.vScroll=new Blockly.Scrollbar(a,b,c,!1,!0);this.corner_=this.addCorner_(a);this.resize();var d=this;this.onResizeWrapper_=Blockly.bindEvent_(window,"resize",d,function(){d.resize()})};
Blockly.ScrollbarPair.prototype.dispose=function(){Blockly.unbindEvent_(this.onResizeWrapper_);this.onResizeWrapper_=null;goog.dom.removeNode(this.corner_);this.oldHostMetrics_=this.setMetrics_=this.getMetrics_=this.element_=this.corner_=null;this.hScroll.dispose();this.hScroll=null;this.vScroll.dispose();this.vScroll=null};
Blockly.ScrollbarPair.prototype.addCorner_=function(a){var b=Blockly.createSvgElement("rect",{height:Blockly.Scrollbar.scrollbarThickness,width:Blockly.Scrollbar.scrollbarThickness,style:"fill: #fff"},null);Blockly.Scrollbar.insertAfter_(b,a);return b};
Blockly.ScrollbarPair.prototype.resize=function(){var a=this.getMetrics_();if(a){var b=!1,c=!1;if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!=a.viewWidth||this.oldHostMetrics_.viewHeight!=a.viewHeight||this.oldHostMetrics_.absoluteTop!=a.absoluteTop||this.oldHostMetrics_.absoluteLeft!=a.absoluteLeft)c=b=!0;else{if(!this.oldHostMetrics_||this.oldHostMetrics_.contentWidth!=a.contentWidth||this.oldHostMetrics_.viewLeft!=a.viewLeft||this.oldHostMetrics_.contentLeft!=a.contentLeft)b=!0;if(!this.oldHostMetrics_||
this.oldHostMetrics_.contentHeight!=a.contentHeight||this.oldHostMetrics_.viewTop!=a.viewTop||this.oldHostMetrics_.contentTop!=a.contentTop)c=!0}b&&this.hScroll.resize(a);c&&this.vScroll.resize(a);(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!=a.viewWidth||this.oldHostMetrics_.absoluteLeft!=a.absoluteLeft)&&this.corner_.setAttribute("x",this.vScroll.xCoordinate);(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!=a.viewHeight||this.oldHostMetrics_.absoluteTop!=a.absoluteTop)&&this.corner_.setAttribute("y",
this.hScroll.yCoordinate);this.oldHostMetrics_=a}};Blockly.ScrollbarPair.prototype.set=function(a,b){if(Blockly.Scrollbar===Blockly.ScrollbarNative){this.hScroll.set(a,!1);this.vScroll.set(b,!1);var c={};c.x=this.hScroll.outerDiv_.scrollLeft/this.hScroll.innerImg_.offsetWidth||0;c.y=this.vScroll.outerDiv_.scrollTop/this.vScroll.innerImg_.offsetHeight||0;this.setMetrics_(c)}else this.hScroll.set(a,!0),this.vScroll.set(b,!0)};Blockly.ScrollbarInterface=function(){};
Blockly.ScrollbarInterface.prototype.dispose=function(){};Blockly.ScrollbarInterface.prototype.resize=function(){};Blockly.ScrollbarInterface.prototype.isVisible=function(){};Blockly.ScrollbarInterface.prototype.setVisible=function(a){};Blockly.ScrollbarInterface.prototype.set=function(a,b){};
Blockly.ScrollbarNative=function(a,b,c,d,e){this.element_=a;this.getMetrics_=b;this.setMetrics_=c;this.pair_=e||!1;this.horizontal_=d;this.createDom_(a);if(null!==d){Blockly.Scrollbar.scrollbarThickness||Blockly.ScrollbarNative.measureScrollbarThickness_(a);d?(this.foreignObject_.setAttribute("height",Blockly.Scrollbar.scrollbarThickness),this.outerDiv_.style.height=Blockly.Scrollbar.scrollbarThickness+"px",this.outerDiv_.style.overflowX="scroll",this.outerDiv_.style.overflowY="hidden",this.innerImg_.style.height=
"1px"):(this.foreignObject_.setAttribute("width",Blockly.Scrollbar.scrollbarThickness),this.outerDiv_.style.width=Blockly.Scrollbar.scrollbarThickness+"px",this.outerDiv_.style.overflowX="hidden",this.outerDiv_.style.overflowY="scroll",this.innerImg_.style.width="1px");var f=this;this.onScrollWrapper_=Blockly.bindEvent_(this.outerDiv_,"scroll",f,function(){f.onScroll_()});Blockly.bindEvent_(this.foreignObject_,"mousedown",null,Blockly.noEvent);this.pair_||(this.resize(),this.onResizeWrapper_=Blockly.bindEvent_(window,
"resize",f,function(){f.resize()}))}};Blockly.ScrollbarNative.prototype.dispose=function(){Blockly.unbindEvent_(this.onResizeWrapper_);this.onResizeWrapper_=null;Blockly.unbindEvent_(this.onScrollWrapper_);this.onScrollWrapper_=null;goog.dom.removeNode(this.foreignObject_);this.innerImg_=this.outerDiv_=this.setMetrics_=this.getMetrics_=this.element_=this.foreignObject_=null};
Blockly.ScrollbarNative.prototype.resize=function(a){if(!a&&(a=this.getMetrics_(),!a))return;if(this.horizontal_){var b=a.viewWidth;this.pair_?b-=Blockly.Scrollbar.scrollbarThickness:this.setVisible(b<a.contentHeight);this.ratio_=b/a.viewWidth;var c=this.ratio_*a.contentWidth,d=(a.viewLeft-a.contentLeft)*this.ratio_;this.outerDiv_.style.width=b+"px";this.innerImg_.style.width=c+"px";this.xCoordinate=a.absoluteLeft;this.yCoordinate=a.absoluteTop+a.viewHeight-Blockly.Scrollbar.scrollbarThickness;this.foreignObject_.setAttribute("x",
this.xCoordinate);this.foreignObject_.setAttribute("y",this.yCoordinate);this.foreignObject_.setAttribute("width",Math.max(0,b));this.outerDiv_.scrollLeft=Math.round(d)}else b=a.viewHeight,this.pair_?b-=Blockly.Scrollbar.scrollbarThickness:this.setVisible(b<a.contentHeight),this.ratio_=b/a.viewHeight,c=this.ratio_*a.contentHeight,d=(a.viewTop-a.contentTop)*this.ratio_,this.outerDiv_.style.height=b+"px",this.innerImg_.style.height=c+"px",this.xCoordinate=a.absoluteLeft,this.xCoordinate+=a.viewWidth-
Blockly.Scrollbar.scrollbarThickness,this.yCoordinate=a.absoluteTop,this.foreignObject_.setAttribute("x",this.xCoordinate),this.foreignObject_.setAttribute("y",this.yCoordinate),this.foreignObject_.setAttribute("height",Math.max(0,b)),this.outerDiv_.scrollTop=Math.round(d)};
Blockly.ScrollbarNative.prototype.createDom_=function(a){this.foreignObject_=Blockly.createSvgElement("foreignObject",{},null);var b=document.createElementNS(Blockly.HTML_NS,"body");b.setAttribute("xmlns",Blockly.HTML_NS);b.setAttribute("class","blocklyMinimalBody");var c=document.createElementNS(Blockly.HTML_NS,"div");this.outerDiv_=c;var d=document.createElementNS(Blockly.HTML_NS,"img");d.setAttribute("src",Blockly.pathToBlockly+"media/1x1.gif");this.innerImg_=d;c.appendChild(d);b.appendChild(c);
this.foreignObject_.appendChild(b);Blockly.Scrollbar.insertAfter_(this.foreignObject_,a)};Blockly.ScrollbarNative.prototype.isVisible=function(){return"none"!=this.foreignObject_.style.display};Blockly.ScrollbarNative.prototype.setVisible=function(a){if(a!=this.isVisible()){if(this.pair_)throw"Unable to toggle visibility of paired scrollbars.";a?(this.foreignObject_.style.display="block",this.getMetrics_()):(this.setMetrics_({x:0,y:0}),this.foreignObject_.style.display="none")}};
Blockly.ScrollbarNative.prototype.onScroll_=function(){var a={};this.horizontal_?a.x=this.outerDiv_.scrollLeft/this.innerImg_.offsetWidth||0:a.y=this.outerDiv_.scrollTop/this.innerImg_.offsetHeight||0;this.setMetrics_(a)};
Blockly.ScrollbarNative.prototype.set=function(a,b){if(!b&&this.onScrollWrapper_)var c=Blockly.unbindEvent_(this.onScrollWrapper_);this.horizontal_?this.outerDiv_.scrollLeft=a*this.ratio_:this.outerDiv_.scrollTop=a*this.ratio_;c&&(this.onScrollWrapper_=Blockly.bindEvent_(this.outerDiv_,"scroll",this,c))};
Blockly.ScrollbarNative.measureScrollbarThickness_=function(a){a=new Blockly.ScrollbarNative(a,null,null,null,!1);a.outerDiv_.style.width="100px";a.outerDiv_.style.height="100px";a.innerImg_.style.width="100%";a.innerImg_.style.height="200px";a.foreignObject_.setAttribute("width",1);a.foreignObject_.setAttribute("height",1);a.outerDiv_.style.overflowY="scroll";var b=a.innerImg_.offsetWidth;a.outerDiv_.style.overflowY="hidden";var c=a.innerImg_.offsetWidth;goog.dom.removeNode(a.foreignObject_);a=c-
b;0>=a&&(a=15);Blockly.Scrollbar.scrollbarThickness=a};
Blockly.ScrollbarSvg=function(a,b,c,d,e){this.element_=a;this.getMetrics_=b;this.setMetrics_=c;this.pair_=e||!1;this.horizontal_=d;this.createDom_(a);d?(this.svgBackground_.setAttribute("height",Blockly.Scrollbar.scrollbarThickness),this.svgKnob_.setAttribute("height",Blockly.Scrollbar.scrollbarThickness-6),this.svgKnob_.setAttribute("y",3)):(this.svgBackground_.setAttribute("width",Blockly.Scrollbar.scrollbarThickness),this.svgKnob_.setAttribute("width",Blockly.Scrollbar.scrollbarThickness-6),this.svgKnob_.setAttribute("x",
3));var f=this;this.pair_||(this.resize(),this.onResizeWrapper_=Blockly.bindEvent_(window,"resize",f,function(){f.resize()}));this.onMouseDownBarWrapper_=Blockly.bindEvent_(this.svgBackground_,"mousedown",f,f.onMouseDownBar_);this.onMouseDownKnobWrapper_=Blockly.bindEvent_(this.svgKnob_,"mousedown",f,f.onMouseDownKnob_)};
Blockly.ScrollbarSvg.prototype.dispose=function(){this.onMouseUpKnob_();this.onResizeWrapper_&&(Blockly.unbindEvent_(this.onResizeWrapper_),this.onResizeWrapper_=null);Blockly.unbindEvent_(this.onMouseDownBarWrapper_);this.onMouseDownBarWrapper_=null;Blockly.unbindEvent_(this.onMouseDownKnobWrapper_);this.onMouseDownKnobWrapper_=null;goog.dom.removeNode(this.svgGroup_);this.setMetrics_=this.getMetrics_=this.element_=this.svgKnob_=this.svgBackground_=this.svgGroup_=null};
Blockly.ScrollbarSvg.prototype.resize=function(a){if(!a&&(a=this.getMetrics_(),!a))return;if(this.horizontal_){var b=a.viewWidth;this.pair_?b-=Blockly.Scrollbar.scrollbarThickness:this.setVisible(b<a.contentWidth);this.ratio_=b/a.contentWidth;if(-Infinity===this.ratio_||Infinity===this.ratio_||isNaN(this.ratio_))this.ratio_=0;var c=a.viewWidth*this.ratio_,d=(a.viewLeft-a.contentLeft)*this.ratio_;this.svgKnob_.setAttribute("width",Math.max(0,c));this.xCoordinate=a.absoluteLeft;this.yCoordinate=a.absoluteTop+
a.viewHeight-Blockly.Scrollbar.scrollbarThickness;this.svgGroup_.setAttribute("transform","translate("+this.xCoordinate+", "+this.yCoordinate+")");this.svgBackground_.setAttribute("width",Math.max(0,b));this.svgKnob_.setAttribute("x",this.constrainKnob_(d))}else{b=a.viewHeight;this.pair_?b-=Blockly.Scrollbar.scrollbarThickness:this.setVisible(b<a.contentHeight);this.ratio_=b/a.contentHeight;if(-Infinity===this.ratio_||Infinity===this.ratio_||isNaN(this.ratio_))this.ratio_=0;c=a.viewHeight*this.ratio_;
d=(a.viewTop-a.contentTop)*this.ratio_;this.svgKnob_.setAttribute("height",Math.max(0,c));this.xCoordinate=a.absoluteLeft;this.xCoordinate+=a.viewWidth-Blockly.Scrollbar.scrollbarThickness;this.yCoordinate=a.absoluteTop;this.svgGroup_.setAttribute("transform","translate("+this.xCoordinate+", "+this.yCoordinate+")");this.svgBackground_.setAttribute("height",Math.max(0,b));this.svgKnob_.setAttribute("y",this.constrainKnob_(d))}this.onScroll_()};
Blockly.ScrollbarSvg.prototype.createDom_=function(a){this.svgGroup_=Blockly.createSvgElement("g",{},null);this.svgBackground_=Blockly.createSvgElement("rect",{"class":"blocklyScrollbarBackground"},this.svgGroup_);var b=Math.floor((Blockly.Scrollbar.scrollbarThickness-6)/2);this.svgKnob_=Blockly.createSvgElement("rect",{"class":"blocklyScrollbarKnob",rx:b,ry:b},this.svgGroup_);Blockly.Scrollbar.insertAfter_(this.svgGroup_,a)};Blockly.ScrollbarSvg.prototype.isVisible=function(){return"none"!=this.svgGroup_.getAttribute("display")};
Blockly.ScrollbarSvg.prototype.setVisible=function(a){if(a!=this.isVisible()){if(this.pair_)throw"Unable to toggle visibility of paired scrollbars.";a?this.svgGroup_.setAttribute("display","block"):(this.setMetrics_({x:0,y:0}),this.svgGroup_.setAttribute("display","none"))}};
Blockly.ScrollbarSvg.prototype.onMouseDownBar_=function(a){Blockly.hideChaff(!0);Blockly.removeAllRanges();if(!Blockly.isRightButton(a)){Blockly.svgResize();var b=Blockly.svgSize(),b=this.horizontal_?a.x-b.left:a.y-b.top,c=Blockly.getSvgXY_(this.svgKnob_),c=this.horizontal_?c.x:c.y,d=parseFloat(this.svgKnob_.getAttribute(this.horizontal_?"width":"height")),e=parseFloat(this.svgKnob_.getAttribute(this.horizontal_?"x":"y")),f=0.95*d;b<=c?e-=f:b>=c+d&&(e+=f);this.svgKnob_.setAttribute(this.horizontal_?
"x":"y",this.constrainKnob_(e));this.onScroll_()}a.stopPropagation()};
Blockly.ScrollbarSvg.prototype.onMouseDownKnob_=function(a){Blockly.hideChaff(!0);Blockly.removeAllRanges();this.onMouseUpKnob_();Blockly.isRightButton(a)||(this.startDragKnob=parseFloat(this.svgKnob_.getAttribute(this.horizontal_?"x":"y")),this.startDragMouse=this.horizontal_?a.clientX:a.clientY,Blockly.ScrollbarSvg.onMouseUpWrapper_=Blockly.bindEvent_(document,"mouseup",this,this.onMouseUpKnob_),Blockly.ScrollbarSvg.onMouseMoveWrapper_=Blockly.bindEvent_(document,"mousemove",this,this.onMouseMoveKnob_));
a.stopPropagation()};Blockly.ScrollbarSvg.prototype.onMouseMoveKnob_=function(a){Blockly.removeAllRanges();this.svgKnob_.setAttribute(this.horizontal_?"x":"y",this.constrainKnob_(this.startDragKnob+((this.horizontal_?a.clientX:a.clientY)-this.startDragMouse)));this.onScroll_()};
Blockly.ScrollbarSvg.prototype.onMouseUpKnob_=function(){Blockly.ScrollbarSvg.onMouseUpWrapper_&&(Blockly.unbindEvent_(Blockly.ScrollbarSvg.onMouseUpWrapper_),Blockly.ScrollbarSvg.onMouseUpWrapper_=null);Blockly.ScrollbarSvg.onMouseMoveWrapper_&&(Blockly.unbindEvent_(Blockly.ScrollbarSvg.onMouseMoveWrapper_),Blockly.ScrollbarSvg.onMouseMoveWrapper_=null)};
Blockly.ScrollbarSvg.prototype.constrainKnob_=function(a){if(0>=a||isNaN(a))a=0;else{var b=this.horizontal_?"width":"height",c=parseFloat(this.svgBackground_.getAttribute(b)),b=parseFloat(this.svgKnob_.getAttribute(b));a=Math.min(a,c-b)}return a};
Blockly.ScrollbarSvg.prototype.onScroll_=function(){var a=parseFloat(this.svgKnob_.getAttribute(this.horizontal_?"x":"y")),b=parseFloat(this.svgBackground_.getAttribute(this.horizontal_?"width":"height")),a=a/b;isNaN(a)&&(a=0);b={};this.horizontal_?b.x=a:b.y=a;this.setMetrics_(b)};Blockly.ScrollbarSvg.prototype.set=function(a,b){this.svgKnob_.setAttribute(this.horizontal_?"x":"y",a*this.ratio_);if(b)this.onScroll_()};
goog.userAgent.GECKO&&(goog.userAgent.MAC||goog.userAgent.LINUX)?(Blockly.Scrollbar=Blockly.ScrollbarNative,Blockly.Scrollbar.scrollbarThickness=0):(Blockly.Scrollbar=Blockly.ScrollbarSvg,Blockly.Scrollbar.scrollbarThickness=15);Blockly.Scrollbar.insertAfter_=function(a,b){var c=b.nextSibling,d=b.parentNode;if(!d)throw"Reference node has no parent.";c?d.insertBefore(a,c):d.appendChild(a)};goog.events.EventTarget=function(){goog.Disposable.call(this);this.eventTargetListeners_={};this.actualEventTarget_=this};goog.inherits(goog.events.EventTarget,goog.Disposable);goog.events.Listenable.addImplementation(goog.events.EventTarget);goog.events.EventTarget.MAX_ANCESTORS_=1E3;goog.events.EventTarget.prototype.parentEventTarget_=null;goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_};
goog.events.EventTarget.prototype.setParentEventTarget=function(a){this.parentEventTarget_=a};goog.events.EventTarget.prototype.addEventListener=function(a,b,c,d){goog.events.listen(this,a,b,c,d)};goog.events.EventTarget.prototype.removeEventListener=function(a,b,c,d){goog.events.unlisten(this,a,b,c,d)};
goog.events.EventTarget.prototype.dispatchEvent=function(a){this.assertInitialized_();var b,c=this.getParentEventTarget();if(c){b=[];for(var d=1;c;c=c.getParentEventTarget())b.push(c),goog.asserts.assert(++d<goog.events.EventTarget.MAX_ANCESTORS_,"infinite loop")}return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,a,b)};
goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this);this.removeAllListeners();this.parentEventTarget_=null};goog.events.EventTarget.prototype.listen=function(a,b,c,d){return this.listenInternal_(a,b,!1,c,d)};goog.events.EventTarget.prototype.listenOnce=function(a,b,c,d){return this.listenInternal_(a,b,!0,c,d)};
goog.events.EventTarget.prototype.listenInternal_=function(a,b,c,d,e){this.assertInitialized_();var f=this.eventTargetListeners_[a]||(this.eventTargetListeners_[a]=[]),g=goog.events.EventTarget.findListenerIndex_(f,b,d,e);if(-1<g)return a=f[g],c||(a.callOnce=!1),a;a=new goog.events.Listener(b,null,this,a,!!d,e);a.callOnce=c;f.push(a);return a};
goog.events.EventTarget.prototype.unlisten=function(a,b,c,d){if(!(a in this.eventTargetListeners_))return!1;a=this.eventTargetListeners_[a];b=goog.events.EventTarget.findListenerIndex_(a,b,c,d);return-1<b?(a[b].removed=!0,goog.array.removeAt(a,b)):!1};goog.events.EventTarget.prototype.unlistenByKey=function(a){var b=a.type;if(!(b in this.eventTargetListeners_))return!1;if(b=goog.array.remove(this.eventTargetListeners_[b],a))a.removed=!0;return b};
goog.events.EventTarget.prototype.removeAllListeners=function(a,b){var c=0,d;for(d in this.eventTargetListeners_)if(!a||d==a){for(var e=this.eventTargetListeners_[d],f=0;f<e.length;f++)++c,e[f].removed=!0;e.length=0}return c};
goog.events.EventTarget.prototype.fireListeners=function(a,b,c){if(!(a in this.eventTargetListeners_))return!0;var d=!0;a=goog.array.clone(this.eventTargetListeners_[a]);for(var e=0;e<a.length;++e){var f=a[e];if(f&&!f.removed&&f.capture==b){var g=f.listener,k=f.handler||f.src;f.callOnce&&this.unlistenByKey(f);d=!1!==g.call(k,c)&&d}}return d&&!1!=c.returnValue_};
goog.events.EventTarget.prototype.getListeners=function(a,b){var c=this.eventTargetListeners_[a],d=[];if(c)for(var e=0;e<c.length;++e){var f=c[e];f.capture==b&&d.push(f)}return d};goog.events.EventTarget.prototype.getListener=function(a,b,c,d){a=this.eventTargetListeners_[a];var e=-1;a&&(e=goog.events.EventTarget.findListenerIndex_(a,b,c,d));return-1<e?a[e]:null};
goog.events.EventTarget.prototype.hasListener=function(a,b){var c=goog.isDef(a),d=goog.isDef(b);return goog.object.some(this.eventTargetListeners_,function(e,f){for(var g=0;g<e.length;++g)if((!c||e[g].type==a)&&(!d||e[g].capture==b))return!0;return!1})};goog.events.EventTarget.prototype.setTargetForTesting=function(a){this.actualEventTarget_=a};goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")};
goog.events.EventTarget.dispatchEventInternal_=function(a,b,c){var d=b.type||b;if(goog.isString(b))b=new goog.events.Event(b,a);else if(b instanceof goog.events.Event)b.target=b.target||a;else{var e=b;b=new goog.events.Event(d,a);goog.object.extend(b,e)}var e=!0,f;if(c)for(var g=c.length-1;!b.propagationStopped_&&0<=g;g--)f=b.currentTarget=c[g],e=f.fireListeners(d,!0,b)&&e;b.propagationStopped_||(f=b.currentTarget=a,e=f.fireListeners(d,!0,b)&&e,b.propagationStopped_||(e=f.fireListeners(d,!1,b)&&e));
if(c)for(g=0;!b.propagationStopped_&&g<c.length;g++)f=b.currentTarget=c[g],e=f.fireListeners(d,!1,b)&&e;return e};goog.events.EventTarget.findListenerIndex_=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(f.listener==b&&f.capture==!!c&&f.handler==d)return e}return-1};goog.Timer=function(a,b){goog.events.EventTarget.call(this);this.interval_=a||1;this.timerObject_=b||goog.Timer.defaultTimerObject;this.boundTick_=goog.bind(this.tick_,this);this.last_=goog.now()};goog.inherits(goog.Timer,goog.events.EventTarget);goog.Timer.MAX_TIMEOUT_=2147483647;goog.Timer.prototype.enabled=!1;goog.Timer.defaultTimerObject=goog.global;goog.Timer.intervalScale=0.8;goog.Timer.prototype.timer_=null;goog.Timer.prototype.getInterval=function(){return this.interval_};
goog.Timer.prototype.setInterval=function(a){this.interval_=a;this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()};
goog.Timer.prototype.tick_=function(){if(this.enabled){var a=goog.now()-this.last_;0<a&&a<this.interval_*goog.Timer.intervalScale?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-a):(this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null),this.dispatchTick(),this.enabled&&(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now()))}};goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)};
goog.Timer.prototype.start=function(){this.enabled=!0;this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now())};goog.Timer.prototype.stop=function(){this.enabled=!1;this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)};goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this);this.stop();delete this.timerObject_};goog.Timer.TICK="tick";
goog.Timer.callOnce=function(a,b,c){if(goog.isFunction(a))c&&(a=goog.bind(a,c));else if(a&&"function"==typeof a.handleEvent)a=goog.bind(a.handleEvent,a);else throw Error("Invalid listener argument");return b>goog.Timer.MAX_TIMEOUT_?-1:goog.Timer.defaultTimerObject.setTimeout(a,b||0)};goog.Timer.clear=function(a){goog.Timer.defaultTimerObject.clearTimeout(a)};Blockly.Trashcan=function(a){this.getMetrics_=a};Blockly.Trashcan.prototype.BODY_URL_="media/trashbody.png";Blockly.Trashcan.prototype.LID_URL_="media/trashlid.png";Blockly.Trashcan.prototype.WIDTH_=47;Blockly.Trashcan.prototype.BODY_HEIGHT_=45;Blockly.Trashcan.prototype.LID_HEIGHT_=15;Blockly.Trashcan.prototype.MARGIN_BOTTOM_=35;Blockly.Trashcan.prototype.MARGIN_SIDE_=35;Blockly.Trashcan.prototype.isOpen=!1;Blockly.Trashcan.prototype.svgGroup_=null;Blockly.Trashcan.prototype.svgBody_=null;
Blockly.Trashcan.prototype.svgLid_=null;Blockly.Trashcan.prototype.lidTask_=0;Blockly.Trashcan.prototype.lidAngle_=0;Blockly.Trashcan.prototype.left_=0;Blockly.Trashcan.prototype.top_=0;
Blockly.Trashcan.prototype.createDom=function(){this.svgGroup_=Blockly.createSvgElement("g",{filter:"url(#blocklyTrashcanShadowFilter)"},null);this.svgBody_=Blockly.createSvgElement("image",{width:this.WIDTH_,height:this.BODY_HEIGHT_},this.svgGroup_);this.svgBody_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.pathToBlockly+this.BODY_URL_);this.svgBody_.setAttribute("y",this.LID_HEIGHT_);this.svgLid_=Blockly.createSvgElement("image",{width:this.WIDTH_,height:this.LID_HEIGHT_},
this.svgGroup_);this.svgLid_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.pathToBlockly+this.LID_URL_);return this.svgGroup_};Blockly.Trashcan.prototype.init=function(){this.setOpen_(!1);this.position_();Blockly.bindEvent_(window,"resize",this,this.position_)};Blockly.Trashcan.prototype.dispose=function(){this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null);this.getMetrics_=this.svgLid_=this.svgBody_=null;goog.Timer.clear(this.lidTask_)};
Blockly.Trashcan.prototype.position_=function(){var a=this.getMetrics_();a&&(this.left_=a.viewWidth+a.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_,this.top_=a.viewHeight+a.absoluteTop-(this.BODY_HEIGHT_+this.LID_HEIGHT_)-this.MARGIN_BOTTOM_,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))};
Blockly.Trashcan.prototype.onMouseMove=function(a){if(this.svgGroup_){var b=Blockly.getAbsoluteXY_(this.svgGroup_);a=a.clientX>b.x&&a.clientX<b.x+this.WIDTH_&&a.clientY>b.y&&a.clientY<b.y+this.BODY_HEIGHT_+this.LID_HEIGHT_;this.isOpen!=a&&this.setOpen_(a)}};Blockly.Trashcan.prototype.setOpen_=function(a){this.isOpen!=a&&(goog.Timer.clear(this.lidTask_),this.isOpen=a,this.animateLid_())};
Blockly.Trashcan.prototype.animateLid_=function(){this.lidAngle_+=this.isOpen?10:-10;this.lidAngle_=Math.max(0,this.lidAngle_);this.svgLid_.setAttribute("transform","rotate("+this.lidAngle_+", "+(this.WIDTH_-4)+", "+(this.LID_HEIGHT_-2)+")");if(this.isOpen?45>this.lidAngle_:0<this.lidAngle_)this.lidTask_=goog.Timer.callOnce(this.animateLid_,5,this)};Blockly.Trashcan.prototype.close=function(){this.setOpen_(!1)};Blockly.Workspace=function(a){this.editable=a;this.topBlocks_=[];this.maxBlocks=Infinity;Blockly.ConnectionDB.init(this)};Blockly.Workspace.prototype.dragMode=!1;Blockly.Workspace.prototype.scrollX=0;Blockly.Workspace.prototype.scrollY=0;Blockly.Workspace.prototype.trashcan=null;Blockly.Workspace.prototype.fireChangeEventPid_=null;Blockly.Workspace.prototype.scrollbar=null;
Blockly.Workspace.prototype.createDom=function(){this.svgGroup_=Blockly.createSvgElement("g",{},null);this.svgBlockCanvas_=Blockly.createSvgElement("g",{},this.svgGroup_);this.svgBubbleCanvas_=Blockly.createSvgElement("g",{},this.svgGroup_);this.fireChangeEvent();return this.svgGroup_};
Blockly.Workspace.prototype.dispose=function(){this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null);this.svgBubbleCanvas_=this.svgBlockCanvas_=null;this.trashcan&&(this.trashcan.dispose(),this.trashcan=null)};Blockly.Workspace.prototype.addTrashcan=function(a){Blockly.Trashcan&&this.editable&&(this.trashcan=new Blockly.Trashcan(a),a=this.trashcan.createDom(),this.svgGroup_.insertBefore(a,this.svgBlockCanvas_),this.trashcan.init())};Blockly.Workspace.prototype.getCanvas=function(){return this.svgBlockCanvas_};
Blockly.Workspace.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_};Blockly.Workspace.prototype.addTopBlock=function(a){this.topBlocks_.push(a);this.fireChangeEvent()};Blockly.Workspace.prototype.removeTopBlock=function(a){for(var b=!1,c,d=0;c=this.topBlocks_[d];d++)if(c==a){this.topBlocks_.splice(d,1);b=!0;break}if(!b)throw"Block not present in workspace's list of top-most blocks.";this.fireChangeEvent()};
Blockly.Workspace.prototype.getTopBlocks=function(a){var b=[].concat(this.topBlocks_);a&&1<b.length&&b.sort(function(a,b){return a.getRelativeToSurfaceXY().y-b.getRelativeToSurfaceXY().y});return b};Blockly.Workspace.prototype.getAllBlocks=function(){for(var a=this.getTopBlocks(!1),b=0;b<a.length;b++)a=a.concat(a[b].getChildren());return a};Blockly.Workspace.prototype.clear=function(){for(Blockly.hideChaff();this.topBlocks_.length;)this.topBlocks_[0].dispose()};
Blockly.Workspace.prototype.render=function(){for(var a=this.getAllBlocks(),b=0,c;c=a[b];b++)c.getChildren().length||c.render()};Blockly.Workspace.prototype.getBlockById=function(a){for(var b=this.getAllBlocks(),c=0,d;d=b[c];c++)if(d.id==a)return d;return null};
Blockly.Workspace.prototype.traceOn=function(a){this.traceOn_=a;this.traceWrapper_&&(Blockly.unbindEvent_(this.traceWrapper_),this.traceWrapper_=null);a&&(this.traceWrapper_=Blockly.bindEvent_(this.svgBlockCanvas_,"blocklySelectChange",this,function(){this.traceOn_=!1}))};Blockly.Workspace.prototype.highlightBlock=function(a){if(this.traceOn_){var b=null;if(a&&(b=this.getBlockById(a),!b))return;this.traceOn(!1);b?b.select():Blockly.selected&&Blockly.selected.unselect();this.traceOn(!0)}};
Blockly.Workspace.prototype.fireChangeEvent=function(){this.fireChangeEventPid_&&window.clearTimeout(this.fireChangeEventPid_);var a=this.svgBlockCanvas_;a&&(this.fireChangeEventPid_=window.setTimeout(function(){Blockly.fireUiEvent(a,"blocklyWorkspaceChange")},0))};
Blockly.Workspace.prototype.paste=function(a){if(!(a.getElementsByTagName("block").length>=this.remainingCapacity())){var b=Blockly.Xml.domToBlock_(this,a),c=parseInt(a.getAttribute("x"),10);a=parseInt(a.getAttribute("y"),10);if(!isNaN(c)&&!isNaN(a)){do for(var d=!1,e=this.getAllBlocks(),f=0,g;g=e[f];f++)g=g.getRelativeToSurfaceXY(),1>=Math.abs(c-g.x)&&1>=Math.abs(a-g.y)&&(c+=Blockly.SNAP_RADIUS,a+=2*Blockly.SNAP_RADIUS,d=!0);while(d);b.moveBy(c,a)}b.select()}};
Blockly.Workspace.prototype.remainingCapacity=function(){return Infinity==this.maxBlocks?Infinity:this.maxBlocks-this.getAllBlocks().length};goog.color={};
goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};goog.math={};goog.math.randomInt=function(a){return Math.floor(Math.random()*a)};goog.math.uniformRandom=function(a,b){return a+Math.random()*(b-a)};goog.math.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)};goog.math.modulo=function(a,b){var c=a%b;return 0>c*b?c+b:c};goog.math.lerp=function(a,b,c){return a+c*(b-a)};goog.math.nearlyEquals=function(a,b,c){return Math.abs(a-b)<=(c||1E-6)};goog.math.standardAngle=function(a){return goog.math.modulo(a,360)};
goog.math.toRadians=function(a){return a*Math.PI/180};goog.math.toDegrees=function(a){return 180*a/Math.PI};goog.math.angleDx=function(a,b){return b*Math.cos(goog.math.toRadians(a))};goog.math.angleDy=function(a,b){return b*Math.sin(goog.math.toRadians(a))};goog.math.angle=function(a,b,c,d){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(d-b,c-a)))};goog.math.angleDifference=function(a,b){var c=goog.math.standardAngle(b)-goog.math.standardAngle(a);180<c?c-=360:-180>=c&&(c=360+c);return c};
goog.math.sign=function(a){return 0==a?0:0>a?-1:1};goog.math.longestCommonSubsequence=function(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b,c){return a[b]};for(var e=a.length,f=b.length,g=[],k=0;k<e+1;k++)g[k]=[],g[k][0]=0;for(var l=0;l<f+1;l++)g[0][l]=0;for(k=1;k<=e;k++)for(l=1;l<=f;l++)c(a[k-1],b[l-1])?g[k][l]=g[k-1][l-1]+1:g[k][l]=Math.max(g[k-1][l],g[k][l-1]);for(var m=[],k=e,l=f;0<k&&0<l;)c(a[k-1],b[l-1])?(m.unshift(d(k-1,l-1)),k--,l--):g[k-1][l]>g[k][l-1]?k--:l--;return m};
goog.math.sum=function(a){return goog.array.reduce(arguments,function(a,c){return a+c},0)};goog.math.average=function(a){return goog.math.sum.apply(null,arguments)/arguments.length};goog.math.standardDeviation=function(a){var b=arguments.length;if(2>b)return 0;var c=goog.math.average.apply(null,arguments),b=goog.math.sum.apply(null,goog.array.map(arguments,function(a){return Math.pow(a-c,2)}))/(b-1);return Math.sqrt(b)};goog.math.isInt=function(a){return isFinite(a)&&0==a%1};
goog.math.isFiniteNumber=function(a){return isFinite(a)&&!isNaN(a)};goog.math.safeFloor=function(a,b){goog.asserts.assert(!goog.isDef(b)||0<b);return Math.floor(a+(b||2E-15))};goog.math.safeCeil=function(a,b){goog.asserts.assert(!goog.isDef(b)||0<b);return Math.ceil(a-(b||2E-15))};goog.color.parse=function(a){var b={};a=String(a);var c=goog.color.prependHashIfNecessaryHelper(a);if(goog.color.isValidHexColor_(c))return b.hex=goog.color.normalizeHex(c),b.type="hex",b;c=goog.color.isValidRgbColor_(a);if(c.length)return b.hex=goog.color.rgbArrayToHex(c),b.type="rgb",b;if(goog.color.names&&(c=goog.color.names[a.toLowerCase()]))return b.hex=c,b.type="named",b;throw Error(a+" is not a valid color string");};
goog.color.isValidColor=function(a){var b=goog.color.prependHashIfNecessaryHelper(a);return!(!goog.color.isValidHexColor_(b)&&!(goog.color.isValidRgbColor_(a).length||goog.color.names&&goog.color.names[a.toLowerCase()]))};goog.color.parseRgb=function(a){var b=goog.color.isValidRgbColor_(a);if(!b.length)throw Error(a+" is not a valid RGB color");return b};goog.color.hexToRgbStyle=function(a){return goog.color.rgbStyle_(goog.color.hexToRgb(a))};goog.color.hexTripletRe_=/#(.)(.)(.)/;
goog.color.normalizeHex=function(a){if(!goog.color.isValidHexColor_(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3"));return a.toLowerCase()};goog.color.hexToRgb=function(a){a=goog.color.normalizeHex(a);var b=parseInt(a.substr(1,2),16),c=parseInt(a.substr(3,2),16);a=parseInt(a.substr(5,2),16);return[b,c,a]};
goog.color.rgbToHex=function(a,b,c){a=Number(a);b=Number(b);c=Number(c);if(isNaN(a)||0>a||255<a||isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c)throw Error('"('+a+","+b+","+c+'") is not a valid RGB color');a=goog.color.prependZeroIfNecessaryHelper(a.toString(16));b=goog.color.prependZeroIfNecessaryHelper(b.toString(16));c=goog.color.prependZeroIfNecessaryHelper(c.toString(16));return"#"+a+b+c};goog.color.rgbArrayToHex=function(a){return goog.color.rgbToHex(a[0],a[1],a[2])};
goog.color.rgbToHsl=function(a,b,c){a/=255;b/=255;c/=255;var d=Math.max(a,b,c),e=Math.min(a,b,c),f=0,g=0,k=0.5*(d+e);d!=e&&(d==a?f=60*(b-c)/(d-e):d==b?f=60*(c-a)/(d-e)+120:d==c&&(f=60*(a-b)/(d-e)+240),g=0<k&&0.5>=k?(d-e)/(2*k):(d-e)/(2-2*k));return[Math.round(f+360)%360,g,k]};goog.color.rgbArrayToHsl=function(a){return goog.color.rgbToHsl(a[0],a[1],a[2])};goog.color.hueToRgb_=function(a,b,c){0>c?c+=1:1<c&&(c-=1);return 1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a};
goog.color.hslToRgb=function(a,b,c){var d=0,e=0,f=0;a/=360;if(0==b)d=e=f=255*c;else var g=f=0,g=0.5>c?c*(1+b):c+b-b*c,f=2*c-g,d=255*goog.color.hueToRgb_(f,g,a+1/3),e=255*goog.color.hueToRgb_(f,g,a),f=255*goog.color.hueToRgb_(f,g,a-1/3);return[Math.round(d),Math.round(e),Math.round(f)]};goog.color.hslArrayToRgb=function(a){return goog.color.hslToRgb(a[0],a[1],a[2])};goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;goog.color.isValidHexColor_=function(a){return goog.color.validHexColorRe_.test(a)};
goog.color.normalizedHexColorRe_=/^#[0-9a-f]{6}$/;goog.color.isNormalizedHexColor_=function(a){return goog.color.normalizedHexColorRe_.test(a)};goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;goog.color.isValidRgbColor_=function(a){var b=a.match(goog.color.rgbColorRe_);if(b){a=Number(b[1]);var c=Number(b[2]),b=Number(b[3]);if(0<=a&&255>=a&&0<=c&&255>=c&&0<=b&&255>=b)return[a,c,b]}return[]};
goog.color.prependZeroIfNecessaryHelper=function(a){return 1==a.length?"0"+a:a};goog.color.prependHashIfNecessaryHelper=function(a){return"#"==a.charAt(0)?a:"#"+a};goog.color.rgbStyle_=function(a){return"rgb("+a.join(",")+")"};
goog.color.hsvToRgb=function(a,b,c){var d=0,e=0,f=0;if(0==b)f=e=d=c;else{var g=Math.floor(a/60),k=a/60-g;a=c*(1-b);var l=c*(1-b*k);b=c*(1-b*(1-k));switch(g){case 1:d=l;e=c;f=a;break;case 2:d=a;e=c;f=b;break;case 3:d=a;e=l;f=c;break;case 4:d=b;e=a;f=c;break;case 5:d=c;e=a;f=l;break;case 6:case 0:d=c,e=b,f=a}}return[Math.floor(d),Math.floor(e),Math.floor(f)]};
goog.color.rgbToHsv=function(a,b,c){var d=Math.max(Math.max(a,b),c),e=Math.min(Math.min(a,b),c);if(e==d)e=a=0;else{var f=d-e,e=f/d;a=60*(a==d?(b-c)/f:b==d?2+(c-a)/f:4+(a-b)/f);0>a&&(a+=360);360<a&&(a-=360)}return[a,e,d]};goog.color.rgbArrayToHsv=function(a){return goog.color.rgbToHsv(a[0],a[1],a[2])};goog.color.hsvArrayToRgb=function(a){return goog.color.hsvToRgb(a[0],a[1],a[2])};goog.color.hexToHsl=function(a){a=goog.color.hexToRgb(a);return goog.color.rgbToHsl(a[0],a[1],a[2])};
goog.color.hslToHex=function(a,b,c){return goog.color.rgbArrayToHex(goog.color.hslToRgb(a,b,c))};goog.color.hslArrayToHex=function(a){return goog.color.rgbArrayToHex(goog.color.hslToRgb(a[0],a[1],a[2]))};goog.color.hexToHsv=function(a){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(a))};goog.color.hsvToHex=function(a,b,c){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(a,b,c))};goog.color.hsvArrayToHex=function(a){return goog.color.hsvToHex(a[0],a[1],a[2])};
goog.color.hslDistance=function(a,b){var c,d;c=0.5>=a[2]?a[1]*a[2]:a[1]*(1-a[2]);d=0.5>=b[2]?b[1]*b[2]:b[1]*(1-b[2]);return(a[2]-b[2])*(a[2]-b[2])+c*c+d*d-2*c*d*Math.cos(2*(a[0]/360-b[0]/360)*Math.PI)};goog.color.blend=function(a,b,c){c=goog.math.clamp(c,0,1);return[Math.round(c*a[0]+(1-c)*b[0]),Math.round(c*a[1]+(1-c)*b[1]),Math.round(c*a[2]+(1-c)*b[2])]};goog.color.darken=function(a,b){return goog.color.blend([0,0,0],a,b)};
goog.color.lighten=function(a,b){return goog.color.blend([255,255,255],a,b)};goog.color.highContrast=function(a,b){for(var c=[],d=0;d<b.length;d++)c.push({color:b[d],diff:goog.color.yiqBrightnessDiff_(b[d],a)+goog.color.colorDiff_(b[d],a)});c.sort(function(a,b){return b.diff-a.diff});return c[0].color};goog.color.yiqBrightness_=function(a){return Math.round((299*a[0]+587*a[1]+114*a[2])/1E3)};goog.color.yiqBrightnessDiff_=function(a,b){return Math.abs(goog.color.yiqBrightness_(a)-goog.color.yiqBrightness_(b))};
goog.color.colorDiff_=function(a,b){return Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])+Math.abs(a[2]-b[2])};Blockly.BlockSvg=function(a){this.block_=a;this.svgGroup_=Blockly.createSvgElement("g",{},null);this.svgSlotsGroup_=Blockly.createSvgElement("g",{"class":"blocklySlotsGroup"},this.svgGroup_);this.svgSlots_=[];this.svgPathDark_=Blockly.createSvgElement("path",{"class":"blocklyPathDark",transform:"translate(1, 1)"},this.svgGroup_);this.svgPath_=Blockly.createSvgElement("path",{"class":"blocklyPath"},this.svgGroup_);this.svgPathLight_=Blockly.createSvgElement("path",{"class":"blocklyPathLight"},this.svgGroup_);
this.svgPath_.tooltip=this.block_;Blockly.Tooltip&&Blockly.Tooltip.bindMouseEvents(this.svgPath_);a.editable&&Blockly.addClass_(this.svgGroup_,"blocklyDraggable")};Blockly.BlockSvg.DEFAULT_INPUT_COLOR="#999999";Blockly.BlockSvg.INLINE=-1;Blockly.BlockSvg.prototype.init=function(){var a=this.block_;this.updateColour();for(var b=0,c;c=a.inputList[b];b++)c.init();a.mutator&&a.mutator.createIcon()};Blockly.BlockSvg.prototype.getRootElement=function(){return this.svgGroup_};
Blockly.BlockSvg.prototype.getRootSlotsElement=function(){return this.svgSlotsGroup_};Blockly.BlockSvg.SEP_SPACE_X=10;Blockly.BlockSvg.SEP_SPACE_Y=5;Blockly.BlockSvg.MIN_BLOCK_Y=25;Blockly.BlockSvg.TAB_HEIGHT=20;Blockly.BlockSvg.TAB_WIDTH=8;Blockly.BlockSvg.NOTCH_WIDTH=30;Blockly.BlockSvg.CORNER_RADIUS=8;Blockly.BlockSvg.TITLE_HEIGHT=18;Blockly.BlockSvg.DISTANCE_45_INSIDE=(1-Math.SQRT1_2)*(Blockly.BlockSvg.CORNER_RADIUS-1)+1;
Blockly.BlockSvg.DISTANCE_45_OUTSIDE=(1-Math.SQRT1_2)*(Blockly.BlockSvg.CORNER_RADIUS+1)-1;Blockly.BlockSvg.NOTCH_PATH_LEFT="l 6,4 3,0 6,-4";Blockly.BlockSvg.NOTCH_PATH_LEFT_HIGHLIGHT="l 6.5,4 2,0 6.5,-4";Blockly.BlockSvg.NOTCH_PATH_RIGHT="l -6,4 -3,0 -6,-4";Blockly.BlockSvg.JAGGED_TEETH="l 8,0 0,4 8,4 -16,8 8,4";Blockly.BlockSvg.TAB_PATH_DOWN="v 5 c 0,10 -"+Blockly.BlockSvg.TAB_WIDTH+",-8 -"+Blockly.BlockSvg.TAB_WIDTH+",7.5 s "+Blockly.BlockSvg.TAB_WIDTH+",-2.5 "+Blockly.BlockSvg.TAB_WIDTH+",7.5";
Blockly.BlockSvg.TAB_PATH_DOWN_HIGHLIGHT_RTL="v 6.5 m -"+0.98*Blockly.BlockSvg.TAB_WIDTH+",2.5 q -"+0.05*Blockly.BlockSvg.TAB_WIDTH+",10 "+0.27*Blockly.BlockSvg.TAB_WIDTH+",10 m "+0.71*Blockly.BlockSvg.TAB_WIDTH+",-2.5 v 1.5";Blockly.BlockSvg.TOP_LEFT_CORNER_START="m 0,"+Blockly.BlockSvg.CORNER_RADIUS;Blockly.BlockSvg.TOP_LEFT_CORNER_START_HIGHLIGHT_RTL="m "+Blockly.BlockSvg.DISTANCE_45_INSIDE+","+Blockly.BlockSvg.DISTANCE_45_INSIDE;
Blockly.BlockSvg.TOP_LEFT_CORNER_START_HIGHLIGHT_LTR="m 1,"+(Blockly.BlockSvg.CORNER_RADIUS-1);Blockly.BlockSvg.TOP_LEFT_CORNER="A "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,1 "+Blockly.BlockSvg.CORNER_RADIUS+",0";Blockly.BlockSvg.TOP_LEFT_CORNER_HIGHLIGHT="A "+(Blockly.BlockSvg.CORNER_RADIUS-1)+","+(Blockly.BlockSvg.CORNER_RADIUS-1)+" 0 0,1 "+Blockly.BlockSvg.CORNER_RADIUS+",1";
Blockly.BlockSvg.INNER_TOP_LEFT_CORNER=Blockly.BlockSvg.NOTCH_PATH_RIGHT+" h -"+(Blockly.BlockSvg.NOTCH_WIDTH-15-Blockly.BlockSvg.CORNER_RADIUS)+" a "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,0 -"+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS;Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER="a "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,0 "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS;
Blockly.BlockSvg.INNER_TOP_LEFT_CORNER_HIGHLIGHT_RTL="a "+(Blockly.BlockSvg.CORNER_RADIUS+1)+","+(Blockly.BlockSvg.CORNER_RADIUS+1)+" 0 0,0 "+(-Blockly.BlockSvg.DISTANCE_45_OUTSIDE-1)+","+(Blockly.BlockSvg.CORNER_RADIUS-Blockly.BlockSvg.DISTANCE_45_OUTSIDE);Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER_HIGHLIGHT_RTL="a "+(Blockly.BlockSvg.CORNER_RADIUS+1)+","+(Blockly.BlockSvg.CORNER_RADIUS+1)+" 0 0,0 "+(Blockly.BlockSvg.CORNER_RADIUS+1)+","+(Blockly.BlockSvg.CORNER_RADIUS+1);
Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER_HIGHLIGHT_LTR="a "+(Blockly.BlockSvg.CORNER_RADIUS+1)+","+(Blockly.BlockSvg.CORNER_RADIUS+1)+" 0 0,0 "+(Blockly.BlockSvg.CORNER_RADIUS-Blockly.BlockSvg.DISTANCE_45_OUTSIDE)+","+(Blockly.BlockSvg.DISTANCE_45_OUTSIDE+1);Blockly.BlockSvg.prototype.dispose=function(){goog.dom.removeNode(this.svgGroup_);this.block_=this.svgPathDark_=this.svgPathLight_=this.svgPath_=this.svgSlotsGroup_=this.svgGroup_=null};
Blockly.BlockSvg.prototype.disposeUiEffect=function(){Blockly.playAudio("delete");var a=Blockly.getSvgXY_(this.svgGroup_),b=this.svgGroup_.cloneNode(!0);b.translateX_=a.x;b.translateY_=a.y;b.setAttribute("transform","translate("+b.translateX_+","+b.translateY_+")");Blockly.svg.appendChild(b);b.bBox_=b.getBBox();b.startDate_=new Date;Blockly.BlockSvg.disposeUiStep_(b)};
Blockly.BlockSvg.disposeUiStep_=function(a){var b=(new Date-a.startDate_)/150;1<b?goog.dom.removeNode(a):(a.setAttribute("transform","translate("+(a.translateX_+1*a.bBox_.width/2*b+", "+(a.translateY_+a.bBox_.height*b))+") scale("+(1-b)+")"),window.setTimeout(function(){Blockly.BlockSvg.disposeUiStep_(a)},10))};
Blockly.BlockSvg.prototype.connectionUiEffect=function(){Blockly.playAudio("click");var a=Blockly.getSvgXY_(this.svgGroup_);this.block_.outputConnection?(a.x+=-3,a.y+=13):this.block_.previousConnection&&(a.x+=23,a.y+=3);a=Blockly.createSvgElement("circle",{cx:a.x,cy:a.y,r:0,fill:"none",stroke:"#888","stroke-width":10},Blockly.svg);a.startDate_=new Date;Blockly.BlockSvg.connectionUiStep_(a)};
Blockly.BlockSvg.connectionUiStep_=function(a){var b=(new Date-a.startDate_)/150;1<b?goog.dom.removeNode(a):(a.setAttribute("r",25*b),a.style.opacity=1-b,window.setTimeout(function(){Blockly.BlockSvg.connectionUiStep_(a)},10))};
Blockly.BlockSvg.prototype.updateColour=function(){var a=Blockly.makeColour(this.block_.getColour()),b=goog.color.hexToRgb(a),c=goog.color.lighten(b,0.3),b=goog.color.darken(b,0.4);this.svgPathLight_.setAttribute("stroke",goog.color.rgbArrayToHex(c));this.svgPathDark_.setAttribute("fill",goog.color.rgbArrayToHex(b));this.svgPath_.setAttribute("fill",a)};
Blockly.BlockSvg.prototype.updateDisabled=function(){this.block_.disabled||this.block_.getInheritedDisabled()?(Blockly.addClass_(this.svgGroup_,"blocklyDisabled"),this.svgPath_.setAttribute("fill","url(#blocklyDisabledPattern)")):(Blockly.removeClass_(this.svgGroup_,"blocklyDisabled"),this.updateColour());for(var a=this.block_.getChildren(),b=0,c;c=a[b];b++)c.svg_.updateDisabled()};Blockly.BlockSvg.prototype.addEvalHighlight=function(){Blockly.addClass_(this.svgGroup_,"blocklyEvaluated");this.svgGroup_.parentNode.appendChild(this.svgGroup_)};
Blockly.BlockSvg.prototype.removeEvalHighlight=function(){Blockly.removeClass_(this.svgGroup_,"blocklyEvaluated")};Blockly.BlockSvg.prototype.addSelect=function(){Blockly.addClass_(this.svgGroup_,"blocklySelected");this.svgGroup_.parentNode.appendChild(this.svgGroup_)};Blockly.BlockSvg.prototype.removeSelect=function(){Blockly.removeClass_(this.svgGroup_,"blocklySelected")};Blockly.BlockSvg.prototype.addDragging=function(){Blockly.addClass_(this.svgGroup_,"blocklyDragging")};
Blockly.BlockSvg.prototype.removeDragging=function(){Blockly.removeClass_(this.svgGroup_,"blocklyDragging")};
Blockly.BlockSvg.prototype.render=function(){this.block_.rendered=!0;var a=Blockly.BlockSvg.SEP_SPACE_X;this.block_.mutator&&(a=this.block_.mutator.renderIcon(a));this.block_.comment&&(a=this.block_.comment.renderIcon(a));this.block_.warning&&(a=this.block_.warning.renderIcon(a));var a=a+-Blockly.BlockSvg.SEP_SPACE_X,b=this.block_.renderAsExpression_?this.renderComputeExpression_(a):this.renderCompute_(a);this.renderDraw_(a,b);(a=this.block_.getParent())?a.render():Blockly.fireUiEvent(window,"resize")};
Blockly.BlockSvg.prototype.renderTitles_=function(a,b,c){for(var d=0,e;e=a[d];d++){var f=e.getSize().width;e.getRootElement().setAttribute("transform","translate("+b+", "+c+")");f&&(b+=f+Blockly.BlockSvg.SEP_SPACE_X)}return b};
Blockly.BlockSvg.prototype.renderDraw_=function(a,b){if(this.block_.outputConnection)this.squareBottomLeftCorner_=this.squareTopLeftCorner_=!0;else{this.squareBottomLeftCorner_=this.squareTopLeftCorner_=!1;if(this.block_.previousConnection){var c=this.block_.previousConnection.targetBlock();c&&(c.nextConnection&&c.nextConnection.targetConnection==this.block_.previousConnection)&&(this.squareTopLeftCorner_=!0)}if(this.block_.nextConnection&&(c=this.block_.nextConnection.targetBlock())&&c.previousConnection&&
c.previousConnection.targetConnection==this.block_.nextConnection)this.squareBottomLeftCorner_=!0}var d=this.block_.getRelativeToSurfaceXY(),e=[],f=[];goog.dom.removeChildren(this.svgSlotsGroup_);var c=[],g=[];this.renderDrawTop_(e,c,d,b.rightEdge);var k=this.block_.renderAsExpression_?this.renderDrawRightExpression_(e,c,f,g,d,b,a):this.renderDrawRight_(e,c,f,g,d,b,a);this.renderDrawBottom_(e,c,d,k);this.renderDrawLeft_(e,c,d,k);d=e.join(" ")+"\n"+f.join(" ");this.svgPath_.setAttribute("d",d);this.svgPathDark_.setAttribute("d",
d);d=c.join(" ")+"\n"+g.join(" ");this.svgPathLight_.setAttribute("d",d)};
Blockly.BlockSvg.prototype.renderDrawTop_=function(a,b,c,d){this.squareTopLeftCorner_?(a.push("m 0,0"),b.push("m 1,1")):(a.push(Blockly.BlockSvg.TOP_LEFT_CORNER_START),b.push(Blockly.BlockSvg.TOP_LEFT_CORNER_START_HIGHLIGHT_LTR),a.push(Blockly.BlockSvg.TOP_LEFT_CORNER),b.push(Blockly.BlockSvg.TOP_LEFT_CORNER_HIGHLIGHT));this.block_.previousConnection&&(a.push("H",Blockly.BlockSvg.NOTCH_WIDTH-15),b.push("H",Blockly.BlockSvg.NOTCH_WIDTH-15),a.push(Blockly.BlockSvg.NOTCH_PATH_LEFT),b.push(Blockly.BlockSvg.NOTCH_PATH_LEFT_HIGHLIGHT),
this.block_.previousConnection.moveTo(c.x+Blockly.BlockSvg.NOTCH_WIDTH,c.y));a.push("H",d);b.push("H",d+0)};
Blockly.BlockSvg.prototype.renderDrawBottom_=function(a,b,c,d){this.block_.nextConnection&&(a.push("H",Blockly.BlockSvg.NOTCH_WIDTH+" "+Blockly.BlockSvg.NOTCH_PATH_RIGHT),this.block_.nextConnection.moveTo(c.x+Blockly.BlockSvg.NOTCH_WIDTH,c.y+d+1),this.block_.nextConnection.targetConnection&&this.block_.nextConnection.tighten_());this.squareBottomLeftCorner_?(a.push("H 0"),b.push("M","1,"+d)):(a.push("H",Blockly.BlockSvg.CORNER_RADIUS),a.push("a",Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+
" 0 0,1 -"+Blockly.BlockSvg.CORNER_RADIUS+",-"+Blockly.BlockSvg.CORNER_RADIUS))};
Blockly.BlockSvg.prototype.renderDrawLeft_=function(a,b,c,d){this.block_.outputConnection?(this.block_.outputConnection.moveTo(c.x,c.y),a.push("V",Blockly.BlockSvg.TAB_HEIGHT),a.push("c 0,-10 -"+Blockly.BlockSvg.TAB_WIDTH+",8 -"+Blockly.BlockSvg.TAB_WIDTH+",-7.5 s "+Blockly.BlockSvg.TAB_WIDTH+",2.5 "+Blockly.BlockSvg.TAB_WIDTH+",-7.5"),b.push("V",Blockly.BlockSvg.TAB_HEIGHT-1),b.push("m",-0.92*Blockly.BlockSvg.TAB_WIDTH+",-1 q "+-0.19*Blockly.BlockSvg.TAB_WIDTH+",-5.5 0,-11"),b.push("m",0.92*Blockly.BlockSvg.TAB_WIDTH+
",1 V 1 H 2")):this.squareTopLeftCorner_&&b.push("V",1);a.push("z")};
Blockly.BlockSvg.prototype.renderDrawRight_=function(a,b,c,d,e,f,g){for(var k,l=0,m,p,q=0,t;t=f[q];q++){k=Blockly.BlockSvg.SEP_SPACE_X;0==q&&(k+=g);b.push("M",f.rightEdge-1+","+(l+1));if(t.type==Blockly.BlockSvg.INLINE){for(var D=0,C;C=t[D];D++)m=l+Blockly.BlockSvg.TITLE_HEIGHT,t.thicker&&(m+=Blockly.BlockSvg.SEP_SPACE_Y),k=this.renderTitles_(C.titleRow,k,m),C.type!=Blockly.DUMMY_INPUT&&(k+=C.renderWidth+Blockly.BlockSvg.SEP_SPACE_X),C.type==Blockly.INPUT_VALUE&&(m=[],m.push("M",k-Blockly.BlockSvg.SEP_SPACE_X+
","+(l+Blockly.BlockSvg.SEP_SPACE_Y)),m.push("h",Blockly.BlockSvg.TAB_WIDTH-C.renderWidth),m.push(Blockly.BlockSvg.TAB_PATH_DOWN),m.push("v",C.renderHeight-Blockly.BlockSvg.TAB_HEIGHT),m.push("h",C.renderWidth-Blockly.BlockSvg.TAB_WIDTH),m.push("z"),Array.prototype.push.apply(c,m),C.getType()?(p=C.getType(),p=Blockly.Ray_.Shared.getTypeColour(p),p=Blockly.makeColour(p)):p=Blockly.BlockSvg.DEFAULT_INPUT_COLOR,m=Blockly.createSvgElement("path",{mask:"url(#blocklySlotMask)",fill:p,"fill-opacity":1,d:m.join(" "),
"class":"blocklyInputSlot"},this.svgSlotsGroup_),this.svgSlots_.push(m),d.push("M",k-Blockly.BlockSvg.SEP_SPACE_X+1+","+(l+Blockly.BlockSvg.SEP_SPACE_Y+1)),d.push("v",C.renderHeight),d.push("h",Blockly.BlockSvg.TAB_WIDTH-C.renderWidth),d.push("M",k-C.renderWidth-Blockly.BlockSvg.SEP_SPACE_X+3.8+","+(l+Blockly.BlockSvg.SEP_SPACE_Y+Blockly.BlockSvg.TAB_HEIGHT-0.4)),d.push("l",0.42*Blockly.BlockSvg.TAB_WIDTH+",-1.8"),m=e.x+k+Blockly.BlockSvg.TAB_WIDTH-Blockly.BlockSvg.SEP_SPACE_X-C.renderWidth+1,p=e.y+
l+Blockly.BlockSvg.SEP_SPACE_Y,C.connection.moveTo(m,p),C.connection.targetConnection&&C.connection.tighten_());k=Math.max(k,f.rightEdge);a.push("H",k);b.push("H",k+0);a.push("v",t.height)}else if(t.type==Blockly.INPUT_VALUE)C=t[0],m=l+Blockly.BlockSvg.TITLE_HEIGHT,C.align!=Blockly.ALIGN_LEFT&&(D=f.rightEdge-C.titleWidth-Blockly.BlockSvg.TAB_WIDTH-2*Blockly.BlockSvg.SEP_SPACE_X,C.align==Blockly.ALIGN_RIGHT?k+=D:C.align==Blockly.ALIGN_CENTRE&&(k+=(D+k)/2)),this.renderTitles_(C.titleRow,k,m),a.push(Blockly.BlockSvg.TAB_PATH_DOWN),
a.push("v",t.height-Blockly.BlockSvg.TAB_HEIGHT),b.push("M",f.rightEdge-4.2+","+(l+Blockly.BlockSvg.TAB_HEIGHT-0.4)),b.push("l",0.42*Blockly.BlockSvg.TAB_WIDTH+",-1.8"),m=e.x+(f.rightEdge+1),p=e.y+l,C.connection.moveTo(m,p),C.connection.targetConnection&&C.connection.tighten_();else if(t.type==Blockly.DUMMY_INPUT)C=t[0],m=l+Blockly.BlockSvg.TITLE_HEIGHT,C.align!=Blockly.ALIGN_LEFT&&(D=f.rightEdge-C.titleWidth-2*Blockly.BlockSvg.SEP_SPACE_X,f.hasValue&&(D-=Blockly.BlockSvg.TAB_WIDTH),C.align==Blockly.ALIGN_RIGHT?
k+=D:C.align==Blockly.ALIGN_CENTRE&&(k+=(D+k)/2)),this.renderTitles_(C.titleRow,k,m),a.push("v",t.height);else if(t.type==Blockly.NEXT_STATEMENT&&(C=t[0],0==q&&(a.push("v",Blockly.BlockSvg.SEP_SPACE_Y),l+=Blockly.BlockSvg.SEP_SPACE_Y),m=l+Blockly.BlockSvg.TITLE_HEIGHT,C.align!=Blockly.ALIGN_LEFT&&(D=f.statementEdge-C.titleWidth-2*Blockly.BlockSvg.SEP_SPACE_X,C.align==Blockly.ALIGN_RIGHT?k+=D:C.align==Blockly.ALIGN_CENTRE&&(k+=(D+k)/2)),this.renderTitles_(C.titleRow,k,m),k=f.statementEdge+Blockly.BlockSvg.NOTCH_WIDTH,
a.push("H",k),a.push(Blockly.BlockSvg.INNER_TOP_LEFT_CORNER),a.push("v",t.height-2*Blockly.BlockSvg.CORNER_RADIUS),a.push(Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER),a.push("H",f.rightEdge),b.push("M",k-Blockly.BlockSvg.NOTCH_WIDTH+Blockly.BlockSvg.DISTANCE_45_OUTSIDE+","+(l+t.height-Blockly.BlockSvg.DISTANCE_45_OUTSIDE)),b.push(Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER_HIGHLIGHT_LTR),b.push("H",f.rightEdge),m=e.x+k,p=e.y+l+1,C.connection.moveTo(m,p),C.connection.targetConnection&&C.connection.tighten_(),
q==f.length-1||f[q+1].type==Blockly.NEXT_STATEMENT))a.push("v",Blockly.BlockSvg.SEP_SPACE_Y),l+=Blockly.BlockSvg.SEP_SPACE_Y;l+=t.height}f.length||(this.block_.collapsed&&(a.push(Blockly.BlockSvg.JAGGED_TEETH),b.push("h 8")),l=Blockly.BlockSvg.MIN_BLOCK_Y,a.push("V",l));return l};
Blockly.BlockSvg.prototype.renderCompute_=function(a){var b=this.block_.inputList,c=[];c.rightEdge=a+2*Blockly.BlockSvg.SEP_SPACE_X;if(this.block_.previousConnection||this.block_.nextConnection)c.rightEdge=Math.max(c.rightEdge,Blockly.BlockSvg.NOTCH_WIDTH+Blockly.BlockSvg.SEP_SPACE_X);if(this.block_.collapsed)return c;for(var d=0,e=0,f=!1,g=!1,k=!1,l=void 0,m=0,p;p=b[m];m++){var q;!this.block_.inputsInline||!l||l==Blockly.NEXT_STATEMENT||p.type==Blockly.NEXT_STATEMENT?(l=p.type,q=[],q.type=this.block_.inputsInline&&
p.type!=Blockly.NEXT_STATEMENT?Blockly.BlockSvg.INLINE:p.type,q.height=0,c.push(q)):q=c[c.length-1];q.push(p);p.renderHeight=Blockly.BlockSvg.MIN_BLOCK_Y;p.renderWidth=this.block_.inputsInline&&p.type==Blockly.INPUT_VALUE?Blockly.BlockSvg.TAB_WIDTH+Blockly.BlockSvg.SEP_SPACE_X:0;if(p.connection&&p.connection.targetConnection){var t=p.connection.targetBlock().getSvgRoot();try{var D=t.getBBox()}catch(C){D={height:0,width:0}}goog.userAgent.WEBKIT&&(D.height-=3);p.renderHeight=Math.max(p.renderHeight,
D.height-1);p.renderWidth=Math.max(p.renderWidth,D.width)}q.height=Math.max(q.height,p.renderHeight);p.titleWidth=0;1==c.length&&(p.titleWidth+=a);for(var t=0,T;T=p.titleRow[t];t++)0!=t&&(p.titleWidth+=Blockly.BlockSvg.SEP_SPACE_X),T=T.getSize(),p.titleWidth+=T.width,q.height=Math.max(q.height,T.height);q.type!=Blockly.BlockSvg.INLINE&&(q.type==Blockly.NEXT_STATEMENT?(g=!0,e=Math.max(e,p.titleWidth)):(q.type==Blockly.INPUT_VALUE?f=!0:q.type==Blockly.DUMMY_INPUT&&(k=!0),d=Math.max(d,p.titleWidth)))}for(a=
0;q=c[a];a++)if(q.thicker=!1,this.block_.inputsInline&&q.type==Blockly.BlockSvg.INLINE)for(b=0;p=q[b];b++)if(p.type==Blockly.INPUT_VALUE){q.height+=2*Blockly.BlockSvg.SEP_SPACE_Y;q.thicker=!0;break}c.statementEdge=2*Blockly.BlockSvg.SEP_SPACE_X+e;g&&(c.rightEdge=Math.max(c.rightEdge,c.statementEdge+Blockly.BlockSvg.NOTCH_WIDTH));f?c.rightEdge=Math.max(c.rightEdge,d+2*Blockly.BlockSvg.SEP_SPACE_X+Blockly.BlockSvg.TAB_WIDTH):k&&(c.rightEdge=Math.max(c.rightEdge,d+2*Blockly.BlockSvg.SEP_SPACE_X));c.hasValue=
f;c.hasStatement=g;c.hasDummy=k;return c};
Blockly.BlockSvg.prototype.renderComputeExpression_=function(a){var b=this.block_.inputList,c=[];c.rightEdge=a+2*Blockly.BlockSvg.SEP_SPACE_X;if(this.block_.previousConnection||this.block_.nextConnection)c.rightEdge=Math.max(c.rightEdge,Blockly.BlockSvg.NOTCH_WIDTH+Blockly.BlockSvg.SEP_SPACE_X);if(this.block_.collapsed)return c;for(var d=0,e=0,f=!1,g=!1,k=!1,l=void 0,m=!1,p=0,q;q=b[p];p++){var t;!this.block_.inputsInline||!l||l==Blockly.NEXT_STATEMENT||q.type==Blockly.NEXT_STATEMENT||q.__title__||
m?(l=q.type,m=q.__title__,t=[],t.type=this.block_.inputsInline&&q.type!=Blockly.NEXT_STATEMENT?Blockly.BlockSvg.INLINE:q.type,t.height=0,c.push(t)):t=c[c.length-1];t.push(q);q.renderHeight=Blockly.BlockSvg.MIN_BLOCK_Y;q.renderWidth=this.block_.inputsInline&&q.type==Blockly.INPUT_VALUE?Blockly.BlockSvg.TAB_WIDTH+Blockly.BlockSvg.SEP_SPACE_X:0;if(q.connection&&q.connection.targetConnection){var D=q.connection.targetBlock().getSvgRoot();try{var C=D.getBBox()}catch(T){C={height:0,width:0}}goog.userAgent.WEBKIT&&
(C.height-=3);q.renderHeight=Math.max(q.renderHeight,C.height-1);q.renderWidth=Math.max(q.renderWidth,C.width)}t.height=Math.max(t.height,q.renderHeight);q.titleWidth=0;1==c.length&&(q.titleWidth+=a);for(var D=0,ba;ba=q.titleRow[D];D++)0!=D&&(q.titleWidth+=Blockly.BlockSvg.SEP_SPACE_X),ba=ba.getSize(),q.titleWidth+=ba.width,t.height=Math.max(t.height,ba.height);t.type!=Blockly.BlockSvg.INLINE&&(t.type==Blockly.NEXT_STATEMENT?(g=!0,e=Math.max(e,q.titleWidth)):(t.type==Blockly.INPUT_VALUE?f=!0:t.type==
Blockly.DUMMY_INPUT&&(k=!0),d=Math.max(d,q.titleWidth)))}for(a=0;t=c[a];a++)if(t.thicker=!1,this.block_.inputsInline&&t.type==Blockly.BlockSvg.INLINE)for(b=0;q=t[b];b++)if(q.type==Blockly.INPUT_VALUE){t.height+=2*Blockly.BlockSvg.SEP_SPACE_Y;t.thicker=!0;break}c.statementEdge=2*Blockly.BlockSvg.SEP_SPACE_X+e;g&&(c.rightEdge=Math.max(c.rightEdge,c.statementEdge+Blockly.BlockSvg.NOTCH_WIDTH));f?c.rightEdge=Math.max(c.rightEdge,d+2*Blockly.BlockSvg.SEP_SPACE_X+Blockly.BlockSvg.TAB_WIDTH):k&&(c.rightEdge=
Math.max(c.rightEdge,d+2*Blockly.BlockSvg.SEP_SPACE_X));c.hasValue=f;c.hasStatement=g;c.hasDummy=k;return c};
Blockly.BlockSvg.prototype.renderDrawRightExpression_=function(a,b,c,d,e,f,g){for(var k,l=0,m,p,q,t=0,D=[],C=0,T;T=f[C];C++){k=Blockly.BlockSvg.SEP_SPACE_X;0==C&&(k+=g,b.push("M",f.rightEdge-1+","+(l+1)));if(T.type==Blockly.BlockSvg.INLINE){for(var ba=0,J;J=T[ba];ba++)m=l+Blockly.BlockSvg.TITLE_HEIGHT,T.thicker&&(m+=Blockly.BlockSvg.SEP_SPACE_Y),k=this.renderTitles_(J.titleRow,k,m),J.type!=Blockly.DUMMY_INPUT&&(k+=J.renderWidth+Blockly.BlockSvg.SEP_SPACE_X),J.type==Blockly.INPUT_VALUE&&(m=[],m.push("M",
k-Blockly.BlockSvg.SEP_SPACE_X+","+(l+Blockly.BlockSvg.SEP_SPACE_Y)),m.push("h",Blockly.BlockSvg.TAB_WIDTH-J.renderWidth),m.push(Blockly.BlockSvg.TAB_PATH_DOWN),m.push("v",J.renderHeight-Blockly.BlockSvg.TAB_HEIGHT),m.push("h",J.renderWidth-Blockly.BlockSvg.TAB_WIDTH),m.push("z"),Array.prototype.push.apply(c,m),J.getType()?(p=J.getType(),p=Blockly.Ray_.Shared.getTypeColour(p),p=Blockly.makeColour(p)):p=Blockly.BlockSvg.DEFAULT_INPUT_COLOR,m=Blockly.createSvgElement("path",{mask:"url(#blocklySlotMask)",
fill:p,"fill-opacity":1,d:m.join(" "),"class":"blocklyInputSlot"},this.svgSlotsGroup_),this.svgSlots_.push(m),d.push("M",k-Blockly.BlockSvg.SEP_SPACE_X+1+","+(l+Blockly.BlockSvg.SEP_SPACE_Y+1)),d.push("v",J.renderHeight),d.push("h",Blockly.BlockSvg.TAB_WIDTH-J.renderWidth),d.push("M",k-J.renderWidth-Blockly.BlockSvg.SEP_SPACE_X+3.8+","+(l+Blockly.BlockSvg.SEP_SPACE_Y+Blockly.BlockSvg.TAB_HEIGHT-0.4)),d.push("l",0.42*Blockly.BlockSvg.TAB_WIDTH+",-1.8"),m=e.x+k+Blockly.BlockSvg.TAB_WIDTH-Blockly.BlockSvg.SEP_SPACE_X-
J.renderWidth+1,p=e.y+l+Blockly.BlockSvg.SEP_SPACE_Y,J.connection.moveTo(m,p),J.connection.targetConnection&&J.connection.tighten_());k=Math.max(k,f.rightEdge);k>t&&(t=k);D.push(a.length);a.push("H",k);0==C&&(q=b.length,b.push("H",k+0));a.push("v",T.height)}l+=T.height}goog.array.forEach(D,function(b){a[b+1]=t});b[q+1]=t;f.length||(this.block_.collapsed&&(a.push(Blockly.BlockSvg.JAGGED_TEETH),b.push("h 8")),l=Blockly.BlockSvg.MIN_BLOCK_Y,a.push("V",l));return l};Blockly.Field=function(a){this.sourceBlock_=null;this.group_=Blockly.createSvgElement("g",{},null);this.borderRect_=Blockly.createSvgElement("rect",{rx:4,ry:4,x:-Blockly.BlockSvg.SEP_SPACE_X/2,y:-12,height:16},this.group_);this.textElement_=Blockly.createSvgElement("text",{"class":"blocklyText"},this.group_);this.CURSOR&&(this.group_.style.cursor=this.CURSOR);this.size_={height:25,width:0};this.setText(a)};Blockly.Field.NBSP="\u00a0";Blockly.Field.prototype.EDITABLE=!0;
Blockly.Field.prototype.init=function(a){if(this.sourceBlock_)throw"Field has already been initialized once.";this.sourceBlock_=a;this.group_.setAttribute("class",a.editable?"blocklyEditableText":"blocklyNonEditableText");a.getSvgRoot().appendChild(this.group_);a.editable&&(this.mouseUpWrapper_=Blockly.bindEvent_(this.group_,"mouseup",this,this.onMouseUp_));this.setText(null)};
Blockly.Field.prototype.dispose=function(){this.mouseUpWrapper_&&(Blockly.unbindEvent_(this.mouseUpWrapper_),this.mouseUpWrapper_=null);this.sourceBlock_=null;goog.dom.removeNode(this.group_);this.borderRect_=this.textElement_=this.group_=null};Blockly.Field.prototype.setVisible=function(a){this.getRootElement().style.display=a?"block":"none"};Blockly.Field.prototype.getRootElement=function(){return this.group_};
Blockly.Field.prototype.render_=function(){var a=this.textElement_.getComputedTextLength();this.borderRect_&&this.borderRect_.setAttribute("width",a+Blockly.BlockSvg.SEP_SPACE_X);this.size_.width=a};Blockly.Field.prototype.getSize=function(){this.size_.width||this.render_();return this.size_};Blockly.Field.prototype.getText=function(){return this.text_};
Blockly.Field.prototype.setText=function(a){null!==a&&(this.text_=a,goog.dom.removeChildren(this.textElement_),a=a.replace(/\s/g,Blockly.Field.NBSP),a||(a=Blockly.Field.NBSP),a=document.createTextNode(a),this.textElement_.appendChild(a),this.size_.width=0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_(),this.sourceBlock_.workspace.fireChangeEvent()))};Blockly.Field.prototype.getValue=function(){return this.getText()};
Blockly.Field.prototype.setValue=function(a){this.setText(a)};Blockly.Field.prototype.onMouseUp_=function(a){Blockly.isRightButton(a)||2!=Blockly.Block.dragMode_&&this.showEditor_()};Blockly.Field.prototype.setTooltip=function(a){};Blockly.FieldDropdown=function(a,b){this.menuGenerator_=a;this.changeHandler_=b;this.trimOptions_();var c=this.getOptions_()[0];this.value_=c[1];this.arrow_=Blockly.createSvgElement("tspan",{},null);this.arrow_.appendChild(document.createTextNode(" \u25be"));Blockly.FieldDropdown.superClass_.constructor.call(this,c[0])};goog.inherits(Blockly.FieldDropdown,Blockly.Field);
Blockly.FieldDropdown.createDom=function(){var a=Blockly.createSvgElement("g",{"class":"blocklyHidden blocklyFieldDropdown"},null);Blockly.FieldDropdown.svgGroup_=a;Blockly.FieldDropdown.svgShadow_=Blockly.createSvgElement("rect",{"class":"blocklyDropdownMenuShadow",x:0,y:1,rx:2,ry:2},a);Blockly.FieldDropdown.svgBackground_=Blockly.createSvgElement("rect",{x:-2,y:-1,rx:2,ry:2,filter:"url(#blocklyEmboss)"},a);Blockly.FieldDropdown.svgOptions_=Blockly.createSvgElement("g",{"class":"blocklyDropdownMenuOptions"},
a);return a};Blockly.FieldDropdown.prototype.dispose=function(){Blockly.FieldDropdown.openDropdown_==this&&Blockly.FieldDropdown.hide();Blockly.Field.prototype.dispose.call(this)};Blockly.FieldDropdown.CORNER_RADIUS=2;Blockly.FieldDropdown.prototype.CURSOR="default";Blockly.FieldDropdown.openDropdown_=null;
Blockly.FieldDropdown.prototype.showEditor_=function(){function a(a){return function(b){if(this.changeHandler_){var c=this.changeHandler_(a);void 0!==c&&(a=c)}null!==a&&this.setValue(a);b.stopPropagation()}}var b=Blockly.FieldDropdown.svgGroup_,c=Blockly.FieldDropdown.svgOptions_,d=Blockly.FieldDropdown.svgBackground_,e=Blockly.FieldDropdown.svgShadow_;goog.dom.removeChildren(c);Blockly.removeClass_(b,"blocklyHidden");Blockly.FieldDropdown.openDropdown_=this;for(var f=0,g=[],k=null,l=this.getOptions_(),
m=0;m<l.length;m++){var p=l[m][1],q=Blockly.ContextMenu.optionToDom(l[m][0]),t=q.firstChild,D=q.lastChild;c.appendChild(q);!k&&p==this.value_&&(k=Blockly.createSvgElement("text",{"class":"blocklyMenuText",y:15},null),q.insertBefore(k,D),k.appendChild(document.createTextNode("\u2713")));q.setAttribute("transform","translate(0, "+m*Blockly.ContextMenu.Y_HEIGHT+")");g.push(t);Blockly.bindEvent_(q,"mousedown",null,Blockly.noEvent);Blockly.bindEvent_(q,"mouseup",this,a(p));Blockly.bindEvent_(q,"mouseup",
null,Blockly.FieldDropdown.hide);f=Math.max(f,D.getComputedTextLength())}f+=2*Blockly.ContextMenu.X_PADDING;for(m=0;m<g.length;m++)g[m].setAttribute("width",f);k&&k.setAttribute("x",5);m=f+2*Blockly.FieldDropdown.CORNER_RADIUS;l=l.length*Blockly.ContextMenu.Y_HEIGHT+Blockly.FieldDropdown.CORNER_RADIUS+1;e.setAttribute("width",m);e.setAttribute("height",l);d.setAttribute("width",m);d.setAttribute("height",l);e=Blockly.makeColour(this.sourceBlock_.getColour());d.setAttribute("fill",e);d=Blockly.getSvgXY_(this.borderRect_);
e=this.borderRect_.getBBox();m=d.x-Blockly.ContextMenu.X_PADDING+Blockly.BlockSvg.SEP_SPACE_X/2;b.setAttribute("transform","translate("+m+", "+(d.y+e.height)+")")};
Blockly.FieldDropdown.prototype.trimOptions_=function(){this.suffixTitle=this.prefixTitle=null;var a=this.menuGenerator_;if(goog.isArray(a)&&!(2>a.length)){var b=a.map(function(a){return a[0]}),c=Blockly.shortestStringLength(b),d=Blockly.commonWordPrefix(b,c),e=Blockly.commonWordSuffix(b,c);if((d||e)&&!(c<=d+e)){d&&(this.prefixTitle=b[0].substring(0,d-1));e&&(this.suffixTitle=b[0].substr(1-e));b=[];for(c=0;c<a.length;c++){var f=a[c][0],g=a[c][1],f=f.substring(d,f.length-e);b[c]=[f,g]}this.menuGenerator_=
b}}};Blockly.FieldDropdown.prototype.getOptions_=function(){return goog.isFunction(this.menuGenerator_)?this.menuGenerator_.call(this):this.menuGenerator_};Blockly.FieldDropdown.prototype.getValue=function(){return this.value_};Blockly.FieldDropdown.prototype.setValue=function(a){this.value_=a;for(var b=this.getOptions_(),c=0;c<b.length;c++)if(b[c][1]==a){this.setText(b[c][0]);return}this.setText(a)};
Blockly.FieldDropdown.prototype.setText=function(a){this.sourceBlock_&&(this.arrow_.style.fill=Blockly.makeColour(this.sourceBlock_.getColour()));null!==a&&(this.text_=a,goog.dom.removeChildren(this.textElement_),a=a.replace(/\s/g,Blockly.Field.NBSP),a||(a=Blockly.Field.NBSP),a=document.createTextNode(a),this.textElement_.appendChild(a),this.textElement_.appendChild(this.arrow_),this.size_.width=0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_(),
this.sourceBlock_.workspace.fireChangeEvent()))};Blockly.FieldDropdown.hide=function(){var a=Blockly.FieldDropdown.svgGroup_;a&&Blockly.addClass_(a,"blocklyHidden");Blockly.FieldDropdown.openDropdown_=null};goog.string.StringBuffer=function(a,b){null!=a&&this.append.apply(this,arguments)};goog.string.StringBuffer.prototype.buffer_="";goog.string.StringBuffer.prototype.set=function(a){this.buffer_=""+a};goog.string.StringBuffer.prototype.append=function(a,b,c){this.buffer_+=a;if(null!=b)for(var d=1;d<arguments.length;d++)this.buffer_+=arguments[d];return this};goog.string.StringBuffer.prototype.clear=function(){this.buffer_=""};goog.string.StringBuffer.prototype.getLength=function(){return this.buffer_.length};
goog.string.StringBuffer.prototype.toString=function(){return this.buffer_};goog.dom={};goog.dom.classes={};goog.dom.classes.set=function(a,b){a.className=b};goog.dom.classes.get=function(a){a=a.className;return goog.isString(a)&&a.match(/\S+/g)||[]};goog.dom.classes.add=function(a,b){var c=goog.dom.classes.get(a),d=goog.array.slice(arguments,1),e=c.length+d.length;goog.dom.classes.add_(c,d);goog.dom.classes.set(a,c.join(" "));return c.length==e};
goog.dom.classes.remove=function(a,b){var c=goog.dom.classes.get(a),d=goog.array.slice(arguments,1),e=goog.dom.classes.getDifference_(c,d);goog.dom.classes.set(a,e.join(" "));return e.length==c.length-d.length};goog.dom.classes.add_=function(a,b){for(var c=0;c<b.length;c++)goog.array.contains(a,b[c])||a.push(b[c])};goog.dom.classes.getDifference_=function(a,b){return goog.array.filter(a,function(a){return!goog.array.contains(b,a)})};
goog.dom.classes.swap=function(a,b,c){for(var d=goog.dom.classes.get(a),e=!1,f=0;f<d.length;f++)d[f]==b&&(goog.array.splice(d,f--,1),e=!0);e&&(d.push(c),goog.dom.classes.set(a,d.join(" ")));return e};goog.dom.classes.addRemove=function(a,b,c){var d=goog.dom.classes.get(a);goog.isString(b)?goog.array.remove(d,b):goog.isArray(b)&&(d=goog.dom.classes.getDifference_(d,b));goog.isString(c)&&!goog.array.contains(d,c)?d.push(c):goog.isArray(c)&&goog.dom.classes.add_(d,c);goog.dom.classes.set(a,d.join(" "))};
goog.dom.classes.has=function(a,b){return goog.array.contains(goog.dom.classes.get(a),b)};goog.dom.classes.enable=function(a,b,c){c?goog.dom.classes.add(a,b):goog.dom.classes.remove(a,b)};goog.dom.classes.toggle=function(a,b){var c=!goog.dom.classes.has(a,b);goog.dom.classes.enable(a,b,c);return c};goog.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDI:"BDI",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",COMMAND:"COMMAND",DATA:"DATA",DATALIST:"DATALIST",DD:"DD",DEL:"DEL",DETAILS:"DETAILS",DFN:"DFN",DIALOG:"DIALOG",DIR:"DIR",DIV:"DIV",
DL:"DL",DT:"DT",EM:"EM",EMBED:"EMBED",FIELDSET:"FIELDSET",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FONT:"FONT",FOOTER:"FOOTER",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HEADER:"HEADER",HGROUP:"HGROUP",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",KEYGEN:"KEYGEN",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MARK:"MARK",MATH:"MATH",MENU:"MENU",META:"META",METER:"METER",
NAV:"NAV",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",OUTPUT:"OUTPUT",P:"P",PARAM:"PARAM",PRE:"PRE",PROGRESS:"PROGRESS",Q:"Q",RP:"RP",RT:"RT",RUBY:"RUBY",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SECTION:"SECTION",SELECT:"SELECT",SMALL:"SMALL",SOURCE:"SOURCE",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUMMARY:"SUMMARY",SUP:"SUP",SVG:"SVG",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",
TIME:"TIME",TITLE:"TITLE",TR:"TR",TRACK:"TRACK",TT:"TT",U:"U",UL:"UL",VAR:"VAR",VIDEO:"VIDEO",WBR:"WBR"};goog.math.Size=function(a,b){this.width=a;this.height=b};goog.math.Size.equals=function(a,b){return a==b?!0:!a||!b?!1:a.width==b.width&&a.height==b.height};goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)};goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"});goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)};
goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)};goog.math.Size.prototype.area=function(){return this.width*this.height};goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)};goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height};goog.math.Size.prototype.isEmpty=function(){return!this.area()};goog.math.Size.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
goog.math.Size.prototype.fitsInside=function(a){return this.width<=a.width&&this.height<=a.height};goog.math.Size.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Size.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Size.prototype.scale=function(a,b){var c=goog.isNumber(b)?b:a;this.width*=a;this.height*=c;return this};
goog.math.Size.prototype.scaleToFit=function(a){a=this.aspectRatio()>a.aspectRatio()?a.width/this.width:a.height/this.height;return this.scale(a)};goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE};goog.math.Coordinate=function(a,b){this.x=goog.isDef(a)?a:0;this.y=goog.isDef(b)?b:0};goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)};goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"});goog.math.Coordinate.equals=function(a,b){return a==b?!0:!a||!b?!1:a.x==b.x&&a.y==b.y};goog.math.Coordinate.distance=function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)};
goog.math.Coordinate.magnitude=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)};goog.math.Coordinate.azimuth=function(a){return goog.math.angle(0,0,a.x,a.y)};goog.math.Coordinate.squaredDistance=function(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d};goog.math.Coordinate.difference=function(a,b){return new goog.math.Coordinate(a.x-b.x,a.y-b.y)};goog.math.Coordinate.sum=function(a,b){return new goog.math.Coordinate(a.x+b.x,a.y+b.y)};
goog.math.Coordinate.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};goog.math.Coordinate.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};goog.math.Coordinate.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};goog.math.Coordinate.prototype.translate=function(a,b){a instanceof goog.math.Coordinate?(this.x+=a.x,this.y+=a.y):(this.x+=a,goog.isNumber(b)&&(this.y+=b));return this};
goog.math.Coordinate.prototype.scale=function(a,b){var c=goog.isNumber(b)?b:a;this.x*=a;this.y*=c;return this};goog.dom.ASSUME_QUIRKS_MODE=!1;goog.dom.ASSUME_STANDARDS_MODE=!1;goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE;goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.dom.getDomHelper=function(a){return a?new goog.dom.DomHelper(goog.dom.getOwnerDocument(a)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)};
goog.dom.getDocument=function(){return document};goog.dom.getElement=function(a){return goog.isString(a)?document.getElementById(a):a};goog.dom.$=goog.dom.getElement;goog.dom.getElementsByTagNameAndClass=function(a,b,c){return goog.dom.getElementsByTagNameAndClass_(document,a,b,c)};
goog.dom.getElementsByClass=function(a,b){var c=b||document;return goog.dom.canUseQuerySelector_(c)?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):goog.dom.getElementsByTagNameAndClass_(document,"*",a,b)};goog.dom.getElementByClass=function(a,b){var c=b||document,d=null;return(d=goog.dom.canUseQuerySelector_(c)?c.querySelector("."+a):goog.dom.getElementsByClass(a,b)[0])||null};goog.dom.canUseQuerySelector_=function(a){return!(!a.querySelectorAll||!a.querySelector)};
goog.dom.getElementsByTagNameAndClass_=function(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(goog.dom.canUseQuerySelector_(a)&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,f=0,g;g=a[f];f++)b==g.nodeName&&(d[e++]=g);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(f=e=0;g=a[f];f++)b=g.className,"function"==typeof b.split&&goog.array.contains(b.split(/\s+/),c)&&(d[e++]=g);d.length=
e;return d}return a};goog.dom.$$=goog.dom.getElementsByTagNameAndClass;goog.dom.setProperties=function(a,b){goog.object.forEach(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in goog.dom.DIRECT_ATTRIBUTE_MAP_?a.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[d],b):goog.string.startsWith(d,"aria-")||goog.string.startsWith(d,"data-")?a.setAttribute(d,b):a[d]=b})};
goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};goog.dom.getViewportSize=function(a){return goog.dom.getViewportSize_(a||window)};goog.dom.getViewportSize_=function(a){a=a.document;a=goog.dom.isCss1CompatMode_(a)?a.documentElement:a.body;return new goog.math.Size(a.clientWidth,a.clientHeight)};
goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)};goog.dom.getDocumentHeight_=function(a){var b=a.document,c=0;if(b){a=goog.dom.getViewportSize_(a).height;var c=b.body,d=b.documentElement;if(goog.dom.isCss1CompatMode_(b)&&d.scrollHeight)c=d.scrollHeight!=a?d.scrollHeight:d.offsetHeight;else{var b=d.scrollHeight,e=d.offsetHeight;d.clientHeight!=e&&(b=c.scrollHeight,e=c.offsetHeight);c=b>a?b>e?b:e:b<e?b:e}}return c};
goog.dom.getPageScroll=function(a){return goog.dom.getDomHelper((a||goog.global||window).document).getDocumentScroll()};goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)};
goog.dom.getDocumentScroll_=function(a){var b=goog.dom.getDocumentScrollElement_(a);a=goog.dom.getWindow_(a);return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&a.pageYOffset!=b.scrollTop?new goog.math.Coordinate(b.scrollLeft,b.scrollTop):new goog.math.Coordinate(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)};goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)};
goog.dom.getDocumentScrollElement_=function(a){return!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(a)?a.documentElement:a.body};goog.dom.getWindow=function(a){return a?goog.dom.getWindow_(a):window};goog.dom.getWindow_=function(a){return a.parentWindow||a.defaultView};goog.dom.createDom=function(a,b,c){return goog.dom.createDom_(document,arguments)};
goog.dom.createDom_=function(a,b){var c=b[0],d=b[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',goog.string.htmlEscape(d.name),'"');if(d.type){c.push(' type="',goog.string.htmlEscape(d.type),'"');var e={};goog.object.extend(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(goog.isString(d)?c.className=d:goog.isArray(d)?goog.dom.classes.add.apply(null,[c].concat(d)):goog.dom.setProperties(c,d));2<b.length&&
goog.dom.append_(a,c,b,2);return c};goog.dom.append_=function(a,b,c,d){function e(c){c&&b.appendChild(goog.isString(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];goog.isArrayLike(f)&&!goog.dom.isNodeLike(f)?goog.array.forEach(goog.dom.isNodeList(f)?goog.array.toArray(f):f,e):e(f)}};goog.dom.$dom=goog.dom.createDom;goog.dom.createElement=function(a){return document.createElement(a)};goog.dom.createTextNode=function(a){return document.createTextNode(String(a))};
goog.dom.createTable=function(a,b,c){return goog.dom.createTable_(document,a,b,!!c)};goog.dom.createTable_=function(a,b,c,d){for(var e=["<tr>"],f=0;f<c;f++)e.push(d?"<td>&nbsp;</td>":"<td></td>");e.push("</tr>");e=e.join("");c=["<table>"];for(f=0;f<b;f++)c.push(e);c.push("</table>");a=a.createElement(goog.dom.TagName.DIV);a.innerHTML=c.join("");return a.removeChild(a.firstChild)};goog.dom.htmlToDocumentFragment=function(a){return goog.dom.htmlToDocumentFragment_(document,a)};
goog.dom.htmlToDocumentFragment_=function(a,b){var c=a.createElement("div");goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(c.innerHTML="<br>"+b,c.removeChild(c.firstChild)):c.innerHTML=b;if(1==c.childNodes.length)return c.removeChild(c.firstChild);for(var d=a.createDocumentFragment();c.firstChild;)d.appendChild(c.firstChild);return d};goog.dom.getCompatMode=function(){return goog.dom.isCss1CompatMode()?"CSS1Compat":"BackCompat"};goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)};
goog.dom.isCss1CompatMode_=function(a){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==a.compatMode};goog.dom.canHaveChildren=function(a){if(a.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(a.tagName){case goog.dom.TagName.APPLET:case goog.dom.TagName.AREA:case goog.dom.TagName.BASE:case goog.dom.TagName.BR:case goog.dom.TagName.COL:case goog.dom.TagName.COMMAND:case goog.dom.TagName.EMBED:case goog.dom.TagName.FRAME:case goog.dom.TagName.HR:case goog.dom.TagName.IMG:case goog.dom.TagName.INPUT:case goog.dom.TagName.IFRAME:case goog.dom.TagName.ISINDEX:case goog.dom.TagName.KEYGEN:case goog.dom.TagName.LINK:case goog.dom.TagName.NOFRAMES:case goog.dom.TagName.NOSCRIPT:case goog.dom.TagName.META:case goog.dom.TagName.OBJECT:case goog.dom.TagName.PARAM:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.SOURCE:case goog.dom.TagName.STYLE:case goog.dom.TagName.TRACK:case goog.dom.TagName.WBR:return!1}return!0};
goog.dom.appendChild=function(a,b){a.appendChild(b)};goog.dom.append=function(a,b){goog.dom.append_(goog.dom.getOwnerDocument(a),a,arguments,1)};goog.dom.removeChildren=function(a){for(var b;b=a.firstChild;)a.removeChild(b)};goog.dom.insertSiblingBefore=function(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)};goog.dom.insertSiblingAfter=function(a,b){b.parentNode&&b.parentNode.insertBefore(a,b.nextSibling)};goog.dom.insertChildAt=function(a,b,c){a.insertBefore(b,a.childNodes[c]||null)};
goog.dom.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null};goog.dom.replaceNode=function(a,b){var c=b.parentNode;c&&c.replaceChild(a,b)};goog.dom.flattenElement=function(a){var b,c=a.parentNode;if(c&&c.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(a.removeNode)return a.removeNode(!1);for(;b=a.firstChild;)c.insertBefore(b,a);return goog.dom.removeNode(a)}};
goog.dom.getChildren=function(a){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&void 0!=a.children?a.children:goog.array.filter(a.childNodes,function(a){return a.nodeType==goog.dom.NodeType.ELEMENT})};goog.dom.getFirstElementChild=function(a){return void 0!=a.firstElementChild?a.firstElementChild:goog.dom.getNextElementNode_(a.firstChild,!0)};goog.dom.getLastElementChild=function(a){return void 0!=a.lastElementChild?a.lastElementChild:goog.dom.getNextElementNode_(a.lastChild,!1)};
goog.dom.getNextElementSibling=function(a){return void 0!=a.nextElementSibling?a.nextElementSibling:goog.dom.getNextElementNode_(a.nextSibling,!0)};goog.dom.getPreviousElementSibling=function(a){return void 0!=a.previousElementSibling?a.previousElementSibling:goog.dom.getNextElementNode_(a.previousSibling,!1)};goog.dom.getNextElementNode_=function(a,b){for(;a&&a.nodeType!=goog.dom.NodeType.ELEMENT;)a=b?a.nextSibling:a.previousSibling;return a};
goog.dom.getNextNode=function(a){if(!a)return null;if(a.firstChild)return a.firstChild;for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null};goog.dom.getPreviousNode=function(a){if(!a)return null;if(!a.previousSibling)return a.parentNode;for(a=a.previousSibling;a&&a.lastChild;)a=a.lastChild;return a};goog.dom.isNodeLike=function(a){return goog.isObject(a)&&0<a.nodeType};goog.dom.isElement=function(a){return goog.isObject(a)&&a.nodeType==goog.dom.NodeType.ELEMENT};
goog.dom.isWindow=function(a){return goog.isObject(a)&&a.window==a};goog.dom.getParentElement=function(a){if(goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY&&(!goog.userAgent.IE||(!goog.userAgent.isVersionOrHigher("9")||goog.userAgent.isVersionOrHigher("10"))||!(goog.global.SVGElement&&a instanceof goog.global.SVGElement)))return a.parentElement;a=a.parentNode;return goog.dom.isElement(a)?a:null};
goog.dom.contains=function(a,b){if(a.contains&&b.nodeType==goog.dom.NodeType.ELEMENT)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};
goog.dom.compareNodeOrder=function(a,b){if(a==b)return 0;if(a.compareDocumentPosition)return a.compareDocumentPosition(b)&2?1:-1;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(a.nodeType==goog.dom.NodeType.DOCUMENT)return-1;if(b.nodeType==goog.dom.NodeType.DOCUMENT)return 1}if("sourceIndex"in a||a.parentNode&&"sourceIndex"in a.parentNode){var c=a.nodeType==goog.dom.NodeType.ELEMENT,d=b.nodeType==goog.dom.NodeType.ELEMENT;if(c&&d)return a.sourceIndex-b.sourceIndex;var e=a.parentNode,
f=b.parentNode;return e==f?goog.dom.compareSiblingOrder_(a,b):!c&&goog.dom.contains(e,b)?-1*goog.dom.compareParentsDescendantNodeIe_(a,b):!d&&goog.dom.contains(f,a)?goog.dom.compareParentsDescendantNodeIe_(b,a):(c?a.sourceIndex:e.sourceIndex)-(d?b.sourceIndex:f.sourceIndex)}d=goog.dom.getOwnerDocument(a);c=d.createRange();c.selectNode(a);c.collapse(!0);d=d.createRange();d.selectNode(b);d.collapse(!0);return c.compareBoundaryPoints(goog.global.Range.START_TO_END,d)};
goog.dom.compareParentsDescendantNodeIe_=function(a,b){var c=a.parentNode;if(c==b)return-1;for(var d=b;d.parentNode!=c;)d=d.parentNode;return goog.dom.compareSiblingOrder_(d,a)};goog.dom.compareSiblingOrder_=function(a,b){for(var c=b;c=c.previousSibling;)if(c==a)return-1;return 1};
goog.dom.findCommonAncestor=function(a){var b,c=arguments.length;if(c){if(1==c)return arguments[0]}else return null;var d=[],e=Infinity;for(b=0;b<c;b++){for(var f=[],g=arguments[b];g;)f.unshift(g),g=g.parentNode;d.push(f);e=Math.min(e,f.length)}f=null;for(b=0;b<e;b++){for(var g=d[0][b],k=1;k<c;k++)if(g!=d[k][b])return f;f=g}return f};goog.dom.getOwnerDocument=function(a){return a.nodeType==goog.dom.NodeType.DOCUMENT?a:a.ownerDocument||a.document};
goog.dom.getFrameContentDocument=function(a){return a.contentDocument||a.contentWindow.document};goog.dom.getFrameContentWindow=function(a){return a.contentWindow||goog.dom.getWindow_(goog.dom.getFrameContentDocument(a))};
goog.dom.setTextContent=function(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&a.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{goog.dom.removeChildren(a);var c=goog.dom.getOwnerDocument(a);a.appendChild(c.createTextNode(String(b)))}};goog.dom.getOuterHtml=function(a){if("outerHTML"in a)return a.outerHTML;var b=goog.dom.getOwnerDocument(a).createElement("div");b.appendChild(a.cloneNode(!0));return b.innerHTML};
goog.dom.findNode=function(a,b){var c=[];return goog.dom.findNodes_(a,b,c,!0)?c[0]:void 0};goog.dom.findNodes=function(a,b){var c=[];goog.dom.findNodes_(a,b,c,!1);return c};goog.dom.findNodes_=function(a,b,c,d){if(null!=a)for(a=a.firstChild;a;){if(b(a)&&(c.push(a),d)||goog.dom.findNodes_(a,b,c,d))return!0;a=a.nextSibling}return!1};goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};
goog.dom.isFocusableTabIndex=function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,goog.isNumber(a)&&0<=a&&32768>a):!1};goog.dom.setFocusableTabIndex=function(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))};
goog.dom.getTextContent=function(a){if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&"innerText"in a)a=goog.string.canonicalizeNewlines(a.innerText);else{var b=[];goog.dom.getTextContent_(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");goog.dom.BrowserFeature.CAN_USE_INNER_TEXT||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a};goog.dom.getRawTextContent=function(a){var b=[];goog.dom.getTextContent_(a,b,!1);return b.join("")};
goog.dom.getTextContent_=function(a,b,c){if(!(a.nodeName in goog.dom.TAGS_TO_IGNORE_))if(a.nodeType==goog.dom.NodeType.TEXT)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)b.push(goog.dom.PREDEFINED_TAG_VALUES_[a.nodeName]);else for(a=a.firstChild;a;)goog.dom.getTextContent_(a,b,c),a=a.nextSibling};goog.dom.getNodeTextLength=function(a){return goog.dom.getTextContent(a).length};
goog.dom.getNodeTextOffset=function(a,b){for(var c=b||goog.dom.getOwnerDocument(a).body,d=[];a&&a!=c;){for(var e=a;e=e.previousSibling;)d.unshift(goog.dom.getTextContent(e));a=a.parentNode}return goog.string.trimLeft(d.join("")).replace(/ +/g," ").length};
goog.dom.getNodeAtOffset=function(a,b,c){a=[a];for(var d=0,e=null;0<a.length&&d<b;)if(e=a.pop(),!(e.nodeName in goog.dom.TAGS_TO_IGNORE_))if(e.nodeType==goog.dom.NodeType.TEXT)var f=e.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," "),d=d+f.length;else if(e.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)d+=goog.dom.PREDEFINED_TAG_VALUES_[e.nodeName].length;else for(f=e.childNodes.length-1;0<=f;f--)a.push(e.childNodes[f]);goog.isObject(c)&&(c.remainder=e?e.nodeValue.length+b-d-1:0,c.node=e);return e};
goog.dom.isNodeList=function(a){if(a&&"number"==typeof a.length){if(goog.isObject(a))return"function"==typeof a.item||"string"==typeof a.item;if(goog.isFunction(a))return"function"==typeof a.item}return!1};goog.dom.getAncestorByTagNameAndClass=function(a,b,c){if(!b&&!c)return null;var d=b?b.toUpperCase():null;return goog.dom.getAncestor(a,function(a){return(!d||a.nodeName==d)&&(!c||goog.dom.classes.has(a,c))},!0)};
goog.dom.getAncestorByClass=function(a,b){return goog.dom.getAncestorByTagNameAndClass(a,null,b)};goog.dom.getAncestor=function(a,b,c,d){c||(a=a.parentNode);c=null==d;for(var e=0;a&&(c||e<=d);){if(b(a))return a;a=a.parentNode;e++}return null};goog.dom.getActiveElement=function(a){try{return a&&a.activeElement}catch(b){}return null};goog.dom.DomHelper=function(a){this.document_=a||goog.global.document||document};goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper;
goog.dom.DomHelper.prototype.setDocument=function(a){this.document_=a};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.getElement=function(a){return goog.isString(a)?this.document_.getElementById(a):a};goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement;goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(a,b,c){return goog.dom.getElementsByTagNameAndClass_(this.document_,a,b,c)};
goog.dom.DomHelper.prototype.getElementsByClass=function(a,b){return goog.dom.getElementsByClass(a,b||this.document_)};goog.dom.DomHelper.prototype.getElementByClass=function(a,b){return goog.dom.getElementByClass(a,b||this.document_)};goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass;goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties;goog.dom.DomHelper.prototype.getViewportSize=function(a){return goog.dom.getViewportSize(a||this.getWindow())};
goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())};goog.dom.DomHelper.prototype.createDom=function(a,b,c){return goog.dom.createDom_(this.document_,arguments)};goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom;goog.dom.DomHelper.prototype.createElement=function(a){return this.document_.createElement(a)};goog.dom.DomHelper.prototype.createTextNode=function(a){return this.document_.createTextNode(String(a))};
goog.dom.DomHelper.prototype.createTable=function(a,b,c){return goog.dom.createTable_(this.document_,a,b,!!c)};goog.dom.DomHelper.prototype.htmlToDocumentFragment=function(a){return goog.dom.htmlToDocumentFragment_(this.document_,a)};goog.dom.DomHelper.prototype.getCompatMode=function(){return this.isCss1CompatMode()?"CSS1Compat":"BackCompat"};goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)};goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)};
goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)};goog.dom.DomHelper.prototype.getActiveElement=function(a){return goog.dom.getActiveElement(a||this.document_)};goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild;goog.dom.DomHelper.prototype.append=goog.dom.append;
goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren;goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren;goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore;goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter;goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt;goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode;goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode;
goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement;goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren;goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild;goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild;goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling;goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling;
goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode;goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode;goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike;goog.dom.DomHelper.prototype.isElement=goog.dom.isElement;goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow;goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement;goog.dom.DomHelper.prototype.contains=goog.dom.contains;goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder;
goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor;goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument;goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument;goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow;goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent;goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml;goog.dom.DomHelper.prototype.findNode=goog.dom.findNode;
goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes;goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex;goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex;goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent;goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength;goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset;goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset;
goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList;goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass;goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass;goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor;goog.math.Box=function(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d};goog.math.Box.boundingBox=function(a){for(var b=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),c=1;c<arguments.length;c++){var d=arguments[c];b.top=Math.min(b.top,d.y);b.right=Math.max(b.right,d.x);b.bottom=Math.max(b.bottom,d.y);b.left=Math.min(b.left,d.x)}return b};goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)};
goog.DEBUG&&(goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"});goog.math.Box.prototype.contains=function(a){return goog.math.Box.contains(this,a)};goog.math.Box.prototype.expand=function(a,b,c,d){goog.isObject(a)?(this.top-=a.top,this.right+=a.right,this.bottom+=a.bottom,this.left-=a.left):(this.top-=a,this.right+=b,this.bottom+=c,this.left-=d);return this};
goog.math.Box.prototype.expandToInclude=function(a){this.left=Math.min(this.left,a.left);this.top=Math.min(this.top,a.top);this.right=Math.max(this.right,a.right);this.bottom=Math.max(this.bottom,a.bottom)};goog.math.Box.equals=function(a,b){return a==b?!0:!a||!b?!1:a.top==b.top&&a.right==b.right&&a.bottom==b.bottom&&a.left==b.left};
goog.math.Box.contains=function(a,b){return!a||!b?!1:b instanceof goog.math.Box?b.left>=a.left&&b.right<=a.right&&b.top>=a.top&&b.bottom<=a.bottom:b.x>=a.left&&b.x<=a.right&&b.y>=a.top&&b.y<=a.bottom};goog.math.Box.relativePositionX=function(a,b){return b.x<a.left?b.x-a.left:b.x>a.right?b.x-a.right:0};goog.math.Box.relativePositionY=function(a,b){return b.y<a.top?b.y-a.top:b.y>a.bottom?b.y-a.bottom:0};
goog.math.Box.distance=function(a,b){var c=goog.math.Box.relativePositionX(a,b),d=goog.math.Box.relativePositionY(a,b);return Math.sqrt(c*c+d*d)};goog.math.Box.intersects=function(a,b){return a.left<=b.right&&b.left<=a.right&&a.top<=b.bottom&&b.top<=a.bottom};goog.math.Box.intersectsWithPadding=function(a,b,c){return a.left<=b.right+c&&b.left<=a.right+c&&a.top<=b.bottom+c&&b.top<=a.bottom+c};
goog.math.Box.prototype.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};goog.math.Box.prototype.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};
goog.math.Box.prototype.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};goog.math.Box.prototype.translate=function(a,b){a instanceof goog.math.Coordinate?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,goog.isNumber(b)&&(this.top+=b,this.bottom+=b));return this};
goog.math.Box.prototype.scale=function(a,b){var c=goog.isNumber(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};goog.math.Rect=function(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d};goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)};goog.math.Rect.prototype.toBox=function(){return new goog.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)};goog.math.Rect.createFromBox=function(a){return new goog.math.Rect(a.left,a.top,a.right-a.left,a.bottom-a.top)};
goog.DEBUG&&(goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"});goog.math.Rect.equals=function(a,b){return a==b?!0:!a||!b?!1:a.left==b.left&&a.width==b.width&&a.top==b.top&&a.height==b.height};
goog.math.Rect.prototype.intersection=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};
goog.math.Rect.intersection=function(a,b){var c=Math.max(a.left,b.left),d=Math.min(a.left+a.width,b.left+b.width);if(c<=d){var e=Math.max(a.top,b.top),f=Math.min(a.top+a.height,b.top+b.height);if(e<=f)return new goog.math.Rect(c,e,d-c,f-e)}return null};goog.math.Rect.intersects=function(a,b){return a.left<=b.left+b.width&&b.left<=a.left+a.width&&a.top<=b.top+b.height&&b.top<=a.top+a.height};goog.math.Rect.prototype.intersects=function(a){return goog.math.Rect.intersects(this,a)};
goog.math.Rect.difference=function(a,b){var c=goog.math.Rect.intersection(a,b);if(!c||!c.height||!c.width)return[a.clone()];var c=[],d=a.top,e=a.height,f=a.left+a.width,g=a.top+a.height,k=b.left+b.width,l=b.top+b.height;b.top>a.top&&(c.push(new goog.math.Rect(a.left,a.top,a.width,b.top-a.top)),d=b.top,e-=b.top-a.top);l<g&&(c.push(new goog.math.Rect(a.left,l,a.width,g-l)),e=l-d);b.left>a.left&&c.push(new goog.math.Rect(a.left,d,b.left-a.left,e));k<f&&c.push(new goog.math.Rect(k,d,f-k,e));return c};
goog.math.Rect.prototype.difference=function(a){return goog.math.Rect.difference(this,a)};goog.math.Rect.prototype.boundingRect=function(a){var b=Math.max(this.left+this.width,a.left+a.width),c=Math.max(this.top+this.height,a.top+a.height);this.left=Math.min(this.left,a.left);this.top=Math.min(this.top,a.top);this.width=b-this.left;this.height=c-this.top};goog.math.Rect.boundingRect=function(a,b){if(!a||!b)return null;var c=a.clone();c.boundingRect(b);return c};
goog.math.Rect.prototype.contains=function(a){return a instanceof goog.math.Rect?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};goog.math.Rect.prototype.squaredDistance=function(a){var b=a.x<this.left?this.left-a.x:Math.max(a.x-(this.left+this.width),0);a=a.y<this.top?this.top-a.y:Math.max(a.y-(this.top+this.height),0);return b*b+a*a};
goog.math.Rect.prototype.distance=function(a){return Math.sqrt(this.squaredDistance(a))};goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)};goog.math.Rect.prototype.getTopLeft=function(){return new goog.math.Coordinate(this.left,this.top)};goog.math.Rect.prototype.getCenter=function(){return new goog.math.Coordinate(this.left+this.width/2,this.top+this.height/2)};
goog.math.Rect.prototype.getBottomRight=function(){return new goog.math.Coordinate(this.left+this.width,this.top+this.height)};goog.math.Rect.prototype.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Rect.prototype.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
goog.math.Rect.prototype.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Rect.prototype.translate=function(a,b){a instanceof goog.math.Coordinate?(this.left+=a.x,this.top+=a.y):(this.left+=a,goog.isNumber(b)&&(this.top+=b));return this};goog.math.Rect.prototype.scale=function(a,b){var c=goog.isNumber(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};goog.dom.vendor={};goog.dom.vendor.getVendorJsPrefix=function(){return goog.userAgent.WEBKIT?"Webkit":goog.userAgent.GECKO?"Moz":goog.userAgent.IE?"ms":goog.userAgent.OPERA?"O":null};goog.dom.vendor.getVendorPrefix=function(){return goog.userAgent.WEBKIT?"-webkit":goog.userAgent.GECKO?"-moz":goog.userAgent.IE?"-ms":goog.userAgent.OPERA?"-o":null};goog.style={};goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS=!1;goog.style.setStyle=function(a,b,c){goog.isString(b)?goog.style.setStyle_(a,c,b):goog.object.forEach(b,goog.partial(goog.style.setStyle_,a))};goog.style.setStyle_=function(a,b,c){(c=goog.style.getVendorJsStyleName_(a,c))&&(a.style[c]=b)};goog.style.getVendorJsStyleName_=function(a,b){var c=goog.string.toCamelCase(b);if(void 0===a.style[c]){var d=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(b);if(void 0!==a.style[d])return d}return c};
goog.style.getVendorStyleName_=function(a,b){var c=goog.string.toCamelCase(b);return void 0===a.style[c]&&(c=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(b),void 0!==a.style[c])?goog.dom.vendor.getVendorPrefix()+"-"+b:b};goog.style.getStyle=function(a,b){var c=a.style[goog.string.toCamelCase(b)];return"undefined"!==typeof c?c:a.style[goog.style.getVendorJsStyleName_(a,b)]||""};
goog.style.getComputedStyle=function(a,b){var c=goog.dom.getOwnerDocument(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""};goog.style.getCascadedStyle=function(a,b){return a.currentStyle?a.currentStyle[b]:null};goog.style.getStyle_=function(a,b){return goog.style.getComputedStyle(a,b)||goog.style.getCascadedStyle(a,b)||a.style&&a.style[b]};
goog.style.getComputedPosition=function(a){return goog.style.getStyle_(a,"position")};goog.style.getBackgroundColor=function(a){return goog.style.getStyle_(a,"backgroundColor")};goog.style.getComputedOverflowX=function(a){return goog.style.getStyle_(a,"overflowX")};goog.style.getComputedOverflowY=function(a){return goog.style.getStyle_(a,"overflowY")};goog.style.getComputedZIndex=function(a){return goog.style.getStyle_(a,"zIndex")};
goog.style.getComputedTextAlign=function(a){return goog.style.getStyle_(a,"textAlign")};goog.style.getComputedCursor=function(a){return goog.style.getStyle_(a,"cursor")};goog.style.setPosition=function(a,b,c){var d,e=goog.userAgent.GECKO&&(goog.userAgent.MAC||goog.userAgent.X11)&&goog.userAgent.isVersionOrHigher("1.9");b instanceof goog.math.Coordinate?(d=b.x,b=b.y):(d=b,b=c);a.style.left=goog.style.getPixelStyleValue_(d,e);a.style.top=goog.style.getPixelStyleValue_(b,e)};
goog.style.getPosition=function(a){return new goog.math.Coordinate(a.offsetLeft,a.offsetTop)};goog.style.getClientViewportElement=function(a){a=a?goog.dom.getOwnerDocument(a):goog.dom.getDocument();return goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)&&!goog.dom.getDomHelper(a).isCss1CompatMode()?a.body:a.documentElement};goog.style.getViewportPageOffset=function(a){var b=a.body;a=a.documentElement;return new goog.math.Coordinate(b.scrollLeft||a.scrollLeft,b.scrollTop||a.scrollTop)};
goog.style.getBoundingClientRect_=function(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}goog.userAgent.IE&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b};
goog.style.getOffsetParent=function(a){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(8))return a.offsetParent;var b=goog.dom.getOwnerDocument(a),c=goog.style.getStyle_(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=goog.style.getStyle_(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null};
goog.style.getVisibleRectForElement=function(a){for(var b=new goog.math.Box(0,Infinity,Infinity,0),c=goog.dom.getDomHelper(a),d=c.getDocument().body,e=c.getDocument().documentElement,f=c.getDocumentScrollElement();a=goog.style.getOffsetParent(a);)if((!goog.userAgent.IE||0!=a.clientWidth)&&(!goog.userAgent.WEBKIT||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=goog.style.getStyle_(a,"overflow")){var g=goog.style.getPageOffset(a),k=goog.style.getClientLeftTop(a);g.x+=k.x;g.y+=k.y;b.top=Math.max(b.top,
g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=c.getViewportSize();b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null};
goog.style.getContainerOffsetToScrollInto=function(a,b,c){var d=goog.style.getPageOffset(a),e=goog.style.getPageOffset(b),f=goog.style.getBorderBox(b),g=d.x-e.x-f.left,d=d.y-e.y-f.top,e=b.clientWidth-a.offsetWidth;a=b.clientHeight-a.offsetHeight;f=b.scrollLeft;b=b.scrollTop;c?(f+=g-e/2,b+=d-a/2):(f+=Math.min(g,Math.max(g-e,0)),b+=Math.min(d,Math.max(d-a,0)));return new goog.math.Coordinate(f,b)};
goog.style.scrollIntoContainerView=function(a,b,c){a=goog.style.getContainerOffsetToScrollInto(a,b,c);b.scrollLeft=a.x;b.scrollTop=a.y};
goog.style.getClientLeftTop=function(a){if(goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("1.9")){var b=parseFloat(goog.style.getComputedStyle(a,"borderLeftWidth"));if(goog.style.isRightToLeft(a))var c=a.offsetWidth-a.clientWidth-b-parseFloat(goog.style.getComputedStyle(a,"borderRightWidth")),b=b+c;return new goog.math.Coordinate(b,parseFloat(goog.style.getComputedStyle(a,"borderTopWidth")))}return new goog.math.Coordinate(a.clientLeft,a.clientTop)};
goog.style.getPageOffset=function(a){var b,c=goog.dom.getOwnerDocument(a),d=goog.style.getStyle_(a,"position");goog.asserts.assertObject(a,"Parameter is required");var e=!goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS&&goog.userAgent.GECKO&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new goog.math.Coordinate(0,0),g=goog.style.getClientViewportElement(c);if(a==g)return f;if(goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS||
a.getBoundingClientRect)b=goog.style.getBoundingClientRect_(a),a=goog.dom.getDomHelper(c).getDocumentScroll(),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);if(goog.userAgent.WEBKIT&&"fixed"==goog.style.getComputedPosition(b)){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&
b!=a);if(goog.userAgent.OPERA||goog.userAgent.WEBKIT&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=goog.style.getOffsetParent(b))&&b!=c.body&&b!=g;)if(f.x-=b.scrollLeft,!goog.userAgent.OPERA||"TR"!=b.tagName)f.y-=b.scrollTop}return f};goog.style.getPageOffsetLeft=function(a){return goog.style.getPageOffset(a).x};goog.style.getPageOffsetTop=function(a){return goog.style.getPageOffset(a).y};
goog.style.getFramedPageOffset=function(a,b){var c=new goog.math.Coordinate(0,0),d=goog.dom.getWindow(goog.dom.getOwnerDocument(a)),e=a;do{var f=d==b?goog.style.getPageOffset(e):goog.style.getClientPositionForElement_(goog.asserts.assert(e));c.x+=f.x;c.y+=f.y}while(d&&d!=b&&(e=d.frameElement)&&(d=d.parent));return c};
goog.style.translateRectForAnotherFrame=function(a,b,c){if(b.getDocument()!=c.getDocument()){var d=b.getDocument().body;c=goog.style.getFramedPageOffset(d,c.getWindow());c=goog.math.Coordinate.difference(c,goog.style.getPageOffset(d));goog.userAgent.IE&&!b.isCss1CompatMode()&&(c=goog.math.Coordinate.difference(c,b.getDocumentScroll()));a.left+=c.x;a.top+=c.y}};
goog.style.getRelativePosition=function(a,b){var c=goog.style.getClientPosition(a),d=goog.style.getClientPosition(b);return new goog.math.Coordinate(c.x-d.x,c.y-d.y)};
goog.style.getClientPositionForElement_=function(a){var b;if(goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS||a.getBoundingClientRect)b=goog.style.getBoundingClientRect_(a),b=new goog.math.Coordinate(b.left,b.top);else{b=goog.dom.getDomHelper(a).getDocumentScroll();var c=goog.style.getPageOffset(a);b=new goog.math.Coordinate(c.x-b.x,c.y-b.y)}return goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher(12)?goog.math.Coordinate.sum(b,goog.style.getCssTranslation(a)):b};
goog.style.getClientPosition=function(a){goog.asserts.assert(a);if(a.nodeType==goog.dom.NodeType.ELEMENT)return goog.style.getClientPositionForElement_(a);var b=goog.isFunction(a.getBrowserEvent),c=a;a.targetTouches?c=a.targetTouches[0]:b&&a.getBrowserEvent().targetTouches&&(c=a.getBrowserEvent().targetTouches[0]);return new goog.math.Coordinate(c.clientX,c.clientY)};
goog.style.setPageOffset=function(a,b,c){var d=goog.style.getPageOffset(a);b instanceof goog.math.Coordinate&&(c=b.y,b=b.x);goog.style.setPosition(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))};goog.style.setSize=function(a,b,c){if(b instanceof goog.math.Size)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");goog.style.setWidth(a,b);goog.style.setHeight(a,c)};goog.style.getPixelStyleValue_=function(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a};
goog.style.setHeight=function(a,b){a.style.height=goog.style.getPixelStyleValue_(b,!0)};goog.style.setWidth=function(a,b){a.style.width=goog.style.getPixelStyleValue_(b,!0)};goog.style.getSize=function(a){return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_,a)};
goog.style.evaluateWithTemporaryDisplay_=function(a,b){if("none"!=goog.style.getStyle_(b,"display"))return a(b);var c=b.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";var g=a(b);c.display=d;c.position=f;c.visibility=e;return g};
goog.style.getSizeWithDisplay_=function(a){var b=a.offsetWidth,c=a.offsetHeight,d=goog.userAgent.WEBKIT&&!b&&!c;return(!goog.isDef(b)||d)&&a.getBoundingClientRect?(a=goog.style.getBoundingClientRect_(a),new goog.math.Size(a.right-a.left,a.bottom-a.top)):new goog.math.Size(b,c)};goog.style.getTransformedSize=function(a){if(!a.getBoundingClientRect)return null;a=goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_,a);return new goog.math.Size(a.right-a.left,a.bottom-a.top)};
goog.style.getBounds=function(a){var b=goog.style.getPageOffset(a);a=goog.style.getSize(a);return new goog.math.Rect(b.x,b.y,a.width,a.height)};goog.style.toCamelCase=function(a){return goog.string.toCamelCase(String(a))};goog.style.toSelectorCase=function(a){return goog.string.toSelectorCase(a)};
goog.style.getOpacity=function(a){var b=a.style;a="";"opacity"in b?a=b.opacity:"MozOpacity"in b?a=b.MozOpacity:"filter"in b&&(b=b.filter.match(/alpha\(opacity=([\d.]+)\)/))&&(a=String(b[1]/100));return""==a?a:Number(a)};goog.style.setOpacity=function(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")};
goog.style.setTransparentBackgroundImage=function(a,b){var c=a.style;goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?c.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+b+'", sizingMethod="crop")':(c.backgroundImage="url("+b+")",c.backgroundPosition="top left",c.backgroundRepeat="no-repeat")};goog.style.clearTransparentBackgroundImage=function(a){a=a.style;"filter"in a?a.filter="":a.backgroundImage="none"};
goog.style.showElement=function(a,b){goog.style.setElementShown(a,b)};goog.style.setElementShown=function(a,b){a.style.display=b?"":"none"};goog.style.isElementShown=function(a){return"none"!=a.style.display};
goog.style.installStyles=function(a,b){var c=goog.dom.getDomHelper(b),d=null;if(goog.userAgent.IE)d=c.getDocument().createStyleSheet(),goog.style.setStyles(d,a);else{var e=c.getElementsByTagNameAndClass("head")[0];e||(d=c.getElementsByTagNameAndClass("body")[0],e=c.createDom("head"),d.parentNode.insertBefore(e,d));d=c.createDom("style");goog.style.setStyles(d,a);c.appendChild(e,d)}return d};goog.style.uninstallStyles=function(a){goog.dom.removeNode(a.ownerNode||a.owningElement||a)};
goog.style.setStyles=function(a,b){goog.userAgent.IE?a.cssText=b:a.innerHTML=b};goog.style.setPreWrap=function(a){a=a.style;goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(a.whiteSpace="pre",a.wordWrap="break-word"):a.whiteSpace=goog.userAgent.GECKO?"-moz-pre-wrap":"pre-wrap"};
goog.style.setInlineBlock=function(a){a=a.style;a.position="relative";goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(a.zoom="1",a.display="inline"):a.display=goog.userAgent.GECKO?goog.userAgent.isVersionOrHigher("1.9a")?"inline-block":"-moz-inline-box":"inline-block"};goog.style.isRightToLeft=function(a){return"rtl"==goog.style.getStyle_(a,"direction")};goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT?"WebkitUserSelect":null;
goog.style.isUnselectable=function(a){return goog.style.unselectableStyle_?"none"==a.style[goog.style.unselectableStyle_].toLowerCase():goog.userAgent.IE||goog.userAgent.OPERA?"on"==a.getAttribute("unselectable"):!1};
goog.style.setUnselectable=function(a,b,c){c=!c?a.getElementsByTagName("*"):null;var d=goog.style.unselectableStyle_;if(d){if(b=b?"none":"",a.style[d]=b,c){a=0;for(var e;e=c[a];a++)e.style[d]=b}}else if(goog.userAgent.IE||goog.userAgent.OPERA)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;e=c[a];a++)e.setAttribute("unselectable",b)};goog.style.getBorderBoxSize=function(a){return new goog.math.Size(a.offsetWidth,a.offsetHeight)};
goog.style.setBorderBoxSize=function(a,b){var c=goog.dom.getOwnerDocument(a),d=goog.dom.getDomHelper(c).isCss1CompatMode();if(goog.userAgent.IE&&(!d||!goog.userAgent.isVersionOrHigher("8")))if(c=a.style,d){var d=goog.style.getPaddingBox(a),e=goog.style.getBorderBox(a);c.pixelWidth=b.width-e.left-d.left-d.right-e.right;c.pixelHeight=b.height-e.top-d.top-d.bottom-e.bottom}else c.pixelWidth=b.width,c.pixelHeight=b.height;else goog.style.setBoxSizingSize_(a,b,"border-box")};
goog.style.getContentBoxSize=function(a){var b=goog.dom.getOwnerDocument(a),c=goog.userAgent.IE&&a.currentStyle;if(c&&goog.dom.getDomHelper(b).isCss1CompatMode()&&"auto"!=c.width&&"auto"!=c.height&&!c.boxSizing)return b=goog.style.getIePixelValue_(a,c.width,"width","pixelWidth"),a=goog.style.getIePixelValue_(a,c.height,"height","pixelHeight"),new goog.math.Size(b,a);c=goog.style.getBorderBoxSize(a);b=goog.style.getPaddingBox(a);a=goog.style.getBorderBox(a);return new goog.math.Size(c.width-a.left-
b.left-b.right-a.right,c.height-a.top-b.top-b.bottom-a.bottom)};
goog.style.setContentBoxSize=function(a,b){var c=goog.dom.getOwnerDocument(a),d=goog.dom.getDomHelper(c).isCss1CompatMode();if(goog.userAgent.IE&&(!d||!goog.userAgent.isVersionOrHigher("8")))if(c=a.style,d)c.pixelWidth=b.width,c.pixelHeight=b.height;else{var d=goog.style.getPaddingBox(a),e=goog.style.getBorderBox(a);c.pixelWidth=b.width+e.left+d.left+d.right+e.right;c.pixelHeight=b.height+e.top+d.top+d.bottom+e.bottom}else goog.style.setBoxSizingSize_(a,b,"content-box")};
goog.style.setBoxSizingSize_=function(a,b,c){a=a.style;goog.userAgent.GECKO?a.MozBoxSizing=c:goog.userAgent.WEBKIT?a.WebkitBoxSizing=c:a.boxSizing=c;a.width=Math.max(b.width,0)+"px";a.height=Math.max(b.height,0)+"px"};goog.style.getIePixelValue_=function(a,b,c,d){if(/^\d+px?$/.test(b))return parseInt(b,10);var e=a.style[c],f=a.runtimeStyle[c];a.runtimeStyle[c]=a.currentStyle[c];a.style[c]=b;b=a.style[d];a.style[c]=e;a.runtimeStyle[c]=f;return b};
goog.style.getIePixelDistance_=function(a,b){var c=goog.style.getCascadedStyle(a,b);return c?goog.style.getIePixelValue_(a,c,"left","pixelLeft"):0};
goog.style.getBox_=function(a,b){if(goog.userAgent.IE){var c=goog.style.getIePixelDistance_(a,b+"Left"),d=goog.style.getIePixelDistance_(a,b+"Right"),e=goog.style.getIePixelDistance_(a,b+"Top"),f=goog.style.getIePixelDistance_(a,b+"Bottom");return new goog.math.Box(e,d,f,c)}c=goog.style.getComputedStyle(a,b+"Left");d=goog.style.getComputedStyle(a,b+"Right");e=goog.style.getComputedStyle(a,b+"Top");f=goog.style.getComputedStyle(a,b+"Bottom");return new goog.math.Box(parseFloat(e),parseFloat(d),parseFloat(f),
parseFloat(c))};goog.style.getPaddingBox=function(a){return goog.style.getBox_(a,"padding")};goog.style.getMarginBox=function(a){return goog.style.getBox_(a,"margin")};goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6};
goog.style.getIePixelBorder_=function(a,b){if("none"==goog.style.getCascadedStyle(a,b+"Style"))return 0;var c=goog.style.getCascadedStyle(a,b+"Width");return c in goog.style.ieBorderWidthKeywords_?goog.style.ieBorderWidthKeywords_[c]:goog.style.getIePixelValue_(a,c,"left","pixelLeft")};
goog.style.getBorderBox=function(a){if(goog.userAgent.IE){var b=goog.style.getIePixelBorder_(a,"borderLeft"),c=goog.style.getIePixelBorder_(a,"borderRight"),d=goog.style.getIePixelBorder_(a,"borderTop");a=goog.style.getIePixelBorder_(a,"borderBottom");return new goog.math.Box(d,c,a,b)}b=goog.style.getComputedStyle(a,"borderLeftWidth");c=goog.style.getComputedStyle(a,"borderRightWidth");d=goog.style.getComputedStyle(a,"borderTopWidth");a=goog.style.getComputedStyle(a,"borderBottomWidth");return new goog.math.Box(parseFloat(d),
parseFloat(c),parseFloat(a),parseFloat(b))};goog.style.getFontFamily=function(a){var b=goog.dom.getOwnerDocument(a),c="";if(b.body.createTextRange){b=b.body.createTextRange();b.moveToElementText(a);try{c=b.queryCommandValue("FontName")}catch(d){c=""}}c||(c=goog.style.getStyle_(a,"fontFamily"));a=c.split(",");1<a.length&&(c=a[0]);return goog.string.stripQuotes(c,"\"'")};goog.style.lengthUnitRegex_=/[^\d]+$/;
goog.style.getLengthUnits=function(a){return(a=a.match(goog.style.lengthUnitRegex_))&&a[0]||null};goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,"in":1,mm:1,pc:1,pt:1};goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1};
goog.style.getFontSize=function(a){var b=goog.style.getStyle_(a,"fontSize"),c=goog.style.getLengthUnits(b);if(b&&"px"==c)return parseInt(b,10);if(goog.userAgent.IE){if(c in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)return goog.style.getIePixelValue_(a,b,"left","pixelLeft");if(a.parentNode&&a.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&c in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_)return a=a.parentNode,c=goog.style.getStyle_(a,"fontSize"),goog.style.getIePixelValue_(a,b==c?"1em":b,"left","pixelLeft")}c=
goog.dom.createDom("span",{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"});goog.dom.appendChild(a,c);b=c.offsetHeight;goog.dom.removeNode(c);return b};goog.style.parseStyleAttribute=function(a){var b={};goog.array.forEach(a.split(/\s*;\s*/),function(a){a=a.split(/\s*:\s*/);2==a.length&&(b[goog.string.toCamelCase(a[0].toLowerCase())]=a[1])});return b};
goog.style.toStyleAttribute=function(a){var b=[];goog.object.forEach(a,function(a,d){b.push(goog.string.toSelectorCase(d),":",a,";")});return b.join("")};goog.style.setFloat=function(a,b){a.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=b};goog.style.getFloat=function(a){return a.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""};
goog.style.getScrollbarWidth=function(a){var b=goog.dom.createElement("div");a&&(b.className=a);b.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";a=goog.dom.createElement("div");goog.style.setSize(a,"200px","200px");b.appendChild(a);goog.dom.appendChild(goog.dom.getDocument().body,b);a=b.offsetWidth-b.clientWidth;goog.dom.removeNode(b);return a};goog.style.MATRIX_TRANSLATION_REGEX_=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;
goog.style.getCssTranslation=function(a){var b;goog.userAgent.IE?b="-ms-transform":goog.userAgent.WEBKIT?b="-webkit-transform":goog.userAgent.OPERA?b="-o-transform":goog.userAgent.GECKO&&(b="-moz-transform");var c;b&&(c=goog.style.getStyle_(a,b));c||(c=goog.style.getStyle_(a,"transform"));if(!c)return new goog.math.Coordinate(0,0);a=c.match(goog.style.MATRIX_TRANSLATION_REGEX_);return!a?new goog.math.Coordinate(0,0):new goog.math.Coordinate(parseFloat(a[1]),parseFloat(a[2]))};goog.events.EventHandler=function(a){goog.Disposable.call(this);this.handler_=a;this.keys_={}};goog.inherits(goog.events.EventHandler,goog.Disposable);goog.events.EventHandler.typeArray_=[];goog.events.EventHandler.prototype.listen=function(a,b,c,d,e){goog.isArray(b)||(goog.events.EventHandler.typeArray_[0]=b,b=goog.events.EventHandler.typeArray_);for(var f=0;f<b.length;f++){var g=goog.events.listen(a,b[f],c||this,d||!1,e||this.handler_||this);if(goog.DEBUG&&!g)break;this.keys_[g.key]=g}return this};
goog.events.EventHandler.prototype.listenOnce=function(a,b,c,d,e){if(goog.isArray(b))for(var f=0;f<b.length;f++)this.listenOnce(a,b[f],c,d,e);else a=goog.events.listenOnce(a,b,c||this,d,e||this.handler_||this),this.keys_[a.key]=a;return this};goog.events.EventHandler.prototype.listenWithWrapper=function(a,b,c,d,e){b.listen(a,c,d,e||this.handler_||this,this);return this};
goog.events.EventHandler.prototype.getListenerCount=function(){var a=0,b;for(b in this.keys_)Object.prototype.hasOwnProperty.call(this.keys_,b)&&a++;return a};goog.events.EventHandler.prototype.unlisten=function(a,b,c,d,e){if(goog.isArray(b))for(var f=0;f<b.length;f++)this.unlisten(a,b[f],c,d,e);else if(a=goog.events.getListener(a,b,c||this,d,e||this.handler_||this))goog.events.unlistenByKey(a),delete this.keys_[a.key];return this};
goog.events.EventHandler.prototype.unlistenWithWrapper=function(a,b,c,d,e){b.unlisten(a,c,d,e||this.handler_||this,this);return this};goog.events.EventHandler.prototype.removeAll=function(){goog.object.forEach(this.keys_,goog.events.unlistenByKey);this.keys_={}};goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this);this.removeAll()};
goog.events.EventHandler.prototype.handleEvent=function(a){throw Error("EventHandler.handleEvent not implemented");};goog.ui={};goog.ui.IdGenerator=function(){};goog.addSingletonGetter(goog.ui.IdGenerator);goog.ui.IdGenerator.prototype.nextId_=0;goog.ui.IdGenerator.prototype.getNextUniqueId=function(){return":"+(this.nextId_++).toString(36)};goog.ui.IdGenerator.instance=goog.ui.IdGenerator.getInstance();goog.ui.Component=function(a){goog.events.EventTarget.call(this);this.dom_=a||goog.dom.getDomHelper();this.rightToLeft_=goog.ui.Component.defaultRightToLeft_};goog.inherits(goog.ui.Component,goog.events.EventTarget);goog.ui.Component.ALLOW_DETACHED_DECORATION=!1;goog.ui.Component.prototype.idGenerator_=goog.ui.IdGenerator.getInstance();goog.ui.Component.defaultRightToLeft_=null;
goog.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"};
goog.ui.Component.Error={NOT_SUPPORTED:"Method not supported",DECORATE_INVALID:"Invalid element to decorate",ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",NOT_OUR_CHILD:"Child is not in parent component",NOT_IN_DOCUMENT:"Operation not supported while component is not in document",STATE_INVALID:"Invalid component state"};
goog.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64};
goog.ui.Component.getStateTransitionEvent=function(a,b){switch(a){case goog.ui.Component.State.DISABLED:return b?goog.ui.Component.EventType.DISABLE:goog.ui.Component.EventType.ENABLE;case goog.ui.Component.State.HOVER:return b?goog.ui.Component.EventType.HIGHLIGHT:goog.ui.Component.EventType.UNHIGHLIGHT;case goog.ui.Component.State.ACTIVE:return b?goog.ui.Component.EventType.ACTIVATE:goog.ui.Component.EventType.DEACTIVATE;case goog.ui.Component.State.SELECTED:return b?goog.ui.Component.EventType.SELECT:
goog.ui.Component.EventType.UNSELECT;case goog.ui.Component.State.CHECKED:return b?goog.ui.Component.EventType.CHECK:goog.ui.Component.EventType.UNCHECK;case goog.ui.Component.State.FOCUSED:return b?goog.ui.Component.EventType.FOCUS:goog.ui.Component.EventType.BLUR;case goog.ui.Component.State.OPENED:return b?goog.ui.Component.EventType.OPEN:goog.ui.Component.EventType.CLOSE}throw Error(goog.ui.Component.Error.STATE_INVALID);};
goog.ui.Component.setDefaultRightToLeft=function(a){goog.ui.Component.defaultRightToLeft_=a};goog.ui.Component.prototype.id_=null;goog.ui.Component.prototype.inDocument_=!1;goog.ui.Component.prototype.element_=null;goog.ui.Component.prototype.rightToLeft_=null;goog.ui.Component.prototype.model_=null;goog.ui.Component.prototype.parent_=null;goog.ui.Component.prototype.children_=null;goog.ui.Component.prototype.childIndex_=null;goog.ui.Component.prototype.wasDecorated_=!1;
goog.ui.Component.prototype.getId=function(){return this.id_||(this.id_=this.idGenerator_.getNextUniqueId())};goog.ui.Component.prototype.setId=function(a){this.parent_&&this.parent_.childIndex_&&(goog.object.remove(this.parent_.childIndex_,this.id_),goog.object.add(this.parent_.childIndex_,a,this));this.id_=a};goog.ui.Component.prototype.getElement=function(){return this.element_};
goog.ui.Component.prototype.getElementStrict=function(){var a=this.element_;goog.asserts.assert(a,"Can not call getElementStrict before rendering/decorating.");return a};goog.ui.Component.prototype.setElementInternal=function(a){this.element_=a};goog.ui.Component.prototype.getElementsByClass=function(a){return this.element_?this.dom_.getElementsByClass(a,this.element_):[]};goog.ui.Component.prototype.getElementByClass=function(a){return this.element_?this.dom_.getElementByClass(a,this.element_):null};
goog.ui.Component.prototype.getRequiredElementByClass=function(a){var b=this.getElementByClass(a);goog.asserts.assert(b,"Expected element in component with class: %s",a);return b};goog.ui.Component.prototype.getHandler=function(){return this.googUiComponentHandler_||(this.googUiComponentHandler_=new goog.events.EventHandler(this))};
goog.ui.Component.prototype.setParent=function(a){if(this==a)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);if(a&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=a)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=a;goog.ui.Component.superClass_.setParentEventTarget.call(this,a)};goog.ui.Component.prototype.getParent=function(){return this.parent_};
goog.ui.Component.prototype.setParentEventTarget=function(a){if(this.parent_&&this.parent_!=a)throw Error(goog.ui.Component.Error.NOT_SUPPORTED);goog.ui.Component.superClass_.setParentEventTarget.call(this,a)};goog.ui.Component.prototype.getDomHelper=function(){return this.dom_};goog.ui.Component.prototype.isInDocument=function(){return this.inDocument_};goog.ui.Component.prototype.createDom=function(){this.element_=this.dom_.createElement("div")};goog.ui.Component.prototype.render=function(a){this.render_(a)};
goog.ui.Component.prototype.renderBefore=function(a){this.render_(a.parentNode,a)};goog.ui.Component.prototype.render_=function(a,b){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.element_||this.createDom();a?a.insertBefore(this.element_,b||null):this.dom_.getDocument().body.appendChild(this.element_);(!this.parent_||this.parent_.isInDocument())&&this.enterDocument()};
goog.ui.Component.prototype.decorate=function(a){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(a&&this.canDecorate(a)){this.wasDecorated_=!0;var b=goog.dom.getOwnerDocument(a);if(!this.dom_||this.dom_.getDocument()!=b)this.dom_=goog.dom.getDomHelper(a);this.decorateInternal(a);(!goog.ui.Component.ALLOW_DETACHED_DECORATION||goog.dom.contains(b,a))&&this.enterDocument()}else throw Error(goog.ui.Component.Error.DECORATE_INVALID);};
goog.ui.Component.prototype.canDecorate=function(a){return!0};goog.ui.Component.prototype.wasDecorated=function(){return this.wasDecorated_};goog.ui.Component.prototype.decorateInternal=function(a){this.element_=a};goog.ui.Component.prototype.enterDocument=function(){this.inDocument_=!0;this.forEachChild(function(a){!a.isInDocument()&&a.getElement()&&a.enterDocument()})};
goog.ui.Component.prototype.exitDocument=function(){this.forEachChild(function(a){a.isInDocument()&&a.exitDocument()});this.googUiComponentHandler_&&this.googUiComponentHandler_.removeAll();this.inDocument_=!1};
goog.ui.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument();this.googUiComponentHandler_&&(this.googUiComponentHandler_.dispose(),delete this.googUiComponentHandler_);this.forEachChild(function(a){a.dispose()});!this.wasDecorated_&&this.element_&&goog.dom.removeNode(this.element_);this.parent_=this.model_=this.element_=this.childIndex_=this.children_=null;goog.ui.Component.superClass_.disposeInternal.call(this)};
goog.ui.Component.prototype.makeId=function(a){return this.getId()+"."+a};goog.ui.Component.prototype.makeIds=function(a){var b={},c;for(c in a)b[c]=this.makeId(a[c]);return b};goog.ui.Component.prototype.getModel=function(){return this.model_};goog.ui.Component.prototype.setModel=function(a){this.model_=a};goog.ui.Component.prototype.getFragmentFromId=function(a){return a.substring(this.getId().length+1)};
goog.ui.Component.prototype.getElementByFragment=function(a){if(!this.inDocument_)throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);return this.dom_.getElement(this.makeId(a))};goog.ui.Component.prototype.addChild=function(a,b){this.addChildAt(a,this.getChildCount(),b)};
goog.ui.Component.prototype.addChildAt=function(a,b,c){if(a.inDocument_&&(c||!this.inDocument_))throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(0>b||b>this.getChildCount())throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);if(!this.childIndex_||!this.children_)this.childIndex_={},this.children_=[];a.getParent()==this?(goog.object.set(this.childIndex_,a.getId(),a),goog.array.remove(this.children_,a)):goog.object.add(this.childIndex_,a.getId(),a);a.setParent(this);goog.array.insertAt(this.children_,
a,b);a.inDocument_&&this.inDocument_&&a.getParent()==this?(c=this.getContentElement(),c.insertBefore(a.getElement(),c.childNodes[b]||null)):c?(this.element_||this.createDom(),b=this.getChildAt(b+1),a.render_(this.getContentElement(),b?b.element_:null)):this.inDocument_&&(!a.inDocument_&&a.element_&&a.element_.parentNode&&a.element_.parentNode.nodeType==goog.dom.NodeType.ELEMENT)&&a.enterDocument()};goog.ui.Component.prototype.getContentElement=function(){return this.element_};
goog.ui.Component.prototype.isRightToLeft=function(){null==this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.inDocument_?this.element_:this.dom_.getDocument().body));return this.rightToLeft_};goog.ui.Component.prototype.setRightToLeft=function(a){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.rightToLeft_=a};goog.ui.Component.prototype.hasChildren=function(){return!!this.children_&&0!=this.children_.length};
goog.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0};goog.ui.Component.prototype.getChildIds=function(){var a=[];this.forEachChild(function(b){a.push(b.getId())});return a};goog.ui.Component.prototype.getChild=function(a){return this.childIndex_&&a?goog.object.get(this.childIndex_,a)||null:null};goog.ui.Component.prototype.getChildAt=function(a){return this.children_?this.children_[a]||null:null};
goog.ui.Component.prototype.forEachChild=function(a,b){this.children_&&goog.array.forEach(this.children_,a,b)};goog.ui.Component.prototype.indexOfChild=function(a){return this.children_&&a?goog.array.indexOf(this.children_,a):-1};
goog.ui.Component.prototype.removeChild=function(a,b){if(a){var c=goog.isString(a)?a:a.getId();a=this.getChild(c);c&&a&&(goog.object.remove(this.childIndex_,c),goog.array.remove(this.children_,a),b&&(a.exitDocument(),a.element_&&goog.dom.removeNode(a.element_)),a.setParent(null))}if(!a)throw Error(goog.ui.Component.Error.NOT_OUR_CHILD);return a};goog.ui.Component.prototype.removeChildAt=function(a,b){return this.removeChild(this.getChildAt(a),b)};
goog.ui.Component.prototype.removeChildren=function(a){for(var b=[];this.hasChildren();)b.push(this.removeChildAt(0,a));return b};goog.a11y={};goog.a11y.aria={};
goog.a11y.aria.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",CONTROLS:"controls",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",OWNS:"owns",POSINSET:"posinset",
PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"};goog.a11y.aria.AutoCompleteValues={INLINE:"inline",LIST:"list",BOTH:"both",NONE:"none"};goog.a11y.aria.DropEffectValues={COPY:"copy",MOVE:"move",LINK:"link",EXECUTE:"execute",POPUP:"popup",NONE:"none"};goog.a11y.aria.LivePriority={OFF:"off",POLITE:"polite",ASSERTIVE:"assertive"};
goog.a11y.aria.OrientationValues={VERTICAL:"vertical",HORIZONTAL:"horizontal"};goog.a11y.aria.RelevantValues={ADDITIONS:"additions",REMOVALS:"removals",TEXT:"text",ALL:"all"};goog.a11y.aria.SortValues={ASCENDING:"ascending",DESCENDING:"descending",NONE:"none",OTHER:"other"};goog.a11y.aria.CheckedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"};goog.a11y.aria.ExpandedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};
goog.a11y.aria.GrabbedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.InvalidValues={FALSE:"false",TRUE:"true",GRAMMAR:"grammar",SPELLING:"spelling"};goog.a11y.aria.PressedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"};goog.a11y.aria.SelectedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.datatables={};
goog.a11y.aria.datatables.getDefaultValuesMap=function(){goog.a11y.aria.DefaultStateValueMap_||(goog.a11y.aria.DefaultStateValueMap_=goog.object.create(goog.a11y.aria.State.ATOMIC,!1,goog.a11y.aria.State.AUTOCOMPLETE,"none",goog.a11y.aria.State.DROPEFFECT,"none",goog.a11y.aria.State.HASPOPUP,!1,goog.a11y.aria.State.LIVE,"off",goog.a11y.aria.State.MULTILINE,!1,goog.a11y.aria.State.MULTISELECTABLE,!1,goog.a11y.aria.State.ORIENTATION,"vertical",goog.a11y.aria.State.READONLY,!1,goog.a11y.aria.State.RELEVANT,
"additions text",goog.a11y.aria.State.REQUIRED,!1,goog.a11y.aria.State.SORT,"none",goog.a11y.aria.State.BUSY,!1,goog.a11y.aria.State.DISABLED,!1,goog.a11y.aria.State.HIDDEN,!1,goog.a11y.aria.State.INVALID,"false"));return goog.a11y.aria.DefaultStateValueMap_};goog.a11y.aria.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",CONTENTINFO:"contentinfo",DEFINITION:"definition",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",
MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUBAR:"menubar",MENU_ITEM:"menuitem",MENU_ITEM_CHECKBOX:"menuitemcheckbox",MENU_ITEM_RADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",
TAB_LIST:"tablist",TAB_PANEL:"tabpanel",TEXTBOX:"textbox",TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"};goog.a11y.aria.ARIA_PREFIX_="aria-";goog.a11y.aria.ROLE_ATTRIBUTE_="role";goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_=[goog.dom.TagName.A,goog.dom.TagName.AREA,goog.dom.TagName.BUTTON,goog.dom.TagName.HEAD,goog.dom.TagName.INPUT,goog.dom.TagName.LINK,goog.dom.TagName.MENU,goog.dom.TagName.META,goog.dom.TagName.OPTGROUP,goog.dom.TagName.OPTION,goog.dom.TagName.PROGRESS,goog.dom.TagName.STYLE,goog.dom.TagName.SELECT,goog.dom.TagName.SOURCE,goog.dom.TagName.TEXTAREA,goog.dom.TagName.TITLE,goog.dom.TagName.TRACK];
goog.a11y.aria.setRole=function(a,b){b?(goog.asserts.ENABLE_ASSERTS&&goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.Role,b),"No such ARIA role "+b),a.setAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_,b)):goog.a11y.aria.removeRole(a)};goog.a11y.aria.getRole=function(a){return a.getAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)||null};goog.a11y.aria.removeRole=function(a){a.removeAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)};
goog.a11y.aria.setState=function(a,b,c){goog.isArrayLike(c)&&(c=c.join(" "));var d=goog.a11y.aria.getAriaAttributeName_(b);""===c||void 0==c?(c=goog.a11y.aria.datatables.getDefaultValuesMap(),b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)};goog.a11y.aria.removeState=function(a,b){a.removeAttribute(goog.a11y.aria.getAriaAttributeName_(b))};goog.a11y.aria.getState=function(a,b){var c=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(b));return null==c||void 0==c?"":String(c)};
goog.a11y.aria.getActiveDescendant=function(a){var b=goog.a11y.aria.getState(a,goog.a11y.aria.State.ACTIVEDESCENDANT);return goog.dom.getOwnerDocument(a).getElementById(b)};goog.a11y.aria.setActiveDescendant=function(a,b){var c="";b&&(c=b.id,goog.asserts.assert(c,"The active element should have an id."));goog.a11y.aria.setState(a,goog.a11y.aria.State.ACTIVEDESCENDANT,c)};goog.a11y.aria.getLabel=function(a){return goog.a11y.aria.getState(a,goog.a11y.aria.State.LABEL)};
goog.a11y.aria.setLabel=function(a,b){goog.a11y.aria.setState(a,goog.a11y.aria.State.LABEL,b)};goog.a11y.aria.assertRoleIsSetInternalUtil=function(a,b){if(!goog.array.contains(goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_,a.tagName)){var c=goog.a11y.aria.getRole(a);goog.asserts.assert(null!=c,"The element ARIA role cannot be null.");goog.asserts.assert(goog.array.contains(b,c),'Non existing or incorrect role set for element.The role set is "'+c+'". The role should be any of "'+b+'". Check the ARIA specification for more details http://www.w3.org/TR/wai-aria/roles.')}};
goog.a11y.aria.getBooleanStateInternalUtil=function(a,b){var c=goog.a11y.aria.getState(a,b);return"true"==c?!0:"false"==c?!1:null};goog.a11y.aria.getNumberStateInternalUtil=function(a,b){var c=goog.a11y.aria.getState(a,b);return goog.string.isNumeric(c)?goog.string.toNumber(c):null};goog.a11y.aria.getStringArrayStateInternalUtil=function(a,b){var c=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(b));return goog.a11y.aria.splitStringOnWhitespace_(c)};
goog.a11y.aria.getStringStateInternalUtil=function(a,b){return goog.a11y.aria.getState(a,b)||null};goog.a11y.aria.splitStringOnWhitespace_=function(a){return a?a.split(/\s+/):[]};goog.a11y.aria.getAriaAttributeName_=function(a){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.assert(a,"ARIA attribute cannot be empty."),goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.State,a),"No such ARIA attribute "+a));return goog.a11y.aria.ARIA_PREFIX_+a};goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,
X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,
SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,PHANTOM:255};
goog.events.KeyCodes.isTextModifyingKeyEvent=function(a){if(a.altKey&&!a.ctrlKey||a.metaKey||a.keyCode>=goog.events.KeyCodes.F1&&a.keyCode<=goog.events.KeyCodes.F12)return!1;switch(a.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return!1;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return!goog.userAgent.GECKO;
default:return a.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||a.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}};
goog.events.KeyCodes.firesKeyPressEvent=function(a,b,c,d,e){if(!goog.userAgent.IE&&(!goog.userAgent.WEBKIT||!goog.userAgent.isVersionOrHigher("525")))return!0;if(goog.userAgent.MAC&&e)return goog.events.KeyCodes.isCharacterKey(a);if(e&&!d||!c&&(b==goog.events.KeyCodes.CTRL||b==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&b==goog.events.KeyCodes.META))return!1;if(goog.userAgent.WEBKIT&&d&&c)switch(a){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return!1}if(goog.userAgent.IE&&
d&&b==a)return!1;switch(a){case goog.events.KeyCodes.ENTER:return!(goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9));case goog.events.KeyCodes.ESC:return!goog.userAgent.WEBKIT}return goog.events.KeyCodes.isCharacterKey(a)};
goog.events.KeyCodes.isCharacterKey=function(a){if(a>=goog.events.KeyCodes.ZERO&&a<=goog.events.KeyCodes.NINE||a>=goog.events.KeyCodes.NUM_ZERO&&a<=goog.events.KeyCodes.NUM_MULTIPLY||a>=goog.events.KeyCodes.A&&a<=goog.events.KeyCodes.Z||goog.userAgent.WEBKIT&&0==a)return!0;switch(a){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:return!0;
default:return!1}};goog.events.KeyCodes.normalizeGeckoKeyCode=function(a){switch(a){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return a}};goog.ui.tree={};goog.ui.tree.BaseNode=function(a,b,c){goog.ui.Component.call(this,c);this.config_=b||goog.ui.tree.TreeControl.defaultConfig;this.html_=a};goog.inherits(goog.ui.tree.BaseNode,goog.ui.Component);goog.ui.tree.BaseNode.EventType={BEFORE_EXPAND:"beforeexpand",EXPAND:"expand",BEFORE_COLLAPSE:"beforecollapse",COLLAPSE:"collapse"};goog.ui.tree.BaseNode.allNodes={};goog.ui.tree.BaseNode.prototype.selected_=!1;goog.ui.tree.BaseNode.prototype.expanded_=!1;
goog.ui.tree.BaseNode.prototype.toolTip_=null;goog.ui.tree.BaseNode.prototype.afterLabelHtml_="";goog.ui.tree.BaseNode.prototype.isUserCollapsible_=!0;goog.ui.tree.BaseNode.prototype.depth_=-1;goog.ui.tree.BaseNode.prototype.disposeInternal=function(){goog.ui.tree.BaseNode.superClass_.disposeInternal.call(this);this.tree_&&(this.tree_.removeNode(this),this.tree_=null);this.setElementInternal(null)};
goog.ui.tree.BaseNode.prototype.initAccessibility=function(){var a=this.getElement();if(a){var b=this.getLabelElement();b&&!b.id&&(b.id=this.getId()+".label");goog.a11y.aria.setRole(a,"treeitem");goog.a11y.aria.setState(a,"selected",!1);goog.a11y.aria.setState(a,"expanded",!1);goog.a11y.aria.setState(a,"level",this.getDepth());b&&goog.a11y.aria.setState(a,"labelledby",b.id);(a=this.getIconElement())&&goog.a11y.aria.setRole(a,"presentation");(a=this.getExpandIconElement())&&goog.a11y.aria.setRole(a,
"presentation");if(a=this.getChildrenElement())if(goog.a11y.aria.setRole(a,"group"),a.hasChildNodes()){a=this.getChildCount();for(b=1;b<=a;b++){var c=this.getChildAt(b-1).getElement();goog.asserts.assert(c,"The child element cannot be null");goog.a11y.aria.setState(c,"setsize",a);goog.a11y.aria.setState(c,"posinset",b)}}}};goog.ui.tree.BaseNode.prototype.createDom=function(){var a=new goog.string.StringBuffer;this.toHtml(a);a=this.getDomHelper().htmlToDocumentFragment(a.toString());this.setElementInternal(a)};
goog.ui.tree.BaseNode.prototype.enterDocument=function(){goog.ui.tree.BaseNode.superClass_.enterDocument.call(this);goog.ui.tree.BaseNode.allNodes[this.getId()]=this;this.initAccessibility()};goog.ui.tree.BaseNode.prototype.exitDocument=function(){goog.ui.tree.BaseNode.superClass_.exitDocument.call(this);delete goog.ui.tree.BaseNode.allNodes[this.getId()]};
goog.ui.tree.BaseNode.prototype.addChildAt=function(a,b,c){goog.asserts.assert(!a.getParent());c=this.getChildAt(b-1);var d=this.getChildAt(b);goog.ui.tree.BaseNode.superClass_.addChildAt.call(this,a,b);a.previousSibling_=c;a.nextSibling_=d;c?c.nextSibling_=a:this.firstChild_=a;d?d.previousSibling_=a:this.lastChild_=a;(b=this.getTree())&&a.setTreeInternal(b);a.setDepth_(this.getDepth()+1);if(this.getElement()&&(this.updateExpandIcon(),this.getExpanded())){b=this.getChildrenElement();a.getElement()||
a.createDom();var e=a.getElement(),f=d&&d.getElement();b.insertBefore(e,f);this.isInDocument()&&a.enterDocument();d||(c?c.updateExpandIcon():(goog.style.setElementShown(b,!0),this.setExpanded(this.getExpanded())))}};goog.ui.tree.BaseNode.prototype.add=function(a,b){goog.asserts.assert(!b||b.getParent()==this,"Can only add nodes before siblings");a.getParent()&&a.getParent().removeChild(a);this.addChildAt(a,b?this.indexOfChild(b):this.getChildCount());return a};
goog.ui.tree.BaseNode.prototype.removeChild=function(a,b){var c=this.getTree(),d=c?c.getSelectedItem():null;if(d==a||a.contains(d))c.hasFocus()?(this.select(),goog.Timer.callOnce(this.onTimeoutSelect_,10,this)):this.select();goog.ui.tree.BaseNode.superClass_.removeChild.call(this,a);this.lastChild_==a&&(this.lastChild_=a.previousSibling_);this.firstChild_==a&&(this.firstChild_=a.nextSibling_);a.previousSibling_&&(a.previousSibling_.nextSibling_=a.nextSibling_);a.nextSibling_&&(a.nextSibling_.previousSibling_=
a.previousSibling_);d=a.isLastSibling();a.tree_=null;a.depth_=-1;if(c&&(c.removeNode(this),this.isInDocument())){c=this.getChildrenElement();if(a.isInDocument()){var e=a.getElement();c.removeChild(e);a.exitDocument()}d&&(d=this.getLastChild())&&d.updateExpandIcon();this.hasChildren()||(c.style.display="none",this.updateExpandIcon(),this.updateIcon_())}return a};goog.ui.tree.BaseNode.prototype.remove=goog.ui.tree.BaseNode.prototype.removeChild;goog.ui.tree.BaseNode.prototype.onTimeoutSelect_=function(){this.select()};
goog.ui.tree.BaseNode.prototype.getDepth=function(){var a=this.depth_;0>a&&(a=this.computeDepth_(),this.setDepth_(a));return a};goog.ui.tree.BaseNode.prototype.computeDepth_=function(){var a=this.getParent();return a?a.getDepth()+1:0};goog.ui.tree.BaseNode.prototype.setDepth_=function(a){if(a!=this.depth_){this.depth_=a;var b=this.getRowElement();if(b){var c=this.getPixelIndent_()+"px";this.isRightToLeft()?b.style.paddingRight=c:b.style.paddingLeft=c}this.forEachChild(function(b){b.setDepth_(a+1)})}};
goog.ui.tree.BaseNode.prototype.contains=function(a){for(;a;){if(a==this)return!0;a=a.getParent()}return!1};goog.ui.tree.BaseNode.EMPTY_CHILDREN_=[];goog.ui.tree.BaseNode.prototype.getChildren=function(){var a=[];this.forEachChild(function(b){a.push(b)});return a};goog.ui.tree.BaseNode.prototype.getFirstChild=function(){return this.getChildAt(0)};goog.ui.tree.BaseNode.prototype.getLastChild=function(){return this.getChildAt(this.getChildCount()-1)};
goog.ui.tree.BaseNode.prototype.getPreviousSibling=function(){return this.previousSibling_};goog.ui.tree.BaseNode.prototype.getNextSibling=function(){return this.nextSibling_};goog.ui.tree.BaseNode.prototype.isLastSibling=function(){return!this.nextSibling_};goog.ui.tree.BaseNode.prototype.isSelected=function(){return this.selected_};goog.ui.tree.BaseNode.prototype.select=function(){var a=this.getTree();a&&a.setSelectedItem(this)};goog.ui.tree.BaseNode.prototype.deselect=goog.nullFunction;
goog.ui.tree.BaseNode.prototype.setSelectedInternal=function(a){if(this.selected_!=a){this.selected_=a;this.updateRow();var b=this.getElement();b&&(goog.a11y.aria.setState(b,"selected",a),a&&(a=this.getTree().getElement(),goog.asserts.assert(a,"The DOM element for the tree cannot be null"),goog.a11y.aria.setState(a,"activedescendant",this.getId())))}};goog.ui.tree.BaseNode.prototype.getExpanded=function(){return this.expanded_};
goog.ui.tree.BaseNode.prototype.setExpandedInternal=function(a){this.expanded_=a};
goog.ui.tree.BaseNode.prototype.setExpanded=function(a){var b=a!=this.expanded_;if(!b||this.dispatchEvent(a?goog.ui.tree.BaseNode.EventType.BEFORE_EXPAND:goog.ui.tree.BaseNode.EventType.BEFORE_COLLAPSE)){var c;this.expanded_=a;c=this.getTree();var d=this.getElement();if(this.hasChildren()){if(!a&&(c&&this.contains(c.getSelectedItem()))&&this.select(),d){if(c=this.getChildrenElement())if(goog.style.setElementShown(c,a),a&&this.isInDocument()&&!c.hasChildNodes()){var e=new goog.string.StringBuffer;
this.forEachChild(function(a){a.toHtml(e)});c.innerHTML=e.toString();this.forEachChild(function(a){a.enterDocument()})}this.updateExpandIcon()}}else(c=this.getChildrenElement())&&goog.style.setElementShown(c,!1);d&&(this.updateIcon_(),goog.a11y.aria.setState(d,"expanded",a));b&&this.dispatchEvent(a?goog.ui.tree.BaseNode.EventType.EXPAND:goog.ui.tree.BaseNode.EventType.COLLAPSE)}};goog.ui.tree.BaseNode.prototype.toggle=function(){this.setExpanded(!this.getExpanded())};
goog.ui.tree.BaseNode.prototype.expand=function(){this.setExpanded(!0)};goog.ui.tree.BaseNode.prototype.collapse=function(){this.setExpanded(!1)};goog.ui.tree.BaseNode.prototype.collapseChildren=function(){this.forEachChild(function(a){a.collapseAll()})};goog.ui.tree.BaseNode.prototype.collapseAll=function(){this.collapseChildren();this.collapse()};goog.ui.tree.BaseNode.prototype.expandChildren=function(){this.forEachChild(function(a){a.expandAll()})};
goog.ui.tree.BaseNode.prototype.expandAll=function(){this.expandChildren();this.expand()};goog.ui.tree.BaseNode.prototype.reveal=function(){var a=this.getParent();a&&(a.setExpanded(!0),a.reveal())};goog.ui.tree.BaseNode.prototype.setIsUserCollapsible=function(a){(this.isUserCollapsible_=a)||this.expand();this.getElement()&&this.updateExpandIcon()};goog.ui.tree.BaseNode.prototype.isUserCollapsible=function(){return this.isUserCollapsible_};
goog.ui.tree.BaseNode.prototype.toHtml=function(a){var b=this.getTree(),b=!b.getShowLines()||b==this.getParent()&&!b.getShowRootLines()?this.config_.cssChildrenNoLines:this.config_.cssChildren,c=this.getExpanded()&&this.hasChildren();a.append('<div class="',this.config_.cssItem,'" id="',this.getId(),'">',this.getRowHtml(),'<div class="',b,'" style="',this.getLineStyle(),c?"":"display:none;",'">');c&&this.forEachChild(function(b){b.toHtml(a)});a.append("</div></div>")};
goog.ui.tree.BaseNode.prototype.getPixelIndent_=function(){return Math.max(0,(this.getDepth()-1)*this.config_.indentWidth)};goog.ui.tree.BaseNode.prototype.getRowHtml=function(){var a=new goog.string.StringBuffer;a.append('<div class="',this.getRowClassName(),'" style="padding-',this.isRightToLeft()?"right:":"left:",this.getPixelIndent_(),'px">',this.getExpandIconHtml(),this.getIconHtml(),this.getLabelHtml(),"</div>");return a.toString()};
goog.ui.tree.BaseNode.prototype.getRowClassName=function(){var a;a=this.isSelected()?" "+this.config_.cssSelectedRow:"";return this.config_.cssTreeRow+a};goog.ui.tree.BaseNode.prototype.getLabelHtml=function(){var a=this.getToolTip(),b=new goog.string.StringBuffer;b.append('<span class="',this.config_.cssItemLabel,'"',a?' title="'+goog.string.htmlEscape(a)+'"':"",">",this.getHtml(),"</span>","<span>",this.getAfterLabelHtml(),"</span>");return b.toString()};
goog.ui.tree.BaseNode.prototype.getAfterLabelHtml=function(){return this.afterLabelHtml_};goog.ui.tree.BaseNode.prototype.setAfterLabelHtml=function(a){this.afterLabelHtml_=a;var b=this.getAfterLabelElement();b&&(b.innerHTML=a)};goog.ui.tree.BaseNode.prototype.getIconHtml=function(){return'<span style="display:inline-block" class="'+this.getCalculatedIconClass()+'"></span>'};
goog.ui.tree.BaseNode.prototype.getExpandIconHtml=function(){return'<span type="expand" style="display:inline-block" class="'+this.getExpandIconClass()+'"></span>'};
goog.ui.tree.BaseNode.prototype.getExpandIconClass=function(){var a=this.getTree(),b=!a.getShowLines()||a==this.getParent()&&!a.getShowRootLines(),c=this.config_,d=new goog.string.StringBuffer;d.append(c.cssTreeIcon," ",c.cssExpandTreeIcon," ");if(this.hasChildren()){var e=0;a.getShowExpandIcons()&&this.isUserCollapsible_&&(e=this.getExpanded()?2:1);b||(e=this.isLastSibling()?e+4:e+8);switch(e){case 1:d.append(c.cssExpandTreeIconPlus);break;case 2:d.append(c.cssExpandTreeIconMinus);break;case 4:d.append(c.cssExpandTreeIconL);
break;case 5:d.append(c.cssExpandTreeIconLPlus);break;case 6:d.append(c.cssExpandTreeIconLMinus);break;case 8:d.append(c.cssExpandTreeIconT);break;case 9:d.append(c.cssExpandTreeIconTPlus);break;case 10:d.append(c.cssExpandTreeIconTMinus);break;default:d.append(c.cssExpandTreeIconBlank)}}else b?d.append(c.cssExpandTreeIconBlank):this.isLastSibling()?d.append(c.cssExpandTreeIconL):d.append(c.cssExpandTreeIconT);return d.toString()};
goog.ui.tree.BaseNode.prototype.getLineStyle=function(){return"background-position:"+this.getLineStyle2()+";"};goog.ui.tree.BaseNode.prototype.getLineStyle2=function(){return(this.isLastSibling()?"-100":(this.getDepth()-1)*this.config_.indentWidth)+"px 0"};goog.ui.tree.BaseNode.prototype.getElement=function(){var a=goog.ui.tree.BaseNode.superClass_.getElement.call(this);a||(a=this.getDomHelper().getElement(this.getId()),this.setElementInternal(a));return a};
goog.ui.tree.BaseNode.prototype.getRowElement=function(){var a=this.getElement();return a?a.firstChild:null};goog.ui.tree.BaseNode.prototype.getExpandIconElement=function(){var a=this.getRowElement();return a?a.firstChild:null};goog.ui.tree.BaseNode.prototype.getIconElement=function(){var a=this.getRowElement();return a?a.childNodes[1]:null};goog.ui.tree.BaseNode.prototype.getLabelElement=function(){var a=this.getRowElement();return a&&a.lastChild?a.lastChild.previousSibling:null};
goog.ui.tree.BaseNode.prototype.getAfterLabelElement=function(){var a=this.getRowElement();return a?a.lastChild:null};goog.ui.tree.BaseNode.prototype.getChildrenElement=function(){var a=this.getElement();return a?a.lastChild:null};goog.ui.tree.BaseNode.prototype.setIconClass=function(a){this.iconClass_=a;this.isInDocument()&&this.updateIcon_()};goog.ui.tree.BaseNode.prototype.getIconClass=function(){return this.iconClass_};
goog.ui.tree.BaseNode.prototype.setExpandedIconClass=function(a){this.expandedIconClass_=a;this.isInDocument()&&this.updateIcon_()};goog.ui.tree.BaseNode.prototype.getExpandedIconClass=function(){return this.expandedIconClass_};goog.ui.tree.BaseNode.prototype.setText=function(a){this.setHtml(goog.string.htmlEscape(a))};goog.ui.tree.BaseNode.prototype.getText=function(){return goog.string.unescapeEntities(this.getHtml())};
goog.ui.tree.BaseNode.prototype.setHtml=function(a){this.html_=a;var b=this.getLabelElement();b&&(b.innerHTML=a);(a=this.getTree())&&a.setNode(this)};goog.ui.tree.BaseNode.prototype.getHtml=function(){return this.html_};goog.ui.tree.BaseNode.prototype.setToolTip=function(a){this.toolTip_=a;var b=this.getLabelElement();b&&(b.title=a)};goog.ui.tree.BaseNode.prototype.getToolTip=function(){return this.toolTip_};
goog.ui.tree.BaseNode.prototype.updateRow=function(){var a=this.getRowElement();a&&(a.className=this.getRowClassName())};goog.ui.tree.BaseNode.prototype.updateExpandIcon=function(){var a=this.getExpandIconElement();a&&(a.className=this.getExpandIconClass());if(a=this.getChildrenElement())a.style.backgroundPosition=this.getLineStyle2()};goog.ui.tree.BaseNode.prototype.updateIcon_=function(){this.getIconElement().className=this.getCalculatedIconClass()};
goog.ui.tree.BaseNode.prototype.onMouseDown=function(a){"expand"==a.target.getAttribute("type")&&this.hasChildren()?this.isUserCollapsible_&&this.toggle():(this.select(),this.updateRow())};goog.ui.tree.BaseNode.prototype.onClick_=goog.events.Event.preventDefault;goog.ui.tree.BaseNode.prototype.onDoubleClick_=function(a){"expand"==a.target.getAttribute("type")&&this.hasChildren()||this.isUserCollapsible_&&this.toggle()};
goog.ui.tree.BaseNode.prototype.onKeyDown=function(a){var b=!0;switch(a.keyCode){case goog.events.KeyCodes.RIGHT:if(a.altKey)break;this.hasChildren()&&(this.getExpanded()?this.getFirstChild().select():this.setExpanded(!0));break;case goog.events.KeyCodes.LEFT:if(a.altKey)break;if(this.hasChildren()&&this.getExpanded()&&this.isUserCollapsible_)this.setExpanded(!1);else{var c=this.getParent(),d=this.getTree();c&&(d.getShowRootNode()||c!=d)&&c.select()}break;case goog.events.KeyCodes.DOWN:(c=this.getNextShownNode())&&
c.select();break;case goog.events.KeyCodes.UP:(c=this.getPreviousShownNode())&&c.select();break;default:b=!1}b&&(a.preventDefault(),(d=this.getTree())&&d.clearTypeAhead());return b};goog.ui.tree.BaseNode.prototype.onKeyPress_=function(a){!a.altKey&&(a.keyCode>=goog.events.KeyCodes.LEFT&&a.keyCode<=goog.events.KeyCodes.DOWN)&&a.preventDefault()};goog.ui.tree.BaseNode.prototype.getLastShownDescendant=function(){return!this.getExpanded()||!this.hasChildren()?this:this.getLastChild().getLastShownDescendant()};
goog.ui.tree.BaseNode.prototype.getNextShownNode=function(){if(this.hasChildren()&&this.getExpanded())return this.getFirstChild();for(var a=this,b;a!=this.getTree();){b=a.getNextSibling();if(null!=b)return b;a=a.getParent()}return null};goog.ui.tree.BaseNode.prototype.getPreviousShownNode=function(){var a=this.getPreviousSibling();if(null!=a)return a.getLastShownDescendant();var a=this.getParent(),b=this.getTree();return!b.getShowRootNode()&&a==b?null:a};
goog.ui.tree.BaseNode.prototype.getClientData=goog.ui.tree.BaseNode.prototype.getModel;goog.ui.tree.BaseNode.prototype.setClientData=goog.ui.tree.BaseNode.prototype.setModel;goog.ui.tree.BaseNode.prototype.getConfig=function(){return this.config_};goog.ui.tree.BaseNode.prototype.setTreeInternal=function(a){this.tree_!=a&&(this.tree_=a,a.setNode(this),this.forEachChild(function(b){b.setTreeInternal(a)}))};goog.ui.tree.TreeNode=function(a,b,c){goog.ui.tree.BaseNode.call(this,a,b,c)};goog.inherits(goog.ui.tree.TreeNode,goog.ui.tree.BaseNode);goog.ui.tree.TreeNode.prototype.tree_=null;goog.ui.tree.TreeNode.prototype.getTree=function(){if(this.tree_)return this.tree_;var a=this.getParent();return a&&(a=a.getTree())?(this.setTreeInternal(a),a):null};
goog.ui.tree.TreeNode.prototype.getCalculatedIconClass=function(){var a=this.getExpanded();if(a&&this.expandedIconClass_)return this.expandedIconClass_;if(!a&&this.iconClass_)return this.iconClass_;var b=this.getConfig();if(this.hasChildren()){if(a&&b.cssExpandedFolderIcon)return b.cssTreeIcon+" "+b.cssExpandedFolderIcon;if(!a&&b.cssCollapsedFolderIcon)return b.cssTreeIcon+" "+b.cssCollapsedFolderIcon}else if(b.cssFileIcon)return b.cssTreeIcon+" "+b.cssFileIcon;return""};Blockly.Language={};Blockly.ContextMenu={};Blockly.ContextMenu.X_PADDING=20;Blockly.ContextMenu.Y_HEIGHT=20;Blockly.ContextMenu.visible=!1;
Blockly.ContextMenu.createDom=function(){var a=Blockly.createSvgElement("g",{"class":"blocklyHidden"},null);Blockly.ContextMenu.svgGroup=a;Blockly.ContextMenu.svgShadow=Blockly.createSvgElement("rect",{"class":"blocklyContextMenuShadow",x:2,y:-2,rx:4,ry:4},a);Blockly.ContextMenu.svgBackground=Blockly.createSvgElement("rect",{"class":"blocklyContextMenuBackground",y:-4,rx:4,ry:4},a);Blockly.ContextMenu.svgOptions=Blockly.createSvgElement("g",{"class":"blocklyContextMenuOptions"},a);return a};
Blockly.ContextMenu.show=function(a,b,c){if(c.length){goog.dom.removeChildren(Blockly.ContextMenu.svgOptions);Blockly.ContextMenu.svgGroup.style.display="block";for(var d=0,e=[Blockly.ContextMenu.svgBackground,Blockly.ContextMenu.svgShadow],f=0,g;g=c[f];f++){var k=Blockly.ContextMenu.optionToDom(g.text),l=k.firstChild,m=k.lastChild;Blockly.ContextMenu.svgOptions.appendChild(k);k.setAttribute("transform","translate(0, "+f*Blockly.ContextMenu.Y_HEIGHT+")");e.push(l);Blockly.bindEvent_(k,"mousedown",
null,Blockly.noEvent);g.enabled?(Blockly.bindEvent_(k,"mouseup",null,g.callback),Blockly.bindEvent_(k,"mouseup",null,Blockly.ContextMenu.hide)):k.setAttribute("class","blocklyMenuDivDisabled");d=Math.max(d,m.getComputedTextLength())}d+=2*Blockly.ContextMenu.X_PADDING;for(f=0;f<e.length;f++)e[f].setAttribute("width",d);Blockly.ContextMenu.svgBackground.setAttribute("height",c.length*Blockly.ContextMenu.Y_HEIGHT+8);Blockly.ContextMenu.svgShadow.setAttribute("height",c.length*Blockly.ContextMenu.Y_HEIGHT+
10);b=Blockly.convertCoordinates(a,b,!0);a=b.x;b=b.y;c=Blockly.ContextMenu.svgGroup.getBBox();d=Blockly.svgSize();b+c.height>d.height&&(b-=c.height-10);a+c.width>d.width?a-=c.width:a++;Blockly.ContextMenu.svgGroup.setAttribute("transform","translate("+a+", "+b+")");Blockly.ContextMenu.visible=!0}else Blockly.ContextMenu.hide()};
Blockly.ContextMenu.optionToDom=function(a){var b=Blockly.createSvgElement("g",{"class":"blocklyMenuDiv"},null);Blockly.createSvgElement("rect",{height:Blockly.ContextMenu.Y_HEIGHT},b);var c=Blockly.createSvgElement("text",{"class":"blocklyMenuText",x:Blockly.ContextMenu.X_PADDING,y:15},b);a=document.createTextNode(a);c.appendChild(a);return b};Blockly.ContextMenu.hide=function(){Blockly.ContextMenu.visible&&(Blockly.ContextMenu.svgGroup.style.display="none",Blockly.ContextMenu.visible=!1)};
Blockly.ContextMenu.callbackFactory=function(a,b){return function(){var c=Blockly.Xml.domToBlock_(a.workspace,b),d=a.getRelativeToSurfaceXY();d.x+=Blockly.SNAP_RADIUS;d.y+=2*Blockly.SNAP_RADIUS;c.moveBy(d.x,d.y);c.select()}};Blockly.Bubble=function(a,b,c,d,e,f,g){this.arrow_radians_=2*Blockly.Bubble.ARROW_ANGLE/360*Math.PI;this.workspace_=a;this.content_=b;this.shape_=c;a.getBubbleCanvas().appendChild(this.createDom_(b,!(!f||!g)));this.setAnchorLocation(d,e);if(!f||!g)a=this.content_.getBBox(),f=a.width+2*Blockly.Bubble.BORDER_WIDTH,g=a.height+2*Blockly.Bubble.BORDER_WIDTH;this.setBubbleSize(f,g);this.positionBubble_();this.renderArrow_();this.rendered_=!0;Blockly.bindEvent_(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_);
this.resizeGroup_&&Blockly.bindEvent_(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_)};Blockly.Bubble.BORDER_WIDTH=6;Blockly.Bubble.ARROW_THICKNESS=10;Blockly.Bubble.ARROW_ANGLE=20;Blockly.Bubble.ARROW_BEND=4;Blockly.Bubble.ANCHOR_RADIUS=8;Blockly.Bubble.onMouseUpWrapper_=null;Blockly.Bubble.onMouseMoveWrapper_=null;
Blockly.Bubble.unbindDragEvents_=function(){Blockly.Bubble.onMouseUpWrapper_&&(Blockly.unbindEvent_(Blockly.Bubble.onMouseUpWrapper_),Blockly.Bubble.onMouseUpWrapper_=null);Blockly.Bubble.onMouseMoveWrapper_&&(Blockly.unbindEvent_(Blockly.Bubble.onMouseMoveWrapper_),Blockly.Bubble.onMouseMoveWrapper_=null)};Blockly.Bubble.prototype.rendered_=!1;Blockly.Bubble.prototype.anchorX_=0;Blockly.Bubble.prototype.anchorY_=0;Blockly.Bubble.prototype.relativeLeft_=0;Blockly.Bubble.prototype.relativeTop_=0;
Blockly.Bubble.prototype.width_=0;Blockly.Bubble.prototype.height_=0;Blockly.Bubble.prototype.autoLayout_=!0;
Blockly.Bubble.prototype.createDom_=function(a,b){this.bubbleGroup_=Blockly.createSvgElement("g",{},null);var c=Blockly.createSvgElement("g",{filter:"url(#blocklyEmboss)"},this.bubbleGroup_);this.bubbleArrow_=Blockly.createSvgElement("path",{},c);this.bubbleBack_=Blockly.createSvgElement("rect",{"class":"blocklyDraggable",x:0,y:0,rx:Blockly.Bubble.BORDER_WIDTH,ry:Blockly.Bubble.BORDER_WIDTH},c);b?(this.resizeGroup_=Blockly.createSvgElement("g",{"class":"blocklyResizeSE"},this.bubbleGroup_),c=2*Blockly.Bubble.BORDER_WIDTH,
Blockly.createSvgElement("polygon",{points:"0,x x,x x,0".replace(/x/g,c.toString())},this.resizeGroup_),Blockly.createSvgElement("line",{"class":"blocklyResizeLine",x1:c/3,y1:c-1,x2:c-1,y2:c/3},this.resizeGroup_),Blockly.createSvgElement("line",{"class":"blocklyResizeLine",x1:2*c/3,y1:c-1,x2:c-1,y2:2*c/3},this.resizeGroup_)):this.resizeGroup_=null;this.bubbleGroup_.appendChild(a);return this.bubbleGroup_};
Blockly.Bubble.prototype.bubbleMouseDown_=function(a){this.promote_();Blockly.Bubble.unbindDragEvents_();!Blockly.isRightButton(a)&&!Blockly.isTargetInput_(a)&&(Blockly.setCursorHand_(!0),this.dragDeltaX=this.relativeLeft_-a.clientX,this.dragDeltaY=this.relativeTop_-a.clientY,Blockly.Bubble.onMouseUpWrapper_=Blockly.bindEvent_(document,"mouseup",this,Blockly.Bubble.unbindDragEvents_),Blockly.Bubble.onMouseMoveWrapper_=Blockly.bindEvent_(document,"mousemove",this,this.bubbleMouseMove_),Blockly.hideChaff(),
a.stopPropagation())};Blockly.Bubble.prototype.bubbleMouseMove_=function(a){this.autoLayout_=!1;this.relativeLeft_=this.dragDeltaX+a.clientX;this.relativeTop_=this.dragDeltaY+a.clientY;this.positionBubble_();this.renderArrow_()};
Blockly.Bubble.prototype.resizeMouseDown_=function(a){this.promote_();Blockly.Bubble.unbindDragEvents_();Blockly.isRightButton(a)||(Blockly.setCursorHand_(!0),this.resizeDeltaWidth=this.width_-a.clientX,this.resizeDeltaHeight=this.height_-a.clientY,Blockly.Bubble.onMouseUpWrapper_=Blockly.bindEvent_(document,"mouseup",this,Blockly.Bubble.unbindDragEvents_),Blockly.Bubble.onMouseMoveWrapper_=Blockly.bindEvent_(document,"mousemove",this,this.resizeMouseMove_),Blockly.hideChaff(),a.stopPropagation())};
Blockly.Bubble.prototype.resizeMouseMove_=function(a){this.autoLayout_=!1;var b=this.resizeDeltaWidth,c=this.resizeDeltaHeight+a.clientY,b=b+a.clientX;this.setBubbleSize(b,c)};Blockly.Bubble.prototype.registerResizeEvent=function(a,b){Blockly.bindEvent_(this.bubbleGroup_,"resize",a,b)};Blockly.Bubble.prototype.promote_=function(){this.bubbleGroup_.parentNode.appendChild(this.bubbleGroup_)};Blockly.Bubble.prototype.setAnchorLocation=function(a,b){this.anchorX_=a;this.anchorY_=b;this.rendered_&&this.positionBubble_()};
Blockly.Bubble.prototype.layoutBubble_=function(){var a=-this.width_/4,b=-this.height_-Blockly.BlockSvg.MIN_BLOCK_Y;if(this.workspace_.scrollbar){var c=this.workspace_.scrollbar.getMetrics_();this.anchorX_+a<Blockly.BlockSvg.SEP_SPACE_X+c.viewLeft?a=Blockly.BlockSvg.SEP_SPACE_X+c.viewLeft-this.anchorX_:c.viewLeft+c.viewWidth<this.anchorX_+a+this.width_+Blockly.BlockSvg.SEP_SPACE_X+Blockly.Scrollbar.scrollbarThickness&&(a=c.viewLeft+c.viewWidth-this.anchorX_-this.width_-Blockly.BlockSvg.SEP_SPACE_X-
Blockly.Scrollbar.scrollbarThickness);this.anchorY_+b<Blockly.BlockSvg.SEP_SPACE_Y+c.viewTop&&(b=this.shape_.getBBox().height)}this.relativeLeft_=a;this.relativeTop_=b};Blockly.Bubble.prototype.positionBubble_=function(){this.bubbleGroup_.setAttribute("transform","translate("+(this.anchorX_+this.relativeLeft_)+", "+(this.relativeTop_+this.anchorY_)+")")};Blockly.Bubble.prototype.getBubbleSize=function(){return{width:this.width_,height:this.height_}};
Blockly.Bubble.prototype.setBubbleSize=function(a,b){var c=2*Blockly.Bubble.BORDER_WIDTH;a=Math.max(a,c+45);b=Math.max(b,c+Blockly.BlockSvg.TITLE_HEIGHT);this.width_=a;this.height_=b;this.bubbleBack_.setAttribute("width",a);this.bubbleBack_.setAttribute("height",b);this.resizeGroup_&&this.resizeGroup_.setAttribute("transform","translate("+(a-c)+", "+(b-c)+")");this.rendered_&&(this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_());Blockly.fireUiEvent(this.bubbleGroup_,
"resize")};
Blockly.Bubble.prototype.renderArrow_=function(){var a=[],b=this.width_/2,c=this.height_/2,d=-this.relativeLeft_,e=-this.relativeTop_;if(b==d&&c==e)a.push("M "+b+","+c);else{var e=e-c,d=d-b,f=Math.sqrt(e*e+d*d),g=Math.acos(d/f);0>e&&(g=2*Math.PI-g);var k=g+Math.PI/2;k>2*Math.PI&&(k-=2*Math.PI);var l=Math.sin(k),m=Math.cos(k),p=this.getBubbleSize(),k=(p.width+p.height)/Blockly.Bubble.ARROW_THICKNESS,k=Math.min(k,p.width,p.height)/2,p=1-Blockly.Bubble.ANCHOR_RADIUS/f,d=b+p*d,e=c+p*e,p=b+k*m,q=c+k*l,
b=b-k*m,c=c-k*l,l=g+this.arrow_radians_;l>2*Math.PI&&(l-=2*Math.PI);g=Math.sin(l)*f/Blockly.Bubble.ARROW_BEND;f=Math.cos(l)*f/Blockly.Bubble.ARROW_BEND;a.push("M"+p+","+q);a.push("C"+(p+f)+","+(q+g)+" "+d+","+e+" "+d+","+e);a.push("C"+d+","+e+" "+(b+f)+","+(c+g)+" "+b+","+c)}a.push("z");this.bubbleArrow_.setAttribute("d",a.join(" "))};Blockly.Bubble.prototype.setColour=function(a){this.bubbleBack_.setAttribute("fill",a);this.bubbleArrow_.setAttribute("fill",a)};
Blockly.Bubble.prototype.dispose=function(){Blockly.Bubble.unbindDragEvents_();goog.dom.removeNode(this.bubbleGroup_);this.shape_=this.content_=this.workspace_=this.bubbleGroup_=null};Blockly.Mutator=function(a){this.block_=null;this.quarkXml_=[];for(var b=0;b<a.length;b++){var c=goog.dom.createDom("block");c.setAttribute("type",a[b]);this.quarkXml_[b]=c}};Blockly.Mutator.ICON_SIZE=16;Blockly.Mutator.prototype.bubble_=null;Blockly.Mutator.prototype.iconX_=0;Blockly.Mutator.prototype.iconY_=0;Blockly.Mutator.prototype.workspaceWidth_=0;Blockly.Mutator.prototype.workspaceHeight_=0;
Blockly.Mutator.prototype.createIcon=function(){var a=Blockly.Mutator.ICON_SIZE/8;this.iconGroup_=Blockly.createSvgElement("g",{},null);this.block_.editable&&this.iconGroup_.setAttribute("class","blocklyIconGroup");Blockly.createSvgElement("rect",{"class":"blocklyIconShield",width:8*a,height:8*a,rx:2*a,ry:2*a},this.iconGroup_);if(!Blockly.Mutator.plusPath_){var b=[];b.push("M",3.5*a+","+3.5*a);b.push("v",-2*a,"h",a);b.push("v",2*a,"h",2*a);b.push("v",a,"h",-2*a);b.push("v",2*a,"h",-a);b.push("v",
-2*a,"h",-2*a);b.push("v",-a,"z");Blockly.Mutator.plusPath_=b.join(" ")}Blockly.Mutator.minusPath_||(b=[],b.push("M",1.5*a+","+3.5*a),b.push("h",5*a,"v",a),b.push("h",-5*a,"z"),Blockly.Mutator.minusPath_=b.join(" "));this.iconMark_=Blockly.createSvgElement("path",{"class":"blocklyIconMark",d:Blockly.Mutator.plusPath_},this.iconGroup_);this.block_.getSvgRoot().appendChild(this.iconGroup_);this.block_.editable&&Blockly.bindEvent_(this.iconGroup_,"mouseup",this,this.iconClick_)};
Blockly.Mutator.prototype.createEditor_=function(){this.svgDialog_=Blockly.createSvgElement("svg",{x:Blockly.Bubble.BORDER_WIDTH,y:Blockly.Bubble.BORDER_WIDTH},null);this.svgBackground_=Blockly.createSvgElement("rect",{"class":"blocklyMutatorBackground",height:"100%",width:"100%"},this.svgDialog_);this.workspace_=new Blockly.Workspace(!0);this.flyout_=new Blockly.Flyout;this.flyout_.autoClose=!1;this.svgDialog_.appendChild(this.flyout_.createDom());this.svgDialog_.appendChild(this.workspace_.createDom());
return this.svgDialog_};
Blockly.Mutator.prototype.resizeBubble_=function(){var a=2*Blockly.Bubble.BORDER_WIDTH,b=this.workspace_.getCanvas().getBBox(),c=this.flyout_.getMetrics(),d;d=b.width+b.x;b=Math.max(b.height+3*a,c.contentHeight+20);d+=3*a;if(Math.abs(this.workspaceWidth_-d)>a||Math.abs(this.workspaceHeight_-b)>a)this.workspaceWidth_=d,this.workspaceHeight_=b,this.bubble_.setBubbleSize(d+a,b+a),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_)};
Blockly.Mutator.prototype.isVisible=function(){return!!this.bubble_};
Blockly.Mutator.prototype.setVisible=function(a){if(a!=this.isVisible())if(a){this.iconMark_.setAttribute("d",Blockly.Mutator.minusPath_);this.bubble_=new Blockly.Bubble(this.block_.workspace,this.createEditor_(),this.block_.svg_.svgGroup_,this.iconX_,this.iconY_,null,null);var b=this;this.flyout_.init(this.workspace_,function(){return b.getFlyoutMetrics_()},!1);this.flyout_.show(this.quarkXml_);this.rootBlock_=this.block_.decompose(this.workspace_);a=this.rootBlock_.getDescendants();for(var c=0,
d;d=a[c];c++)d.render();this.rootBlock_.editable=!1;this.rootBlock_.deletable=!1;a=2*this.flyout_.CORNER_RADIUS;this.rootBlock_.moveBy(this.flyout_.width_+a,a);this.block_.saveConnections&&(this.block_.saveConnections(this.rootBlock_),this.sourceListener_=Blockly.bindEvent_(this.block_.workspace.getCanvas(),"blocklyWorkspaceChange",this.block_,function(){b.block_.saveConnections(b.rootBlock_)}));this.resizeBubble_();Blockly.bindEvent_(this.workspace_.getCanvas(),"blocklyWorkspaceChange",this.block_,
function(){b.workspaceChanged_()});this.updateColour()}else this.iconMark_.setAttribute("d",Blockly.Mutator.plusPath_),this.svgBackground_=this.svgDialog_=null,this.flyout_.dispose(),this.flyout_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(Blockly.unbindEvent_(this.sourceListener_),this.sourceListener_=null)};
Blockly.Mutator.prototype.workspaceChanged_=function(){if(0==Blockly.Block.dragMode_)for(var a=this.workspace_.getTopBlocks(!1),b=0,c;c=a[b];b++){var d=c.getRelativeToSurfaceXY(),e=c.getSvgRoot().getBBox();(d.y<10-e.height||d.x<this.flyout_.width_-10)&&c.dispose(!1,!1)}this.rootBlock_.workspace==this.workspace_&&(a=this.block_.rendered,this.block_.rendered=!1,this.block_.compose(this.rootBlock_),this.block_.rendered=a,this.block_.rendered&&this.block_.render(),this.resizeBubble_(),this.block_.workspace.fireChangeEvent())};
Blockly.Mutator.prototype.getFlyoutMetrics_=function(){return{viewHeight:this.workspaceHeight_,viewWidth:0,absoluteTop:0,absoluteLeft:0}};Blockly.Mutator.prototype.iconClick_=function(a){this.setVisible(!this.isVisible())};Blockly.Mutator.prototype.updateColour=function(){if(this.isVisible()){var a=Blockly.makeColour(this.block_.getColour());this.bubble_.setColour(a)}};
Blockly.Mutator.prototype.dispose=function(){goog.dom.removeNode(this.iconGroup_);this.iconGroup_=null;this.setVisible(!1);this.block_=this.block_.mutator=null};Blockly.Mutator.prototype.renderIcon=function(a){if(this.block_.collapsed)return this.iconGroup_.setAttribute("display","none"),a;this.iconGroup_.setAttribute("display","block");this.iconGroup_.setAttribute("transform","translate("+a+", 5)");this.computeIconLocation();return a+=Blockly.Mutator.ICON_SIZE+Blockly.BlockSvg.SEP_SPACE_X};
Blockly.Mutator.prototype.setIconLocation=function(a,b){this.iconX_=a;this.iconY_=b;this.isVisible()&&this.bubble_.setAnchorLocation(a,b)};Blockly.Mutator.prototype.computeIconLocation=function(){var a=this.block_.getRelativeToSurfaceXY(),b=Blockly.getRelativeXY_(this.iconGroup_),c=a.x+b.x+Blockly.Mutator.ICON_SIZE/2,a=a.y+b.y+Blockly.Mutator.ICON_SIZE/2;(c!==this.iconX_||a!==this.iconY_)&&this.setIconLocation(c,a)};Blockly.Mutator.prototype.getIconLocation=function(){return{x:this.iconX_,y:this.iconY_}};Blockly.Connection=function(a,b){this.sourceBlock_=a;this.targetConnection=null;this.type=b;this.y_=this.x_=0;this.inDB_=!1;this.dbList_=this.sourceBlock_.workspace.connectionDBList};
Blockly.Connection.prototype.dispose=function(){if(this.targetConnection)throw"Disconnect connection before disposing of it.";this.inDB_&&this.dbList_[this.type].removeConnection_(this);this.inDB_=!1;Blockly.highlightedConnection_==this&&(Blockly.highlightedConnection_=null);Blockly.localConnection_==this&&(Blockly.localConnection_=null)};Blockly.Connection.prototype.isSuperior=function(){return this.type==Blockly.INPUT_VALUE||this.type==Blockly.NEXT_STATEMENT};
Blockly.Connection.prototype.connect=function(a){if(this.sourceBlock_==a.sourceBlock_)throw"Attempted to connect a block to itself.";if(this.sourceBlock_.workspace!==a.sourceBlock_.workspace)throw"Blocks are on different workspaces.";if(Blockly.OPPOSITE_TYPE[this.type]!=a.type)throw"Attempt to connect incompatible types.";if(this.type==Blockly.INPUT_VALUE||this.type==Blockly.OUTPUT_VALUE){if(this.targetConnection)throw"Source connection already connected (value).";if(a.targetConnection){var b=a.targetBlock();
b.setParent(null);if(!b.outputConnection)throw"Orphan block does not have an output connection.";for(var c=this.sourceBlock_;c=Blockly.Connection.singleConnection_(c,b);)if(c.targetBlock())c=c.targetBlock();else{c.connect(b.outputConnection);b=null;break}b&&window.setTimeout(function(){b.outputConnection.bumpAwayFrom_(a)},Blockly.BUMP_DELAY)}}else{if(this.targetConnection)throw"Source connection already connected (block).";if(a.targetConnection){if(this.type!=Blockly.PREVIOUS_STATEMENT)throw"Can only do a mid-stack connection with the top of a block.";
b=a.targetBlock();b.setParent(null);if(!b.previousConnection)throw"Orphan block does not have a previous connection.";for(c=this.sourceBlock_;c.nextConnection;)if(c.nextConnection.targetConnection)c=c.nextConnection.targetBlock();else{c.nextConnection.connect(b.previousConnection);b=null;break}b&&window.setTimeout(function(){b.previousConnection.bumpAwayFrom_(a)},Blockly.BUMP_DELAY)}}var d,e,f;this.isSuperior()?(c=this.sourceBlock_,d=a.sourceBlock_,e=this,f=a):(c=a.sourceBlock_,d=this.sourceBlock_,
e=a,f=this);f.targetConnection=e;e.targetConnection=f;!c.isRestArg_&&!c.restArgContainer_&&Blockly.Ray_.Shared.typecheckBlock(c.getRootBlock());d.setParent(c);c.dispatchBlockAddedEvent();c.rendered&&c.svg_.updateDisabled();d.rendered&&(d.svg_.updateDisabled(),d.render())};Blockly.Connection.singleConnection_=function(a,b){for(var c=!1,d=0;d<a.inputList.length;d++){var e=a.inputList[d].connection;if(e&&e.type==Blockly.INPUT_VALUE&&b.outputConnection.checkType_(e)){if(c)return null;c=e}}return c};
Blockly.Connection.prototype.isConnected=function(){return!!this.targetConnection};Blockly.Connection.prototype.getConnectedBlock=function(){return this.targetConnection.sourceBlock_};
Blockly.Connection.prototype.disconnect=function(){var a=this.targetConnection;if(a){if(a.targetConnection!=this)throw"Target connection not connected to source connection.";}else throw"Source connection not connected.";this.targetConnection=a.targetConnection=null;var b;this.isSuperior()?(b=this.sourceBlock_,a=a.sourceBlock_):(b=a.sourceBlock_,a=this.sourceBlock_);!b.isRestArg_&&(!b.restArgContainer_&&!a.isRestArg_&&!a.restArgContainer_)&&(Blockly.Ray_.Shared.typecheckBlock(b.getRootBlock()),Blockly.Ray_.Shared.typecheckBlock(a));
b.dispatchBlockRemovedEvent();b.rendered&&b.render();a.rendered&&(a.svg_.updateDisabled(),a.render())};Blockly.Connection.prototype.targetBlock=function(){return this.targetConnection?this.targetConnection.sourceBlock_:null};
Blockly.Connection.prototype.bumpAwayFrom_=function(a){if(0==Blockly.Block.dragMode_){var b=this.sourceBlock_.getRootBlock(),c=!1;if(!b.editable){b=a.sourceBlock_.getRootBlock();if(!b.editable)return;a=this;c=!0}b.getSvgRoot().parentNode.appendChild(b.getSvgRoot());var d=a.x_+Blockly.SNAP_RADIUS-this.x_;a=a.y_+2*Blockly.SNAP_RADIUS-this.y_;c&&(a=-a);b.moveBy(d,a)}};Blockly.Connection.prototype.moveTo=function(a,b){this.inDB_&&this.dbList_[this.type].removeConnection_(this);this.x_=a;this.y_=b;this.dbList_[this.type].addConnection_(this)};
Blockly.Connection.prototype.moveBy=function(a,b){this.moveTo(this.x_+a,this.y_+b)};
Blockly.Connection.prototype.highlight=function(){var a;this.type==Blockly.INPUT_VALUE||this.type==Blockly.OUTPUT_VALUE?(a=Blockly.BlockSvg.TAB_WIDTH,a="m 0,0 v 5 c 0,10 "+-a+",-8 "+-a+",7.5 s "+a+",-2.5 "+a+",7.5 v 5"):a="m -20,0 h 5 l 6,4 3,0 6,-4 h 5";var b=this.sourceBlock_.getRelativeToSurfaceXY();Blockly.Connection.highlightedPath_=Blockly.createSvgElement("path",{"class":"blocklyHighlightedConnectionPath",d:a,transform:"translate("+(this.x_-b.x)+", "+(this.y_-b.y)+")"},this.sourceBlock_.getSvgRoot())};
Blockly.Connection.prototype.unhighlight=function(){goog.dom.removeNode(Blockly.Connection.highlightedPath_);delete Blockly.Connection.highlightedPath_};
Blockly.Connection.prototype.tighten_=function(){var a=Math.round(this.targetConnection.x_-this.x_),b=Math.round(this.targetConnection.y_-this.y_);if(0!=a||0!=b){var c=this.targetBlock(),d=c.getSvgRoot();if(!d)throw"block is not rendered.";d=Blockly.getRelativeXY_(d);c.getSvgRoot().setAttribute("transform","translate("+(d.x-a)+", "+(d.y-b)+")");c.moveConnections_(-a,-b)}};
Blockly.Connection.prototype.closest=function(a,b,c){function d(b){var c=e[b];if((c.type==Blockly.OUTPUT_VALUE||c.type==Blockly.PREVIOUS_STATEMENT)&&c.targetConnection||!p.checkType_(c))return!0;c=c.sourceBlock_;do{if(m==c)return!0;c=c.getParent()}while(c);var d=f-e[b].x_,c=g-e[b].y_,d=Math.sqrt(d*d+c*c);d<=a&&(l=e[b],a=d);return c<a}if(this.targetConnection)return{connection:null,radius:a};var e=this.dbList_[Blockly.OPPOSITE_TYPE[this.type]],f=this.x_+b,g=this.y_+c;b=0;for(var k=c=e.length-2;b<k;)e[k].y_<
g?b=k:c=k,k=Math.floor((b+c)/2);c=b=k;var l=null,m=this.sourceBlock_,p=this;if(e.length){for(;0<=b&&d(b);)b--;do c++;while(c<e.length&&d(c))}return{connection:l,radius:a}};Blockly.Connection.prototype.checkType_=function(a){return!this.getType()||!a.getType()?!0:Blockly.Ray_.Shared.areMatchingTypes(this.getType(),a.getType())};
Blockly.Connection.prototype.validateType=function(){this.targetConnection&&!this.checkType_(this.targetConnection)&&(this.isSuperior()?this.targetBlock().setParent(null):this.sourceBlock_.setParent(null),this.sourceBlock_.bumpNeighbours_())};Blockly.Connection.prototype.setType=function(a){a?(this.outputType_=a,this.validateType()):this.outputType_=null;return this};Blockly.Connection.prototype.getType=function(a){return a?this.outputType_:this.inferredType_||this.outputType_};
Blockly.Connection.prototype.inferType=function(a){this.inferredType_=a;if(this.type===Blockly.OUTPUT_VALUE){if((a=this.sourceBlock_.getParent())&&!a.rendered)return this;this.sourceBlock_.updateColour()}return this};Blockly.Connection.prototype.clearInferredType=function(){this.inferredType_=null;this.sourceBlock_.updateColour();return this};
Blockly.Connection.prototype.neighbours_=function(a){function b(b){var f=d-c[b].x_,g=e-c[b].y_;Math.sqrt(f*f+g*g)<=a&&l.push(c[b]);return g<a}for(var c=this.dbList_[Blockly.OPPOSITE_TYPE[this.type]],d=this.x_,e=this.y_,f=0,g=c.length-2,k=g;f<k;)c[k].y_<e?f=k:g=k,k=Math.floor((f+g)/2);var g=f=k,l=[];if(c.length){for(;0<=f&&b(f);)f--;do g++;while(g<c.length&&b(g))}return l};
Blockly.Connection.prototype.hideAll=function(){this.inDB_&&this.dbList_[this.type].removeConnection_(this);if(this.targetConnection)for(var a=this.targetBlock().getDescendants(),b=0;b<a.length;b++){for(var c=a[b],d=c.getConnections_(!0),e=0;e<d.length;e++){var f=d[e];f.inDB_&&this.dbList_[f.type].removeConnection_(f)}c.mutator&&c.mutator.setVisible(!1);c.comment&&c.comment.setVisible(!1);c.warning&&c.warning.setVisible(!1)}};
Blockly.Connection.prototype.unhideAll=function(){this.inDB_||this.dbList_[this.type].addConnection_(this);var a=[];if(this.type!=Blockly.INPUT_VALUE&&this.type!=Blockly.NEXT_STATEMENT)return a;var b=this.targetBlock();if(b){var c;b.collapsed?(c=[],b.outputConnection&&c.push(b.outputConnection),b.nextConnection&&c.push(b.nextConnection),b.previousConnection&&c.push(b.previousConnection)):c=b.getConnections_(!0);for(var d=0;d<c.length;d++)a=a.concat(c[d].unhideAll());0==a.length&&(a[0]=b)}return a};
Blockly.ConnectionDB=function(){};Blockly.ConnectionDB.prototype=[];Blockly.ConnectionDB.constructor=Blockly.ConnectionDB;Blockly.ConnectionDB.prototype.addConnection_=function(a){if(a.inDB_)throw"Connection already in database.";for(var b=0,c=this.length;b<c;){var d=Math.floor((b+c)/2);if(this[d].y_<a.y_)b=d+1;else if(this[d].y_>a.y_)c=d;else{b=d;break}}this.splice(b,0,a);a.inDB_=!0};
Blockly.ConnectionDB.prototype.removeConnection_=function(a){if(!a.inDB_)throw"Connection not in database.";a.inDB_=!1;for(var b=0,c=this.length-2,d=c;b<d;)this[d].y_<a.y_?b=d:c=d,d=Math.floor((b+c)/2);for(c=b=d;0<=b&&this[b].y_==a.y_;){if(this[b]==a){this.splice(b,1);return}b--}do{if(this[c]==a){this.splice(c,1);return}c++}while(c<this.length&&this[c].y_==a.y_);throw"Unable to find connection in connectionDB.";};
Blockly.ConnectionDB.init=function(a){var b=[];b[Blockly.INPUT_VALUE]=new Blockly.ConnectionDB;b[Blockly.OUTPUT_VALUE]=new Blockly.ConnectionDB;b[Blockly.NEXT_STATEMENT]=new Blockly.ConnectionDB;b[Blockly.PREVIOUS_STATEMENT]=new Blockly.ConnectionDB;a.connectionDBList=b};Blockly.Comment=function(a){this.block_=a;this.createIcon_()};Blockly.Comment.ICON_RADIUS=8;Blockly.Comment.prototype.bubble_=null;Blockly.Comment.prototype.text_="";Blockly.Comment.prototype.iconX_=0;Blockly.Comment.prototype.iconY_=0;Blockly.Comment.prototype.width_=160;Blockly.Comment.prototype.height_=80;
Blockly.Comment.prototype.createIcon_=function(){this.iconGroup_=Blockly.createSvgElement("g",{"class":"blocklyIconGroup"},null);Blockly.createSvgElement("circle",{"class":"blocklyIconShield",r:Blockly.Comment.ICON_RADIUS,cx:Blockly.Comment.ICON_RADIUS,cy:Blockly.Comment.ICON_RADIUS},this.iconGroup_);this.iconMark_=Blockly.createSvgElement("text",{"class":"blocklyIconMark",x:Blockly.Comment.ICON_RADIUS,y:2*Blockly.Comment.ICON_RADIUS-3},this.iconGroup_);this.iconMark_.appendChild(document.createTextNode("?"));
this.block_.getSvgRoot().appendChild(this.iconGroup_);Blockly.bindEvent_(this.iconGroup_,"mouseup",this,this.iconClick_)};
Blockly.Comment.prototype.createEditor_=function(){this.foreignObject_=Blockly.createSvgElement("foreignObject",{x:Blockly.Bubble.BORDER_WIDTH,y:Blockly.Bubble.BORDER_WIDTH},null);var a=document.createElementNS(Blockly.HTML_NS,"body");a.setAttribute("xmlns",Blockly.HTML_NS);a.className="blocklyMinimalBody";this.textarea_=document.createElementNS(Blockly.HTML_NS,"textarea");this.textarea_.className="blocklyCommentTextarea";this.textarea_.setAttribute("dir","LTR");a.appendChild(this.textarea_);this.foreignObject_.appendChild(a);
Blockly.bindEvent_(this.textarea_,"mouseup",this,this.textareaFocus_);return this.foreignObject_};Blockly.Comment.prototype.resizeBubble_=function(){var a=this.bubble_.getBubbleSize(),b=2*Blockly.Bubble.BORDER_WIDTH;this.foreignObject_.setAttribute("width",a.width-b);this.foreignObject_.setAttribute("height",a.height-b);this.textarea_.style.width=a.width-b-4+"px";this.textarea_.style.height=a.height-b-4+"px"};Blockly.Comment.prototype.isVisible=function(){return!!this.bubble_};
Blockly.Comment.prototype.setVisible=function(a){if(a!=this.isVisible()){var b=this.getText(),c=this.getBubbleSize();a?(this.bubble_=new Blockly.Bubble(this.block_.workspace,this.createEditor_(),this.block_.svg_.svgGroup_,this.iconX_,this.iconY_,this.width_,this.height_),this.bubble_.registerResizeEvent(this,this.resizeBubble_),this.updateColour(),this.text_=null):(this.bubble_.dispose(),this.foreignObject_=this.textarea_=this.bubble_=null);this.setText(b);this.setBubbleSize(c.width,c.height)}};
Blockly.Comment.prototype.iconClick_=function(a){this.setVisible(!this.isVisible())};Blockly.Comment.prototype.textareaFocus_=function(a){this.bubble_.promote_();this.textarea_.focus()};Blockly.Comment.prototype.getBubbleSize=function(){return this.isVisible()?this.bubble_.getBubbleSize():{width:this.width_,height:this.height_}};Blockly.Comment.prototype.setBubbleSize=function(a,b){this.isVisible()?this.bubble_.setBubbleSize(a,b):(this.width_=a,this.height_=b)};
Blockly.Comment.prototype.getText=function(){return this.isVisible()?this.textarea_.value:this.text_};Blockly.Comment.prototype.setText=function(a){this.isVisible()?this.textarea_.value=a:this.text_=a};Blockly.Comment.prototype.updateColour=function(){if(this.isVisible()){var a=Blockly.makeColour(this.block_.getColour());this.bubble_.setColour(a)}};
Blockly.Comment.prototype.dispose=function(){goog.dom.removeNode(this.iconGroup_);this.iconGroup_=null;this.setVisible(!1);this.block_=this.block_.comment=null};Blockly.Comment.prototype.renderIcon=function(a){if(this.block_.collapsed)return this.iconGroup_.setAttribute("display","none"),a;this.iconGroup_.setAttribute("display","block");var b=2*Blockly.Comment.ICON_RADIUS;this.iconGroup_.setAttribute("transform","translate("+a+", 5)");this.computeIconLocation();return a+=b+Blockly.BlockSvg.SEP_SPACE_X};
Blockly.Comment.prototype.setIconLocation=function(a,b){this.iconX_=a;this.iconY_=b;this.isVisible()&&this.bubble_.setAnchorLocation(a,b)};Blockly.Comment.prototype.computeIconLocation=function(){var a=this.block_.getRelativeToSurfaceXY(),b=Blockly.getRelativeXY_(this.iconGroup_),c=a.x+b.x+Blockly.Comment.ICON_RADIUS,a=a.y+b.y+Blockly.Comment.ICON_RADIUS;(c!==this.iconX_||a!==this.iconY_)&&this.setIconLocation(c,a)};Blockly.Comment.prototype.getIconLocation=function(){return{x:this.iconX_,y:this.iconY_}};Blockly.Tooltip={};Blockly.Tooltip.visible=!1;Blockly.Tooltip.mouseOutPid_=0;Blockly.Tooltip.showPid_=0;Blockly.Tooltip.lastX_=0;Blockly.Tooltip.lastY_=0;Blockly.Tooltip.element_=null;Blockly.Tooltip.poisonedElement_=null;Blockly.Tooltip.svgGroup_=null;Blockly.Tooltip.svgText_=null;Blockly.Tooltip.svgBackground_=null;Blockly.Tooltip.svgShadow_=null;Blockly.Tooltip.OFFSET_X=0;Blockly.Tooltip.OFFSET_Y=10;Blockly.Tooltip.RADIUS_OK=10;Blockly.Tooltip.HOVER_MS=1E3;Blockly.Tooltip.MARGINS=5;
Blockly.Tooltip.createDom=function(){var a=Blockly.createSvgElement("g",{"class":"blocklyHidden"},null);Blockly.Tooltip.svgGroup_=a;Blockly.Tooltip.svgShadow_=Blockly.createSvgElement("rect",{"class":"blocklyTooltipShadow",x:2,y:2},a);Blockly.Tooltip.svgBackground_=Blockly.createSvgElement("rect",{"class":"blocklyTooltipBackground"},a);Blockly.Tooltip.svgText_=Blockly.createSvgElement("text",{"class":"blocklyTooltipText"},a);return a};
Blockly.Tooltip.bindMouseEvents=function(a){Blockly.bindEvent_(a,"mouseover",null,Blockly.Tooltip.onMouseOver_);Blockly.bindEvent_(a,"mouseout",null,Blockly.Tooltip.onMouseOut_);Blockly.bindEvent_(a,"mousemove",null,Blockly.Tooltip.onMouseMove_)};Blockly.Tooltip.onMouseOver_=function(a){for(a=a.target;!goog.isString(a.tooltip)&&!goog.isFunction(a.tooltip);)a=a.tooltip;Blockly.Tooltip.element_!=a&&(Blockly.Tooltip.hide(),Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.element_=a);window.clearTimeout(Blockly.Tooltip.mouseOutPid_)};
Blockly.Tooltip.onMouseOut_=function(a){Blockly.Tooltip.mouseOutPid_=window.setTimeout(function(){Blockly.Tooltip.element_=null;Blockly.Tooltip.poisonedElement_=null;Blockly.Tooltip.hide()},1);window.clearTimeout(Blockly.Tooltip.showPid_)};
Blockly.Tooltip.onMouseMove_=function(a){if(Blockly.Tooltip.element_&&Blockly.Tooltip.element_.tooltip&&!(Blockly.ContextMenu&&Blockly.ContextMenu.visible||0!=Blockly.Block.dragMode_))if(Blockly.Tooltip.visible){var b=Blockly.Tooltip.lastY_-a.clientY;Math.sqrt(Math.pow(Blockly.Tooltip.lastX_-a.clientX,2)+Math.pow(b,2))>Blockly.Tooltip.RADIUS_OK&&Blockly.Tooltip.hide()}else Blockly.Tooltip.poisonedElement_!=Blockly.Tooltip.element_&&(window.clearTimeout(Blockly.Tooltip.showPid_),Blockly.Tooltip.lastX_=
a.clientX,Blockly.Tooltip.lastY_=a.clientY,Blockly.Tooltip.showPid_=window.setTimeout(Blockly.Tooltip.show_,Blockly.Tooltip.HOVER_MS))};Blockly.Tooltip.hide=function(){Blockly.Tooltip.visible&&(Blockly.Tooltip.visible=!1,Blockly.Tooltip.svgGroup_&&(Blockly.Tooltip.svgGroup_.style.display="none"));window.clearTimeout(Blockly.Tooltip.showPid_)};
Blockly.Tooltip.show_=function(){Blockly.Tooltip.poisonedElement_=Blockly.Tooltip.element_;if(Blockly.Tooltip.svgGroup_){goog.dom.removeChildren(Blockly.Tooltip.svgText_);var a=Blockly.Tooltip.element_.tooltip;goog.isFunction(a)&&(a=a());for(var a=a.split("\n"),b=0;b<a.length;b++){var c=Blockly.createSvgElement("tspan",{dy:"1em",x:Blockly.Tooltip.MARGINS},Blockly.Tooltip.svgText_),d=document.createTextNode(a[b]);c.appendChild(d)}Blockly.Tooltip.visible=!0;Blockly.Tooltip.svgGroup_.style.display="block";
a=Blockly.Tooltip.svgText_.getBBox();b=2*Blockly.Tooltip.MARGINS+a.width;c=a.height;Blockly.Tooltip.svgBackground_.setAttribute("width",b);Blockly.Tooltip.svgBackground_.setAttribute("height",c);Blockly.Tooltip.svgShadow_.setAttribute("width",b);Blockly.Tooltip.svgShadow_.setAttribute("height",c);b=Blockly.Tooltip.lastX_;b+=Blockly.Tooltip.OFFSET_X;c=Blockly.Tooltip.lastY_+Blockly.Tooltip.OFFSET_Y;c=Blockly.convertCoordinates(b,c,!0);b=c.x;c=c.y;d=Blockly.svgSize();c+a.height>d.height&&(c-=a.height+
2*Blockly.Tooltip.OFFSET_Y);b+a.width>d.width-2*Blockly.Tooltip.MARGINS&&(b=d.width-a.width-2*Blockly.Tooltip.MARGINS);Blockly.Tooltip.svgGroup_.setAttribute("transform","translate("+b+","+c+")")}};Blockly.FieldLabel=function(a){this.sourceBlock_=null;this.textElement_=Blockly.createSvgElement("text",{"class":"blocklyText"},null);this.size_={height:25,width:0};this.setText(a)};goog.inherits(Blockly.FieldLabel,Blockly.Field);Blockly.FieldLabel.prototype.EDITABLE=!1;
Blockly.FieldLabel.prototype.init=function(a){if(this.sourceBlock_)throw"Text has already been initialized once.";this.sourceBlock_=a;a.getSvgRoot().appendChild(this.textElement_);this.textElement_.tooltip=this.sourceBlock_;Blockly.Tooltip&&Blockly.Tooltip.bindMouseEvents(this.textElement_)};Blockly.FieldLabel.prototype.dispose=function(){goog.dom.removeNode(this.textElement_);this.textElement_=null};Blockly.FieldLabel.prototype.getRootElement=function(){return this.textElement_};
Blockly.FieldLabel.prototype.setTooltip=function(a){this.textElement_.tooltip=a};Blockly.Input=function(a,b,c,d){this.type=a;this.name=b;this.sourceBlock_=c;this.connection=d;this.titleRow=[];this.align=Blockly.ALIGN_LEFT};
Blockly.Input.prototype.appendTitle=function(a,b){if(!goog.isDefAndNotNull(a))return this;goog.isString(a)&&(a=new Blockly.FieldLabel(a));this.sourceBlock_.svg_&&a.init(this.sourceBlock_);a.name=b;a.prefixTitle&&this.appendTitle(a.prefixTitle);this.titleRow.push(a);a.suffixTitle&&this.appendTitle(a.suffixTitle);this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_());return this};
Blockly.Input.prototype.setType=function(a){if(!this.connection)throw"This input does not have a connection.";this.connection.setType(a);return this};Blockly.Input.prototype.getInitialType=function(){if(!this.connection)throw"This input does not have a connection.";return this.connection.getInitialType()};Blockly.Input.prototype.getType=function(){if(!this.connection)throw"This input does not have a connection.";return this.connection.getType()};
Blockly.Input.prototype.inferType=function(a){if(!this.connection)throw"This input does not have a connection.";this.connection.inferType(a)};Blockly.Input.prototype.clearInferredType=function(){if(!this.connection)throw"This input does not have a connection.";this.connection.clearInferredType()};Blockly.Input.prototype.setAlign=function(a){this.align=a;this.sourceBlock_.rendered&&this.sourceBlock_.render();return this};Blockly.Input.prototype.init=function(){for(var a=0;a<this.titleRow.length;a++)this.titleRow[a].init(this.sourceBlock_)};
Blockly.Input.prototype.dispose=function(){for(var a=0,b;b=this.titleRow[a];a++)b.dispose();this.connection&&this.connection.dispose();this.sourceBlock_=null};Blockly.Warning=function(a){this.block_=a;this.createIcon_()};Blockly.Warning.ICON_RADIUS=8;Blockly.Warning.prototype.bubble_=null;Blockly.Warning.prototype.text_="";Blockly.Warning.prototype.iconX_=0;Blockly.Warning.prototype.iconY_=0;
Blockly.Warning.prototype.createIcon_=function(){this.iconGroup_=Blockly.createSvgElement("g",{"class":"blocklyIconGroup"},null);Blockly.createSvgElement("path",{"class":"blocklyIconShield",d:"M 2,15 Q -1,15 0.5,12 L 6.5,1.7 Q 8,-1 9.5,1.7 L 15.5,12 Q 17,15 14,15 z"},this.iconGroup_);this.iconMark_=Blockly.createSvgElement("text",{"class":"blocklyIconMark",x:Blockly.Warning.ICON_RADIUS,y:2*Blockly.Warning.ICON_RADIUS-3},this.iconGroup_);this.iconMark_.appendChild(document.createTextNode("!"));this.block_.getSvgRoot().appendChild(this.iconGroup_);
Blockly.bindEvent_(this.iconGroup_,"mouseup",this,this.iconClick_)};Blockly.Warning.prototype.textToDom_=function(a){var b=Blockly.createSvgElement("text",{"class":"blocklyText",y:Blockly.Bubble.BORDER_WIDTH},null);a=a.split("\n");for(var c=0;c<a.length;c++){var d=Blockly.createSvgElement("tspan",{dy:"1em",x:Blockly.Bubble.BORDER_WIDTH},b),e=document.createTextNode(a[c]);d.appendChild(e)}return b};Blockly.Warning.prototype.isVisible=function(){return!!this.bubble_};
Blockly.Warning.prototype.setVisible=function(a){a!=this.isVisible()&&(a?(a=this.textToDom_(this.text_),this.bubble_=new Blockly.Bubble(this.block_.workspace,a,this.block_.svg_.svgGroup_,this.iconX_,this.iconY_,null,null),this.updateColour(),a=this.bubble_.getBubbleSize(),this.bubble_.setBubbleSize(a.width,a.height)):(this.bubble_.dispose(),this.foreignObject_=this.body_=this.bubble_=null))};Blockly.Warning.prototype.iconClick_=function(a){this.setVisible(!this.isVisible())};
Blockly.Warning.prototype.bodyFocus_=function(a){this.bubble_.promote_()};Blockly.Warning.prototype.setText=function(a){this.text_=a;this.isVisible()&&(this.setVisible(!1),this.setVisible(!0))};Blockly.Warning.prototype.updateColour=function(){if(this.isVisible()){var a=Blockly.makeColour(this.block_.getColour());this.bubble_.setColour(a)}};Blockly.Warning.prototype.dispose=function(){goog.dom.removeNode(this.iconGroup_);this.iconGroup_=null;this.setVisible(!1);this.block_=this.block_.warning=null};
Blockly.Warning.prototype.renderIcon=function(a){if(this.block_.collapsed)return this.iconGroup_.setAttribute("display","none"),a;this.iconGroup_.setAttribute("display","block");var b=2*Blockly.Warning.ICON_RADIUS;this.iconGroup_.setAttribute("transform","translate("+a+", 5)");this.computeIconLocation();return a+=b+Blockly.BlockSvg.SEP_SPACE_X};Blockly.Warning.prototype.setIconLocation=function(a,b){this.iconX_=a;this.iconY_=b;this.isVisible()&&this.bubble_.setAnchorLocation(a,b)};
Blockly.Warning.prototype.computeIconLocation=function(){var a=this.block_.getRelativeToSurfaceXY(),b=Blockly.getRelativeXY_(this.iconGroup_),c=a.x+b.x+Blockly.Warning.ICON_RADIUS,a=a.y+b.y+Blockly.Warning.ICON_RADIUS;(c!==this.iconX_||a!==this.iconY_)&&this.setIconLocation(c,a)};Blockly.Warning.prototype.getIconLocation=function(){return{x:this.iconX_,y:this.iconY_}};Blockly.uidCounter_=0;
Blockly.Block=function(a,b){goog.events.EventTarget.call(this);this.Blockly=Blockly;this.handler=new goog.events.EventHandler(this);this.registerDisposable(this.handler);this.timeout_=this.receiveDoubleClicks_=null;this.id=++Blockly.uidCounter_;this.previousConnection=this.nextConnection=this.outputConnection=null;this.inputList=[];this.inputsInline=!0;this.disabled=this.collapsed=this.rendered=!1;this.deletable=this.editable=a.editable;this.tooltip="";this.contextMenu=!0;this.parentBlock_=null;this.childBlocks_=
[];this.isInFlyout=!1;this.workspace=a;this.isDragging=!1;a.addTopBlock(this);if(b){var c=null;if(goog.isString(b)){if(c=Blockly.Ray_.Shared.getBlockPrototype(Blockly,b),!c)throw'Error: "'+b+'" is an unknown language block.';}else if(goog.isObject(b))c=b;else throw"Unknown value for proto!";goog.mixin(this,c)}this.type=c.externalName_;this.preInit_?this.preInit_():this.isRestArg_?this.makeRestArg():this.restArgContainer_?this.makeRestArgContainer():(this.setOutputType(this.outputType_),this.outputType_=
null);goog.isFunction(this.init)&&this.init();this.editable&&goog.isFunction(this.onchange)&&Blockly.bindEvent_(a.getCanvas(),"blocklyWorkspaceChange",this,this.onchange)};goog.inherits(Blockly.Block,goog.events.EventTarget);Blockly.Block.EventType={SUBBLOCK_ADDED:"block added in slot",SUBBLOCK_REMOVED:"block removed from slot",PARENT_BLOCK_CHANGED:"block's parent has changed",BLOCK_DISPOSED:"block has been disposed"};Blockly.Block.MAX_DOUBLE_CLICK_DELAY=200;
Blockly.Block.prototype.dispatchBlockAddedEvent=function(){this.dispatchEvent(Blockly.Block.EventType.SUBBLOCK_ADDED)};Blockly.Block.prototype.dispatchBlockRemovedEvent=function(){this.dispatchEvent(Blockly.Block.EventType.SUBBLOCK_REMOVED)};Blockly.Block.prototype.getParentEventTarget=function(){return this.getParent()};Blockly.Block.prototype.svg_=null;Blockly.Block.prototype.mutator=null;Blockly.Block.prototype.comment=null;Blockly.Block.prototype.warning=null;
Blockly.Block.prototype.initSvg=function(){this.svg_=new Blockly.BlockSvg(this);this.svg_.init();Blockly.editable&&Blockly.bindEvent_(this.svg_.getRootElement(),"mousedown",this,this.onMouseDown_);this.workspace.getCanvas().appendChild(this.svg_.getRootElement())};Blockly.Block.prototype.getSvgRoot=function(){return this.svg_&&this.svg_.getRootElement()};Blockly.Block.dragMode_=0;Blockly.Block.onMouseUpWrapper_=null;Blockly.Block.onMouseMoveWrapper_=null;
Blockly.Block.terminateDrag_=function(){Blockly.Block.onMouseUpWrapper_&&(Blockly.unbindEvent_(Blockly.Block.onMouseUpWrapper_),Blockly.Block.onMouseUpWrapper_=null);Blockly.Block.onMouseMoveWrapper_&&(Blockly.unbindEvent_(Blockly.Block.onMouseMoveWrapper_),Blockly.Block.onMouseMoveWrapper_=null);var a=Blockly.selected;if(2==Blockly.Block.dragMode_&&a){var b=a.getRelativeToSurfaceXY();a.moveConnections_(b.x-a.startDragX,b.y-a.startDragY);delete a.draggedBubbles_;a.setDragging_(!1);a.render();goog.Timer.callOnce(a.bumpNeighbours_,
Blockly.BUMP_DELAY,a);Blockly.fireUiEvent(window,"resize")}a&&a.workspace.fireChangeEvent();Blockly.Block.dragMode_=0};Blockly.Block.prototype.select=function(){if(!this.svg_)throw"Block is not rendered.";Blockly.selected&&Blockly.selected.unselect();Blockly.selected=this;this.svg_.addSelect();Blockly.fireUiEvent(this.workspace.getCanvas(),"blocklySelectChange")};
Blockly.Block.prototype.unselect=function(){if(!this.svg_)throw"Block is not rendered.";Blockly.selected=null;this.svg_.removeSelect();Blockly.fireUiEvent(this.workspace.getCanvas(),"blocklySelectChange")};
Blockly.Block.prototype.dispose=function(a,b){this.unplug(a);b&&this.svg_&&this.svg_.disposeUiEffect();this.workspace.removeTopBlock(this);this.workspace=null;this.rendered=!1;Blockly.selected==this&&(Blockly.selected=null,Blockly.Block.terminateDrag_());for(var c=this.childBlocks_.length-1;0<=c;c--)this.childBlocks_[c].dispose(!1);this.mutator&&this.mutator.dispose();this.comment&&this.comment.dispose();this.warning&&this.warning.dispose();for(var c=0,d;d=this.inputList[c];c++)d.dispose();this.inputList=
[];d=this.getConnections_(!0);for(c=0;c<d.length;c++){var e=d[c];e.targetConnection&&e.disconnect();d[c].dispose()}this.svg_&&(this.svg_.dispose(),this.svg_=null);this.dispatchEvent(Blockly.Block.EventType.BLOCK_DISPOSED);Blockly.Block.superClass_.dispose.call(this);this.postDispose_&&this.postDispose_()};
Blockly.Block.prototype.unplug=function(a,b){b=b&&!!this.getParent();if(this.outputConnection)this.outputConnection.targetConnection&&this.setParent(null);else{var c=null;this.previousConnection&&this.previousConnection.targetConnection&&(c=this.previousConnection.targetConnection,this.setParent(null));if(a&&this.nextConnection&&this.nextConnection.targetConnection){var d=this.nextConnection.targetConnection,e=this.nextConnection.targetBlock();this.nextConnection.disconnect();e.setParent(null);c&&
c.connect(d)}}b&&this.moveBy(1*Blockly.SNAP_RADIUS,2*Blockly.SNAP_RADIUS)};Blockly.Block.prototype.getRelativeToSurfaceXY=function(){var a=0,b=0;if(this.svg_){var c=this.svg_.getRootElement();do var d=Blockly.getRelativeXY_(c),a=a+d.x,b=b+d.y,c=c.parentElement;while(c&&c!=this.workspace.getCanvas())}return{x:a,y:b}};
Blockly.Block.prototype.moveBy=function(a,b){var c=this.getRelativeToSurfaceXY();this.svg_.getRootElement().setAttribute("transform","translate("+(c.x+a)+", "+(c.y+b)+")");this.moveConnections_(a,b)};
Blockly.Block.prototype.onMouseDown_=function(a){if(this.receiveDoubleClicks_)this.receiveDoubleClicks_=!1,clearTimeout(this.timeout_),this.timeout_=null,this.onDoubleMouseDown_(a);else{this.receiveDoubleClicks_=!0;var b=this;this.timeout_=setTimeout(function(){b.receiveDoubleClicks_=!1},Blockly.Block.MAX_DOUBLE_CLICK_DELAY);this.onSingleMouseDown_(a)}};
Blockly.Block.prototype.onDoubleMouseDown_=function(a){Blockly.Block.terminateDrag_();Blockly.removeAllRanges();this.unselect();this.svg_.addEvalHighlight();var b=this;setTimeout(function(){b.svg_.removeEvalHighlight()},500)};
Blockly.Block.prototype.onSingleMouseDown_=function(a){if(!this.isInFlyout){Blockly.svgResize();Blockly.Block.terminateDrag_();this.select();Blockly.hideChaff();if(Blockly.isRightButton(a))Blockly.ContextMenu&&this.showContextMenu_(a.clientX,a.clientY);else if(this.editable){Blockly.removeAllRanges();Blockly.setCursorHand_(!0);var b=this.getRelativeToSurfaceXY();this.startDragX=b.x;this.startDragY=b.y;this.startDragMouseX=a.clientX;this.startDragMouseY=a.clientY;Blockly.Block.dragMode_=1;Blockly.Block.onMouseUpWrapper_=
Blockly.bindEvent_(document,"mouseup",this,this.onMouseUp_);Blockly.Block.onMouseMoveWrapper_=Blockly.bindEvent_(document,"mousemove",this,this.onMouseMove_);this.draggedBubbles_=[];for(var b=this.getDescendants(),c=0,d;d=b[c];c++){if(d.mutator){var e=d.mutator.getIconLocation();e.bubble=d.mutator;this.draggedBubbles_.push(e)}d.comment&&(e=d.comment.getIconLocation(),e.bubble=d.comment,this.draggedBubbles_.push(e));d.warning&&(e=d.warning.getIconLocation(),e.bubble=d.warning,this.draggedBubbles_.push(e))}}else return;
a.stopPropagation()}};
Blockly.Block.prototype.onMouseUp_=function(a){Blockly.Block.terminateDrag_();Blockly.selected&&Blockly.highlightedConnection_?(Blockly.localConnection_.connect(Blockly.highlightedConnection_),this.svg_&&(Blockly.localConnection_.isSuperior()?Blockly.highlightedConnection_:Blockly.localConnection_).sourceBlock_.svg_.connectionUiEffect(),this.workspace.trashcan&&this.workspace.trashcan.isOpen&&this.workspace.trashcan.close()):this.workspace.trashcan&&this.workspace.trashcan.isOpen&&(a=this.workspace.trashcan,
goog.Timer.callOnce(a.close,100,a),Blockly.selected.dispose(!1,!0),Blockly.fireUiEvent(window,"resize"));Blockly.highlightedConnection_&&(Blockly.highlightedConnection_.unhighlight(),Blockly.highlightedConnection_=null)};Blockly.Block.prototype.showHelp_=function(){var a=goog.isFunction(this.helpUrl)?this.helpUrl():this.helpUrl;a&&window.open(a)};
Blockly.Block.prototype.duplicate_=function(){var a=Blockly.Xml.blockToDom_(this);Blockly.Xml.deleteNext(a);var a=Blockly.Xml.domToBlock_(this.workspace,a),b=this.getRelativeToSurfaceXY();b.x+=Blockly.SNAP_RADIUS;b.y+=2*Blockly.SNAP_RADIUS;a.moveBy(b.x,b.y);return a};Blockly.Block.prototype.saveToClipboard_=function(){Blockly.Ray_.Shared.saveBlockXml(this)};Blockly.Block.prototype.loadFromClipboard_=function(){Blockly.Ray_.Shared.loadBlockXml(Blockly,Blockly.mainWorkspace)};
Blockly.Block.prototype.showContextMenu_=function(a,b){if(this.contextMenu){var c=this,d=[];this.editable&&d.push({enabled:!0,text:"Copy Block to Clipboard",callback:function(){c.saveToClipboard_()}});if(this.deletable){var e={text:Blockly.MSG_DUPLICATE_BLOCK,enabled:!0,callback:function(){c.duplicate_()}};this.getDescendants().length>this.workspace.remainingCapacity()&&(e.enabled=!1);d.push(e);Blockly.Comment&&!this.collapsed&&(e={enabled:!0},this.comment?(e.text=Blockly.MSG_REMOVE_COMMENT,e.callback=
function(){c.setCommentText(null)}):(e.text=Blockly.MSG_ADD_COMMENT,e.callback=function(){c.setCommentText("")}),d.push(e));this.collapsed?(e={enabled:!0},e.text=Blockly.MSG_EXPAND_BLOCK,e.callback=function(){c.setCollapsed(!1)}):(e={enabled:!0},e.text=Blockly.MSG_COLLAPSE_BLOCK,e.callback=function(){c.setCollapsed(!0)});d.push(e);e={text:this.disabled?Blockly.MSG_ENABLE_BLOCK:Blockly.MSG_DISABLE_BLOCK,enabled:!this.getInheritedDisabled(),callback:function(){c.setDisabled(!c.disabled)}};d.push(e);
e=this.getDescendants().length;c.nextConnection&&c.nextConnection.targetConnection&&(e-=this.nextConnection.targetBlock().getDescendants().length);e={text:1==e?Blockly.MSG_DELETE_BLOCK:Blockly.MSG_DELETE_X_BLOCKS.replace("%1",e),enabled:!0,callback:function(){c.dispose(!0,!0)}};d.push(e)}e={enabled:!!(goog.isFunction(this.helpUrl)?this.helpUrl():this.helpUrl)};e.text=Blockly.MSG_HELP;e.callback=function(){c.showHelp_()};d.push(e);this.customContextMenu&&this.customContextMenu(d);Blockly.ContextMenu.show(a,
b,d)}};Blockly.Block.prototype.getConnections_=function(a){var b=[];if(a||this.rendered)if(this.outputConnection&&b.push(this.outputConnection),this.nextConnection&&b.push(this.nextConnection),this.previousConnection&&b.push(this.previousConnection),a||!this.collapsed){a=0;for(var c;c=this.inputList[a];a++)c.connection&&b.push(c.connection)}return b};
Blockly.Block.prototype.moveConnections_=function(a,b){if(this.rendered){for(var c=this.getConnections_(!1),d=0;d<c.length;d++)c[d].moveBy(a,b);this.mutator&&this.mutator.computeIconLocation();this.comment&&this.comment.computeIconLocation();this.warning&&this.warning.computeIconLocation();for(d=0;d<this.childBlocks_.length;d++)this.childBlocks_[d].moveConnections_(a,b)}};
Blockly.Block.prototype.setDragging_=function(a){a?(this.svg_.addDragging(),this.isDragging=!0):(this.svg_.removeDragging(),this.isDragging=!1);for(var b=0;b<this.childBlocks_.length;b++)this.childBlocks_[b].setDragging_(a)};
Blockly.Block.prototype.onMouseMove_=function(a){if(!("mousemove"==a.type&&1==a.x&&0==a.y&&0==a.button)){Blockly.removeAllRanges();var b=a.clientX-this.startDragMouseX,c=a.clientY-this.startDragMouseY;1==Blockly.Block.dragMode_&&Math.sqrt(Math.pow(b,2)+Math.pow(c,2))>Blockly.DRAG_RADIUS&&(Blockly.Block.dragMode_=2,this.setParent(null),this.setDragging_(!0));if(2==Blockly.Block.dragMode_){var d=this.startDragX+b,e=this.startDragY+c;this.svg_.getRootElement().setAttribute("transform","translate("+d+
", "+e+")");for(d=0;d<this.draggedBubbles_.length;d++)e=this.draggedBubbles_[d],e.bubble.setIconLocation(e.x+b,e.y+c);for(var e=this.getConnections_(!1),f=null,g=null,k=Blockly.SNAP_RADIUS,d=0;d<e.length;d++){var l=e[d],m=l.closest(k,b,c);m.connection&&(f=m.connection,g=l,k=m.radius)}Blockly.highlightedConnection_&&Blockly.highlightedConnection_!=f&&(Blockly.highlightedConnection_.unhighlight(),Blockly.highlightedConnection_=null,Blockly.localConnection_=null);f&&f!=Blockly.highlightedConnection_&&
(f.highlight(),Blockly.highlightedConnection_=f,Blockly.localConnection_=g);if(this.workspace.trashcan&&this.deletable)this.workspace.trashcan.onMouseMove(a)}}a.stopPropagation()};
Blockly.Block.prototype.bumpNeighbours_=function(){for(var a=this.getRootBlock(),b=this.getConnections_(!1),c=0;c<b.length;c++){var d=b[c];d.targetConnection&&d.isSuperior()&&d.targetBlock().bumpNeighbours_();for(var e=d.neighbours_(Blockly.SNAP_RADIUS),f=0;f<e.length;f++){var g=e[f];if(!d.targetConnection||!g.targetConnection)g.sourceBlock_.getRootBlock()!=a&&(d.isSuperior()?g.bumpAwayFrom_(d):d.bumpAwayFrom_(g))}}};Blockly.Block.prototype.getParent=function(){return this.parentBlock_};
Blockly.Block.prototype.getSurroundParent=function(){for(var a=this;;){do{var b=a,a=a.getParent();if(!a)return null}while(a.nextConnection&&a.nextConnection.targetBlock()==b);return a}};Blockly.Block.prototype.getRootBlock=function(){var a,b=this;do a=b,b=a.parentBlock_;while(b);return a};Blockly.Block.prototype.getChildren=function(){return this.childBlocks_};
Blockly.Block.prototype.setParent=function(a){var b=this.parentBlock_;if(this.parentBlock_){for(var c=this.parentBlock_.childBlocks_,d,e=0;d=c[e];e++)if(d==this){c.splice(e,1);break}c=this.getRelativeToSurfaceXY();this.workspace.getCanvas().appendChild(this.svg_.getRootElement());this.svg_.getRootElement().setAttribute("transform","translate("+c.x+", "+c.y+")");this.parentBlock_=null;this.previousConnection&&this.previousConnection.targetConnection&&this.previousConnection.disconnect();this.outputConnection&&
this.outputConnection.targetConnection&&this.outputConnection.disconnect()}else this.workspace.removeTopBlock(this);this.parentBlock_=null;b!==a&&this.dispatchEvent(Blockly.Block.EventType.PARENT_BLOCK_CHANGED);(this.parentBlock_=a)?(a.childBlocks_.push(this),b=this.getRelativeToSurfaceXY(),a.svg_&&this.svg_&&a.svg_.getRootElement().appendChild(this.svg_.getRootElement()),a=this.getRelativeToSurfaceXY(),this.moveConnections_(a.x-b.x,a.y-b.y)):this.workspace.addTopBlock(this)};
Blockly.Block.prototype.getDescendants=function(){for(var a=[this],b,c=0;b=this.childBlocks_[c];c++)a=a.concat(b.getDescendants());return a};Blockly.Block.prototype.getColour=function(){return goog.isDef(this.colourHue_)?this.colourHue_:this.outputConnection?Blockly.Ray_.Shared.getTypeColour(this.getOutputType()):Blockly.Ray_.Shared.getTypeColour(this.colourType_)};
Blockly.Block.prototype.updateColour=function(){this.svg_&&this.svg_.updateColour();this.mutator&&this.mutator.updateColour();this.comment&&this.comment.updateColour();this.warning&&this.warning.updateColour();if(this.rendered){for(var a=0,b;b=this.inputList[a];a++)for(var c=0,d;d=b.titleRow[c];c++)d.setText(null);this.render()}};Blockly.Block.prototype.setColour=function(a){this.colourHue_=a;this.updateColour()};
Blockly.Block.prototype.getTitle_=function(a){for(var b=0,c;c=this.inputList[b];b++)for(var d=0,e;e=c.titleRow[d];d++)if(e.name===a)return e;return null};Blockly.Block.prototype.getTitleValue=function(a){return(a=this.getTitle_(a))?a.getValue():null};Blockly.Block.prototype.setTitleValue=function(a,b){var c=this.getTitle_(b);if(c)c.setValue(a);else throw'Title "'+b+'" not found.';};Blockly.Block.prototype.setTooltip=function(a){this.tooltip=a};
Blockly.Block.prototype.makeRestArg=function(){this.nextConnection=new Blockly.Connection(this,Blockly.NEXT_STATEMENT);this.previousConnection=new Blockly.Connection(this,Blockly.PREVIOUS_STATEMENT);this.contextMenu=!1;this.outputConnection&&(this.outputConnection.dispose(),this.outputConnection=null)};
Blockly.Block.prototype.makeRestArgContainer=function(){this.previousConnection=this.nextConnection=null;this.contextMenu=!1;this.outputConnection&&(this.outputConnection.dispose(),this.outputConnection=null)};Blockly.Block.prototype.setOutputType=function(a){this.outputConnection||(this.outputConnection=new Blockly.Connection(this,Blockly.OUTPUT_VALUE));this.outputConnection.setType(a);this.rendered&&this.updateColour()};Blockly.Block.prototype.getOutputType=function(a){return this.outputConnection.getType(a)};
Blockly.Block.prototype.setDisabled=function(a){this.disabled!=a&&(this.disabled=a,this.svg_.updateDisabled(),this.workspace.fireChangeEvent())};Blockly.Block.prototype.getInheritedDisabled=function(){for(var a=this;;)if(a=a.getSurroundParent()){if(a.disabled)return!0}else return!1};
Blockly.Block.prototype.setCollapsed=function(a){if(this.collapsed!=a){for(var b=(this.collapsed=a)?"none":"block",c=[],d=0,e;e=this.inputList[d];d++){for(var f=0,g;g=e.titleRow[f];f++)(g.getRootElement?g.getRootElement():g).style.display=b;if(e.connection&&(a?e.connection.hideAll():c=c.concat(e.connection.unhideAll()),e=e.connection.targetBlock()))e.svg_.getRootElement().style.display=b,a&&(e.rendered=!1)}a&&(this.mutator&&this.mutator.setVisible(!1),this.comment&&this.comment.setVisible(!1),this.warning&&
this.warning.setVisible(!1));0==c.length&&(c[0]=this);if(this.rendered){for(d=0;a=c[d];d++)a.render();this.bumpNeighbours_()}}};Blockly.Block.prototype.appendValueInput=function(a){return this.appendInput_(Blockly.INPUT_VALUE,a)};Blockly.Block.prototype.appendStatementInput=function(a){return this.appendInput_(Blockly.NEXT_STATEMENT,a)};Blockly.Block.prototype.appendDummyInput=function(a){return this.appendInput_(Blockly.DUMMY_INPUT,a||"")};
Blockly.Block.prototype.makeTitleRow=function(a){var b=this.appendDummyInput("TITLE_INPUT");b.appendTitle(a,"TITLE").setAlign(Blockly.ALIGN_CENTRE);b.__title__=!0;return b};Blockly.Block.prototype.changeBlockTitle=function(a){this.getTitle_("TITLE").setText(a)};Blockly.Block.prototype.appendValueWithType=function(a,b){return this.appendValueInput(a).setType(b)};
Blockly.Block.prototype.appendInput_=function(a,b){var c=null;if(a==Blockly.INPUT_VALUE||a==Blockly.NEXT_STATEMENT)c=new Blockly.Connection(this,a);c=new Blockly.Input(a,b,this,c);this.inputList.push(c);this.rendered&&(this.render(),this.bumpNeighbours_());return c};
Blockly.Block.prototype.moveInputBefore=function(a,b){if(a==b)throw"Can't move \""+a+'" to itself.';for(var c=-1,d=-1,e=0,f;f=this.inputList[e];e++)if(f.name==a){if(c=e,-1!=d)break}else if(f.name==b&&(d=e,-1!=c))break;if(-1==c)throw'Named input "'+a+'" not found.';if(-1==d)throw'Reference input "'+a+'" not found.';this.inputList.splice(c,1);c<d&&d--;this.inputList.splice(d,0,f);this.rendered&&(this.render(),this.bumpNeighbours_())};
Blockly.Block.prototype.removeInput=function(a){for(var b=0,c;c=this.inputList[b];b++)if(c.name==a){c.connection&&c.connection.targetConnection&&c.connection.targetBlock().setParent(null);c.dispose();this.inputList.splice(b,1);this.rendered&&(this.render(),this.bumpNeighbours_());return}throw'Input "'+a+'" not found.';};Blockly.Block.prototype.getInput=function(a){for(var b=0,c;c=this.inputList[b];b++)if(c.name==a)return c;return null};
Blockly.Block.prototype.getInputTargetBlock=function(a){return(a=this.getInput(a))&&a.connection&&a.connection.targetBlock()};Blockly.Block.prototype.setMutator=function(a){this.mutator&&this.mutator!==a&&this.mutator.dispose();a&&(a.block_=this,this.mutator=a,this.svg_&&a.createIcon())};Blockly.Block.prototype.getCommentText=function(){return this.comment?this.comment.getText().replace(/\s+$/,"").replace(/ +\n/g,"\n"):""};
Blockly.Block.prototype.setCommentText=function(a){if(!Blockly.Comment)throw"Comments not supported.";var b=!1;goog.isString(a)?(this.comment||(this.comment=new Blockly.Comment(this),b=!0),this.comment.setText(a)):this.comment&&(this.comment.dispose(),b=!0);this.rendered&&(this.render(),b&&this.bumpNeighbours_())};
Blockly.Block.prototype.setWarningText=function(a){if(!Blockly.Warning)throw"Warnings not supported.";var b=!1;goog.isString(a)?(this.warning||(this.warning=new Blockly.Warning(this),b=!0),this.warning.setText(a)):this.warning&&(this.warning.dispose(),b=!0);this.rendered&&(this.render(),b&&this.bumpNeighbours_())};Blockly.Block.prototype.render=function(){if(!this.svg_)throw"Uninitialized block cannot be rendered.  Call block.initSvg()";this.svg_.render()};Blockly.Flyout=function(){this.workspace_=new Blockly.Workspace(!1);this.changeWrapper_=null;this.height_=this.width_=0;this.buttons_=[]};Blockly.Flyout.prototype.autoClose=!0;Blockly.Flyout.prototype.CORNER_RADIUS=8;Blockly.Flyout.prototype.onResizeWrapper_=null;
Blockly.Flyout.prototype.createDom=function(){this.svgGroup_=Blockly.createSvgElement("g",{},null);this.svgBackground_=Blockly.createSvgElement("path",{"class":"blocklyFlyoutBackground"},this.svgGroup_);this.svgOptions_=Blockly.createSvgElement("g",{},this.svgGroup_);this.svgOptions_.appendChild(this.workspace_.createDom());return this.svgGroup_};
Blockly.Flyout.prototype.dispose=function(){this.onResizeWrapper_&&(Blockly.unbindEvent_(this.onResizeWrapper_),this.onResizeWrapper_=null);this.changeWrapper_&&(Blockly.unbindEvent_(this.changeWrapper_),this.changeWrapper_=null);this.scrollbar_&&(this.scrollbar_.dispose(),this.scrollbar_=null);this.workspace_=null;this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null);this.targetWorkspaceMetrics_=this.targetWorkspace_=this.svgOptions_=this.svgBackground_=null;this.buttons_.splice(0)};
Blockly.Flyout.prototype.getMetrics=function(){if(!this.isVisible())return null;var a=this.height_-2*this.CORNER_RADIUS,b=this.width_;try{var c=this.svgOptions_.getBBox()}catch(d){c={height:0,y:0}}return{viewHeight:a,viewWidth:b,contentHeight:c.height+c.y,viewTop:-this.svgOptions_.scrollY,contentTop:0,absoluteTop:this.CORNER_RADIUS,absoluteLeft:0}};
Blockly.Flyout.prototype.setMetrics=function(a){var b=this.getMetrics();goog.isNumber(a.y)&&(this.svgOptions_.scrollY=-b.contentHeight*a.y-b.contentTop);this.svgOptions_.setAttribute("transform","translate(0,"+(this.svgOptions_.scrollY+b.absoluteTop)+")")};
Blockly.Flyout.prototype.init=function(a,b,c){this.targetWorkspace_=a;this.targetWorkspaceMetrics_=b;var d=this;c&&(this.scrollbar_=new Blockly.Scrollbar(this.svgOptions_,function(){return d.getMetrics()},function(a){return d.setMetrics(a)},!1,!1));this.hide();this.onResizeWrapper_=Blockly.bindEvent_(window,goog.events.EventType.RESIZE,this,this.position_);this.position_();this.changeWrapper_=Blockly.bindEvent_(this.targetWorkspace_.getCanvas(),"blocklyWorkspaceChange",this,this.filterForCapacity_)};
Blockly.Flyout.prototype.position_=function(){if(this.isVisible()){var a=this.targetWorkspaceMetrics_();if(a){var b=this.width_-this.CORNER_RADIUS,c=["M 0,0"];c.push("h",b);c.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS);c.push("v",Math.max(0,a.viewHeight-2*this.CORNER_RADIUS));c.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS);c.push("h",-b);c.push("z");this.svgBackground_.setAttribute("d",c.join(" "));this.svgGroup_.setAttribute("transform",
"translate("+a.absoluteLeft+","+a.absoluteTop+")");this.height_=a.viewHeight}}};Blockly.Flyout.prototype.isVisible=function(){return"block"==this.svgGroup_.style.display};Blockly.Flyout.prototype.hide=function(){if(this.isVisible()){this.svgGroup_.style.display="none";for(var a=this.workspace_.getTopBlocks(!1),b=0,c;c=a[b];b++)c.dispose(!1,!1);for(b=0;a=this.buttons_[b];b++)Blockly.unbindEvent_(a.wrapper_),goog.dom.removeNode(a);this.buttons_.splice(0)}};
Blockly.Flyout.prototype.show=function(a){this.hide();var b=this.CORNER_RADIUS;this.svgGroup_.style.display="block";var c=[],d=[];if(a.isPath)Blockly.Ray_.Shared.flyoutCategory(a,c,d,b,this.workspace_,Blockly);else for(var e=0,f;f=a[e];e++)f.tagName&&"BLOCK"==f.tagName.toUpperCase()&&(f=Blockly.Xml.domToBlock_(this.workspace_,f),c.push(f),d.push(2*b));a=0;for(var g=b,e=0;f=c[e];e++){for(var k=f.getDescendants(),l=0,m;m=k[l];l++)m.isInFlyout=!0,Blockly.Comment&&m.setCommentText(null);f.render();k=
f.getSvgRoot().getBBox();f.moveBy(b+Blockly.BlockSvg.TAB_WIDTH,g);a=Math.max(a,k.width);g+=k.height+d[e];f.disabled||Blockly.bindEvent_(f.getSvgRoot(),"mousedown",null,Blockly.Flyout.createBlockFunc_(this,f))}a+=b+Blockly.BlockSvg.TAB_WIDTH+b/2+Blockly.Scrollbar.scrollbarThickness;for(e=0;f=c[e];e++)k=f.getSvgRoot().getBBox(),b=f.getRelativeToSurfaceXY(),b=Blockly.createSvgElement("rect",{width:k.width,height:k.height,x:b.x+k.x,y:b.y+k.y,"fill-opacity":0},null),this.svgOptions_.insertBefore(b,this.svgOptions_.firstChild),
b.wrapper_=Blockly.bindEvent_(b,"mousedown",null,Blockly.Flyout.createBlockFunc_(this,f)),this.buttons_[e]=b;this.width_=a;this.filterForCapacity_();Blockly.fireUiEvent(window,"resize")};
Blockly.Flyout.createBlockFunc_=function(a,b){return function(c){if(!Blockly.isRightButton(c)&&!b.disabled){var d=Blockly.Xml.blockToDom_(b),d=Blockly.Xml.domToBlock_(a.targetWorkspace_,d),e=b.getSvgRoot();if(!e)throw"originBlock is not rendered.";var e=Blockly.getSvgXY_(e),f=Blockly.getSvgXY_(a.targetWorkspace_.getCanvas());d.moveBy(e.x-f.x,e.y-f.y);d.render();a.autoClose?a.hide():a.filterForCapacity_();d.onMouseDown_(c)}}};
Blockly.Flyout.prototype.filterForCapacity_=function(){for(var a=this.targetWorkspace_.remainingCapacity(),b=this.workspace_.getTopBlocks(!1),c=0,d;d=b[c];c++){var e=d.getDescendants().length>a;d.setDisabled(e)}};goog.structs.Trie=function(a){this.childNodes_={};a&&this.setAll(a)};goog.structs.Trie.prototype.value_=void 0;goog.structs.Trie.prototype.set=function(a,b){this.setOrAdd_(a,b,!1)};goog.structs.Trie.prototype.add=function(a,b){this.setOrAdd_(a,b,!0)};
goog.structs.Trie.prototype.setOrAdd_=function(a,b,c){for(var d=this,e=0;e<a.length;e++){var f=a.charAt(e);d.childNodes_[f]||(d.childNodes_[f]=new goog.structs.Trie);d=d.childNodes_[f]}if(c&&void 0!==d.value_)throw Error('The collection already contains the key "'+a+'"');d.value_=b};goog.structs.Trie.prototype.setAll=function(a){var b=goog.structs.getKeys(a);a=goog.structs.getValues(a);for(var c=0;c<b.length;c++)this.set(b[c],a[c])};
goog.structs.Trie.prototype.get=function(a){for(var b=this,c=0;c<a.length;c++){var d=a.charAt(c);if(!b.childNodes_[d])return;b=b.childNodes_[d]}return b.value_};goog.structs.Trie.prototype.getKeyAndPrefixes=function(a,b){var c=this,d={},e=b||0;void 0!==c.value_&&(d[e]=c.value_);for(;e<a.length;e++){var f=a.charAt(e);if(!(f in c.childNodes_))break;c=c.childNodes_[f];void 0!==c.value_&&(d[e]=c.value_)}return d};goog.structs.Trie.prototype.getValues=function(){var a=[];this.getValuesInternal_(a);return a};
goog.structs.Trie.prototype.getValuesInternal_=function(a){void 0!==this.value_&&a.push(this.value_);for(var b in this.childNodes_)this.childNodes_[b].getValuesInternal_(a)};goog.structs.Trie.prototype.getKeys=function(a){var b=[];if(a){for(var c=this,d=0;d<a.length;d++){var e=a.charAt(d);if(!c.childNodes_[e])return[];c=c.childNodes_[e]}c.getKeysInternal_(a,b)}else this.getKeysInternal_("",b);return b};
goog.structs.Trie.prototype.getKeysInternal_=function(a,b){void 0!==this.value_&&b.push(a);for(var c in this.childNodes_)this.childNodes_[c].getKeysInternal_(a+c,b)};goog.structs.Trie.prototype.containsKey=function(a){return void 0!==this.get(a)};goog.structs.Trie.prototype.containsValue=function(a){if(this.value_===a)return!0;for(var b in this.childNodes_)if(this.childNodes_[b].containsValue(a))return!0;return!1};goog.structs.Trie.prototype.clear=function(){this.childNodes_={};this.value_=void 0};
goog.structs.Trie.prototype.remove=function(a){for(var b=this,c=[],d=0;d<a.length;d++){var e=a.charAt(d);if(!b.childNodes_[e])throw Error('The collection does not have the key "'+a+'"');c.push([b,e]);b=b.childNodes_[e]}a=b.value_;for(delete b.value_;0<c.length;)if(e=c.pop(),b=e[0],e=e[1],goog.object.isEmpty(b.childNodes_[e].childNodes_))delete b.childNodes_[e];else break;return a};goog.structs.Trie.prototype.clone=function(){return new goog.structs.Trie(this)};
goog.structs.Trie.prototype.getCount=function(){return goog.structs.getCount(this.getValues())};goog.structs.Trie.prototype.isEmpty=function(){return void 0===this.value_&&goog.structs.isEmpty(this.childNodes_)};goog.ui.tree.TypeAhead=function(){this.nodeMap_=new goog.structs.Trie};goog.ui.tree.TypeAhead.prototype.buffer_="";goog.ui.tree.TypeAhead.prototype.matchingLabels_=null;goog.ui.tree.TypeAhead.prototype.matchingNodes_=null;goog.ui.tree.TypeAhead.prototype.matchingLabelIndex_=0;goog.ui.tree.TypeAhead.prototype.matchingNodeIndex_=0;goog.ui.tree.TypeAhead.Offset={DOWN:1,UP:-1};
goog.ui.tree.TypeAhead.prototype.handleNavigation=function(a){var b=!1;switch(a.keyCode){case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.UP:a.ctrlKey&&(this.jumpTo_(a.keyCode==goog.events.KeyCodes.DOWN?goog.ui.tree.TypeAhead.Offset.DOWN:goog.ui.tree.TypeAhead.Offset.UP),b=!0);break;case goog.events.KeyCodes.BACKSPACE:a=this.buffer_.length-1;b=!0;0<a?(this.buffer_=this.buffer_.substring(0,a),this.jumpToLabel_(this.buffer_)):0==a?this.buffer_="":b=!1;break;case goog.events.KeyCodes.ESC:this.buffer_=
"",b=!0}return b};goog.ui.tree.TypeAhead.prototype.handleTypeAheadChar=function(a){var b=!1;if(!a.ctrlKey&&!a.altKey&&(a=String.fromCharCode(a.charCode||a.keyCode).toLowerCase(),goog.string.isUnicodeChar(a)&&(" "!=a||this.buffer_)))this.buffer_+=a,b=this.jumpToLabel_(this.buffer_);return b};goog.ui.tree.TypeAhead.prototype.setNodeInMap=function(a){var b=a.getText();if(b&&!goog.string.isEmptySafe(b)){var b=b.toLowerCase(),c=this.nodeMap_.get(b);c?c.push(a):this.nodeMap_.set(b,[a])}};
goog.ui.tree.TypeAhead.prototype.removeNodeFromMap=function(a){var b=a.getText();if(b&&!goog.string.isEmptySafe(b)){var b=b.toLowerCase(),c=this.nodeMap_.get(b);c&&(goog.array.remove(c,a),c.length&&this.nodeMap_.remove(b))}};goog.ui.tree.TypeAhead.prototype.jumpToLabel_=function(a){var b=!1;if((a=this.nodeMap_.getKeys(a))&&a.length)if(this.matchingLabelIndex_=this.matchingNodeIndex_=0,b=this.nodeMap_.get(a[0]),b=this.selectMatchingNode_(b))this.matchingLabels_=a;return b};
goog.ui.tree.TypeAhead.prototype.jumpTo_=function(a){var b=!1,c=this.matchingLabels_;if(c){var b=null,d=!1;if(this.matchingNodes_){var e=this.matchingNodeIndex_+a;0<=e&&e<this.matchingNodes_.length?(this.matchingNodeIndex_=e,b=this.matchingNodes_):d=!0}b||(e=this.matchingLabelIndex_+a,0<=e&&e<c.length&&(this.matchingLabelIndex_=e),c.length>this.matchingLabelIndex_&&(b=this.nodeMap_.get(c[this.matchingLabelIndex_])),b&&(b.length&&d)&&(this.matchingNodeIndex_=a==goog.ui.tree.TypeAhead.Offset.UP?b.length-
1:0));if(b=this.selectMatchingNode_(b))this.matchingLabels_=c}return b};goog.ui.tree.TypeAhead.prototype.selectMatchingNode_=function(a){var b;a&&(this.matchingNodeIndex_<a.length&&(b=a[this.matchingNodeIndex_],this.matchingNodes_=a),b&&(b.reveal(),b.select()));return!!b};goog.ui.tree.TypeAhead.prototype.clear=function(){this.buffer_=""};goog.debug.LOGGING_ENABLED=goog.DEBUG;goog.debug.catchErrors=function(a,b,c){c=c||goog.global;var d=c.onerror,e=!!b;goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("535.3")&&(e=!e);c.onerror=function(b,c,k){d&&d(b,c,k);a({message:b,fileName:c,line:k});return e}};goog.debug.expose=function(a,b){if("undefined"==typeof a)return"undefined";if(null==a)return"NULL";var c=[],d;for(d in a)if(b||!goog.isFunction(a[d])){var e=d+" = ";try{e+=a[d]}catch(f){e+="*** "+f+" ***"}c.push(e)}return c.join("\n")};
goog.debug.deepExpose=function(a,b){var c=new goog.structs.Set,d=[],e=function(a,g){var k=g+"  ";try{if(goog.isDef(a))if(goog.isNull(a))d.push("NULL");else if(goog.isString(a))d.push('"'+a.replace(/\n/g,"\n"+g)+'"');else if(goog.isFunction(a))d.push(String(a).replace(/\n/g,"\n"+g));else if(goog.isObject(a))if(c.contains(a))d.push("*** reference loop detected ***");else{c.add(a);d.push("{");for(var l in a)if(b||!goog.isFunction(a[l]))d.push("\n"),d.push(k),d.push(l+" = "),e(a[l],k);d.push("\n"+g+"}")}else d.push(a);
else d.push("undefined")}catch(m){d.push("*** "+m+" ***")}};e(a,"");return d.join("")};goog.debug.exposeArray=function(a){for(var b=[],c=0;c<a.length;c++)goog.isArray(a[c])?b.push(goog.debug.exposeArray(a[c])):b.push(a[c]);return"[ "+b.join(", ")+" ]"};
goog.debug.exposeException=function(a,b){try{var c=goog.debug.normalizeErrorObject(a);return"Message: "+goog.string.htmlEscape(c.message)+'\nUrl: <a href="view-source:'+c.fileName+'" target="_new">'+c.fileName+"</a>\nLine: "+c.lineNumber+"\n\nBrowser stack:\n"+goog.string.htmlEscape(c.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+goog.string.htmlEscape(goog.debug.getStacktrace(b)+"-> ")}catch(d){return"Exception trying to expose exception! You win, we lose. "+d}};
goog.debug.normalizeErrorObject=function(a){var b=goog.getObjectByName("window.location.href");if(goog.isString(a))return{message:a,name:"Unknown error",lineNumber:"Not available",fileName:b,stack:"Not available"};var c,d,e=!1;try{c=a.lineNumber||a.line||"Not available"}catch(f){c="Not available",e=!0}try{d=a.fileName||a.filename||a.sourceURL||goog.global.$googDebugFname||b}catch(g){d="Not available",e=!0}return e||!a.lineNumber||!a.fileName||!a.stack?{message:a.message,name:a.name,lineNumber:c,fileName:d,
stack:a.stack||"Not available"}:a};goog.debug.enhanceError=function(a,b){var c="string"==typeof a?Error(a):a;c.stack||(c.stack=goog.debug.getStacktrace(arguments.callee.caller));if(b){for(var d=0;c["message"+d];)++d;c["message"+d]=String(b)}return c};
goog.debug.getStacktraceSimple=function(a){for(var b=[],c=arguments.callee.caller,d=0;c&&(!a||d<a);){b.push(goog.debug.getFunctionName(c));b.push("()\n");try{c=c.caller}catch(e){b.push("[exception trying to get caller]\n");break}d++;if(d>=goog.debug.MAX_STACK_DEPTH){b.push("[...long stack...]");break}}a&&d>=a?b.push("[...reached max depth limit...]"):b.push("[end]");return b.join("")};goog.debug.MAX_STACK_DEPTH=50;
goog.debug.getStacktrace=function(a){return goog.debug.getStacktraceHelper_(a||arguments.callee.caller,[])};
goog.debug.getStacktraceHelper_=function(a,b){var c=[];if(goog.array.contains(b,a))c.push("[...circular reference...]");else if(a&&b.length<goog.debug.MAX_STACK_DEPTH){c.push(goog.debug.getFunctionName(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=goog.debug.getFunctionName(f))?f:"[fn]";break;default:f=
typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(goog.debug.getStacktraceHelper_(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?c.push("[...long stack...]"):c.push("[end]");return c.join("")};goog.debug.setFunctionResolver=function(a){goog.debug.fnNameResolver_=a};
goog.debug.getFunctionName=function(a){if(goog.debug.fnNameCache_[a])return goog.debug.fnNameCache_[a];if(goog.debug.fnNameResolver_){var b=goog.debug.fnNameResolver_(a);if(b)return goog.debug.fnNameCache_[a]=b}a=String(a);goog.debug.fnNameCache_[a]||(b=/function ([^\(]+)/.exec(a),goog.debug.fnNameCache_[a]=b?b[1]:"[Anonymous]");return goog.debug.fnNameCache_[a]};
goog.debug.makeWhitespaceVisible=function(a){return a.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")};goog.debug.fnNameCache_={};goog.debug.LogRecord=function(a,b,c,d,e){this.reset(a,b,c,d,e)};goog.debug.LogRecord.prototype.sequenceNumber_=0;goog.debug.LogRecord.prototype.exception_=null;goog.debug.LogRecord.prototype.exceptionText_=null;goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS=!0;goog.debug.LogRecord.nextSequenceNumber_=0;
goog.debug.LogRecord.prototype.reset=function(a,b,c,d,e){goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS&&(this.sequenceNumber_="number"==typeof e?e:goog.debug.LogRecord.nextSequenceNumber_++);this.time_=d||goog.now();this.level_=a;this.msg_=b;this.loggerName_=c;delete this.exception_;delete this.exceptionText_};goog.debug.LogRecord.prototype.getLoggerName=function(){return this.loggerName_};goog.debug.LogRecord.prototype.getException=function(){return this.exception_};
goog.debug.LogRecord.prototype.setException=function(a){this.exception_=a};goog.debug.LogRecord.prototype.getExceptionText=function(){return this.exceptionText_};goog.debug.LogRecord.prototype.setExceptionText=function(a){this.exceptionText_=a};goog.debug.LogRecord.prototype.setLoggerName=function(a){this.loggerName_=a};goog.debug.LogRecord.prototype.getLevel=function(){return this.level_};goog.debug.LogRecord.prototype.setLevel=function(a){this.level_=a};
goog.debug.LogRecord.prototype.getMessage=function(){return this.msg_};goog.debug.LogRecord.prototype.setMessage=function(a){this.msg_=a};goog.debug.LogRecord.prototype.getMillis=function(){return this.time_};goog.debug.LogRecord.prototype.setMillis=function(a){this.time_=a};goog.debug.LogRecord.prototype.getSequenceNumber=function(){return this.sequenceNumber_};goog.debug.LogBuffer=function(){goog.asserts.assert(goog.debug.LogBuffer.isBufferingEnabled(),"Cannot use goog.debug.LogBuffer without defining goog.debug.LogBuffer.CAPACITY.");this.clear()};goog.debug.LogBuffer.getInstance=function(){goog.debug.LogBuffer.instance_||(goog.debug.LogBuffer.instance_=new goog.debug.LogBuffer);return goog.debug.LogBuffer.instance_};goog.debug.LogBuffer.CAPACITY=0;
goog.debug.LogBuffer.prototype.addRecord=function(a,b,c){var d=(this.curIndex_+1)%goog.debug.LogBuffer.CAPACITY;this.curIndex_=d;if(this.isFull_)return d=this.buffer_[d],d.reset(a,b,c),d;this.isFull_=d==goog.debug.LogBuffer.CAPACITY-1;return this.buffer_[d]=new goog.debug.LogRecord(a,b,c)};goog.debug.LogBuffer.isBufferingEnabled=function(){return 0<goog.debug.LogBuffer.CAPACITY};
goog.debug.LogBuffer.prototype.clear=function(){this.buffer_=Array(goog.debug.LogBuffer.CAPACITY);this.curIndex_=-1;this.isFull_=!1};goog.debug.LogBuffer.prototype.forEachRecord=function(a){var b=this.buffer_;if(b[0]){var c=this.curIndex_,d=this.isFull_?c:-1;do d=(d+1)%goog.debug.LogBuffer.CAPACITY,a(b[d]);while(d!=c)}};goog.debug.Logger=function(a){this.name_=a};goog.debug.Logger.prototype.parent_=null;goog.debug.Logger.prototype.level_=null;goog.debug.Logger.prototype.children_=null;goog.debug.Logger.prototype.handlers_=null;goog.debug.Logger.ENABLE_HIERARCHY=!0;goog.debug.Logger.ENABLE_HIERARCHY||(goog.debug.Logger.rootHandlers_=[]);goog.debug.Logger.Level=function(a,b){this.name=a;this.value=b};goog.debug.Logger.Level.prototype.toString=function(){return this.name};
goog.debug.Logger.Level.OFF=new goog.debug.Logger.Level("OFF",Infinity);goog.debug.Logger.Level.SHOUT=new goog.debug.Logger.Level("SHOUT",1200);goog.debug.Logger.Level.SEVERE=new goog.debug.Logger.Level("SEVERE",1E3);goog.debug.Logger.Level.WARNING=new goog.debug.Logger.Level("WARNING",900);goog.debug.Logger.Level.INFO=new goog.debug.Logger.Level("INFO",800);goog.debug.Logger.Level.CONFIG=new goog.debug.Logger.Level("CONFIG",700);goog.debug.Logger.Level.FINE=new goog.debug.Logger.Level("FINE",500);
goog.debug.Logger.Level.FINER=new goog.debug.Logger.Level("FINER",400);goog.debug.Logger.Level.FINEST=new goog.debug.Logger.Level("FINEST",300);goog.debug.Logger.Level.ALL=new goog.debug.Logger.Level("ALL",0);
goog.debug.Logger.Level.PREDEFINED_LEVELS=[goog.debug.Logger.Level.OFF,goog.debug.Logger.Level.SHOUT,goog.debug.Logger.Level.SEVERE,goog.debug.Logger.Level.WARNING,goog.debug.Logger.Level.INFO,goog.debug.Logger.Level.CONFIG,goog.debug.Logger.Level.FINE,goog.debug.Logger.Level.FINER,goog.debug.Logger.Level.FINEST,goog.debug.Logger.Level.ALL];goog.debug.Logger.Level.predefinedLevelsCache_=null;
goog.debug.Logger.Level.createPredefinedLevelsCache_=function(){goog.debug.Logger.Level.predefinedLevelsCache_={};for(var a=0,b;b=goog.debug.Logger.Level.PREDEFINED_LEVELS[a];a++)goog.debug.Logger.Level.predefinedLevelsCache_[b.value]=b,goog.debug.Logger.Level.predefinedLevelsCache_[b.name]=b};
goog.debug.Logger.Level.getPredefinedLevel=function(a){goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_();return goog.debug.Logger.Level.predefinedLevelsCache_[a]||null};
goog.debug.Logger.Level.getPredefinedLevelByValue=function(a){goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_();if(a in goog.debug.Logger.Level.predefinedLevelsCache_)return goog.debug.Logger.Level.predefinedLevelsCache_[a];for(var b=0;b<goog.debug.Logger.Level.PREDEFINED_LEVELS.length;++b){var c=goog.debug.Logger.Level.PREDEFINED_LEVELS[b];if(c.value<=a)return c}return null};goog.debug.Logger.getLogger=function(a){return goog.debug.LogManager.getLogger(a)};
goog.debug.Logger.logToProfilers=function(a){goog.global.console&&(goog.global.console.timeStamp?goog.global.console.timeStamp(a):goog.global.console.markTimeline&&goog.global.console.markTimeline(a));goog.global.msWriteProfilerMark&&goog.global.msWriteProfilerMark(a)};goog.debug.Logger.prototype.getName=function(){return this.name_};
goog.debug.Logger.prototype.addHandler=function(a){goog.debug.LOGGING_ENABLED&&(goog.debug.Logger.ENABLE_HIERARCHY?(this.handlers_||(this.handlers_=[]),this.handlers_.push(a)):(goog.asserts.assert(!this.name_,"Cannot call addHandler on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootHandlers_.push(a)))};
goog.debug.Logger.prototype.removeHandler=function(a){if(goog.debug.LOGGING_ENABLED){var b=goog.debug.Logger.ENABLE_HIERARCHY?this.handlers_:goog.debug.Logger.rootHandlers_;return!!b&&goog.array.remove(b,a)}return!1};goog.debug.Logger.prototype.getParent=function(){return this.parent_};goog.debug.Logger.prototype.getChildren=function(){this.children_||(this.children_={});return this.children_};
goog.debug.Logger.prototype.setLevel=function(a){goog.debug.LOGGING_ENABLED&&(goog.debug.Logger.ENABLE_HIERARCHY?this.level_=a:(goog.asserts.assert(!this.name_,"Cannot call setLevel() on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootLevel_=a))};goog.debug.Logger.prototype.getLevel=function(){return goog.debug.LOGGING_ENABLED?this.level_:goog.debug.Logger.Level.OFF};
goog.debug.Logger.prototype.getEffectiveLevel=function(){if(!goog.debug.LOGGING_ENABLED)return goog.debug.Logger.Level.OFF;if(!goog.debug.Logger.ENABLE_HIERARCHY)return goog.debug.Logger.rootLevel_;if(this.level_)return this.level_;if(this.parent_)return this.parent_.getEffectiveLevel();goog.asserts.fail("Root logger has no level set.");return null};goog.debug.Logger.prototype.isLoggable=function(a){return goog.debug.LOGGING_ENABLED&&a.value>=this.getEffectiveLevel().value};
goog.debug.Logger.prototype.log=function(a,b,c){goog.debug.LOGGING_ENABLED&&this.isLoggable(a)&&this.doLogRecord_(this.getLogRecord(a,b,c))};goog.debug.Logger.prototype.getLogRecord=function(a,b,c){var d=goog.debug.LogBuffer.isBufferingEnabled()?goog.debug.LogBuffer.getInstance().addRecord(a,b,this.name_):new goog.debug.LogRecord(a,String(b),this.name_);c&&(d.setException(c),d.setExceptionText(goog.debug.exposeException(c,arguments.callee.caller)));return d};
goog.debug.Logger.prototype.shout=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.SHOUT,a,b)};goog.debug.Logger.prototype.severe=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.SEVERE,a,b)};goog.debug.Logger.prototype.warning=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.WARNING,a,b)};goog.debug.Logger.prototype.info=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.INFO,a,b)};
goog.debug.Logger.prototype.config=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.CONFIG,a,b)};goog.debug.Logger.prototype.fine=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINE,a,b)};goog.debug.Logger.prototype.finer=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINER,a,b)};goog.debug.Logger.prototype.finest=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINEST,a,b)};
goog.debug.Logger.prototype.logRecord=function(a){goog.debug.LOGGING_ENABLED&&this.isLoggable(a.getLevel())&&this.doLogRecord_(a)};goog.debug.Logger.prototype.doLogRecord_=function(a){goog.debug.Logger.logToProfilers("log:"+a.getMessage());if(goog.debug.Logger.ENABLE_HIERARCHY)for(var b=this;b;)b.callPublish_(a),b=b.getParent();else for(var b=0,c;c=goog.debug.Logger.rootHandlers_[b++];)c(a)};goog.debug.Logger.prototype.callPublish_=function(a){if(this.handlers_)for(var b=0,c;c=this.handlers_[b];b++)c(a)};
goog.debug.Logger.prototype.setParent_=function(a){this.parent_=a};goog.debug.Logger.prototype.addChild_=function(a,b){this.getChildren()[a]=b};goog.debug.LogManager={};goog.debug.LogManager.loggers_={};goog.debug.LogManager.rootLogger_=null;goog.debug.LogManager.initialize=function(){goog.debug.LogManager.rootLogger_||(goog.debug.LogManager.rootLogger_=new goog.debug.Logger(""),goog.debug.LogManager.loggers_[""]=goog.debug.LogManager.rootLogger_,goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG))};
goog.debug.LogManager.getLoggers=function(){return goog.debug.LogManager.loggers_};goog.debug.LogManager.getRoot=function(){goog.debug.LogManager.initialize();return goog.debug.LogManager.rootLogger_};goog.debug.LogManager.getLogger=function(a){goog.debug.LogManager.initialize();return goog.debug.LogManager.loggers_[a]||goog.debug.LogManager.createLogger_(a)};
goog.debug.LogManager.createFunctionForCatchErrors=function(a){return function(b){(a||goog.debug.LogManager.getRoot()).severe("Error: "+b.message+" ("+b.fileName+" @ Line: "+b.line+")")}};goog.debug.LogManager.createLogger_=function(a){var b=new goog.debug.Logger(a);if(goog.debug.Logger.ENABLE_HIERARCHY){var c=a.lastIndexOf("."),d=a.substr(0,c),c=a.substr(c+1),d=goog.debug.LogManager.getLogger(d);d.addChild_(c,b);b.setParent_(d)}return goog.debug.LogManager.loggers_[a]=b};goog.log={};goog.log.ENABLED=goog.debug.LOGGING_ENABLED;goog.log.Logger=goog.debug.Logger;goog.log.Level=goog.debug.Logger.Level;goog.log.LogRecord=goog.debug.LogRecord;goog.log.getLogger=function(a,b){if(goog.log.ENABLED){var c=goog.debug.Logger.getLogger(a);b&&c&&c.setLevel(b);return c}return null};goog.log.addHandler=function(a,b){goog.log.ENABLED&&a&&a.addHandler(b)};goog.log.removeHandler=function(a,b){return goog.log.ENABLED&&a?a.removeHandler(b):!1};
goog.log.log=function(a,b,c,d){goog.log.ENABLED&&a&&a.log(b,c,d)};goog.log.error=function(a,b,c){goog.log.ENABLED&&a&&a.severe(b,c)};goog.log.warning=function(a,b,c){goog.log.ENABLED&&a&&a.warning(b,c)};goog.log.info=function(a,b,c){goog.log.ENABLED&&a&&a.info(b,c)};goog.log.fine=function(a,b,c){goog.log.ENABLED&&a&&a.fine(b,c)};goog.events.KeyHandler=function(a,b){goog.events.EventTarget.call(this);a&&this.attach(a,b)};goog.inherits(goog.events.KeyHandler,goog.events.EventTarget);goog.events.KeyHandler.prototype.element_=null;goog.events.KeyHandler.prototype.keyPressKey_=null;goog.events.KeyHandler.prototype.keyDownKey_=null;goog.events.KeyHandler.prototype.keyUpKey_=null;goog.events.KeyHandler.prototype.lastKey_=-1;goog.events.KeyHandler.prototype.keyCode_=-1;goog.events.KeyHandler.prototype.altKey_=!1;
goog.events.KeyHandler.EventType={KEY:"key"};
goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,
63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT};
goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,
"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.USES_KEYDOWN_=goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525");goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO;
goog.events.KeyHandler.prototype.handleKeyDown_=function(a){if(goog.userAgent.WEBKIT&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!a.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!a.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!a.metaKey))this.keyCode_=this.lastKey_=-1;-1==this.lastKey_&&(a.ctrlKey&&a.keyCode!=goog.events.KeyCodes.CTRL?this.lastKey_=goog.events.KeyCodes.CTRL:a.altKey&&a.keyCode!=goog.events.KeyCodes.ALT?this.lastKey_=goog.events.KeyCodes.ALT:a.metaKey&&
a.keyCode!=goog.events.KeyCodes.META&&(this.lastKey_=goog.events.KeyCodes.META));goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(a.keyCode,this.lastKey_,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.keyCode_=goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(a.keyCode):a.keyCode,goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(this.altKey_=a.altKey))};goog.events.KeyHandler.prototype.resetState=function(){this.keyCode_=this.lastKey_=-1};
goog.events.KeyHandler.prototype.handleKeyup_=function(a){this.resetState();this.altKey_=a.altKey};
goog.events.KeyHandler.prototype.handleEvent=function(a){var b=a.getBrowserEvent(),c,d,e=b.altKey;goog.userAgent.IE&&a.type==goog.events.EventType.KEYPRESS?(c=this.keyCode_,d=c!=goog.events.KeyCodes.ENTER&&c!=goog.events.KeyCodes.ESC?b.keyCode:0):goog.userAgent.WEBKIT&&a.type==goog.events.EventType.KEYPRESS?(c=this.keyCode_,d=0<=b.charCode&&63232>b.charCode&&goog.events.KeyCodes.isCharacterKey(c)?b.charCode:0):goog.userAgent.OPERA?(c=this.keyCode_,d=goog.events.KeyCodes.isCharacterKey(c)?b.keyCode:
0):(c=b.keyCode||this.keyCode_,d=b.charCode||0,goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(e=this.altKey_),goog.userAgent.MAC&&(d==goog.events.KeyCodes.QUESTION_MARK&&c==goog.events.KeyCodes.WIN_KEY)&&(c=goog.events.KeyCodes.SLASH));var f=c,g=b.keyIdentifier;c?63232<=c&&c in goog.events.KeyHandler.safariKey_?f=goog.events.KeyHandler.safariKey_[c]:25==c&&a.shiftKey&&(f=9):g&&g in goog.events.KeyHandler.keyIdentifier_&&(f=goog.events.KeyHandler.keyIdentifier_[g]);a=f==this.lastKey_;this.lastKey_=
f;b=new goog.events.KeyEvent(f,d,a,b);b.altKey=e;this.dispatchEvent(b)};goog.events.KeyHandler.prototype.getElement=function(){return this.element_};
goog.events.KeyHandler.prototype.attach=function(a,b){this.keyUpKey_&&this.detach();this.element_=a;this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,b);this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,b,this);this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,b,this)};
goog.events.KeyHandler.prototype.detach=function(){this.keyPressKey_&&(goog.events.unlistenByKey(this.keyPressKey_),goog.events.unlistenByKey(this.keyDownKey_),goog.events.unlistenByKey(this.keyUpKey_),this.keyUpKey_=this.keyDownKey_=this.keyPressKey_=null);this.element_=null;this.keyCode_=this.lastKey_=-1};goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this);this.detach()};
goog.events.KeyEvent=function(a,b,c,d){goog.events.BrowserEvent.call(this,d);this.type=goog.events.KeyHandler.EventType.KEY;this.keyCode=a;this.charCode=b;this.repeat=c};goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent);goog.events.FocusHandler=function(a){goog.events.EventTarget.call(this);this.element_=a;a=goog.userAgent.IE?"focusout":"blur";this.listenKeyIn_=goog.events.listen(this.element_,goog.userAgent.IE?"focusin":"focus",this,!goog.userAgent.IE);this.listenKeyOut_=goog.events.listen(this.element_,a,this,!goog.userAgent.IE)};goog.inherits(goog.events.FocusHandler,goog.events.EventTarget);goog.events.FocusHandler.EventType={FOCUSIN:"focusin",FOCUSOUT:"focusout"};
goog.events.FocusHandler.prototype.handleEvent=function(a){var b=a.getBrowserEvent(),b=new goog.events.BrowserEvent(b);b.type="focusin"==a.type||"focus"==a.type?goog.events.FocusHandler.EventType.FOCUSIN:goog.events.FocusHandler.EventType.FOCUSOUT;this.dispatchEvent(b)};goog.events.FocusHandler.prototype.disposeInternal=function(){goog.events.FocusHandler.superClass_.disposeInternal.call(this);goog.events.unlistenByKey(this.listenKeyIn_);goog.events.unlistenByKey(this.listenKeyOut_);delete this.element_};goog.ui.tree.TreeControl=function(a,b,c){goog.ui.tree.BaseNode.call(this,a,b,c);this.setExpandedInternal(!0);this.setSelectedInternal(!0);this.selectedItem_=this;this.typeAhead_=new goog.ui.tree.TypeAhead;if(goog.userAgent.IE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(d){goog.log.warning(this.logger_,"Failed to enable background image cache")}};goog.inherits(goog.ui.tree.TreeControl,goog.ui.tree.BaseNode);goog.ui.tree.TreeControl.prototype.keyHandler_=null;
goog.ui.tree.TreeControl.prototype.focusHandler_=null;goog.ui.tree.TreeControl.prototype.logger_=goog.log.getLogger("goog.ui.tree.TreeControl");goog.ui.tree.TreeControl.prototype.focused_=!1;goog.ui.tree.TreeControl.prototype.focusedNode_=null;goog.ui.tree.TreeControl.prototype.showLines_=!0;goog.ui.tree.TreeControl.prototype.showExpandIcons_=!0;goog.ui.tree.TreeControl.prototype.showRootNode_=!0;goog.ui.tree.TreeControl.prototype.showRootLines_=!0;goog.ui.tree.TreeControl.prototype.getTree=function(){return this};
goog.ui.tree.TreeControl.prototype.getDepth=function(){return 0};goog.ui.tree.TreeControl.prototype.reveal=function(){};goog.ui.tree.TreeControl.prototype.handleFocus_=function(a){this.focused_=!0;goog.dom.classes.add(this.getElement(),"focused");this.selectedItem_&&this.selectedItem_.select()};goog.ui.tree.TreeControl.prototype.handleBlur_=function(a){this.focused_=!1;goog.dom.classes.remove(this.getElement(),"focused")};goog.ui.tree.TreeControl.prototype.hasFocus=function(){return this.focused_};
goog.ui.tree.TreeControl.prototype.getExpanded=function(){return!this.showRootNode_||goog.ui.tree.TreeControl.superClass_.getExpanded.call(this)};goog.ui.tree.TreeControl.prototype.setExpanded=function(a){this.showRootNode_?goog.ui.tree.TreeControl.superClass_.setExpanded.call(this,a):this.setExpandedInternal(a)};goog.ui.tree.TreeControl.prototype.getExpandIconHtml=function(){return""};goog.ui.tree.TreeControl.prototype.getIconElement=function(){var a=this.getRowElement();return a?a.firstChild:null};
goog.ui.tree.TreeControl.prototype.getExpandIconElement=function(){return null};goog.ui.tree.TreeControl.prototype.updateExpandIcon=function(){};goog.ui.tree.TreeControl.prototype.getRowClassName=function(){return goog.ui.tree.TreeControl.superClass_.getRowClassName.call(this)+(this.showRootNode_?"":" "+this.getConfig().cssHideRoot)};
goog.ui.tree.TreeControl.prototype.getCalculatedIconClass=function(){var a=this.getExpanded();if(a&&this.expandedIconClass_)return this.expandedIconClass_;if(!a&&this.iconClass_)return this.iconClass_;var b=this.getConfig();return a&&b.cssExpandedRootIcon?b.cssTreeIcon+" "+b.cssExpandedRootIcon:!a&&b.cssCollapsedRootIcon?b.cssTreeIcon+" "+b.cssCollapsedRootIcon:""};
goog.ui.tree.TreeControl.prototype.setSelectedItem=function(a){if(this.selectedItem_!=a){var b=!1;this.selectedItem_&&(b=this.selectedItem_==this.focusedNode_,this.selectedItem_.setSelectedInternal(!1));if(this.selectedItem_=a)a.setSelectedInternal(!0),b&&a.select();this.dispatchEvent(goog.events.EventType.CHANGE)}};goog.ui.tree.TreeControl.prototype.getSelectedItem=function(){return this.selectedItem_};
goog.ui.tree.TreeControl.prototype.setShowLines=function(a){this.showLines_!=a&&(this.showLines_=a,this.isInDocument()&&this.updateLinesAndExpandIcons_())};goog.ui.tree.TreeControl.prototype.getShowLines=function(){return this.showLines_};
goog.ui.tree.TreeControl.prototype.updateLinesAndExpandIcons_=function(){function a(e){var f=e.getChildrenElement();if(f){var g=!c||b==e.getParent()&&!d?e.getConfig().cssChildrenNoLines:e.getConfig().cssChildren;f.className=g;if(f=e.getExpandIconElement())f.className=e.getExpandIconClass()}e.forEachChild(a)}var b=this,c=b.getShowLines(),d=b.getShowRootLines();a(this)};
goog.ui.tree.TreeControl.prototype.setShowRootLines=function(a){this.showRootLines_!=a&&(this.showRootLines_=a,this.isInDocument()&&this.updateLinesAndExpandIcons_())};goog.ui.tree.TreeControl.prototype.getShowRootLines=function(){return this.showRootLines_};goog.ui.tree.TreeControl.prototype.setShowExpandIcons=function(a){this.showExpandIcons_!=a&&(this.showExpandIcons_=a,this.isInDocument()&&this.updateLinesAndExpandIcons_())};goog.ui.tree.TreeControl.prototype.getShowExpandIcons=function(){return this.showExpandIcons_};
goog.ui.tree.TreeControl.prototype.setShowRootNode=function(a){if(this.showRootNode_!=a){this.showRootNode_=a;if(this.isInDocument()){var b=this.getRowElement();b&&(b.className=this.getRowClassName())}!a&&(this.getSelectedItem()==this&&this.getFirstChild())&&this.setSelectedItem(this.getFirstChild())}};goog.ui.tree.TreeControl.prototype.getShowRootNode=function(){return this.showRootNode_};
goog.ui.tree.TreeControl.prototype.initAccessibility=function(){goog.ui.tree.TreeControl.superClass_.initAccessibility.call(this);var a=this.getElement();goog.asserts.assert(a,"The DOM element for the tree cannot be null.");goog.a11y.aria.setRole(a,"tree");goog.a11y.aria.setState(a,"labelledby",this.getLabelElement().id)};
goog.ui.tree.TreeControl.prototype.enterDocument=function(){goog.ui.tree.TreeControl.superClass_.enterDocument.call(this);var a=this.getElement();a.className=this.getConfig().cssRoot;a.setAttribute("hideFocus","true");this.attachEvents_();this.initAccessibility()};goog.ui.tree.TreeControl.prototype.exitDocument=function(){goog.ui.tree.TreeControl.superClass_.exitDocument.call(this);this.detachEvents_()};
goog.ui.tree.TreeControl.prototype.attachEvents_=function(){var a=this.getElement();a.tabIndex=0;var b=this.keyHandler_=new goog.events.KeyHandler(a),c=this.focusHandler_=new goog.events.FocusHandler(a);this.getHandler().listen(c,goog.events.FocusHandler.EventType.FOCUSOUT,this.handleBlur_).listen(c,goog.events.FocusHandler.EventType.FOCUSIN,this.handleFocus_).listen(b,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent).listen(a,goog.events.EventType.MOUSEDOWN,this.handleMouseEvent_).listen(a,
goog.events.EventType.CLICK,this.handleMouseEvent_).listen(a,goog.events.EventType.DBLCLICK,this.handleMouseEvent_)};goog.ui.tree.TreeControl.prototype.detachEvents_=function(){this.keyHandler_.dispose();this.keyHandler_=null;this.focusHandler_.dispose();this.focusHandler_=null};
goog.ui.tree.TreeControl.prototype.handleMouseEvent_=function(a){goog.log.fine(this.logger_,"Received event "+a.type);var b=this.getNodeFromEvent_(a);if(b)switch(a.type){case goog.events.EventType.MOUSEDOWN:b.onMouseDown(a);break;case goog.events.EventType.CLICK:b.onClick_(a);break;case goog.events.EventType.DBLCLICK:b.onDoubleClick_(a)}};
goog.ui.tree.TreeControl.prototype.handleKeyEvent=function(a){var b=!1;(b=this.typeAhead_.handleNavigation(a)||this.selectedItem_&&this.selectedItem_.onKeyDown(a)||this.typeAhead_.handleTypeAheadChar(a))&&a.preventDefault();return b};goog.ui.tree.TreeControl.prototype.getNodeFromEvent_=function(a){var b=null;for(a=a.target;null!=a;){if(b=goog.ui.tree.BaseNode.allNodes[a.id])return b;if(a==this.getElement())break;a=a.parentNode}return null};
goog.ui.tree.TreeControl.prototype.createNode=function(a){return new goog.ui.tree.TreeNode(a||"",this.getConfig(),this.getDomHelper())};goog.ui.tree.TreeControl.prototype.setNode=function(a){this.typeAhead_.setNodeInMap(a)};goog.ui.tree.TreeControl.prototype.removeNode=function(a){this.typeAhead_.removeNodeFromMap(a)};goog.ui.tree.TreeControl.prototype.clearTypeAhead=function(){this.typeAhead_.clear()};
goog.ui.tree.TreeControl.defaultConfig={indentWidth:19,cssRoot:"goog-tree-root goog-tree-item",cssHideRoot:"goog-tree-hide-root",cssItem:"goog-tree-item",cssChildren:"goog-tree-children",cssChildrenNoLines:"goog-tree-children-nolines",cssTreeRow:"goog-tree-row",cssItemLabel:"goog-tree-item-label",cssTreeIcon:"goog-tree-icon",cssExpandTreeIcon:"goog-tree-expand-icon",cssExpandTreeIconPlus:"goog-tree-expand-icon-plus",cssExpandTreeIconMinus:"goog-tree-expand-icon-minus",cssExpandTreeIconTPlus:"goog-tree-expand-icon-tplus",
cssExpandTreeIconTMinus:"goog-tree-expand-icon-tminus",cssExpandTreeIconLPlus:"goog-tree-expand-icon-lplus",cssExpandTreeIconLMinus:"goog-tree-expand-icon-lminus",cssExpandTreeIconT:"goog-tree-expand-icon-t",cssExpandTreeIconL:"goog-tree-expand-icon-l",cssExpandTreeIconBlank:"goog-tree-expand-icon-blank",cssExpandedFolderIcon:"goog-tree-expanded-folder-icon",cssCollapsedFolderIcon:"goog-tree-collapsed-folder-icon",cssFileIcon:"goog-tree-file-icon",cssExpandedRootIcon:"goog-tree-expanded-folder-icon",
cssCollapsedRootIcon:"goog-tree-collapsed-folder-icon",cssSelectedRow:"selected"};Blockly.Toolbox={};Blockly.Toolbox.width=0;Blockly.Toolbox.selectedOption_=null;Blockly.Toolbox.CONFIG_={indentWidth:19,cssRoot:"blocklyTreeRoot",cssHideRoot:"blocklyHidden",cssItem:"",cssTreeRow:"blocklyTreeRow",cssItemLabel:"blocklyTreeLabel",cssTreeIcon:"blocklyTreeIcon",cssExpandedFolderIcon:"blocklyTreeIconOpen",cssFileIcon:"blocklyTreeIconNone",cssSelectedRow:"blocklyTreeSelected"};
Blockly.Toolbox.createDom=function(a,b){Blockly.Toolbox.HtmlDiv=goog.dom.createDom("div",{"class":"blocklyToolboxDiv"});Blockly.Toolbox.HtmlDiv.setAttribute("dir","LTR");b.appendChild(Blockly.Toolbox.HtmlDiv);Blockly.Toolbox.flyout_=new Blockly.Flyout;a.appendChild(Blockly.Toolbox.flyout_.createDom());Blockly.bindEvent_(Blockly.Toolbox.HtmlDiv,"mousedown",null,function(a){Blockly.isRightButton(a)||a.target==Blockly.Toolbox.HtmlDiv?Blockly.hideChaff(!1):Blockly.hideChaff(!0)})};
Blockly.Toolbox.init=function(){Blockly.Toolbox.CONFIG_.cleardotPath=Blockly.pathToBlockly+"media/1x1.gif";Blockly.Toolbox.CONFIG_.cssCollapsedFolderIcon="blocklyTreeIconClosedLtr";var a=new Blockly.Toolbox.TreeControl("root",Blockly.Toolbox.CONFIG_);Blockly.Toolbox.tree_=a;a.setShowRootNode(!1);a.setShowLines(!1);a.setShowExpandIcons(!1);a.setSelectedItem(null);Blockly.Toolbox.HtmlDiv.style.display="block";Blockly.Toolbox.flyout_.init(Blockly.mainWorkspace,Blockly.getMainWorkspaceMetrics,!0);Blockly.Toolbox.populate_();
a.render(Blockly.Toolbox.HtmlDiv);goog.events.listen(window,goog.events.EventType.RESIZE,Blockly.Toolbox.position_);Blockly.Toolbox.position_()};Blockly.Toolbox.position_=function(){var a=Blockly.Toolbox.HtmlDiv,b=goog.style.getBorderBox(Blockly.svg),c=Blockly.svgSize();a.style.marginLeft=b.left;a.style.height=c.height+1+"px";Blockly.Toolbox.width=a.offsetWidth};
Blockly.Toolbox.populate_=function(){function a(c,d){for(var e=c.getChildren(),f=0,g;g=e[f];f++){var k=b.createNode(g.getDisplayName());k.blocks=[];d.add(k);g.isLeaf()?(k.blocks=g.getPath(),k.blocks.isPath=!0):a(g,k)}}var b=Blockly.Toolbox.tree_;b.blocks=[];a(Blockly.languageTree,Blockly.Toolbox.tree_);if(b.blocks.length)throw"Toolbox cannot have both blocks and categories in the root level.";Blockly.fireUiEvent(window,"resize")};Blockly.Toolbox.clearSelection=function(){Blockly.Toolbox.tree_.setSelectedItem(null)};
Blockly.Toolbox.TreeControl=function(a,b,c){goog.ui.tree.TreeControl.call(this,a,b,c)};goog.inherits(Blockly.Toolbox.TreeControl,goog.ui.tree.TreeControl);Blockly.Toolbox.TreeControl.prototype.createNode=function(a){return new Blockly.Toolbox.TreeNode(a||"",this.getConfig(),this.getDomHelper())};
Blockly.Toolbox.TreeControl.prototype.setSelectedItem=function(a){this.selectedItem_!=a&&(goog.ui.tree.TreeControl.prototype.setSelectedItem.call(this,a),a&&a.blocks&&a.blocks.length?Blockly.Toolbox.flyout_.show(a.blocks):Blockly.Toolbox.flyout_.hide())};
Blockly.Toolbox.TreeNode=function(a,b,c){goog.ui.tree.TreeNode.call(this,a,b,c);a=function(){Blockly.fireUiEvent(window,"resize")};goog.events.listen(Blockly.Toolbox.tree_,goog.ui.tree.BaseNode.EventType.EXPAND,a);goog.events.listen(Blockly.Toolbox.tree_,goog.ui.tree.BaseNode.EventType.COLLAPSE,a)};goog.inherits(Blockly.Toolbox.TreeNode,goog.ui.tree.TreeNode);Blockly.Toolbox.TreeNode.prototype.getExpandIconHtml=function(){return"<span></span>"};
Blockly.Toolbox.TreeNode.prototype.getExpandIconElement=function(){return null};Blockly.Toolbox.TreeNode.prototype.onMouseDown=function(a){this.hasChildren()&&this.isUserCollapsible_?(this.toggle(),this.select()):this.isSelected()?this.getTree().setSelectedItem(null):this.select();this.updateRow()};Blockly.Toolbox.TreeNode.prototype.onDoubleClick_=function(a){};Blockly.Variables={};Blockly.Variables.NAME_TYPE="VARIABLE";Blockly.Variables.allVariables=function(a){var b;b=a?a.getDescendants():Blockly.mainWorkspace.getAllBlocks();a={};for(var c=0;c<b.length;c++){var d=b[c].getVars;if(d)for(var d=d.call(b[c]),e=0;e<d.length;e++){var f=d[e];f&&(a[Blockly.Names.PREFIX_+f.toLowerCase()]=f)}}b=[];for(var g in a)b.push(a[g]);return b};
Blockly.Variables.renameVariable=function(a,b){for(var c=Blockly.mainWorkspace.getAllBlocks(),d=0;d<c.length;d++){var e=c[d].renameVar;e&&e.call(c[d],a,b)}};
Blockly.Variables.flyoutCategory=function(a,b,c,d){var e=Blockly.Variables.allVariables();e.sort(goog.string.caseInsensitiveCompare);e.unshift(null);for(var f=void 0,g=0;g<e.length;g++)if(e[g]!==f){var k=Blockly.Language.variables_get?new Blockly.Block(d,"variables_get"):null;k&&k.initSvg();var l=Blockly.Language.variables_set?new Blockly.Block(d,"variables_set"):null;l&&l.initSvg();null===e[g]?f=(k||l).getVars()[0]:(k&&k.setTitleValue(e[g],"VAR"),l&&l.setTitleValue(e[g],"VAR"));l&&a.push(l);k&&a.push(k);
k&&l?b.push(c,3*c):b.push(2*c)}};Blockly.Variables.generateUniqueName=function(){var a=Blockly.Variables.allVariables(),b="";if(a.length){a.sort(goog.string.caseInsensitiveCompare);for(var c=0,d="i",e=0,f=!1;!b;){e=0;for(f=!1;e<a.length&&!f;)a[e].toLowerCase()==d&&(f=!0),e++;f?("z"===d[0]?(c++,d="a"):(d=String.fromCharCode(d.charCodeAt(0)+1),"l"==d[0]&&(d=String.fromCharCode(d.charCodeAt(0)+1))),0<c&&(d+=c)):b=d}}else b="i";return b};Blockly.FieldVariable=function(a){Blockly.FieldVariable.superClass_.constructor.call(this,Blockly.FieldVariable.dropdownCreate,Blockly.FieldVariable.dropdownChange);a?this.setValue(a):this.setValue(Blockly.Variables.generateUniqueName())};goog.inherits(Blockly.FieldVariable,Blockly.FieldDropdown);Blockly.FieldVariable.prototype.getValue=function(){return this.getText()};Blockly.FieldVariable.prototype.setValue=function(a){this.value_=a;this.setText(a)};
Blockly.FieldVariable.dropdownCreate=function(){var a=Blockly.Variables.allVariables(),b=this.getText();b&&-1==a.indexOf(b)&&a.push(b);a.sort(goog.string.caseInsensitiveCompare);a.push(Blockly.MSG_RENAME_VARIABLE);a.push(Blockly.MSG_NEW_VARIABLE);for(var b=[],c=0;c<a.length;c++)b[c]=[a[c],a[c]];return b};
Blockly.FieldVariable.dropdownChange=function(a){function b(a,b){Blockly.hideChaff();var c=window.prompt(a,b);return c&&c.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")}if(a==Blockly.MSG_RENAME_VARIABLE){var c=this.getText();(a=b(Blockly.MSG_RENAME_VARIABLE_TITLE.replace("%1",c),c))&&Blockly.Variables.renameVariable(c,a);return null}if(a==Blockly.MSG_NEW_VARIABLE)return(a=b(Blockly.MSG_NEW_VARIABLE_TITLE,""))?(Blockly.Variables.renameVariable(a,a),a):null};Blockly.Procedures={};Blockly.Procedures.NAME_TYPE="PROCEDURE";Blockly.Procedures.allProcedures=function(){for(var a=Blockly.mainWorkspace.getAllBlocks(),b=[],c=[],d=0;d<a.length;d++){var e=a[d].getProcedureDef;e&&(e=e.call(a[d]))&&(e[2]?b.push(e):c.push(e))}c.sort(Blockly.Procedures.procTupleComparator_);b.sort(Blockly.Procedures.procTupleComparator_);return[c,b]};Blockly.Procedures.procTupleComparator_=function(a,b){var c=a[0].toLowerCase(),d=b[0].toLowerCase();return c>d?1:c<d?-1:0};
Blockly.Procedures.findLegalName=function(a,b){if(!b.workspace.editable)return a;for(;!Blockly.Procedures.isLegalName(a,b.workspace,b);){var c=a.match(/^(.*?)(\d+)$/);a=c?c[1]+(parseInt(c[2],10)+1):a+"2"}return a};Blockly.Procedures.isLegalName=function(a,b,c){b=b.getAllBlocks();for(var d=0;d<b.length;d++)if(b[d]!=c){var e=b[d].getProcedureDef;if(e&&(e=e.call(b[d]),Blockly.Names.equals(e[0],a)))return!1}return!0};
Blockly.Procedures.rename=function(a){if(!this.sourceBlock_.editable)return a;a=a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"");a=Blockly.Procedures.findLegalName(a,this.sourceBlock_);for(var b=this.sourceBlock_.workspace.getAllBlocks(),c=0;c<b.length;c++){var d=b[c].renameProcedure;d&&d.call(b[c],this.text_,a)}return a};
Blockly.Procedures.flyoutCategory=function(a,b,c,d){function e(e,f){for(var l=0;l<e.length;l++){var m=new Blockly.Block(d,f);m.setTitleValue(e[l][0],"NAME");for(var p=[],q=0;q<e[l][1].length;q++)p[q]="ARG"+q;m.setProcedureParameters(e[l][1],p);m.initSvg();a.push(m);b.push(2*c)}}if(Blockly.Language.procedures_defnoreturn){var f=new Blockly.Block(d,"procedures_defnoreturn");f.initSvg();a.push(f);b.push(2*c)}Blockly.Language.procedures_defreturn&&(f=new Blockly.Block(d,"procedures_defreturn"),f.initSvg(),
a.push(f),b.push(2*c));Blockly.Language.procedures_ifreturn&&(f=new Blockly.Block(d,"procedures_ifreturn"),f.initSvg(),a.push(f),b.push(2*c));f=Blockly.Procedures.allProcedures();e(f[0],"procedures_callnoreturn");e(f[1],"procedures_callreturn")};Blockly.Procedures.getCallers=function(a,b){for(var c=[],d=b.getAllBlocks(),e=0;e<d.length;e++){var f=d[e].getProcedureCall;f&&(f=f.call(d[e]))&&Blockly.Names.equals(f,a)&&c.push(d[e])}return c};
Blockly.Procedures.disposeCallers=function(a,b){for(var c=Blockly.Procedures.getCallers(a,b),d=0;d<c.length;d++)c[d].dispose(!0,!1)};Blockly.Procedures.mutateCallers=function(a,b,c,d){a=Blockly.Procedures.getCallers(a,b);for(b=0;b<a.length;b++)a[b].setProcedureParameters(c,d)};Blockly.Procedures.getDefinition=function(a,b){for(var c=b.getAllBlocks(),d=0;d<c.length;d++){var e=c[d].getProcedureDef;if(e&&(e=e.call(c[d]))&&Blockly.Names.equals(e[0],a))return c[d]}return null};Blockly.utils={};Blockly.addClass_=function(a,b){var c=a.getAttribute("class")||"";-1==(" "+c+" ").indexOf(" "+b+" ")&&(c&&(c+=" "),a.setAttribute("class",c+b))};Blockly.removeClass_=function(a,b){var c=a.getAttribute("class");if(-1!=(" "+c+" ").indexOf(" "+b+" ")){for(var c=c.split(/\s+/),d=0;d<c.length;d++)if(!c[d]||c[d]==b)c.splice(d,1),d--;c.length?a.setAttribute("class",c.join(" ")):a.removeAttribute("class")}};
Blockly.bindEvent_=function(a,b,c,d){var e=[],f;if(!a.addEventListener)throw"Element is not a DOM node with addEventListener.";f=function(a){d.apply(c,arguments)};a.addEventListener(b,f,!1);e.push([a,b,f]);b in Blockly.bindEvent_.TOUCH_MAP&&(f=function(a){if(1==a.changedTouches.length){var b=a.changedTouches[0];a.clientX=b.clientX;a.clientY=b.clientY}d.apply(c,arguments);a.preventDefault()},a.addEventListener(Blockly.bindEvent_.TOUCH_MAP[b],f,!1),e.push([a,Blockly.bindEvent_.TOUCH_MAP[b],f]));return e};
Blockly.bindEvent_.TOUCH_MAP={};Blockly.bindEvent_.TOUCH_MAP="ontouchstart"in document.documentElement?{mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"}:{};Blockly.unbindEvent_=function(a){for(;a.length;){var b=a.pop(),c=b[2];b[0].removeEventListener(b[1],c,!1)}return c};
Blockly.fireUiEvent=function(a,b){var c=document;if(c.createEvent)c=c.createEvent("UIEvents"),c.initEvent(b,!0,!0),a.dispatchEvent(c);else if(c.createEventObject)c=c.createEventObject(),a.fireEvent("on"+b,c);else throw"FireEvent: No event creation mechanism.";};Blockly.noEvent=function(a){a.preventDefault();a.stopPropagation()};
Blockly.getRelativeXY_=function(a){var b={x:0,y:0},c=a.getAttribute("x");c&&(b.x=parseInt(c,10));if(c=a.getAttribute("y"))b.y=parseInt(c,10);if(a=(a=a.getAttribute("transform"))&&a.match(/translate\(\s*([-\d.]+)(,\s*([-\d.]+)\s*\))?/))b.x+=parseInt(a[1],10),a[3]&&(b.y+=parseInt(a[3],10));return b};Blockly.getSvgXY_=function(a){var b=0,c=0;do{var d=Blockly.getRelativeXY_(a),b=b+d.x,c=c+d.y;a=a.parentNode}while(a&&a!=Blockly.svg);return{x:b,y:c}};
Blockly.getAbsoluteXY_=function(a){a=Blockly.getSvgXY_(a);return Blockly.convertCoordinates(a.x,a.y,!1)};Blockly.createSvgElement=function(a,b,c){a=document.createElementNS(Blockly.SVG_NS,a);for(var d in b)a.setAttribute(d,b[d]);c&&c.appendChild(a);return a};Blockly.isRightButton=function(a){return 2==a.button||a.ctrlKey};Blockly.convertCoordinates=function(a,b,c){var d=Blockly.svg.createSVGPoint();d.x=a;d.y=b;a=Blockly.svg.getScreenCTM();c&&(a=a.inverse());return d.matrixTransform(a)};
Blockly.shortestStringLength=function(a){if(!a.length)return 0;for(var b=a[0].length,c=1;c<a.length;c++)b=Math.min(b,a[c].length);return b};Blockly.commonWordPrefix=function(a,b){if(a.length){if(1==a.length)return a[0].length}else return 0;for(var c=0,d=b||Blockly.shortestStringLength(a),e=0;e<d;e++){for(var f=a[0][e],g=1;g<a.length;g++)if(f!=a[g][e])return c;" "==f&&(c=e+1)}for(g=1;g<a.length;g++)if((f=a[g][e])&&" "!=f)return c;return d};
Blockly.commonWordSuffix=function(a,b){if(a.length){if(1==a.length)return a[0].length}else return 0;for(var c=0,d=b||Blockly.shortestStringLength(a),e=0;e<d;e++){for(var f=a[0].substr(-e-1,1),g=1;g<a.length;g++)if(f!=a[g].substr(-e-1,1))return c;" "==f&&(c=e+1)}for(g=1;g<a.length;g++)if((f=a[g].charAt(a[g].length-e-1))&&" "!=f)return c;return d};Blockly.Signature=function(){this.workspace_=new Blockly.Workspace(!1);this.changeWrapper_=null;this.height_=this.width_=0;this.buttons_=[]};Blockly.Signature.prototype.autoClose=!0;Blockly.Signature.prototype.CORNER_RADIUS=8;Blockly.Signature.prototype.onResizeWrapper_=null;
Blockly.Signature.prototype.createDom=function(){this.svgGroup_=Blockly.createSvgElement("g",{"class":"svgGroup_"},null);this.svgOpenGroup_=Blockly.createSvgElement("g",{"class":"svgOpenGroup_"},this.svgGroup_);this.svgOpenGroup_.style.display="block";this.svgBackground_=Blockly.createSvgElement("path",{"class":"blocklySignatureBackground"},this.svgOpenGroup_);this.svgOptions_=Blockly.createSvgElement("g",{"class":"svgOptions_"},this.svgOpenGroup_);this.svgOptions_.appendChild(this.workspace_.createDom());
this.svgText_=Blockly.createSvgElement("g",{"class":"svgText_"},this.svgOpenGroup_);this.svgClosedGroup_=Blockly.createSvgElement("g",{},this.svgGroup_);this.svgClosedGroup_.style.display="block";this.svgBackgroundHidden_=Blockly.createSvgElement("path",{"class":"blocklySignatureBackground"},this.svgClosedGroup_);return this.svgGroup_};
Blockly.Signature.prototype.dispose=function(){this.onResizeWrapper_&&(Blockly.unbindEvent_(this.onResizeWrapper_),this.onResizeWrapper_=null);this.changeWrapper_&&(Blockly.unbindEvent_(this.changeWrapper_),this.changeWrapper_=null);this.scrollbar_&&(this.scrollbar_.dispose(),this.scrollbar_=null);this.workspace_=null;this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null);this.targetWorkspaceMetrics_=this.targetWorkspace_=this.svgOptions_=this.svgBackground_=null;this.buttons_.splice(0)};
Blockly.Signature.prototype.getMetrics=function(){if(!this.isOpen())return null;var a=this.height_,b=this.width_-2*this.CORNER_RADIUS;try{var c=this.svgOptions_.getBBox()}catch(d){c={height:0,y:0}}return{viewHeight:a,viewWidth:b,contentWidth:c.width+2*this.CORNER_RADIUS,viewLeft:-this.svgOptions_.scrollX,contentLeft:0,absoluteTop:0,absoluteLeft:this.CORNER_RADIUS}};
Blockly.Signature.prototype.setMetrics=function(a){var b=this.getMetrics();goog.isNumber(a.x)&&(this.svgOptions_.scrollX=-b.contentWidth*a.x-b.contentLeft);a="translate("+(this.svgOptions_.scrollX+b.absoluteLeft)+", 0)";this.svgOptions_.setAttribute("transform",a);this.svgText_.setAttribute("transform",a)};
Blockly.Signature.prototype.positionClosed_=function(){var a=this.targetWorkspaceMetrics_();if(a){var b=10-this.CORNER_RADIUS,c=["M 0,0"];c.push("v",b);c.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,0,this.CORNER_RADIUS,this.CORNER_RADIUS);c.push("h",Math.max(0,a.viewWidth-2*this.CORNER_RADIUS));c.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,0,this.CORNER_RADIUS,-this.CORNER_RADIUS);c.push("v",-b);c.push("z");this.svgBackgroundHidden_.setAttribute("d",c.join(" "));this.svgGroup_.setAttribute("transform",
"translate("+a.absoluteLeft+","+a.absoluteTop+")")}};
Blockly.Signature.prototype.init=function(a,b,c){this.targetWorkspace_=a;this.targetWorkspaceMetrics_=b;var d=this;c&&(this.scrollbar_=new Blockly.Scrollbar(this.svgOptions_,function(){return d.getMetrics()},function(a){return d.setMetrics(a)},!0,!1));this.close();this.onResizeWrapper_=Blockly.bindEvent_(window,goog.events.EventType.RESIZE,this,this.position_);this.position_();this.changeWrapper_=Blockly.bindEvent_(this.targetWorkspace_.getCanvas(),"blocklyWorkspaceChange",this,this.filterForCapacity_)};
Blockly.Signature.prototype.position_=function(){this.isOpen()?this.positionOpen_():this.positionClosed_()};
Blockly.Signature.prototype.positionOpen_=function(){var a=this.targetWorkspaceMetrics_();if(a){var b=this.height_-this.CORNER_RADIUS,c=["M 0,0"];c.push("v",b);c.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,0,this.CORNER_RADIUS,this.CORNER_RADIUS);c.push("h",Math.max(0,a.viewWidth-2*this.CORNER_RADIUS));c.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,0,this.CORNER_RADIUS,-this.CORNER_RADIUS);c.push("v",-b);c.push("z");this.svgBackground_.setAttribute("d",c.join(" "));this.svgGroup_.setAttribute("transform",
"translate("+(a.absoluteLeft-1)+","+a.absoluteTop+")");this.width_=a.viewWidth;this.scrollbar_&&this.scrollbar_.resize()}};Blockly.Signature.prototype.isOpen=function(){return"block"==this.svgOpenGroup_.style.display};
Blockly.Signature.prototype.close=function(){Blockly.removeAllRanges();if(this.isOpen()){this.closeWrapper_&&(Blockly.unbindEvent_(this.closeWrapper_),this.closeWrapper_=null);this.svgOpenGroup_.style.display="none";this.svgClosedGroup_.style.display="block";for(var a=this.workspace_.getTopBlocks(!1),b=0,c;c=a[b];b++)c.dispose(!1,!1);for(b=0;a=this.buttons_[b];b++)Blockly.unbindEvent_(a.wrapper_),goog.dom.removeNode(a);this.buttons_.splice(0);this.svgTextNodes_&&(goog.array.forEach(this.svgTextNodes_,
goog.dom.removeNode),this.svgTextNodes_=null);this.positionClosed_();this.openWrapper_=Blockly.bindEvent_(this.svgBackgroundHidden_,"mousedown",this,this.open)}};Blockly.Signature.prototype.makeTextAt=function(a,b,c){b=Blockly.createSvgElement("text",{"class":"blocklyText blocklySignatureText",x:b,y:c+Blockly.BlockSvg.TAB_HEIGHT+Blockly.BlockSvg.MIN_BLOCK_Y},this.svgText_);a=document.createTextNode(a);goog.dom.appendChild(b,a);this.svgTextNodes_.push(b);return b};
Blockly.Signature.prototype.advanceCursor=function(a,b){return a.getComputedTextLength()+2*b};Blockly.Signature.prototype.markChildrenInSignature=function(a){a=a.getDescendants();for(var b=0,c;c=a[b];b++)c.isInSignature=!0,Blockly.Comment&&c.setCommentText(null)};
Blockly.Signature.prototype.open=function(){Blockly.removeAllRanges();this.close();this.svgTextNodes_=[];this.openWrapper_&&(Blockly.unbindEvent_(this.openWrapper_),this.openWrapper_=null);var a=this.CORNER_RADIUS;this.svgOpenGroup_.style.display="block";this.svgClosedGroup_.style.display="none";var b=[],c=[];goog.array.forEach(Blockly.funArgBlockProtos,function(d){d=new Blockly.Block(this.workspace_,d);d.initSvg();b.push(d);c.push(a)},this);var d=0,e=a,f=new Blockly.Block(this.workspace_,Blockly.funAppBlockProto);
f.initSvg();this.markChildrenInSignature(f);f.render();var g=f.getSvgRoot().getBBox(),k=a+Blockly.BlockSvg.TAB_HEIGHT;f.moveBy(e,k);d=Math.max(d,g.height);e+=g.width;Blockly.bindEvent_(f.getSvgRoot(),"mousedown",null,Blockly.Signature.createBlockFunc_(this,f));for(var f=this.makeTextAt("consumes",e,a),e=e+this.advanceCursor(f,a),f=0,l;l=b[f];f++)this.markChildrenInSignature(l),l.render(),g=l.getSvgRoot().getBBox(),k=a+Blockly.BlockSvg.TAB_HEIGHT,l.moveBy(e,k),d=Math.max(d,g.height),e+=g.width,l.disabled||
Blockly.bindEvent_(l.getSvgRoot(),"mousedown",null,Blockly.Signature.createBlockFunc_(this,l)),f!=b.length-1&&(l=this.makeTextAt(",",e,a),e+=this.advanceCursor(l,a));f=this.makeTextAt("and produces a",e,a);e+=this.advanceCursor(f,a);f=Blockly.Ray_.Blocks.typeNameBlock(Blockly.funSpec.returnType);l=new Blockly.Block(this.workspace_,f);l.initSvg();this.markChildrenInSignature(l);l.render();g=l.getSvgRoot().getBBox();k=a+Blockly.BlockSvg.TAB_HEIGHT;l.moveBy(e,k);d=Math.max(d,g.height);e+=g.width;l=this.makeTextAt(",",
e,a);e+=this.advanceCursor(l,a);f=Blockly.Ray_.Blocks.exampleBlock();l=new Blockly.Block(this.workspace_,f);f=new Blockly.Block(this.workspace_,Blockly.funAppBlockProto);f.initSvg();f.render();l.initSvg();b.push(l);this.markChildrenInSignature(l);l.render();l.getInput("EXPR").connection.connect(f.outputConnection);g=l.getSvgRoot().getBBox();k=a+Blockly.BlockSvg.TAB_HEIGHT;l.moveBy(e,k);d=Math.max(d,g.height);e+=g.width;Blockly.bindEvent_(l.getSvgRoot(),"mousedown",null,Blockly.Signature.createBlockFunc_(this,
l));d+=a+Blockly.BlockSvg.TAB_HEIGHT+a/2+Blockly.Scrollbar.scrollbarThickness;for(f=0;l=b[f];f++)g=l.getSvgRoot().getBBox(),e=l.getRelativeToSurfaceXY(),e=Blockly.createSvgElement("rect",{width:g.width,height:g.height,x:e.x+g.x,y:e.y+g.y,"fill-opacity":0},null),this.svgOptions_.insertBefore(e,this.svgOptions_.firstChild),e.wrapper_=Blockly.bindEvent_(e,"mousedown",null,Blockly.Signature.createBlockFunc_(this,l)),this.buttons_[f]=e;this.height_=d;this.filterForCapacity_();Blockly.fireUiEvent(window,
"resize");this.closeWrapper_=Blockly.bindEvent_(this.svgBackground_,"mousedown",this,this.close)};
Blockly.Signature.createBlockFunc_=function(a,b){return function(c){if(!Blockly.isRightButton(c)&&!b.disabled){var d=Blockly.Xml.blockToDom_(b),d=Blockly.Xml.domToBlock_(a.targetWorkspace_,d),e=b.getSvgRoot();if(!e)throw"originBlock is not rendered.";var e=Blockly.getSvgXY_(e),f=Blockly.getSvgXY_(a.targetWorkspace_.getCanvas());d.moveBy(e.x-f.x,e.y-f.y);d.render();a.autoClose?a.close():a.filterForCapacity_();d.onMouseDown_(c)}}};
Blockly.Signature.prototype.filterForCapacity_=function(){for(var a=this.targetWorkspace_.remainingCapacity(),b=this.workspace_.getTopBlocks(!1),c=0,d;d=b[c];c++){var e=d.getDescendants().length>a;d.setDisabled(e)}};goog.ui.ControlRenderer=function(){};goog.addSingletonGetter(goog.ui.ControlRenderer);goog.ui.ControlRenderer.getCustomRenderer=function(a,b){var c=new a;c.getCssClass=function(){return b};return c};goog.ui.ControlRenderer.CSS_CLASS="goog-control";goog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS=[];goog.ui.ControlRenderer.prototype.getAriaRole=function(){};
goog.ui.ControlRenderer.prototype.createDom=function(a){var b=a.getDomHelper().createDom("div",this.getClassNames(a).join(" "),a.getContent());this.setAriaStates(a,b);return b};goog.ui.ControlRenderer.prototype.getContentElement=function(a){return a};
goog.ui.ControlRenderer.prototype.enableClassName=function(a,b,c){if(a=a.getElement?a.getElement():a)if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")){var d=this.getAppliedCombinedClassNames_(goog.dom.classes.get(a),b);d.push(b);goog.partial(c?goog.dom.classes.add:goog.dom.classes.remove,a).apply(null,d)}else goog.dom.classes.enable(a,b,c)};goog.ui.ControlRenderer.prototype.enableExtraClassName=function(a,b,c){this.enableClassName(a,b,c)};
goog.ui.ControlRenderer.prototype.canDecorate=function(a){return!0};
goog.ui.ControlRenderer.prototype.decorate=function(a,b){b.id&&a.setId(b.id);var c=this.getContentElement(b);c&&c.firstChild?a.setContentInternal(c.firstChild.nextSibling?goog.array.clone(c.childNodes):c.firstChild):a.setContentInternal(null);var d=0,e=this.getCssClass(),f=this.getStructuralCssClass(),g=!1,k=!1,c=!1,l=goog.dom.classes.get(b);goog.array.forEach(l,function(a){!g&&a==e?(g=!0,f==e&&(k=!0)):!k&&a==f?k=!0:d|=this.getStateFromClass(a)},this);a.setStateInternal(d);g||(l.push(e),f==e&&(k=
!0));k||l.push(f);var m=a.getExtraClassNames();m&&l.push.apply(l,m);if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")){var p=this.getAppliedCombinedClassNames_(l);0<p.length&&(l.push.apply(l,p),c=!0)}(!g||!k||m||c)&&goog.dom.classes.set(b,l.join(" "));this.setAriaStates(a,b);return b};goog.ui.ControlRenderer.prototype.initializeDom=function(a){a.isRightToLeft()&&this.setRightToLeft(a.getElement(),!0);a.isEnabled()&&this.setFocusable(a,a.isVisible())};
goog.ui.ControlRenderer.prototype.setAriaRole=function(a,b){var c=b||this.getAriaRole();c&&(goog.asserts.assert(a,"The element passed as a first parameter cannot be null."),goog.a11y.aria.setRole(a,c))};
goog.ui.ControlRenderer.prototype.setAriaStates=function(a,b){goog.asserts.assert(a);goog.asserts.assert(b);a.isVisible()||goog.a11y.aria.setState(b,goog.a11y.aria.State.HIDDEN,!a.isVisible());a.isEnabled()||this.updateAriaState(b,goog.ui.Component.State.DISABLED,!a.isEnabled());a.isSupportedState(goog.ui.Component.State.SELECTED)&&this.updateAriaState(b,goog.ui.Component.State.SELECTED,a.isSelected());a.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(b,goog.ui.Component.State.CHECKED,
a.isChecked());a.isSupportedState(goog.ui.Component.State.OPENED)&&this.updateAriaState(b,goog.ui.Component.State.OPENED,a.isOpen())};goog.ui.ControlRenderer.prototype.setAllowTextSelection=function(a,b){goog.style.setUnselectable(a,!b,!goog.userAgent.IE&&!goog.userAgent.OPERA)};goog.ui.ControlRenderer.prototype.setRightToLeft=function(a,b){this.enableClassName(a,this.getStructuralCssClass()+"-rtl",b)};
goog.ui.ControlRenderer.prototype.isFocusable=function(a){var b;return a.isSupportedState(goog.ui.Component.State.FOCUSED)&&(b=a.getKeyEventTarget())?goog.dom.isFocusableTabIndex(b):!1};goog.ui.ControlRenderer.prototype.setFocusable=function(a,b){var c;if(a.isSupportedState(goog.ui.Component.State.FOCUSED)&&(c=a.getKeyEventTarget())){if(!b&&a.isFocused()){try{c.blur()}catch(d){}a.isFocused()&&a.handleBlur(null)}goog.dom.isFocusableTabIndex(c)!=b&&goog.dom.setFocusableTabIndex(c,b)}};
goog.ui.ControlRenderer.prototype.setVisible=function(a,b){goog.style.setElementShown(a,b);a&&goog.a11y.aria.setState(a,goog.a11y.aria.State.HIDDEN,!b)};goog.ui.ControlRenderer.prototype.setState=function(a,b,c){var d=a.getElement();if(d){var e=this.getClassForState(b);e&&this.enableClassName(a,e,c);this.updateAriaState(d,b,c)}};
goog.ui.ControlRenderer.prototype.updateAriaState=function(a,b,c){goog.ui.ControlRenderer.ARIA_STATE_MAP_||(goog.ui.ControlRenderer.ARIA_STATE_MAP_=goog.object.create(goog.ui.Component.State.DISABLED,goog.a11y.aria.State.DISABLED,goog.ui.Component.State.SELECTED,goog.a11y.aria.State.SELECTED,goog.ui.Component.State.CHECKED,goog.a11y.aria.State.CHECKED,goog.ui.Component.State.OPENED,goog.a11y.aria.State.EXPANDED));if(b=goog.ui.ControlRenderer.ARIA_STATE_MAP_[b])goog.asserts.assert(a,"The element passed as a first parameter cannot be null."),
goog.a11y.aria.setState(a,b,c)};goog.ui.ControlRenderer.prototype.setContent=function(a,b){var c=this.getContentElement(a);if(c&&(goog.dom.removeChildren(c),b))if(goog.isString(b))goog.dom.setTextContent(c,b);else{var d=function(a){if(a){var b=goog.dom.getOwnerDocument(c);c.appendChild(goog.isString(a)?b.createTextNode(a):a)}};goog.isArray(b)?goog.array.forEach(b,d):goog.isArrayLike(b)&&!("nodeType"in b)?goog.array.forEach(goog.array.clone(b),d):d(b)}};
goog.ui.ControlRenderer.prototype.getKeyEventTarget=function(a){return a.getElement()};goog.ui.ControlRenderer.prototype.getCssClass=function(){return goog.ui.ControlRenderer.CSS_CLASS};goog.ui.ControlRenderer.prototype.getIe6ClassCombinations=function(){return[]};goog.ui.ControlRenderer.prototype.getStructuralCssClass=function(){return this.getCssClass()};
goog.ui.ControlRenderer.prototype.getClassNames=function(a){var b=this.getCssClass(),c=[b],d=this.getStructuralCssClass();d!=b&&c.push(d);b=this.getClassNamesForState(a.getState());c.push.apply(c,b);(a=a.getExtraClassNames())&&c.push.apply(c,a);goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&c.push.apply(c,this.getAppliedCombinedClassNames_(c));return c};
goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_=function(a,b){var c=[];b&&(a=a.concat([b]));goog.array.forEach(this.getIe6ClassCombinations(),function(d){goog.array.every(d,goog.partial(goog.array.contains,a))&&(!b||goog.array.contains(d,b))&&c.push(d.join("_"))});return c};goog.ui.ControlRenderer.prototype.getClassNamesForState=function(a){for(var b=[];a;){var c=a&-a;b.push(this.getClassForState(c));a&=~c}return b};
goog.ui.ControlRenderer.prototype.getClassForState=function(a){this.classByState_||this.createClassByStateMap_();return this.classByState_[a]};goog.ui.ControlRenderer.prototype.getStateFromClass=function(a){this.stateByClass_||this.createStateByClassMap_();a=parseInt(this.stateByClass_[a],10);return isNaN(a)?0:a};
goog.ui.ControlRenderer.prototype.createClassByStateMap_=function(){var a=this.getStructuralCssClass();this.classByState_=goog.object.create(goog.ui.Component.State.DISABLED,a+"-disabled",goog.ui.Component.State.HOVER,a+"-hover",goog.ui.Component.State.ACTIVE,a+"-active",goog.ui.Component.State.SELECTED,a+"-selected",goog.ui.Component.State.CHECKED,a+"-checked",goog.ui.Component.State.FOCUSED,a+"-focused",goog.ui.Component.State.OPENED,a+"-open")};
goog.ui.ControlRenderer.prototype.createStateByClassMap_=function(){this.classByState_||this.createClassByStateMap_();this.stateByClass_=goog.object.transpose(this.classByState_)};goog.ui.registry={};goog.ui.registry.getDefaultRenderer=function(a){for(var b;a;){b=goog.getUid(a);if(b=goog.ui.registry.defaultRenderers_[b])break;a=a.superClass_?a.superClass_.constructor:null}return b?goog.isFunction(b.getInstance)?b.getInstance():new b:null};
goog.ui.registry.setDefaultRenderer=function(a,b){if(!goog.isFunction(a))throw Error("Invalid component class "+a);if(!goog.isFunction(b))throw Error("Invalid renderer class "+b);var c=goog.getUid(a);goog.ui.registry.defaultRenderers_[c]=b};goog.ui.registry.getDecoratorByClassName=function(a){return a in goog.ui.registry.decoratorFunctions_?goog.ui.registry.decoratorFunctions_[a]():null};
goog.ui.registry.setDecoratorByClassName=function(a,b){if(!a)throw Error("Invalid class name "+a);if(!goog.isFunction(b))throw Error("Invalid decorator function "+b);goog.ui.registry.decoratorFunctions_[a]=b};goog.ui.registry.getDecorator=function(a){for(var b=goog.dom.classes.get(a),c=0,d=b.length;c<d;c++)if(a=goog.ui.registry.getDecoratorByClassName(b[c]))return a;return null};goog.ui.registry.reset=function(){goog.ui.registry.defaultRenderers_={};goog.ui.registry.decoratorFunctions_={}};
goog.ui.registry.defaultRenderers_={};goog.ui.registry.decoratorFunctions_={};goog.ui.decorate=function(a){var b=goog.ui.registry.getDecorator(a);b&&b.decorate(a);return b};goog.ui.Control=function(a,b,c){goog.ui.Component.call(this,c);this.renderer_=b||goog.ui.registry.getDefaultRenderer(this.constructor);this.setContentInternal(a)};goog.inherits(goog.ui.Control,goog.ui.Component);goog.ui.Control.registerDecorator=goog.ui.registry.setDecoratorByClassName;goog.ui.Control.getDecorator=goog.ui.registry.getDecorator;goog.ui.Control.decorate=goog.ui.decorate;goog.ui.Control.prototype.content_=null;goog.ui.Control.prototype.state_=0;
goog.ui.Control.prototype.supportedStates_=goog.ui.Component.State.DISABLED|goog.ui.Component.State.HOVER|goog.ui.Component.State.ACTIVE|goog.ui.Component.State.FOCUSED;goog.ui.Control.prototype.autoStates_=goog.ui.Component.State.ALL;goog.ui.Control.prototype.statesWithTransitionEvents_=0;goog.ui.Control.prototype.visible_=!0;goog.ui.Control.prototype.extraClassNames_=null;goog.ui.Control.prototype.handleMouseEvents_=!0;goog.ui.Control.prototype.allowTextSelection_=!1;
goog.ui.Control.prototype.preferredAriaRole_=null;goog.ui.Control.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_};goog.ui.Control.prototype.setHandleMouseEvents=function(a){this.isInDocument()&&a!=this.handleMouseEvents_&&this.enableMouseEventHandling_(a);this.handleMouseEvents_=a};goog.ui.Control.prototype.getKeyEventTarget=function(){return this.renderer_.getKeyEventTarget(this)};
goog.ui.Control.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler)};goog.ui.Control.prototype.getRenderer=function(){return this.renderer_};goog.ui.Control.prototype.setRenderer=function(a){if(this.isInDocument())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.getElement()&&this.setElementInternal(null);this.renderer_=a};goog.ui.Control.prototype.getExtraClassNames=function(){return this.extraClassNames_};
goog.ui.Control.prototype.addClassName=function(a){a&&(this.extraClassNames_?goog.array.contains(this.extraClassNames_,a)||this.extraClassNames_.push(a):this.extraClassNames_=[a],this.renderer_.enableExtraClassName(this,a,!0))};goog.ui.Control.prototype.removeClassName=function(a){a&&(this.extraClassNames_&&goog.array.remove(this.extraClassNames_,a))&&(0==this.extraClassNames_.length&&(this.extraClassNames_=null),this.renderer_.enableExtraClassName(this,a,!1))};
goog.ui.Control.prototype.enableClassName=function(a,b){b?this.addClassName(a):this.removeClassName(a)};goog.ui.Control.prototype.createDom=function(){var a=this.renderer_.createDom(this);this.setElementInternal(a);this.renderer_.setAriaRole(a,this.getPreferredAriaRole());this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(a,!1);this.isVisible()||this.renderer_.setVisible(a,!1)};goog.ui.Control.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_};
goog.ui.Control.prototype.setPreferredAriaRole=function(a){this.preferredAriaRole_=a};goog.ui.Control.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())};goog.ui.Control.prototype.canDecorate=function(a){return this.renderer_.canDecorate(a)};
goog.ui.Control.prototype.decorateInternal=function(a){a=this.renderer_.decorate(this,a);this.setElementInternal(a);this.renderer_.setAriaRole(a,this.getPreferredAriaRole());this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(a,!1);this.visible_="none"!=a.style.display};
goog.ui.Control.prototype.enterDocument=function(){goog.ui.Control.superClass_.enterDocument.call(this);this.renderer_.initializeDom(this);if(this.supportedStates_&~goog.ui.Component.State.DISABLED&&(this.isHandleMouseEvents()&&this.enableMouseEventHandling_(!0),this.isSupportedState(goog.ui.Component.State.FOCUSED))){var a=this.getKeyEventTarget();if(a){var b=this.getKeyHandler();b.attach(a);this.getHandler().listen(b,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent).listen(a,goog.events.EventType.FOCUS,
this.handleFocus).listen(a,goog.events.EventType.BLUR,this.handleBlur)}}};
goog.ui.Control.prototype.enableMouseEventHandling_=function(a){var b=this.getHandler(),c=this.getElement();a?(b.listen(c,goog.events.EventType.MOUSEOVER,this.handleMouseOver).listen(c,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(c,goog.events.EventType.MOUSEUP,this.handleMouseUp).listen(c,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.handleContextMenu!=goog.nullFunction&&b.listen(c,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&b.listen(c,
goog.events.EventType.DBLCLICK,this.handleDblClick)):(b.unlisten(c,goog.events.EventType.MOUSEOVER,this.handleMouseOver).unlisten(c,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).unlisten(c,goog.events.EventType.MOUSEUP,this.handleMouseUp).unlisten(c,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.handleContextMenu!=goog.nullFunction&&b.unlisten(c,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&b.unlisten(c,goog.events.EventType.DBLCLICK,this.handleDblClick))};
goog.ui.Control.prototype.exitDocument=function(){goog.ui.Control.superClass_.exitDocument.call(this);this.keyHandler_&&this.keyHandler_.detach();this.isVisible()&&this.isEnabled()&&this.renderer_.setFocusable(this,!1)};goog.ui.Control.prototype.disposeInternal=function(){goog.ui.Control.superClass_.disposeInternal.call(this);this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_);delete this.renderer_;this.extraClassNames_=this.content_=null};goog.ui.Control.prototype.getContent=function(){return this.content_};
goog.ui.Control.prototype.setContent=function(a){this.renderer_.setContent(this.getElement(),a);this.setContentInternal(a)};goog.ui.Control.prototype.setContentInternal=function(a){this.content_=a};goog.ui.Control.prototype.getCaption=function(){var a=this.getContent();if(!a)return"";a=goog.isString(a)?a:goog.isArray(a)?goog.array.map(a,goog.dom.getRawTextContent).join(""):goog.dom.getTextContent(a);return goog.string.collapseBreakingSpaces(a)};goog.ui.Control.prototype.setCaption=function(a){this.setContent(a)};
goog.ui.Control.prototype.setRightToLeft=function(a){goog.ui.Control.superClass_.setRightToLeft.call(this,a);var b=this.getElement();b&&this.renderer_.setRightToLeft(b,a)};goog.ui.Control.prototype.isAllowTextSelection=function(){return this.allowTextSelection_};goog.ui.Control.prototype.setAllowTextSelection=function(a){this.allowTextSelection_=a;var b=this.getElement();b&&this.renderer_.setAllowTextSelection(b,a)};goog.ui.Control.prototype.isVisible=function(){return this.visible_};
goog.ui.Control.prototype.setVisible=function(a,b){if(b||this.visible_!=a&&this.dispatchEvent(a?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){var c=this.getElement();c&&this.renderer_.setVisible(c,a);this.isEnabled()&&this.renderer_.setFocusable(this,a);this.visible_=a;return!0}return!1};goog.ui.Control.prototype.isEnabled=function(){return!this.hasState(goog.ui.Component.State.DISABLED)};
goog.ui.Control.prototype.isParentDisabled_=function(){var a=this.getParent();return!!a&&"function"==typeof a.isEnabled&&!a.isEnabled()};goog.ui.Control.prototype.setEnabled=function(a){!this.isParentDisabled_()&&this.isTransitionAllowed(goog.ui.Component.State.DISABLED,!a)&&(a||(this.setActive(!1),this.setHighlighted(!1)),this.isVisible()&&this.renderer_.setFocusable(this,a),this.setState(goog.ui.Component.State.DISABLED,!a))};goog.ui.Control.prototype.isHighlighted=function(){return this.hasState(goog.ui.Component.State.HOVER)};
goog.ui.Control.prototype.setHighlighted=function(a){this.isTransitionAllowed(goog.ui.Component.State.HOVER,a)&&this.setState(goog.ui.Component.State.HOVER,a)};goog.ui.Control.prototype.isActive=function(){return this.hasState(goog.ui.Component.State.ACTIVE)};goog.ui.Control.prototype.setActive=function(a){this.isTransitionAllowed(goog.ui.Component.State.ACTIVE,a)&&this.setState(goog.ui.Component.State.ACTIVE,a)};goog.ui.Control.prototype.isSelected=function(){return this.hasState(goog.ui.Component.State.SELECTED)};
goog.ui.Control.prototype.setSelected=function(a){this.isTransitionAllowed(goog.ui.Component.State.SELECTED,a)&&this.setState(goog.ui.Component.State.SELECTED,a)};goog.ui.Control.prototype.isChecked=function(){return this.hasState(goog.ui.Component.State.CHECKED)};goog.ui.Control.prototype.setChecked=function(a){this.isTransitionAllowed(goog.ui.Component.State.CHECKED,a)&&this.setState(goog.ui.Component.State.CHECKED,a)};goog.ui.Control.prototype.isFocused=function(){return this.hasState(goog.ui.Component.State.FOCUSED)};
goog.ui.Control.prototype.setFocused=function(a){this.isTransitionAllowed(goog.ui.Component.State.FOCUSED,a)&&this.setState(goog.ui.Component.State.FOCUSED,a)};goog.ui.Control.prototype.isOpen=function(){return this.hasState(goog.ui.Component.State.OPENED)};goog.ui.Control.prototype.setOpen=function(a){this.isTransitionAllowed(goog.ui.Component.State.OPENED,a)&&this.setState(goog.ui.Component.State.OPENED,a)};goog.ui.Control.prototype.getState=function(){return this.state_};
goog.ui.Control.prototype.hasState=function(a){return!!(this.state_&a)};goog.ui.Control.prototype.setState=function(a,b){this.isSupportedState(a)&&b!=this.hasState(a)&&(this.renderer_.setState(this,a,b),this.state_=b?this.state_|a:this.state_&~a)};goog.ui.Control.prototype.setStateInternal=function(a){this.state_=a};goog.ui.Control.prototype.isSupportedState=function(a){return!!(this.supportedStates_&a)};
goog.ui.Control.prototype.setSupportedState=function(a,b){if(this.isInDocument()&&this.hasState(a)&&!b)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);!b&&this.hasState(a)&&this.setState(a,!1);this.supportedStates_=b?this.supportedStates_|a:this.supportedStates_&~a};goog.ui.Control.prototype.isAutoState=function(a){return!!(this.autoStates_&a)&&this.isSupportedState(a)};goog.ui.Control.prototype.setAutoStates=function(a,b){this.autoStates_=b?this.autoStates_|a:this.autoStates_&~a};
goog.ui.Control.prototype.isDispatchTransitionEvents=function(a){return!!(this.statesWithTransitionEvents_&a)&&this.isSupportedState(a)};goog.ui.Control.prototype.setDispatchTransitionEvents=function(a,b){this.statesWithTransitionEvents_=b?this.statesWithTransitionEvents_|a:this.statesWithTransitionEvents_&~a};
goog.ui.Control.prototype.isTransitionAllowed=function(a,b){return this.isSupportedState(a)&&this.hasState(a)!=b&&(!(this.statesWithTransitionEvents_&a)||this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(a,b)))&&!this.isDisposed()};goog.ui.Control.prototype.handleMouseOver=function(a){!goog.ui.Control.isMouseEventWithinElement_(a,this.getElement())&&(this.dispatchEvent(goog.ui.Component.EventType.ENTER)&&this.isEnabled()&&this.isAutoState(goog.ui.Component.State.HOVER))&&this.setHighlighted(!0)};
goog.ui.Control.prototype.handleMouseOut=function(a){!goog.ui.Control.isMouseEventWithinElement_(a,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.LEAVE)&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!1))};goog.ui.Control.prototype.handleContextMenu=goog.nullFunction;goog.ui.Control.isMouseEventWithinElement_=function(a,b){return!!a.relatedTarget&&goog.dom.contains(b,a.relatedTarget)};
goog.ui.Control.prototype.handleMouseDown=function(a){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),a.isMouseActionButton()&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!0),this.renderer_.isFocusable(this)&&this.getKeyEventTarget().focus()));!this.isAllowTextSelection()&&a.isMouseActionButton()&&a.preventDefault()};
goog.ui.Control.prototype.handleMouseUp=function(a){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),this.isActive()&&(this.performActionInternal(a)&&this.isAutoState(goog.ui.Component.State.ACTIVE))&&this.setActive(!1))};goog.ui.Control.prototype.handleDblClick=function(a){this.isEnabled()&&this.performActionInternal(a)};
goog.ui.Control.prototype.performActionInternal=function(a){this.isAutoState(goog.ui.Component.State.CHECKED)&&this.setChecked(!this.isChecked());this.isAutoState(goog.ui.Component.State.SELECTED)&&this.setSelected(!0);this.isAutoState(goog.ui.Component.State.OPENED)&&this.setOpen(!this.isOpen());var b=new goog.events.Event(goog.ui.Component.EventType.ACTION,this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.platformModifierKey=a.platformModifierKey);return this.dispatchEvent(b)};
goog.ui.Control.prototype.handleFocus=function(a){this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!0)};goog.ui.Control.prototype.handleBlur=function(a){this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1);this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!1)};goog.ui.Control.prototype.handleKeyEvent=function(a){return this.isVisible()&&this.isEnabled()&&this.handleKeyEventInternal(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
goog.ui.Control.prototype.handleKeyEventInternal=function(a){return a.keyCode==goog.events.KeyCodes.ENTER&&this.performActionInternal(a)};goog.ui.registry.setDefaultRenderer(goog.ui.Control,goog.ui.ControlRenderer);goog.ui.registry.setDecoratorByClassName(goog.ui.ControlRenderer.CSS_CLASS,function(){return new goog.ui.Control(null)});goog.ui.SelectionModel=function(a){goog.events.EventTarget.call(this);this.items_=[];this.addItems(a)};goog.inherits(goog.ui.SelectionModel,goog.events.EventTarget);goog.ui.SelectionModel.prototype.selectedItem_=null;goog.ui.SelectionModel.prototype.selectionHandler_=null;goog.ui.SelectionModel.prototype.getSelectionHandler=function(){return this.selectionHandler_};goog.ui.SelectionModel.prototype.setSelectionHandler=function(a){this.selectionHandler_=a};
goog.ui.SelectionModel.prototype.getItemCount=function(){return this.items_.length};goog.ui.SelectionModel.prototype.indexOfItem=function(a){return a?goog.array.indexOf(this.items_,a):-1};goog.ui.SelectionModel.prototype.getFirst=function(){return this.items_[0]};goog.ui.SelectionModel.prototype.getLast=function(){return this.items_[this.items_.length-1]};goog.ui.SelectionModel.prototype.getItemAt=function(a){return this.items_[a]||null};
goog.ui.SelectionModel.prototype.addItems=function(a){a&&(goog.array.forEach(a,function(a){this.selectItem_(a,!1)},this),goog.array.extend(this.items_,a))};goog.ui.SelectionModel.prototype.addItem=function(a){this.addItemAt(a,this.getItemCount())};goog.ui.SelectionModel.prototype.addItemAt=function(a,b){a&&(this.selectItem_(a,!1),goog.array.insertAt(this.items_,a,b))};
goog.ui.SelectionModel.prototype.removeItem=function(a){a&&goog.array.remove(this.items_,a)&&a==this.selectedItem_&&(this.selectedItem_=null,this.dispatchEvent(goog.events.EventType.SELECT))};goog.ui.SelectionModel.prototype.removeItemAt=function(a){this.removeItem(this.getItemAt(a))};goog.ui.SelectionModel.prototype.getSelectedItem=function(){return this.selectedItem_};goog.ui.SelectionModel.prototype.getItems=function(){return goog.array.clone(this.items_)};
goog.ui.SelectionModel.prototype.setSelectedItem=function(a){a!=this.selectedItem_&&(this.selectItem_(this.selectedItem_,!1),this.selectedItem_=a,this.selectItem_(a,!0));this.dispatchEvent(goog.events.EventType.SELECT)};goog.ui.SelectionModel.prototype.getSelectedIndex=function(){return this.indexOfItem(this.selectedItem_)};goog.ui.SelectionModel.prototype.setSelectedIndex=function(a){this.setSelectedItem(this.getItemAt(a))};
goog.ui.SelectionModel.prototype.clear=function(){goog.array.clear(this.items_);this.selectedItem_=null};goog.ui.SelectionModel.prototype.disposeInternal=function(){goog.ui.SelectionModel.superClass_.disposeInternal.call(this);delete this.items_;this.selectedItem_=null};goog.ui.SelectionModel.prototype.selectItem_=function(a,b){a&&("function"==typeof this.selectionHandler_?this.selectionHandler_(a,b):"function"==typeof a.setSelected&&a.setSelected(b))};goog.dom.TagWalkType={START_TAG:1,OTHER:0,END_TAG:-1};goog.dom.TagIterator=function(a,b,c,d,e){this.reversed=!!b;a&&this.setPosition(a,d);this.depth=void 0!=e?e:this.tagType||0;this.reversed&&(this.depth*=-1);this.constrained=!c};goog.inherits(goog.dom.TagIterator,goog.iter.Iterator);goog.dom.TagIterator.prototype.node=null;goog.dom.TagIterator.prototype.tagType=goog.dom.TagWalkType.OTHER;goog.dom.TagIterator.prototype.started_=!1;
goog.dom.TagIterator.prototype.setPosition=function(a,b,c){if(this.node=a)goog.isNumber(b)?this.tagType=b:this.tagType=this.node.nodeType!=goog.dom.NodeType.ELEMENT?goog.dom.TagWalkType.OTHER:this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;goog.isNumber(c)&&(this.depth=c)};goog.dom.TagIterator.prototype.copyFrom=function(a){this.node=a.node;this.tagType=a.tagType;this.depth=a.depth;this.reversed=a.reversed;this.constrained=a.constrained};
goog.dom.TagIterator.prototype.clone=function(){return new goog.dom.TagIterator(this.node,this.reversed,!this.constrained,this.tagType,this.depth)};goog.dom.TagIterator.prototype.skipTag=function(){var a=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;this.tagType==a&&(this.tagType=-1*a,this.depth+=this.tagType*(this.reversed?-1:1))};
goog.dom.TagIterator.prototype.restartTag=function(){var a=this.reversed?goog.dom.TagWalkType.START_TAG:goog.dom.TagWalkType.END_TAG;this.tagType==a&&(this.tagType=-1*a,this.depth+=this.tagType*(this.reversed?-1:1))};
goog.dom.TagIterator.prototype.next=function(){var a;if(this.started_){if(!this.node||this.constrained&&0==this.depth)throw goog.iter.StopIteration;a=this.node;var b=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;if(this.tagType==b){var c=this.reversed?a.lastChild:a.firstChild;c?this.setPosition(c):this.setPosition(a,-1*b)}else(c=this.reversed?a.previousSibling:a.nextSibling)?this.setPosition(c):this.setPosition(a.parentNode,-1*b);this.depth+=this.tagType*(this.reversed?
-1:1)}else this.started_=!0;a=this.node;if(!this.node)throw goog.iter.StopIteration;return a};goog.dom.TagIterator.prototype.isStarted=function(){return this.started_};goog.dom.TagIterator.prototype.isStartTag=function(){return this.tagType==goog.dom.TagWalkType.START_TAG};goog.dom.TagIterator.prototype.isEndTag=function(){return this.tagType==goog.dom.TagWalkType.END_TAG};goog.dom.TagIterator.prototype.isNonElement=function(){return this.tagType==goog.dom.TagWalkType.OTHER};
goog.dom.TagIterator.prototype.equals=function(a){return a.node==this.node&&(!this.node||a.tagType==this.tagType)};goog.dom.TagIterator.prototype.splice=function(a){var b=this.node;this.restartTag();this.reversed=!this.reversed;goog.dom.TagIterator.prototype.next.call(this);this.reversed=!this.reversed;for(var c=goog.isArrayLike(arguments[0])?arguments[0]:arguments,d=c.length-1;0<=d;d--)goog.dom.insertSiblingAfter(c[d],b);goog.dom.removeNode(b)};goog.dom.NodeIterator=function(a,b,c,d){goog.dom.TagIterator.call(this,a,b,c,null,d)};goog.inherits(goog.dom.NodeIterator,goog.dom.TagIterator);goog.dom.NodeIterator.prototype.next=function(){do goog.dom.NodeIterator.superClass_.next.call(this);while(this.isEndTag());return this.node};goog.ui.PaletteRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.PaletteRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.PaletteRenderer);goog.ui.PaletteRenderer.cellId_=0;goog.ui.PaletteRenderer.CSS_CLASS="goog-palette";goog.ui.PaletteRenderer.prototype.createDom=function(a){var b=this.getClassNames(a);return a.getDomHelper().createDom("div",b?b.join(" "):null,this.createGrid(a.getContent(),a.getSize(),a.getDomHelper()))};
goog.ui.PaletteRenderer.prototype.createGrid=function(a,b,c){for(var d=[],e=0,f=0;e<b.height;e++){for(var g=[],k=0;k<b.width;k++){var l=a&&a[f++];g.push(this.createCell(l,c))}d.push(this.createRow(g,c))}return this.createTable(d,c)};goog.ui.PaletteRenderer.prototype.createTable=function(a,b){var c=b.createDom("table",this.getCssClass()+"-table",b.createDom("tbody",this.getCssClass()+"-body",a));c.cellSpacing=0;c.cellPadding=0;goog.a11y.aria.setRole(c,"grid");return c};
goog.ui.PaletteRenderer.prototype.createRow=function(a,b){var c=b.createDom("tr",this.getCssClass()+"-row",a);goog.a11y.aria.setRole(c,"row");return c};
goog.ui.PaletteRenderer.prototype.createCell=function(a,b){var c=b.createDom("td",{"class":this.getCssClass()+"-cell",id:this.getCssClass()+"-cell-"+goog.ui.PaletteRenderer.cellId_++},a);goog.a11y.aria.setRole(c,"gridcell");if(!goog.dom.getTextContent(c)&&!goog.a11y.aria.getLabel(c)){var d=this.findAriaLabelForCell_(c);d&&goog.a11y.aria.setLabel(c,d)}return c};
goog.ui.PaletteRenderer.prototype.findAriaLabelForCell_=function(a){a=new goog.dom.NodeIterator(a);for(var b="",c;!b&&(c=goog.iter.nextOrValue(a,null));)c.nodeType==goog.dom.NodeType.ELEMENT&&(b=goog.a11y.aria.getLabel(c)||c.title);return b};goog.ui.PaletteRenderer.prototype.canDecorate=function(a){return!1};goog.ui.PaletteRenderer.prototype.decorate=function(a,b){return null};
goog.ui.PaletteRenderer.prototype.setContent=function(a,b){if(a){var c=goog.dom.getElementsByTagNameAndClass("tbody",this.getCssClass()+"-body",a)[0];if(c){var d=0;goog.array.forEach(c.rows,function(a){goog.array.forEach(a.cells,function(a){goog.dom.removeChildren(a);if(b){var c=b[d++];c&&goog.dom.appendChild(a,c)}})});if(d<b.length){for(var e=[],f=goog.dom.getDomHelper(a),g=c.rows[0].cells.length;d<b.length;){var k=b[d++];e.push(this.createCell(k,f));e.length==g&&(k=this.createRow(e,f),goog.dom.appendChild(c,
k),e.length=0)}if(0<e.length){for(;e.length<g;)e.push(this.createCell("",f));k=this.createRow(e,f);goog.dom.appendChild(c,k)}}}goog.style.setUnselectable(a,!0,goog.userAgent.GECKO)}};goog.ui.PaletteRenderer.prototype.getContainingItem=function(a,b){for(var c=a.getElement();b&&b.nodeType==goog.dom.NodeType.ELEMENT&&b!=c;){if("TD"==b.tagName&&goog.dom.classes.has(b,this.getCssClass()+"-cell"))return b.firstChild;b=b.parentNode}return null};
goog.ui.PaletteRenderer.prototype.highlightCell=function(a,b,c){b&&(b=this.getCellForItem(b),goog.dom.classes.enable(b,this.getCssClass()+"-cell-hover",c),a=a.getElement().firstChild,goog.a11y.aria.setState(a,goog.a11y.aria.State.ACTIVEDESCENDANT,b.id))};goog.ui.PaletteRenderer.prototype.getCellForItem=function(a){return a?a.parentNode:null};goog.ui.PaletteRenderer.prototype.selectCell=function(a,b,c){b&&goog.dom.classes.enable(b.parentNode,this.getCssClass()+"-cell-selected",c)};
goog.ui.PaletteRenderer.prototype.getCssClass=function(){return goog.ui.PaletteRenderer.CSS_CLASS};goog.ui.Palette=function(a,b,c){goog.ui.Control.call(this,a,b||goog.ui.PaletteRenderer.getInstance(),c);this.setAutoStates(goog.ui.Component.State.CHECKED|goog.ui.Component.State.SELECTED|goog.ui.Component.State.OPENED,!1);this.currentCellControl_=new goog.ui.Palette.CurrentCell_;this.currentCellControl_.setParentEventTarget(this)};goog.inherits(goog.ui.Palette,goog.ui.Control);goog.ui.Palette.EventType={AFTER_HIGHLIGHT:goog.events.getUniqueId("afterhighlight")};goog.ui.Palette.prototype.size_=null;
goog.ui.Palette.prototype.highlightedIndex_=-1;goog.ui.Palette.prototype.selectionModel_=null;goog.ui.Palette.prototype.disposeInternal=function(){goog.ui.Palette.superClass_.disposeInternal.call(this);this.selectionModel_&&(this.selectionModel_.dispose(),this.selectionModel_=null);this.size_=null;this.currentCellControl_.dispose()};
goog.ui.Palette.prototype.setContentInternal=function(a){goog.ui.Palette.superClass_.setContentInternal.call(this,a);this.adjustSize_();this.selectionModel_?(this.selectionModel_.clear(),this.selectionModel_.addItems(a)):(this.selectionModel_=new goog.ui.SelectionModel(a),this.selectionModel_.setSelectionHandler(goog.bind(this.selectItem_,this)),this.getHandler().listen(this.selectionModel_,goog.events.EventType.SELECT,this.handleSelectionChange));this.highlightedIndex_=-1};
goog.ui.Palette.prototype.getCaption=function(){return""};goog.ui.Palette.prototype.setCaption=function(a){};goog.ui.Palette.prototype.handleMouseOver=function(a){goog.ui.Palette.superClass_.handleMouseOver.call(this,a);var b=this.getRenderer().getContainingItem(this,a.target);(!b||!a.relatedTarget||!goog.dom.contains(b,a.relatedTarget))&&b!=this.getHighlightedItem()&&this.setHighlightedItem(b)};
goog.ui.Palette.prototype.handleMouseOut=function(a){goog.ui.Palette.superClass_.handleMouseOut.call(this,a);var b=this.getRenderer().getContainingItem(this,a.target);(!b||!a.relatedTarget||!goog.dom.contains(b,a.relatedTarget))&&b==this.getHighlightedItem()&&this.setHighlightedItem(null)};
goog.ui.Palette.prototype.handleMouseDown=function(a){goog.ui.Palette.superClass_.handleMouseDown.call(this,a);this.isActive()&&(a=this.getRenderer().getContainingItem(this,a.target),a!=this.getHighlightedItem()&&this.setHighlightedItem(a))};goog.ui.Palette.prototype.performActionInternal=function(a){var b=this.getHighlightedItem();return b?(this.setSelectedItem(b),goog.ui.Palette.superClass_.performActionInternal.call(this,a)):!1};
goog.ui.Palette.prototype.handleKeyEvent=function(a){var b=this.getContent(),b=b?b.length:0,c=this.size_.width;if(0==b||!this.isEnabled())return!1;if(a.keyCode==goog.events.KeyCodes.ENTER||a.keyCode==goog.events.KeyCodes.SPACE)return this.performActionInternal(a);if(a.keyCode==goog.events.KeyCodes.HOME)return this.setHighlightedIndex(0),!0;if(a.keyCode==goog.events.KeyCodes.END)return this.setHighlightedIndex(b-1),!0;var d=0>this.highlightedIndex_?this.getSelectedIndex():this.highlightedIndex_;switch(a.keyCode){case goog.events.KeyCodes.LEFT:-1==
d&&(d=b);if(0<d)return this.setHighlightedIndex(d-1),a.preventDefault(),!0;break;case goog.events.KeyCodes.RIGHT:if(d<b-1)return this.setHighlightedIndex(d+1),a.preventDefault(),!0;break;case goog.events.KeyCodes.UP:-1==d&&(d=b+c-1);if(d>=c)return this.setHighlightedIndex(d-c),a.preventDefault(),!0;break;case goog.events.KeyCodes.DOWN:if(-1==d&&(d=-c),d<b-c)return this.setHighlightedIndex(d+c),a.preventDefault(),!0}return!1};goog.ui.Palette.prototype.handleSelectionChange=function(a){};
goog.ui.Palette.prototype.getSize=function(){return this.size_};goog.ui.Palette.prototype.setSize=function(a,b){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.size_=goog.isNumber(a)?new goog.math.Size(a,b):a;this.adjustSize_()};goog.ui.Palette.prototype.getHighlightedIndex=function(){return this.highlightedIndex_};goog.ui.Palette.prototype.getHighlightedItem=function(){var a=this.getContent();return a&&a[this.highlightedIndex_]};
goog.ui.Palette.prototype.getHighlightedCellElement_=function(){return this.getRenderer().getCellForItem(this.getHighlightedItem())};goog.ui.Palette.prototype.setHighlightedIndex=function(a){a!=this.highlightedIndex_&&(this.highlightIndex_(this.highlightedIndex_,!1),this.highlightedIndex_=a,this.highlightIndex_(a,!0),this.dispatchEvent(goog.ui.Palette.EventType.AFTER_HIGHLIGHT))};
goog.ui.Palette.prototype.setHighlightedItem=function(a){var b=this.getContent();this.setHighlightedIndex(b?goog.array.indexOf(b,a):-1)};goog.ui.Palette.prototype.getSelectedIndex=function(){return this.selectionModel_?this.selectionModel_.getSelectedIndex():-1};goog.ui.Palette.prototype.getSelectedItem=function(){return this.selectionModel_?this.selectionModel_.getSelectedItem():null};goog.ui.Palette.prototype.setSelectedIndex=function(a){this.selectionModel_&&this.selectionModel_.setSelectedIndex(a)};
goog.ui.Palette.prototype.setSelectedItem=function(a){this.selectionModel_&&this.selectionModel_.setSelectedItem(a)};goog.ui.Palette.prototype.highlightIndex_=function(a,b){if(this.getElement()){var c=this.getContent();if(c&&0<=a&&a<c.length){var d=this.getHighlightedCellElement_();this.currentCellControl_.getElement()!=d&&this.currentCellControl_.setElementInternal(d);this.currentCellControl_.tryHighlight(b)&&this.getRenderer().highlightCell(this,c[a],b)}}};
goog.ui.Palette.prototype.selectItem_=function(a,b){this.getElement()&&this.getRenderer().selectCell(this,a,b)};goog.ui.Palette.prototype.adjustSize_=function(){var a=this.getContent();if(a)if(this.size_&&this.size_.width){if(a=Math.ceil(a.length/this.size_.width),!goog.isNumber(this.size_.height)||this.size_.height<a)this.size_.height=a}else a=Math.ceil(Math.sqrt(a.length)),this.size_=new goog.math.Size(a,a);else this.size_=new goog.math.Size(0,0)};
goog.ui.Palette.CurrentCell_=function(){goog.ui.Control.call(this,null);this.setDispatchTransitionEvents(goog.ui.Component.State.HOVER,!0)};goog.inherits(goog.ui.Palette.CurrentCell_,goog.ui.Control);goog.ui.Palette.CurrentCell_.prototype.tryHighlight=function(a){this.setHighlighted(a);return this.isHighlighted()==a};goog.ui.ColorPalette=function(a,b,c){this.colors_=a||[];goog.ui.Palette.call(this,null,b||goog.ui.PaletteRenderer.getInstance(),c);this.setColors(this.colors_)};goog.inherits(goog.ui.ColorPalette,goog.ui.Palette);goog.ui.ColorPalette.prototype.normalizedColors_=null;goog.ui.ColorPalette.prototype.labels_=null;goog.ui.ColorPalette.prototype.getColors=function(){return this.colors_};
goog.ui.ColorPalette.prototype.setColors=function(a,b){this.colors_=a;this.labels_=b||null;this.normalizedColors_=null;this.setContent(this.createColorNodes())};goog.ui.ColorPalette.prototype.getSelectedColor=function(){var a=this.getSelectedItem();return a?(a=goog.style.getStyle(a,"background-color"),goog.ui.ColorPalette.parseColor_(a)):null};
goog.ui.ColorPalette.prototype.setSelectedColor=function(a){a=goog.ui.ColorPalette.parseColor_(a);this.normalizedColors_||(this.normalizedColors_=goog.array.map(this.colors_,function(a){return goog.ui.ColorPalette.parseColor_(a)}));this.setSelectedIndex(a?goog.array.indexOf(this.normalizedColors_,a):-1)};
goog.ui.ColorPalette.prototype.createColorNodes=function(){return goog.array.map(this.colors_,function(a,b){var c=this.getDomHelper().createDom("div",{"class":this.getRenderer().getCssClass()+"-colorswatch",style:"background-color:"+a});c.title=this.labels_&&this.labels_[b]?this.labels_[b]:"#"==a.charAt(0)?"RGB ("+goog.color.hexToRgb(a).join(", ")+")":a;return c},this)};goog.ui.ColorPalette.parseColor_=function(a){if(a)try{return goog.color.parse(a).hex}catch(b){}return null};goog.ui.ColorPicker=function(a,b){goog.ui.Component.call(this,a);this.colorPalette_=b||null;this.getHandler().listen(this,goog.ui.Component.EventType.ACTION,this.onColorPaletteAction_)};goog.inherits(goog.ui.ColorPicker,goog.ui.Component);goog.ui.ColorPicker.DEFAULT_NUM_COLS=5;goog.ui.ColorPicker.EventType={CHANGE:"change"};goog.ui.ColorPicker.prototype.focusable_=!0;goog.ui.ColorPicker.prototype.getColors=function(){return this.colorPalette_?this.colorPalette_.getColors():null};
goog.ui.ColorPicker.prototype.setColors=function(a){this.colorPalette_?this.colorPalette_.setColors(a):this.createColorPalette_(a)};goog.ui.ColorPicker.prototype.addColors=function(a){this.setColors(a)};goog.ui.ColorPicker.prototype.setSize=function(a){this.colorPalette_||this.createColorPalette_([]);this.colorPalette_.setSize(a)};goog.ui.ColorPicker.prototype.getSize=function(){return this.colorPalette_?this.colorPalette_.getSize():null};goog.ui.ColorPicker.prototype.setColumnCount=function(a){this.setSize(a)};
goog.ui.ColorPicker.prototype.getSelectedIndex=function(){return this.colorPalette_?this.colorPalette_.getSelectedIndex():-1};goog.ui.ColorPicker.prototype.setSelectedIndex=function(a){this.colorPalette_&&this.colorPalette_.setSelectedIndex(a)};goog.ui.ColorPicker.prototype.getSelectedColor=function(){return this.colorPalette_?this.colorPalette_.getSelectedColor():null};goog.ui.ColorPicker.prototype.setSelectedColor=function(a){this.colorPalette_&&this.colorPalette_.setSelectedColor(a)};
goog.ui.ColorPicker.prototype.isFocusable=function(){return this.focusable_};goog.ui.ColorPicker.prototype.setFocusable=function(a){this.focusable_=a;this.colorPalette_&&this.colorPalette_.setSupportedState(goog.ui.Component.State.FOCUSED,a)};goog.ui.ColorPicker.prototype.canDecorate=function(a){return!1};
goog.ui.ColorPicker.prototype.enterDocument=function(){goog.ui.ColorPicker.superClass_.enterDocument.call(this);this.colorPalette_&&this.colorPalette_.render(this.getElement());this.getElement().unselectable="on"};goog.ui.ColorPicker.prototype.disposeInternal=function(){goog.ui.ColorPicker.superClass_.disposeInternal.call(this);this.colorPalette_&&(this.colorPalette_.dispose(),this.colorPalette_=null)};goog.ui.ColorPicker.prototype.focus=function(){this.colorPalette_&&this.colorPalette_.getElement().focus()};
goog.ui.ColorPicker.prototype.onColorPaletteAction_=function(a){a.stopPropagation();this.dispatchEvent(goog.ui.ColorPicker.EventType.CHANGE)};goog.ui.ColorPicker.prototype.createColorPalette_=function(a){a=new goog.ui.ColorPalette(a,null,this.getDomHelper());a.setSize(goog.ui.ColorPicker.DEFAULT_NUM_COLS);a.setSupportedState(goog.ui.Component.State.FOCUSED,this.focusable_);this.addChild(a);this.colorPalette_=a;this.isInDocument()&&this.colorPalette_.render(this.getElement())};
goog.ui.ColorPicker.createSimpleColorGrid=function(a){a=new goog.ui.ColorPicker(a);a.setSize(7);a.setColors(goog.ui.ColorPicker.SIMPLE_GRID_COLORS);return a};goog.ui.ColorPicker.SIMPLE_GRID_COLORS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" ");Blockly.FieldColour=function(a,b){Blockly.FieldColour.superClass_.constructor.call(this,"\u00a0\u00a0\u00a0");this.changeHandler_=b;this.borderRect_.style.fillOpacity=1;this.setValue(a)};goog.inherits(Blockly.FieldColour,Blockly.Field);Blockly.FieldColour.isOpen_=!1;Blockly.FieldColour.prototype.CURSOR="default";Blockly.FieldColour.prototype.getValue=function(){return this.colour_};
Blockly.FieldColour.prototype.setValue=function(a){this.colour_=a;this.borderRect_.style.fill=a;this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.workspace.fireChangeEvent()};
Blockly.FieldColour.prototype.showEditor_=function(){Blockly.FieldColour.isOpen_=!0;goog.dom.removeChildren(Blockly.widgetDiv);Blockly.widgetDiv.style.display="block";var a=goog.ui.ColorPicker.createSimpleColorGrid();a.render(Blockly.widgetDiv);a.setSelectedColor(this.getValue());var b=Blockly.getAbsoluteXY_(this.borderRect_),c=this.borderRect_.getBBox();b.y+=c.height-1;Blockly.widgetDiv.style.left=b.x+"px";Blockly.widgetDiv.style.top=b.y+"px";var d=this;Blockly.FieldColour.changeEventKey_=goog.events.listen(a,
goog.ui.ColorPicker.EventType.CHANGE,function(a){a=a.target.getSelectedColor()||"#000000";Blockly.FieldColour.hide();if(d.changeHandler_){var b=d.changeHandler_(a);void 0!==b&&(a=b)}null!==a&&d.setValue(a)})};Blockly.FieldColour.hide=function(){Blockly.FieldColour.isOpen_&&(Blockly.widgetDiv.style.display="none",goog.dom.removeChildren(Blockly.widgetDiv),Blockly.FieldColour.isOpen_=!1,Blockly.FieldColour.changeEventKey_&&goog.events.unlistenByKey(Blockly.FieldColour.changeEventKey_))};Blockly.FieldTextInput=function(a,b){Blockly.FieldTextInput.superClass_.constructor.call(this,a);this.changeHandler_=b};goog.inherits(Blockly.FieldTextInput,Blockly.Field);Blockly.FieldTextInput.prototype.setText=function(a){if(null!==a){if(this.changeHandler_){var b=this.changeHandler_(a);null!==b&&void 0!==b&&(a=b)}Blockly.Field.prototype.setText.call(this,a)}};
Blockly.FieldTextInput.injectDom_=function(a){a=Blockly.createSvgElement("foreignObject",{height:22},a);Blockly.FieldTextInput.svgForeignObject_=a;var b=goog.dom.createDom("body","blocklyMinimalBody"),c=goog.dom.createDom("input","blocklyHtmlInput");Blockly.FieldTextInput.htmlInput_=c;b.appendChild(c);a.appendChild(b)};
Blockly.FieldTextInput.disposeDom_=function(){goog.dom.removeNode(Blockly.FieldTextInput.svgForeignObject_);Blockly.FieldTextInput.svgForeignObject_=null;Blockly.FieldTextInput.htmlInput_=null};Blockly.FieldTextInput.prototype.CURSOR="text";
Blockly.FieldTextInput.prototype.showEditor_=function(){if(goog.userAgent.MOBILE||window.opera){var a=window.prompt(Blockly.MSG_CHANGE_VALUE_TITLE,this.text_);if(this.changeHandler_){var b=this.changeHandler_(a);void 0!==b&&(a=b)}null!==a&&this.setText(a)}else{a=this.sourceBlock_.workspace.getCanvas();Blockly.FieldTextInput.injectDom_(a);b=Blockly.FieldTextInput.htmlInput_;b.value=b.defaultValue=this.text_;b.oldValue_=null;var c=Blockly.FieldTextInput.svgForeignObject_,d=Blockly.getSvgXY_(this.borderRect_),
e=Blockly.getSvgXY_(a);d.x-=e.x;d.y-=e.y;c.setAttribute("x",d.x+1);goog.userAgent.GECKO?c.setAttribute("y",d.y-1):c.setAttribute("y",d.y-3);b.focus();b.select();b.onBlurWrapper_=Blockly.bindEvent_(b,"blur",this,this.onHtmlInputBlur_);b.onKeyUpWrapper_=Blockly.bindEvent_(b,"keyup",this,this.onHtmlInputChange_);b.onKeyPressWrapper_=Blockly.bindEvent_(b,"keypress",this,this.onHtmlInputChange_);b.onWorkspaceChangeWrapper_=Blockly.bindEvent_(a,"blocklyWorkspaceChange",this,this.resizeEditor_);this.validate_();
this.resizeEditor_()}};Blockly.FieldTextInput.prototype.onHtmlInputBlur_=function(a){this.closeEditor_(!0)};Blockly.FieldTextInput.prototype.onHtmlInputChange_=function(a){if(13==a.keyCode)this.closeEditor_(!0);else if(27==a.keyCode)this.closeEditor_(!1);else{a=Blockly.FieldTextInput.htmlInput_;var b=a.value;b!==a.oldValue_?(a.oldValue_=b,this.setText(b),this.validate_()):goog.userAgent.WEBKIT&&this.sourceBlock_.render()}};
Blockly.FieldTextInput.prototype.validate_=function(){var a=!0;goog.asserts.assertObject(Blockly.FieldTextInput.htmlInput_);var b=Blockly.FieldTextInput.htmlInput_;this.changeHandler_&&(a=this.changeHandler_(b.value));null===a?Blockly.addClass_(b,"blocklyInvalidInput"):Blockly.removeClass_(b,"blocklyInvalidInput")};
Blockly.FieldTextInput.prototype.resizeEditor_=function(){var a=Blockly.FieldTextInput.htmlInput_,b=this.group_.getBBox(),c=Blockly.FieldTextInput.svgForeignObject_;c.setAttribute("width",b.width);a.style.width=b.width-2+"px";a=Blockly.getSvgXY_(this.group_);b=this.sourceBlock_.workspace.getCanvas();b=Blockly.getSvgXY_(b);a.x-=b.x;c.setAttribute("x",a.x-4)};
Blockly.FieldTextInput.prototype.closeEditor_=function(a){var b=Blockly.FieldTextInput.htmlInput_;Blockly.unbindEvent_(b.onBlurWrapper_);Blockly.unbindEvent_(b.onKeyUpWrapper_);Blockly.unbindEvent_(b.onKeyPressWrapper_);Blockly.unbindEvent_(b.onWorkspaceChangeWrapper_);a?(a=b.value,this.changeHandler_&&(a=this.changeHandler_(a),null===a&&(a=b.defaultValue))):a=b.defaultValue;this.setText(a);Blockly.FieldTextInput.disposeDom_();this.sourceBlock_.render()};
Blockly.FieldTextInput.numberValidator=function(a){a=a.replace(/O/ig,"0");a=a.replace(/,/g,"");a=parseFloat(a||0);return isNaN(a)?null:String(a)};Blockly.FieldTextInput.nonnegativeIntegerValidator=function(a){(a=Blockly.FieldTextInput.numberValidator(a))&&(a=String(Math.max(0,Math.floor(a))));return a};Blockly.Generator={};Blockly.Generator.NAME_TYPE="generated_function";Blockly.Generator.languages={};Blockly.Generator.get=function(a){if(!(a in Blockly.Generator.languages)){var b=new Blockly.CodeGenerator(a);Blockly.Generator.languages[a]=b}return Blockly.Generator.languages[a]};
Blockly.Generator.workspaceToCode=function(a){var b=[];a=Blockly.Generator.get(a);a.init();for(var c=Blockly.mainWorkspace.getTopBlocks(!0),d=0,e;e=c[d];d++){var f=a.blockToCode(e);f instanceof Array&&(f=f[0]);f&&(e.outputConnection&&a.scrubNakedValue&&(f=a.scrubNakedValue(f)),b.push(f))}b=b.join("\n");b=a.finish(b);b=b.replace(/^\s+\n/,"");b=b.replace(/\n\s+$/,"\n");return b=b.replace(/[ \t]+\n/g,"\n")};Blockly.Generator.prefixLines=function(a,b){return b+a.replace(/\n(.)/g,"\n"+b+"$1")};
Blockly.Generator.allNestedComments=function(a){var b=[];a=a.getDescendants();for(var c=0;c<a.length;c++){var d=a[c].getCommentText();d&&b.push(d)}b.length&&b.push("");return b.join("\n")};Blockly.CodeGenerator=function(a){this.name_=a;this.RESERVED_WORDS_=""};
Blockly.CodeGenerator.prototype.blockToCode=function(a){if(!a)return"";if(a.disabled)return a=a.nextConnection&&a.nextConnection.targetBlock(),this.blockToCode(a);var b=this[a.type];if(!b)throw'Language "'+this.name_+'" does not know how to generate code for block type "'+a.type+'".';b=b.call(a);return b instanceof Array?[this.scrub_(a,b[0]),b[1]]:this.scrub_(a,b)};
Blockly.CodeGenerator.prototype.valueToCode=function(a,b,c){if(isNaN(c))throw'Expecting valid order from block "'+a.type+'".';a=a.getInputTargetBlock(b);if(!a)return"";var d=this.blockToCode(a);if(""===d)return"";if(!(d instanceof Array))throw'Expecting tuple from value block "'+a.type+'".';b=d[0];d=d[1];if(isNaN(d))throw'Expecting valid order from value block "'+a.type+'".';b&&c<=d&&(b="("+b+")");return b};
Blockly.CodeGenerator.prototype.statementToCode=function(a,b){var c=a.getInputTargetBlock(b),d=this.blockToCode(c);if(!goog.isString(d))throw'Expecting code from statement block "'+c.type+'".';d&&(d=Blockly.Generator.prefixLines(d,"  "));return d};Blockly.CodeGenerator.prototype.addReservedWords=function(a){this.RESERVED_WORDS_+=a+","};goog.cssom={};goog.cssom.CssRuleType={STYLE:1,IMPORT:3,MEDIA:4,FONT_FACE:5,PAGE:6,NAMESPACE:7};goog.cssom.getAllCssText=function(a){return goog.cssom.getAllCss_(a||document.styleSheets,!0)};goog.cssom.getAllCssStyleRules=function(a){return goog.cssom.getAllCss_(a||document.styleSheets,!1)};goog.cssom.getCssRulesFromStyleSheet=function(a){var b=null;try{b=a.rules||a.cssRules}catch(c){if(15==c.code)throw c.styleSheet=a,c;}return b};
goog.cssom.getAllCssStyleSheets=function(a,b){var c=[],d=a||document.styleSheets,e=goog.isDef(b)?b:!1;if(d.imports&&d.imports.length)for(var f=0,g=d.imports.length;f<g;f++)goog.array.extend(c,goog.cssom.getAllCssStyleSheets(d.imports[f]));else if(d.length){f=0;for(g=d.length;f<g;f++)goog.array.extend(c,goog.cssom.getAllCssStyleSheets(d[f]))}else{var k=goog.cssom.getCssRulesFromStyleSheet(d);if(k&&k.length)for(var f=0,g=k.length,l;f<g;f++)l=k[f],l.styleSheet&&goog.array.extend(c,goog.cssom.getAllCssStyleSheets(l.styleSheet))}(d.type||
d.rules||d.cssRules)&&(!d.disabled||e)&&c.push(d);return c};goog.cssom.getCssTextFromCssRule=function(a){var b="";a.cssText?b=a.cssText:a.style&&(a.style.cssText&&a.selectorText)&&(b=a.style.cssText.replace(/\s*-closure-parent-stylesheet:\s*\[object\];?\s*/gi,"").replace(/\s*-closure-rule-index:\s*[\d]+;?\s*/gi,""),b=a.selectorText+" { "+b+" }");return b};
goog.cssom.getCssRuleIndexInParentStyleSheet=function(a,b){if(a.style&&a.style["-closure-rule-index"])return a.style["-closure-rule-index"];var c=b||goog.cssom.getParentStyleSheet(a);if(!c)throw Error("Cannot find a parentStyleSheet.");if((c=goog.cssom.getCssRulesFromStyleSheet(c))&&c.length)for(var d=0,e=c.length,f;d<e;d++)if(f=c[d],f==a)return d;return-1};goog.cssom.getParentStyleSheet=function(a){return a.parentStyleSheet||a.style&&a.style["-closure-parent-stylesheet"]};
goog.cssom.replaceCssRule=function(a,b,c,d){if(c=c||goog.cssom.getParentStyleSheet(a))if(a=0<=d?d:goog.cssom.getCssRuleIndexInParentStyleSheet(a,c),0<=a)goog.cssom.removeCssRule(c,a),goog.cssom.addCssRule(c,b,a);else throw Error("Cannot proceed without the index of the cssRule.");else throw Error("Cannot proceed without the parentStyleSheet.");};
goog.cssom.addCssRule=function(a,b,c){if(0>c||void 0==c)c=(a.rules||a.cssRules).length;if(a.insertRule)a.insertRule(b,c);else if(b=/^([^\{]+)\{([^\{]+)\}/.exec(b),3==b.length)a.addRule(b[1],b[2],c);else throw Error("Your CSSRule appears to be ill-formatted.");};goog.cssom.removeCssRule=function(a,b){a.deleteRule?a.deleteRule(b):a.removeRule(b)};
goog.cssom.addCssText=function(a,b){var c=b?b.getDocument():goog.dom.getDocument(),d=c.createElement("style");d.type="text/css";c.getElementsByTagName("head")[0].appendChild(d);d.styleSheet?d.styleSheet.cssText=a:(c=c.createTextNode(a),d.appendChild(c));return d};goog.cssom.getFileNameFromStyleSheet=function(a){a=a.href;return!a?null:/([^\/\?]+)[^\/]*$/.exec(a)[1]};
goog.cssom.getAllCss_=function(a,b){for(var c=[],d=goog.cssom.getAllCssStyleSheets(a),e=0;a=d[e];e++){var f=goog.cssom.getCssRulesFromStyleSheet(a);if(f&&f.length){if(!b)var g=0;for(var k=0,l=f.length,m;k<l;k++)m=f[k],b&&!m.href?(m=goog.cssom.getCssTextFromCssRule(m),c.push(m)):m.href||(m.style&&(m.parentStyleSheet||(m.style["-closure-parent-stylesheet"]=a),m.style["-closure-rule-index"]=g),c.push(m)),b||g++}}return b?c.join(" "):c};Blockly.Css={};Blockly.Css.inject=function(){var a=Blockly.Css.CONTENT.join("\n"),b=Blockly.pathToBlockly.replace(/[\\\/]$/,""),a=a.replace(/<<<PATH>>>/g,b);goog.cssom.addCssText(a)};Blockly.Css.FONT_COLOR="#000";Blockly.Css.SIGNATURE_BACKGROUND_COLOR="#bbb";Blockly.Css.BLOCK_EVAL_HIGHLIGHT_COLOR="#6e17e8";
Blockly.Css.CONTENT=[".blocklySvg {","  background-color: #fff;","  border: 1px solid #ddd;","}",".blocklyWidgetDiv {","  position: absolute;","  display: none;","  z-index: 999;","}",".blocklyDraggable {","  /* Hotspot coordinates are baked into the CUR file, but they are still","     required in the CSS due to a Chrome bug.","     http://code.google.com/p/chromium/issues/detail?id=1446 */","  cursor: url(<<<PATH>>>/media/handopen.cur) 8 5, auto;","}",".blocklyResizeSE {","  fill: #aaa;","  cursor: se-resize;",
"}",".blocklyResizeSW {","  fill: #aaa;","  cursor: sw-resize;","}",".blocklyResizeLine {","  stroke-width: 1;","  stroke: #888;","}",".blocklyHighlightedConnectionPath {","  stroke-width: 4px;","  stroke: #fc3;","  fill: none;","}",".blocklyPathLight {","  fill: none;","  stroke-width: 2;","  stroke-linecap: round;","}",".blocklySelected>.blocklyPath {","  stroke-width: 3px;","  stroke: #fc3;","}",".blocklySelected>.blocklyPathLight {","  display: none;","}",".blocklyEvaluated>.blocklyPath {","  stroke-width: 3px;",
"  stroke: "+Blockly.Css.BLOCK_EVAL_HIGHLIGHT_COLOR+";","}",".blocklyEvaluated>.blocklyPathLight {","  display: none;","}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","  fill-opacity: 0.8;","  stroke-opacity: 0.8;","}",".blocklyDragging>.blocklyPathDark {","  display: none;","}",".blocklyDisabled>.blocklyPath {","  fill-opacity: 0.50;","  stroke-opacity: 0.50;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","  display: none;","}",".blocklyText {",
"  cursor: default;","  font-family: sans-serif;","  font-size: 11pt;","  fill: "+Blockly.Css.FONT_COLOR+";","}",".blocklyNonEditableText>text {","  pointer-events: none;","}",".blocklyNonEditableText>rect,",".blocklyEditableText>rect {","  fill: #fff;","  fill-opacity: 0.6;","}",".blocklyNonEditableText>text,",".blocklyEditableText>text {","  fill: #000;","}",".blocklyEditableText:hover>rect {","  stroke-width: 2;","  stroke: "+Blockly.Css.FONT_COLOR+";","}",".blocklySignatureText {","  fill: #fff;",
"  font-size: 12pt;","}","/*"," * Don't allow users to select text.  It gets annoying when trying to"," * drag a block and selected text moves instead."," */",".blocklySvg text {","  -moz-user-select: none;","  -webkit-user-select: none;","  user-select: none;","  cursor: inherit;","}","",".blocklyHidden {","  display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","  display: block;","}",".blocklyTooltipBackground {","  fill: #ffffc7;","  stroke-width: 1px;","  stroke: #d8d8d8;","}",".blocklyTooltipShadow,",
".blocklyContextMenuShadow,",".blocklyDropdownMenuShadow {","  fill: #bbb;","  filter: url(#blocklyShadowFilter);","}",".blocklyTooltipText {","  font-family: sans-serif;","  font-size: 9pt;","  fill: #000;","}","",".blocklyIconShield {","  cursor: default;","  fill: #00c;","  stroke-width: 1px;","  stroke: #ccc;","}",".blocklyIconGroup:hover>.blocklyIconShield {","  fill: #00f;","  stroke: #fff;","}",".blocklyIconGroup:hover>.blocklyIconMark {","  fill: #fff;","}",".blocklyIconMark {","  cursor: default !important;",
"  font-family: sans-serif;","  font-size: 9pt;","  font-weight: bold;","  fill: #ccc;","  text-anchor: middle;","}",".blocklyWarningBody {","}",".blocklyMinimalBody {","  margin: 0;","  padding: 0;","}",".blocklyCommentTextarea {","  margin: 0;","  padding: 2px;","  border: 0;","  resize: none;","  background-color: #ffc;","}",".blocklyHtmlInput {","  font-family: sans-serif;","  font-size: 11pt;","  border: none;","  outline: none;","}",".blocklyContextMenuBackground,",".blocklyMutatorBackground {",
"  fill: #fff;","  stroke-width: 1;","  stroke: #ddd;","}",".blocklyContextMenuOptions>.blocklyMenuDiv,",".blocklyContextMenuOptions>.blocklyMenuDivDisabled,",".blocklyDropdownMenuOptions>.blocklyMenuDiv {","  fill: #fff;","}",".blocklyContextMenuOptions>.blocklyMenuDiv:hover>rect,",".blocklyDropdownMenuOptions>.blocklyMenuDiv:hover>rect {","  fill: #57e;","}",".blocklyMenuSelected>rect {","  fill: #57e;","}",".blocklyMenuText {","  cursor: default !important;","  font-family: sans-serif;","  font-size: 15px; /* All context menu sizes are based on pixels. */",
"  fill: #000;","}",".blocklyContextMenuOptions>.blocklyMenuDiv:hover>.blocklyMenuText,",".blocklyDropdownMenuOptions>.blocklyMenuDiv:hover>.blocklyMenuText {","  fill: #fff;","}",".blocklyMenuSelected>.blocklyMenuText {","  fill: #fff;","}",".blocklyMenuDivDisabled>.blocklyMenuText {","  fill: #ccc;","}",".blocklyFlyoutBackground {","  fill: #ddd;","  fill-opacity: 0.8;","}",".blocklySignatureBackground {","  fill: "+Blockly.Css.SIGNATURE_BACKGROUND_COLOR+";","  fill-opacity: 0.7;","}",".blocklyColourBackground {",
"  fill: #666;","}",".blocklyScrollbarBackground {","  fill: #fff;","  stroke-width: 1;","  stroke: #e4e4e4;","}",".blocklyScrollbarKnob {","  fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarKnob,",".blocklyScrollbarKnob:hover {","  fill: #bbb;","}",".blocklyInvalidInput {","  background: #faa;","}","","/* Category tree in Toolbox. */",".blocklyToolboxDiv {","  background-color: #ddd;","  display: none;","  overflow-x: visible;","  overflow-y: auto;","  position: absolute;","  z-index: 888;",
"}",".blocklyTreeRoot {","  padding: 4px 0;","}",".blocklyTreeRoot:focus {","  outline: none;","}",".blocklyTreeRow {","  line-height: 22px;","  height: 22px;","  padding-right: 1em;","  white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"  padding-right: 0;","  padding-left: 1em !important;","}",".blocklyTreeRow:hover {","  background-color: #e4e4e4;","}",".blocklyTreeIcon {","  height: 16px;","  width: 16px;","  vertical-align: middle;","  background-image: url(<<<PATH>>>/media/tree.png);",
"}",".blocklyTreeIconClosedLtr {","  background-position: -32px -1px;","}",".blocklyTreeIconClosedRtl {","  background-position: 0px -1px;","}",".blocklyTreeIconOpen {","  background-position: -16px -1px;","}",".blocklyTreeIconNone {","  background-position: -48px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedLtr {","  background-position: -32px -17px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedRtl {","  background-position: 0px -17px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {",
"  background-position: -16px -17px;","}",".blocklyTreeSelected>.blocklyTreeIconNone {","  background-position: -48px -17px;","}",".blocklyTreeLabel {","  cursor: default;","  font-family: sans-serif;","  font-size: 16px;","  padding: 0 3px;","  vertical-align: middle;","}",".blocklyTreeSelected  {","  background-color: #57e !important;","}",".blocklyTreeSelected .blocklyTreeLabel {","  color: #fff;","}","","/*"," * Copyright 2007 The Closure Library Authors. All Rights Reserved."," *"," * Use of this source code is governed by the Apache License, Version 2.0.",
" * See the COPYING file for details."," */","","/* Author: pupius@google.com (Daniel Pupius) */","","/*","  Styles to make the colorpicker look like the old gmail color picker","  NOTE: without CSS scoping this will override styles defined in palette.css","*/",".goog-palette {","  outline: none;","  cursor: default;","}","",".goog-palette-table {","  border: 1px solid #666;","  border-collapse: collapse;","}","",".goog-palette-cell {","  height: 13px;","  width: 15px;","  margin: 0;","  border: 0;",
"  text-align: center;","  vertical-align: middle;","  border-right: 1px solid #666;","  font-size: 1px;","}","",".goog-palette-colorswatch {","  position: relative;","  height: 13px;","  width: 15px;","  border: 1px solid #666;","}","",".goog-palette-cell-hover .goog-palette-colorswatch {","  border: 1px solid #FFF;","}","",".goog-palette-cell-selected .goog-palette-colorswatch {","  border: 1px solid #000;","  color: #fff;","}",""];Blockly.inject=function(a,b){if(!goog.dom.contains(document,a))throw"Error: container is not in current document.";b&&goog.mixin(Blockly,Blockly.parseOptions_(b));Blockly.createDom_(a);Blockly.editable&&Blockly.init_()};
Blockly.parseOptions_=function(a){var b=!a.readOnly;if(b){if(!a.toolbox)throw"No toolbox provided!";var c=a.toolbox;"string"==typeof c&&(c=Blockly.Xml.textToDom(c));var d=!0,e=a.trashcan;void 0===e&&(e=d)}else e=d=!1,c=null;return{editable:b,maxBlocks:a.maxBlocks||Infinity,pathToBlockly:a.path||"./",Toolbox:d?Blockly.Toolbox:void 0,Trashcan:e?Blockly.Trashcan:void 0,languageTree:c}};
Blockly.createDom_=function(a){a.setAttribute("dir","LTR");goog.ui.Component.setDefaultRightToLeft(!1);Blockly.Css.inject();var b=Blockly.createSvgElement("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklySvg"},null),c=Blockly.createSvgElement("defs",{},b),d,e;d=Blockly.createSvgElement("filter",{id:"blocklyEmboss"},c);Blockly.createSvgElement("feGaussianBlur",{"in":"SourceAlpha",stdDeviation:1,
result:"blur"},d);e=Blockly.createSvgElement("feSpecularLighting",{"in":"blur",surfaceScale:1,specularConstant:0.5,specularExponent:10,"lighting-color":"white",result:"specOut"},d);Blockly.createSvgElement("fePointLight",{x:-5E3,y:-1E4,z:2E4},e);Blockly.createSvgElement("feComposite",{"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},d);Blockly.createSvgElement("feComposite",{"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},d);d=Blockly.createSvgElement("filter",
{id:"blocklyTrashcanShadowFilter"},c);Blockly.createSvgElement("feGaussianBlur",{"in":"SourceAlpha",stdDeviation:2,result:"blur"},d);Blockly.createSvgElement("feOffset",{"in":"blur",dx:1,dy:1,result:"offsetBlur"},d);d=Blockly.createSvgElement("feMerge",{},d);Blockly.createSvgElement("feMergeNode",{"in":"offsetBlur"},d);Blockly.createSvgElement("feMergeNode",{"in":"SourceGraphic"},d);d=Blockly.createSvgElement("filter",{id:"blocklyShadowFilter"},c);Blockly.createSvgElement("feGaussianBlur",{stdDeviation:2},
d);d=Blockly.createSvgElement("pattern",{id:"blocklyDisabledPattern",patternUnits:"userSpaceOnUse",width:10,height:10},c);Blockly.createSvgElement("rect",{width:10,height:10,fill:"#aaa"},d);Blockly.createSvgElement("path",{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},d);d=Blockly.createSvgElement("pattern",{id:"blocklySlotPattern",patternUnits:"userSpaceOnUse",width:4,height:4},c);Blockly.createSvgElement("rect",{width:4,height:4,fill:"#fff"},d);Blockly.createSvgElement("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",
stroke:"#000",fill:"transparent"},d);c=Blockly.createSvgElement("mask",{id:"blocklySlotMask",maskContentUnits:"userSpaceOnUse",maskUnits:"objectBoundingBox",x:0,y:0,width:1,height:1},c);Blockly.createSvgElement("rect",{x:0,y:0,width:"100%",height:"100%",fill:"url(#blocklySlotPattern)"},c);Blockly.mainWorkspace=new Blockly.Workspace(Blockly.editable);b.appendChild(Blockly.mainWorkspace.createDom());Blockly.mainWorkspace.maxBlocks=Blockly.maxBlocks;if(Blockly.editable)if(Blockly.Toolbox)Blockly.Toolbox.createDom(b,
a);else{Blockly.mainWorkspace.flyout_=new Blockly.Flyout;var f=Blockly.mainWorkspace.flyout_,c=f.createDom();f.init(Blockly.mainWorkspace,Blockly.getMainWorkspaceMetrics,!0);f.autoClose=!1;goog.dom.insertSiblingBefore(c,Blockly.mainWorkspace.svgGroup_);Blockly.bindEvent_(Blockly.mainWorkspace.getCanvas(),"blocklyWorkspaceChange",Blockly.mainWorkspace,function(){if(0==Blockly.Block.dragMode_)for(var a=Blockly.svgSize(),b=Blockly.mainWorkspace.getTopBlocks(!1),c=0,d;d=b[c];c++)if(d.deletable){var e=
d.getRelativeToSurfaceXY(),q=d.getSvgRoot().getBBox(),t=e.y>a.height-20,D=e.x<f.width_-40-Blockly.mainWorkspace.scrollX,C=e.x>a.width-20-Blockly.mainWorkspace.scrollX;if(e.y<20-q.height||t||D||C)console.log("disposing!"),d.dispose(!1,!0)}})}else delete Blockly.Toolbox,delete Blockly.Flyout;Blockly.Tooltip&&b.appendChild(Blockly.Tooltip.createDom());Blockly.editable&&Blockly.FieldDropdown&&b.appendChild(Blockly.FieldDropdown.createDom());Blockly.ContextMenu&&Blockly.ContextMenu&&b.appendChild(Blockly.ContextMenu.createDom());
a.appendChild(b);Blockly.svg=b;Blockly.svgResize();Blockly.widgetDiv=goog.dom.createDom("div",{"class":"blocklyWidgetDiv"});document.body.appendChild(Blockly.widgetDiv)};
Blockly.init_=function(){Blockly.bindEvent_(Blockly.svg,"mousedown",null,Blockly.onMouseDown_);Blockly.bindEvent_(Blockly.svg,"mousemove",null,Blockly.onMouseMove_);Blockly.bindEvent_(Blockly.svg,"contextmenu",null,Blockly.onContextMenu_);Blockly.documentEventsBound_||(Blockly.bindEvent_(window,"resize",document,Blockly.svgResize),Blockly.bindEvent_(document,"mouseup",null,Blockly.onMouseUp_),Blockly.bindEvent_(document,"keydown",null,Blockly.onKeyDown_),Blockly.documentEventsBound_=!0);var a=!0;
Blockly.languageTree&&(Blockly.Toolbox?Blockly.Toolbox.init():Blockly.Flyout&&(Blockly.mainWorkspace.flyout_.init(Blockly.mainWorkspace,Blockly.getMainWorkspaceMetrics,!0),Blockly.mainWorkspace.flyout_.show(Blockly.languageTree.childNodes),Blockly.mainWorkspace.scrollX=Blockly.mainWorkspace.flyout_.width_,a="translate("+Blockly.mainWorkspace.scrollX+", 0)",Blockly.mainWorkspace.getCanvas().setAttribute("transform",a),Blockly.mainWorkspace.getBubbleCanvas().setAttribute("transform",a),a=!1));a&&(Blockly.mainWorkspace.scrollbar=
new Blockly.ScrollbarPair(Blockly.mainWorkspace.getBubbleCanvas(),Blockly.getMainWorkspaceMetrics,Blockly.setMainWorkspaceMetrics));Blockly.mainWorkspace.addTrashcan(Blockly.getMainWorkspaceMetrics);Blockly.loadAudio_("media/click.wav","click");Blockly.loadAudio_("media/delete.wav","delete")};Blockly.FieldImage=function(a,b,c){this.sourceBlock_=null;c=Number(c);b=Number(b);this.size_={height:c+10,width:b};var d=6-Blockly.BlockSvg.TITLE_HEIGHT;this.group_=Blockly.createSvgElement("g",{},null);this.imageElement_=Blockly.createSvgElement("image",{height:c+"px",width:b+"px",y:d},this.group_);this.setText(a);goog.userAgent.GECKO&&(this.rectElement_=Blockly.createSvgElement("rect",{height:c+"px",width:b+"px",y:d,"fill-opacity":0},this.group_))};goog.inherits(Blockly.FieldImage,Blockly.Field);
Blockly.FieldImage.prototype.rectElement_=null;Blockly.FieldImage.prototype.EDITABLE=!1;Blockly.FieldImage.prototype.init=function(a){if(this.sourceBlock_)throw"Image has already been initialized once.";this.sourceBlock_=a;a.getSvgRoot().appendChild(this.group_);a=this.rectElement_||this.imageElement_;a.tooltip=this.sourceBlock_;Blockly.Tooltip&&Blockly.Tooltip.bindMouseEvents(a)};
Blockly.FieldImage.prototype.dispose=function(){goog.dom.removeNode(this.group_);this.rectElement_=this.imageElement_=this.group_=null};Blockly.FieldImage.prototype.setTooltip=function(a){(this.rectElement_||this.imageElement_).tooltip=a};Blockly.FieldImage.prototype.getText=function(){return this.src_};Blockly.FieldImage.prototype.setText=function(a){null!==a&&(this.src_=a,this.imageElement_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",goog.isString(a)?a:""))};Blockly.FieldCheckbox=function(a,b){Blockly.FieldCheckbox.superClass_.constructor.call(this,"");this.changeHandler_=b;this.checkElement_=Blockly.createSvgElement("text",{"class":"blocklyText",x:-3},this.group_);var c=document.createTextNode("\u2713");this.checkElement_.appendChild(c);this.setValue(a)};goog.inherits(Blockly.FieldCheckbox,Blockly.Field);Blockly.FieldCheckbox.prototype.CURSOR="default";Blockly.FieldCheckbox.prototype.getValue=function(){return String(this.state_).toUpperCase()};
Blockly.FieldCheckbox.prototype.setValue=function(a){a="TRUE"==a;this.state_!==a&&(this.state_=a,this.checkElement_.style.display=a?"block":"none",this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.workspace.fireChangeEvent())};Blockly.FieldCheckbox.prototype.showEditor_=function(){var a=!this.state_;if(this.changeHandler_){var b=this.changeHandler_(a);void 0!==b&&(a=b)}null!==a&&this.setValue(String(a).toUpperCase())};Blockly.pathToBlockly="./";Blockly.SVG_NS="http://www.w3.org/2000/svg";Blockly.HTML_NS="http://www.w3.org/1999/xhtml";Blockly.HSV_SATURATION=0.45;Blockly.HSV_VALUE=0.9;
Blockly.makeColour=function(a){if(goog.isString(a))return a;if(goog.isObject(a)){if(goog.isDef(a.H))return goog.color.hsvToHex(a.H,a.S,256*a.V);if(goog.isDef(a.R))return goog.color.rgbToHex(a.R,a.G,a.B);throw"Unknown format!";}if(goog.isNumber(a))return goog.color.hsvToHex(a,Blockly.HSV_SATURATION,256*Blockly.HSV_VALUE);throw"Argument must be string, object, or number!";};Blockly.INPUT_VALUE=1;Blockly.OUTPUT_VALUE=2;Blockly.NEXT_STATEMENT=3;Blockly.PREVIOUS_STATEMENT=4;Blockly.DUMMY_INPUT=5;
Blockly.ALIGN_LEFT=-1;Blockly.ALIGN_CENTRE=0;Blockly.ALIGN_RIGHT=1;Blockly.OPPOSITE_TYPE=[];Blockly.OPPOSITE_TYPE[Blockly.INPUT_VALUE]=Blockly.OUTPUT_VALUE;Blockly.OPPOSITE_TYPE[Blockly.OUTPUT_VALUE]=Blockly.INPUT_VALUE;Blockly.OPPOSITE_TYPE[Blockly.NEXT_STATEMENT]=Blockly.PREVIOUS_STATEMENT;Blockly.OPPOSITE_TYPE[Blockly.PREVIOUS_STATEMENT]=Blockly.NEXT_STATEMENT;Blockly.SOUNDS_={};Blockly.selected=null;Blockly.editable=!0;Blockly.highlightedConnection_=null;Blockly.localConnection_=null;
Blockly.DRAG_RADIUS=5;Blockly.SNAP_RADIUS=12;Blockly.BUMP_DELAY=250;Blockly.mainWorkspace=null;Blockly.clipboard_=null;Blockly.svgSize=function(){return{width:Blockly.svg.cachedWidth_,height:Blockly.svg.cachedHeight_,top:Blockly.svg.cachedTop_,left:Blockly.svg.cachedLeft_}};
Blockly.svgResize=function(){var a=Blockly.svg,b=a.parentNode,c=b.offsetWidth,d=b.offsetHeight;a.cachedWidth_!=c&&(a.setAttribute("width",c+"px"),a.cachedWidth_=c);a.cachedHeight_!=d&&(a.setAttribute("height",d+"px"),a.cachedHeight_=d);a.cachedLeft_=0;for(a.cachedTop_=0;b;)a.cachedLeft_+=b.offsetLeft,a.cachedTop_+=b.offsetTop,b=b.offsetParent};
Blockly.onMouseDown_=function(a){Blockly.Block.terminateDrag_();Blockly.hideChaff();var b=a.target&&a.target.nodeName&&"svg"==a.target.nodeName.toLowerCase();Blockly.selected&&b&&Blockly.selected.unselect();if(Blockly.isRightButton(a))Blockly.ContextMenu&&Blockly.showContextMenu_(a.clientX,a.clientY);else if((!Blockly.editable||b)&&Blockly.mainWorkspace.scrollbar)Blockly.mainWorkspace.dragMode=!0,Blockly.mainWorkspace.startDragMouseX=a.clientX,Blockly.mainWorkspace.startDragMouseY=a.clientY,Blockly.mainWorkspace.startDragMetrics=
Blockly.getMainWorkspaceMetrics(),Blockly.mainWorkspace.startScrollX=Blockly.mainWorkspace.scrollX,Blockly.mainWorkspace.startScrollY=Blockly.mainWorkspace.scrollY};Blockly.onMouseUp_=function(a){Blockly.setCursorHand_(!1);Blockly.mainWorkspace.dragMode=!1};
Blockly.onMouseMove_=function(a){if(Blockly.mainWorkspace.dragMode){Blockly.removeAllRanges();var b=Blockly.mainWorkspace.startDragMetrics,c=Blockly.mainWorkspace.startScrollX+(a.clientX-Blockly.mainWorkspace.startDragMouseX);a=Blockly.mainWorkspace.startScrollY+(a.clientY-Blockly.mainWorkspace.startDragMouseY);c=Math.min(c,-b.contentLeft);a=Math.min(a,-b.contentTop);c=Math.max(c,b.viewWidth-b.contentLeft-b.contentWidth);a=Math.max(a,b.viewHeight-b.contentTop-b.contentHeight);Blockly.mainWorkspace.scrollbar.set(-c-
b.contentLeft,-a-b.contentTop)}};
Blockly.onKeyDown_=function(a){if(!Blockly.isTargetInput_(a))if(27==a.keyCode)Blockly.hideChaff();else if(8==a.keyCode||46==a.keyCode)Blockly.selected&&Blockly.selected.deletable&&(Blockly.hideChaff(),Blockly.selected.dispose(!0,!0)),a.preventDefault();else if(a.altKey||a.ctrlKey||a.metaKey)Blockly.selected&&(Blockly.selected.deletable&&Blockly.selected.workspace==Blockly.mainWorkspace)&&(Blockly.hideChaff(),67==a.keyCode?Blockly.copy_(Blockly.selected):88==a.keyCode&&(Blockly.copy_(Blockly.selected),
Blockly.selected.dispose(!0,!0))),86==a.keyCode&&Blockly.clipboard_&&Blockly.mainWorkspace.paste(Blockly.clipboard_)};Blockly.copy_=function(a){var b=Blockly.Xml.blockToDom_(a);Blockly.Xml.deleteNext(b);a=a.getRelativeToSurfaceXY();b.setAttribute("x",a.x);b.setAttribute("y",a.y);Blockly.clipboard_=b};
Blockly.showContextMenu_=function(a,b){var c=[];c.push({enabled:!!Blockly.Ray_.Shared.savedBlockXml_,text:"Paste Block from Clipboard",callback:function(){Blockly.Ray_.Shared.loadBlockXml(Blockly,Blockly.mainWorkspace)}});for(var d=!1,e=!1,f=Blockly.mainWorkspace.getTopBlocks(!1),g=0;g<f.length;g++)f[g].collapsed?d=!0:e=!0;e={enabled:e};e.text=Blockly.MSG_COLLAPSE_ALL;e.callback=function(){for(var a=0;a<f.length;a++)f[a].setCollapsed(!0)};c.push(e);d={enabled:d};d.text=Blockly.MSG_EXPAND_ALL;d.callback=
function(){for(var a=0;a<f.length;a++)f[a].setCollapsed(!1)};c.push(d);d={enabled:!1};d.text=Blockly.MSG_HELP;d.callback=function(){};c.push(d);Blockly.ContextMenu.show(a,b,c)};Blockly.onContextMenu_=function(a){!Blockly.isTargetInput_(a)&&Blockly.ContextMenu&&a.preventDefault()};
Blockly.hideChaff=function(a){Blockly.Tooltip&&Blockly.Tooltip.hide();Blockly.ContextMenu&&Blockly.ContextMenu.hide();Blockly.FieldDropdown&&Blockly.FieldDropdown.hide();Blockly.FieldColour&&Blockly.FieldColour.hide();Blockly.Toolbox&&(!a&&Blockly.Toolbox.flyout_.autoClose)&&Blockly.Toolbox.clearSelection()};
Blockly.removeAllRanges=function(){if(window.getSelection){var a=window.getSelection();a&&a.removeAllRanges&&(a.removeAllRanges(),window.setTimeout(function(){window.getSelection().removeAllRanges()},0))}};Blockly.isTargetInput_=function(a){return"textarea"==a.target.type||"text"==a.target.type};Blockly.loadAudio_=function(a,b){if(window.Audio){var c=new window.Audio(Blockly.pathToBlockly+a);c&&c.play&&(c.play(),c.volume=0.01,Blockly.SOUNDS_[b]=c)}};
Blockly.playAudio=function(a,b){var c=Blockly.SOUNDS_[a];c&&(c=c.cloneNode(),c.volume=void 0===b?1:b,c.play())};Blockly.setCursorHand_=function(a){if(Blockly.editable){var b="";a&&(b="url("+Blockly.pathToBlockly+"media/handclosed.cur) 7 3, auto");Blockly.selected&&(Blockly.selected.getSvgRoot().style.cursor=b);document.getElementsByTagName("svg")[0].style.cursor=b}};
Blockly.getMainWorkspaceMetrics=function(){var a=Blockly.svgSize();Blockly.Toolbox&&(a.width-=Blockly.Toolbox.width);var b=a.width-Blockly.Scrollbar.scrollbarThickness,c=a.height-Blockly.Scrollbar.scrollbarThickness;try{var d=Blockly.mainWorkspace.getCanvas().getBBox()}catch(e){return null}-Infinity==d.width&&-Infinity==d.height&&(d={width:0,height:0,x:0,y:0});var f=Math.min(d.x-b/2,d.x+d.width-b),b=Math.max(d.x+d.width+b/2,d.x+b),g=Math.min(d.y-c/2,d.y+d.height-c),c=Math.max(d.y+d.height+c/2,d.y+
c),d=0;Blockly.Toolbox&&(d=Blockly.Toolbox.width);return{viewHeight:a.height,viewWidth:a.width,contentHeight:c-g,contentWidth:b-f,viewTop:-Blockly.mainWorkspace.scrollY,viewLeft:-Blockly.mainWorkspace.scrollX,contentTop:g,contentLeft:f,absoluteTop:0,absoluteLeft:d}};
Blockly.setMainWorkspaceMetrics=function(a){var b=Blockly.getMainWorkspaceMetrics();goog.isNumber(a.x)&&(Blockly.mainWorkspace.scrollX=-b.contentWidth*a.x-b.contentLeft);goog.isNumber(a.y)&&(Blockly.mainWorkspace.scrollY=-b.contentHeight*a.y-b.contentTop);a="translate("+(Blockly.mainWorkspace.scrollX+b.absoluteLeft)+","+(Blockly.mainWorkspace.scrollY+b.absoluteTop)+")";Blockly.mainWorkspace.getCanvas().setAttribute("transform",a);Blockly.mainWorkspace.getBubbleCanvas().setAttribute("transform",a)};
Blockly.addChangeListener=function(a){return Blockly.bindEvent_(Blockly.mainWorkspace.getCanvas(),"blocklyWorkspaceChange",null,a)};Blockly.removeChangeListener=function(a){Blockly.unbindEvent_(a)};goog.dom.xml={};goog.dom.xml.MAX_XML_SIZE_KB=2048;goog.dom.xml.MAX_ELEMENT_DEPTH=256;
goog.dom.xml.createDocument=function(a,b){if(b&&!a)throw Error("Can't create document with namespace and no root tag");if(document.implementation&&document.implementation.createDocument)return document.implementation.createDocument(b||"",a||"",null);if("undefined"!=typeof ActiveXObject){var c=goog.dom.xml.createMsXmlDocument_();if(c)return a&&c.appendChild(c.createNode(goog.dom.NodeType.ELEMENT,a,b||"")),c}throw Error("Your browser does not support creating new documents");};
goog.dom.xml.loadXml=function(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=goog.dom.xml.createMsXmlDocument_();b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};
goog.dom.xml.serialize=function(a){if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(a);if(a=a.xml)return a;throw Error("Your browser does not support serializing XML documents");};
goog.dom.xml.selectSingleNode=function(a,b){if("undefined"!=typeof a.selectSingleNode){var c=goog.dom.getOwnerDocument(a);"undefined"!=typeof c.setProperty&&c.setProperty("SelectionLanguage","XPath");return a.selectSingleNode(b)}if(document.implementation.hasFeature("XPath","3.0")){var c=goog.dom.getOwnerDocument(a),d=c.createNSResolver(c.documentElement);return c.evaluate(b,a,d,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}return null};
goog.dom.xml.selectNodes=function(a,b){if("undefined"!=typeof a.selectNodes){var c=goog.dom.getOwnerDocument(a);"undefined"!=typeof c.setProperty&&c.setProperty("SelectionLanguage","XPath");return a.selectNodes(b)}if(document.implementation.hasFeature("XPath","3.0")){for(var c=goog.dom.getOwnerDocument(a),d=c.createNSResolver(c.documentElement),c=c.evaluate(b,a,d,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),d=[],e=c.snapshotLength,f=0;f<e;f++)d.push(c.snapshotItem(f));return d}return[]};
goog.dom.xml.setAttributes=function(a,b){for(var c in b)b.hasOwnProperty(c)&&a.setAttribute(c,b[c])};goog.dom.xml.createMsXmlDocument_=function(){var a=new ActiveXObject("MSXML2.DOMDocument");if(a){a.resolveExternals=!1;a.validateOnParse=!1;try{a.setProperty("ProhibitDTD",!0),a.setProperty("MaxXMLSize",goog.dom.xml.MAX_XML_SIZE_KB),a.setProperty("MaxElementDepth",goog.dom.xml.MAX_ELEMENT_DEPTH)}catch(b){}}return a};Ray.Blocks.Config={};Ray.Blocks.Config.INPUT_CATEGORY_NAME="input";Ray.Blocks.Config.OUTPUT_CATEGORY_NAME="output";Ray.Blocks.Config.USER_FUN_CATEGORY_NAME="functions";Ray.Blocks.Config.CONTROL_CATEGORY_NAME="control";Ray.Blocks.Config.ARGUMENT_CATEGORY_NAME="arguments";Ray.Blocks.Config.LIST_CATEGORY_NAME="list";Ray.Blocks.Config.ALL_CATEGORY_NAME="all";
Ray.Blocks.Config.categoryKeyToDisplayName=function(a){return a===Ray.Blocks.Config.INPUT_CATEGORY_NAME?"consumes":a===Ray.Blocks.Config.OUTPUT_CATEGORY_NAME?"produces":a};Ray.Blocks.CategoryTree=function(){return new Ray.Blocks.CategoryTree.Node};Ray.Blocks.CategoryTree.prototype.setParent=function(a){this.parent_=a};Ray.Blocks.CategoryTree.prototype.getLookupKey=function(){return!this.parent_?null:goog.object.findKey(this.parent_.subcategories_,function(a){return this===a},this)};Ray.Blocks.CategoryTree.prototype.getDisplayName=function(){return Ray.Blocks.Config.categoryKeyToDisplayName(this.getLookupKey())};
Ray.Blocks.CategoryTree.prototype.getPath=function(){return null===this.parent_?[]:this.parent_.getPath().concat(this.getLookupKey())};Ray.Blocks.CategoryTree.Node=function(){this.subcategories_={};this.parent_=null};goog.inherits(Ray.Blocks.CategoryTree.Node,Ray.Blocks.CategoryTree);Ray.Blocks.CategoryTree.Node.prototype.isNode=function(){return!0};Ray.Blocks.CategoryTree.Node.prototype.isLeaf=function(){return!1};Ray.Blocks.CategoryTree.Node.prototype.getChildren=function(){return goog.object.getValues(this.subcategories_)};
Ray.Blocks.CategoryTree.Node.prototype.addItemAt=function(a,b){if(0===a.length)throw"Empty path";var c=a.shift();0===a.length?this.get_(c,!0).add(b):this.get_(c).addItemAt(a,b)};Ray.Blocks.CategoryTree.Node.prototype.getItems=function(a){if(0===a.length)throw"Empty path";a=goog.array.clone(a);var b=a.shift();return 0===a.length?this.get_(b,!0).getItems():this.get_(b).getItems(a)};
Ray.Blocks.CategoryTree.Node.prototype.get_=function(a,b){var c=!b,d=this.subcategories_[a];if(d){if(c&&d.isLeaf()||!c&&d.isNode())throw{msg:"Unexpected value!",value:d,childIsNode:c};}else this.subcategories_[a]=c?new Ray.Blocks.CategoryTree.Node:new Ray.Blocks.CategoryTree.Leaf,d=this.subcategories_[a],d.setParent(this);return d};
Ray.Blocks.CategoryTree.Node.prototype.toToolboxXml=function(){var a=goog.dom.createDom("xml",{id:"toolbox"}),b=goog.object.getKeys(this.subcategories_);goog.array.forEach(b,function(b){b=this.subcategories_[b].toXml(b);goog.dom.appendChild(a,b)},this);return goog.dom.xml.serialize(a)};
Ray.Blocks.CategoryTree.Node.prototype.toXml=function(a){var b=goog.dom.createDom("category");goog.dom.xml.setAttributes(b,{name:a});a=goog.object.getKeys(this.subcategories_);goog.array.forEach(a,function(a){a=this.subcategories_[a].toXml(a);goog.dom.appendChild(b,a)},this);return b};Ray.Blocks.CategoryTree.Node.prototype.removeCategory=function(a){return this.subcategories_[a]?(delete this.subcategories_[a],!0):!1};Ray.Blocks.CategoryTree.Leaf=function(){this.contents_=[];this.parent_=null};
goog.inherits(Ray.Blocks.CategoryTree.Leaf,Ray.Blocks.CategoryTree);Ray.Blocks.CategoryTree.Leaf.prototype.isLeaf=function(){return!0};Ray.Blocks.CategoryTree.Leaf.prototype.isNode=function(){return!1};Ray.Blocks.CategoryTree.Leaf.prototype.add=function(a){if(!goog.isDef(a))return!1;this.contents_.push(a);return!0};Ray.Blocks.CategoryTree.Leaf.prototype.getItems=function(){return this.contents_};
Ray.Blocks.CategoryTree.Leaf.prototype.toXml=function(a){var b=goog.dom.createDom("category");goog.dom.xml.setAttributes(b,{name:a,key:a,custom:a});return b};Ray.Blocks.misc={};Blocks=Ray.Globals.Blocks;R=Ray.Runtime;Ray.Blocks.REST_ARG_PREFIX="ray_rest_arg_";Ray.Blocks.BLOCK_PREFIX="ray_";Ray.Blocks.PRIMITIVE_DATA_PREFIX="ray_data_create_";Ray.Blocks.CONDITIONAL_PREFIX="ray_conditional_";Ray.Blocks.ARG_PREFIX="ray_function_arg_";Ray.Blocks.FUNCTION_DEF_PREFIX="ray_user_function_";Ray.Blocks.HELP_URL="#";Ray.Blocks.EXAMPLE_BLOCK_NAME="example";Ray.Blocks.EXAMPLE_BLOCK_EXPR_INPUT="EXPR";Ray.Blocks.EXAMPLE_BLOCK_RESULT_INPUT="RESULT";
Ray.Blocks.blockName=function(a){return Ray.Blocks.BLOCK_PREFIX+goog.string.htmlEscape(a)};Ray.Blocks.restArgBlockName=function(a){return Ray.Blocks.REST_ARG_PREFIX+goog.string.htmlEscape(a)};Ray.Blocks.primitiveDataBlockName=function(a){return Ray.Blocks.PRIMITIVE_DATA_PREFIX+goog.string.htmlEscape(a)};Ray.Blocks.conditionalBlockName=function(a){return Ray.Blocks.CONDITIONAL_PREFIX+goog.string.htmlEscape(a)};Ray.Blocks.argBlockName=function(a,b){return"ray_function_"+String(a)+"_arg_"+String(b)};
Ray.Blocks.userFunctionBlockName=function(a){return Ray.Blocks.FUNCTION_DEF_PREFIX+goog.string.htmlEscape(a)};Ray.Blocks.TypeColourTable={};var baseTypes=goog.object.getKeys(Ray.Types.atomicTypes_),hueDistance=270/baseTypes.length,currentHue=0;goog.array.forEach(baseTypes,function(a){Ray.Blocks.TypeColourTable[a]=currentHue;currentHue+=hueDistance});Ray.Blocks.DEFAULT_BLOCK_COLOR={R:187,G:187,B:187};Ray.Blocks.UNKNOWN_BLOCK_COLOR={R:102,G:102,B:102};
Ray.Blocks.PASSING_TEST_BLOCK_COLOR={R:0,G:255,B:0};Ray.Blocks.FAILING_TEST_BLOCK_COLOR={R:255,G:0,B:0};Ray.Blocks.LIGHTEN_FACTOR=0.4;
Ray.Blocks.getColour=function(a){if(!a)return Ray.Blocks.DEFAULT_BLOCK_COLOR;var b=a.outputType_,c=Ray.Blocks.TypeColourTable[b];if(goog.isDef(c))return a=goog.color.hsvToRgb(c,Blockly.HSV_SATURATION,256*Blockly.HSV_VALUE),{R:a[0],G:a[1],B:a[2]};if("list"===b){a=Ray.Blocks.getColour(a.elementType);if(a.R)return a=goog.color.lighten([a.R,a.G,a.B],Ray.Blocks.LIGHTEN_FACTOR),{R:a[0],G:a[1],B:a[2]};throw"Element type color wasn't an R G B object";}return Ray.Types.isUnknown(a)?Ray.Blocks.UNKNOWN_BLOCK_COLOR:
Ray.Blocks.DEFAULT_BLOCK_COLOR};Ray.Blocks.getOutputType=function(a){return a.outputType_};Ray.Blocks.getInputTypes=function(a){var b=[];a.value_?(a=a.value_,a.argSpec&&(b=b.concat(Ray.Types.getAllArgumentTypes(a.argSpec.argsType)))):a.inputTypes_&&(b=b.concat(goog.array.clone(a.inputTypes_)));return b};
Ray.Blocks.getDrawers=function(a){var b=[],c=Ray.Blocks.getOutputType(a).getAllBaseTypes(),d=goog.array.flatten(goog.array.map(Ray.Blocks.getInputTypes(a),function(a){return a.getAllBaseTypes()})),e=[];goog.array.forEach(d,function(a){goog.array.contains(e,a)||e.push(a)});goog.array.forEach(e,function(a){b.push([a,Ray.Blocks.Config.INPUT_CATEGORY_NAME])});goog.array.forEach(c,function(a){b.push([a,Ray.Blocks.Config.OUTPUT_CATEGORY_NAME])});a.isUserFunction_&&b.push([Ray.Blocks.Config.USER_FUN_CATEGORY_NAME]);
a.form_&&b.push([Ray.Blocks.Config.CONTROL_CATEGORY_NAME]);a.arguments_&&b.push([Ray.Blocks.Config.ARGUMENT_CATEGORY_NAME]);if(0===b.length)throw"This block will not be in any drawers!";return b};Ray.Blocks.generateToolbox=function(a,b){a.removeCategory("all");b||a.removeCategory("arguments");return a};Ray.Blocks.addToBlockDirectory=function(a,b,c){c=Ray.Blocks.getDrawers(c);goog.array.forEach(c,function(c){a.addItemAt(c,b)});a.addItemAt([Ray.Blocks.Config.ALL_CATEGORY_NAME],b);return a};
Ray.Blocks.emptyBlockDirectory=function(){var a=new Ray.Blocks.CategoryTree,b=goog.array.map(Ray.Types.getBaseTypes(),function(a){return a.key()});goog.array.forEach(b,function(b){a.addItemAt([b,Ray.Blocks.Config.INPUT_CATEGORY_NAME],void 0);a.addItemAt([b,Ray.Blocks.Config.OUTPUT_CATEGORY_NAME],void 0)});a.addItemAt([Ray.Blocks.Config.CONTROL_CATEGORY_NAME],void 0);a.addItemAt([Ray.Blocks.Config.USER_FUN_CATEGORY_NAME],void 0);a.addItemAt([Ray.Blocks.Config.ARGUMENT_CATEGORY_NAME],void 0);a.addItemAt([Ray.Blocks.Config.ALL_CATEGORY_NAME],
void 0);return a};Ray.Blocks.generateBlockDirectory=function(a){var b=Ray.Blocks.emptyBlockDirectory(),c={};goog.array.forEach(a,function(a){c[a.externalName_]=a});a=goog.array.filter(goog.object.getKeys(c),function(a){var b=0===a.indexOf(Ray.Blocks.CONDITIONAL_PREFIX+"cond_");a=0===a.indexOf(Ray.Blocks.REST_ARG_PREFIX);return!(b||a)});goog.array.forEach(a,function(a){Ray.Blocks.addToBlockDirectory(b,a,c[a])});return b};
Ray.Blocks.typeNameBlock=function(a){var b={};b.colourType_=a;b.preInit_=function(){this.outputConnection&&(this.outputConnection.dispose(),this.outputConnection=null)};b.init=function(){this.appendDummyInput().appendTitle(a.key())};return b};
Ray.Blocks.exampleBlock=function(){var a={};a.name_=Ray.Blocks.EXAMPLE_BLOCK_NAME;a.externalName_=Ray.Blocks.EXAMPLE_BLOCK_NAME;a.renderAsExpression_=!0;a.type=Ray.Blocks.EXAMPLE_BLOCK_NAME;a.blockClass_=Ray.Globals.Blocks.Example;a.preInit_=function(){this.outputConnection&&(this.outputConnection.dispose(),this.outputConnection=null)};a.updateColourFromTestResult=function(a){this.setColour(a?Ray.Blocks.PASSING_TEST_BLOCK_COLOR:Ray.Blocks.FAILING_TEST_BLOCK_COLOR)};a.getExpr=function(){return this.getInputTargetBlock(Ray.Blocks.EXAMPLE_BLOCK_EXPR_INPUT)};
a.getResult=function(){return this.getInputTargetBlock(Ray.Blocks.EXAMPLE_BLOCK_RESULT_INPUT)};a.init=function(){this.appendDummyInput().appendTitle("example:");this.appendValueWithType(Ray.Blocks.EXAMPLE_BLOCK_EXPR_INPUT,new Ray.Types.Unknown);this.appendDummyInput().appendTitle("evaluates to");this.appendValueWithType(Ray.Blocks.EXAMPLE_BLOCK_RESULT_INPUT,new Ray.Types.Unknown)};return a};Ray.Blocks.UserFun={};
Ray.Blocks.UserFun.ArgumentBlock=function(a,b,c,d){this.helpUrl=Ray.Blocks.HELP_URL;this.value_=null;this.name_=a;this.funId_=c;this.argIx_=d;this.externalName_=Ray.Blocks.argBlockName(c,d);this.outputType_=b;this.renderAsExpression_=this.arguments_=!0;this.blockClass_=Blocks.Argument;this.priority_=Priorities.ARGUMENT;this.preInit_=function(){this.setOutputType(this.outputType_);this.Blockly.Ray_.Shared.addArgToDB(this)};this.postDispose_=function(){this.Blockly.Ray_.Shared.removeArgFromDB(this)};this.init=
function(){this.makeTitleRow(this.name_)}};Ray.Blocks.UserFun.generateArgBlocks=function(a,b){var c=[],d=0;goog.array.forEach(a,function(a){c.push(new Ray.Blocks.UserFun.ArgumentBlock(a.getName(),a.getType(),b,d++))});return c};
var UserFunctionBlock=function(a,b,c){this.name_=a;this.externalName_=Ray.Blocks.userFunctionBlockName(String(c));this.funId_=c;this.value_=b;this.outputType_=b.bodyType;this.blockClass_=Blocks.App;this.renderAsExpression_=!0;this.priority_=b.priority_||null;this.isUserFunction_=!0};
Ray.Blocks.UserFun.generateAppBlock=function(a,b,c){block=new UserFunctionBlock(a,b,c);block.preInit_=function(){this.setOutputType(this.outputType_);this.Blockly.Ray_.Shared.addAppToDB(this)};block.postDispose_=function(){this.Blockly.Ray_.Shared.removeAppFromDB(this)};block.init=function(){this.makeTitleRow(this.name_);for(var a=this.value_.argSpec,b=a.positionalArgs.length,c=0;c<b;c++)this.appendValueWithType("P_ARG"+String(c),a.argsType.positionalArgTypes.list[c])};return block};var Blocks=Ray.Globals.Blocks,Priorities=Ray.Globals.Priorities,RT=Ray.Runtime;Ray.Blocks.condTestBodyBlockName="ray_conditional_cond_test_body";Ray.Blocks.condElseBlockName="ray_conditional_cond_else";var RestArgContainerBlock=function(){this.restArgContainer_=!0;this.renderAsExpression_=!1},RestArgBlock=function(){this.isRestArg_=!0;this.renderAsExpression_=!1};Ray.Blocks.restArgArgBlockName="ray_rest_arg_arg_";Ray.Blocks.restArgArgBlock=new RestArgBlock;
Ray.Blocks.restArgArgBlock.init=function(){this.setColour(Ray.Blocks.DEFAULT_BLOCK_COLOR);this.appendDummyInput().appendTitle("arg")};Ray.Blocks.restArgArgBlock.externalName_=Ray.Blocks.restArgArgBlockName;Ray.Blocks.generateAllBlocks=function(){var a=Ray.Blocks.definePrimitiveDataBlocks(),b=Ray.Blocks.defineListBlocks(),c=Ray.Blocks.defineConditionalBlocks(),d=Ray.Blocks.defineRemainingBuiltinBlocks([]);return goog.array.concat(a,b,c,d)};
Ray.Blocks.defineListBlocks=function(){var a=[],b=function(b,d){this.helpUrl=Ray.Blocks.HELP_URL;this.value_=RT.builtins.lookup(b);this.outputType_=d;this.name_=b;this.externalName_=Ray.Blocks.blockName(b);this.blockClass_=Blocks[goog.string.toTitleCase(b)];this.renderAsExpression_=!0;a.push(this)};(new b("cons",new Ray.Types.List(new Ray.Types.Unknown))).init=function(){this.makeTitleRow("cons");this.appendValueWithType("car",new Ray.Types.Unknown);this.appendValueWithType("cdr",new Ray.Types.List(new Ray.Types.Unknown))};
(new b("empty",new Ray.Types.List(new Ray.Types.Unknown))).init=function(){this.makeTitleRow("empty")};(new b("first",new Ray.Types.Unknown)).init=function(){this.makeTitleRow("first");this.appendValueWithType("x",new Ray.Types.List(new Ray.Types.Unknown))};(new b("rest",new Ray.Types.List(new Ray.Types.Unknown))).init=function(){this.makeTitleRow("rest");this.appendValueWithType("x",new Ray.Types.List(new Ray.Types.Unknown))};b=new b("list",new Ray.Types.List(new Ray.Types.Unknown));b.init=function(){this.makeTitleRow("list")};
a.push(Ray.Blocks.makeRestArg(b,"elements",new Ray.Types.Unknown));return a};
Ray.Blocks.defineConditionalBlocks=function(){function a(a,c){this.helpUrl=Ray.Blocks.HELP_URL;this.name_=this.form_=a;this.externalName_=Ray.Blocks.conditionalBlockName(a);this.outputType_=c;this.blockClass_=Blocks[goog.string.toTitleCase(a)];this.renderAsExpression_=!0;b.push(this)}var b=[],c=new a("if",new Ray.Types.Unknown);c.__expr__=Expressions.If;c.inputTypes_=[new Ray.Types.Unknown,new Ray.Types.Boolean];c.init=function(){this.appendValueInput("PRED").appendTitle("if").setType(new Ray.Types.Boolean);this.appendValueInput("THEN_EXPR").appendTitle("then").setType(new Ray.Types.Unknown);
this.appendValueInput("ELSE_EXPR").appendTitle("else").setType(new Ray.Types.Unknown)};c=new a("and",new Ray.Types.Boolean);c.inputTypes_=[new Ray.Types.Boolean];c.init=function(){this.makeTitleRow("and")};b.push(Ray.Blocks.makeRestArg(c,"and",new Ray.Types.Boolean));c=new a("or",new Ray.Types.Boolean);c.inputTypes_=[new Ray.Types.Boolean];c.init=function(){this.makeTitleRow("or")};b.push(Ray.Blocks.makeRestArg(c,"or",new Ray.Types.Boolean));var d=new a("cond",new Ray.Types.Unknown);d.inputTypes_=
[new Ray.Types.Unknown,new Ray.Types.Boolean];d.mutatorBlockTypes_={TEST_BODY:1,ELSE:2};d.init=function(){this.makeTitleRow("cond");this.appendValueInput("CONDITION").appendTitle("when").setType(new Ray.Types.Boolean);this.appendValueWithType("BODY",new Ray.Types.Unknown);this.setMutator(new this.Blockly.Mutator([Ray.Blocks.condTestBodyBlockName,Ray.Blocks.condElseBlockName]));this.testClauseCount_=0;this.elseClause_=!1};d.mutationToDom=function(a){a=document.createElement("mutation");a.setAttribute("testClauses",
String(this.testClauseCount_));a.setAttribute("elseClause",String(this.elseClause_?1:0));return a};d.domToMutation=function(a){for(var b=0;b<this.testClauseCount_;b++)this.removeInput("CONDITION"+String(b)),this.removeInput("BODY"+String(b));this.elseClause_&&this.removeInput("ELSE");this.testClauseCount_=window.parseInt(a.getAttribute("testClauses"));for(b=0;b<this.testClauseCount_;b++)this.appendValueInput("CONDITION"+String(b)).appendTitle("when").setType(new Ray.Types.Boolean),this.appendValueInput("BODY"+
String(b)).setType(new Ray.Types.Unknown);(this.elseClause_=Boolean(window.parseInt(a.getAttribute("elseClause"))))&&this.appendValueInput("ELSE").appendTitle("otherwise").setType(new Ray.Types.Unknown)};d.decompose=function(a){var b=new this.Blockly.Block(a,this.condCondBlockProto);b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.testClauseCount_;d++){var l=this.getInput("CONDITION"+String(d)).connection,m=this.getInput("BODY"+String(d)).connection,p=new this.Blockly.Block(a,this.testBodyBlockProto);
p.initSvg();p.conditionConnection_=l.targetConnection;p.bodyConnection_=m.targetConnection;c.connect(p.previousConnection);c=p.nextConnection}this.elseClause_&&(d=this.getInput("ELSE").connection,a=new this.Blockly.Block(a,this.elseBlockProto),a.initSvg(),a.elseConnection_=d.targetConnection,c.connect(a.previousConnection));return b};d.compose=function(a){this.elseClause_&&(this.elseClause_=!1,this.removeInput("ELSE"));for(var b=this.testClauseCount_-1;0<=b;b--)this.testClauseCount_--,this.removeInput("CONDITION"+
String(b)),this.removeInput("BODY"+String(b));for(a=a.getInputTargetBlock("STACK");a;){switch(a.mutatorBlockType_){case d.mutatorBlockTypes_.TEST_BODY:b=this.appendValueInput("CONDITION"+String(this.testClauseCount_)).appendTitle("when").setType(new Ray.Types.Boolean);a.conditionConnection_&&b.connection.connect(a.conditionConnection_);b=this.appendValueInput("BODY"+String(this.testClauseCount_)).setType(new Ray.Types.Unknown);a.bodyConnection_&&b.connection.connect(a.bodyConnection_);this.testClauseCount_++;
break;case d.mutatorBlockTypes_.ELSE:this.elseClause_=!0;b=this.appendValueInput("ELSE").appendTitle("otherwise").setType(new Ray.Types.Unknown);a.elseConnection_&&b.connection.connect(a.elseConnection_);break;default:throw"Unknown block type inside ray_conditional_cond_cond!";}a=a.nextConnection&&a.nextConnection.targetBlock()}Ray.Blocks.TypeChecker.typecheckBlock(this)};c=new RestArgContainerBlock;c.init=function(){this.setColour(Ray.Blocks.getColour("forms"));this.appendDummyInput().appendTitle("cond");
this.appendDummyInput().appendTitle("test/body");this.appendStatementInput("STACK");this.contextMenu=!1};d.condCondBlockProto=c;b.push(d);c=new RestArgBlock;c.mutatorBlockType_=d.mutatorBlockTypes_.TEST_BODY;c.externalName_=Ray.Blocks.condTestBodyBlockName;c.init=function(){this.setColour(Ray.Blocks.getColour("forms"));this.appendDummyInput().appendTitle("test/body")};d.testBodyBlockProto=c;b.push(c);c=new RestArgBlock;c.mutatorBlockType_=d.mutatorBlockTypes_.ELSE;c.externalName_=Ray.Blocks.condElseBlockName;
c.init=function(){this.setColour(Ray.Blocks.getColour("forms"));this.appendDummyInput().appendTitle("otherwise");this.nextConnection.dispose();this.nextConnection=null};d.elseBlockProto=c;b.push(c);return b};
Ray.Blocks.definePrimitiveDataBlocks=function(){function a(a,d){this.helpUrl=Ray.Blocks.HELP_URL;this.datatype_=d.display();this.outputType_=d;this.externalName_=Ray.Blocks.primitiveDataBlockName(d.display());this.blockClass_=a;this.renderAsExpression_=!0;this.priority_=Priorities.PRIMITIVE_DATA_VALUE;b.push(this)}var b=[];(new a(Blocks.Boolean,new Ray.Types.Boolean)).init=function(){var a=new this.Blockly.FieldDropdown([["true","TRUE"],["false","FALSE"]]);this.appendDummyInput().appendTitle(a,"B")};
(new a(Blocks.Num,new Ray.Types.Num)).init=function(){var a=new this.Blockly.FieldTextInput("0",this.Blockly.FieldTextInput.numberValidator);this.appendDummyInput().appendTitle(a,"N")};(new a(Blocks.Str,new Ray.Types.Str)).init=function(){var a=new this.Blockly.FieldTextInput("Hello, World!");this.appendDummyInput().appendTitle('"').appendTitle(a,"S").appendTitle('"')};(new a(Blocks.Char,new Ray.Types.Char)).init=function(){var a=new this.Blockly.FieldTextInput("a",function(a){return 1===a.length?
a:null});this.appendDummyInput().appendTitle("char").appendTitle(a,"C")};return b};Ray.Blocks.defineRemainingBuiltinBlocks=function(a){var b=RT.builtins.dict({});goog.object.forEach(b,function(b,d){var e=Ray.Blocks.blockName(d);Ray.Blocks.containsBlockWithName(a,e)||(e=Ray.Blocks.generateBlock(d,b),a=a.concat(e))});a.push(Ray.Blocks.restArgArgBlock);return a};Ray.Blocks.containsBlockWithName=function(a,b){return goog.array.some(a,function(a){return a.externalName_===b})};
var BuiltinBlock=function(a,b){this.name_=a;this.externalName_=Ray.Blocks.blockName(a);this.value_=b;this.outputType_=b.bodyType;this.blockClass_=Blocks.App;this.renderAsExpression_=!0;this.priority_=b.priority_||null};
Ray.Blocks.generateBlock=function(a,b){var c=[],d=null;switch(RT.nodeType(b)){case "pair":case "number":case "empty":case "boolean":case "str":case "char":break;case "primitive":case "closure":var e=b.argSpec,f=e.positionalArgs.length,g=e.restArg||null,k=goog.isDef(b.display_name_)?goog.string.unescapeEntities(b.display_name_):a,d=new BuiltinBlock(a,b);d.init=function(){this.makeTitleRow(k);for(var a=0;a<f;a++)this.appendValueWithType(e.positionalArgs[a],e.argsType.positionalArgTypes.list[a])};g&&
c.push(Ray.Blocks.makeRestArg(d,g,e.argsType.restArgType.elementType));break;default:throw new Ray.Error("Unknown value, can't create block!");}d&&c.push(d);return c};
Ray.Blocks.makeRestArg=function(a,b,c){var d=new RestArgContainerBlock;d.externalName_=Ray.Blocks.restArgBlockName(a.name_);d.colourType_=Ray.Blocks.DEFAULT_BLOCK_COLOR;d.init=function(){this.appendDummyInput().appendTitle(b);this.appendStatementInput("STACK");this.contextMenu=!1};a.decompose=function(a){var b=new this.Blockly.Block(a,d);b.initSvg();if(b.getInput("STACK"))for(var c=b.getInput("STACK").connection,k=0;k<this.restArgCount_;k++){var l=new this.Blockly.Block(a,Ray.Blocks.restArgArgBlock);
l.initSvg();c.connect(l.previousConnection);c=l.nextConnection}return b};a.compose=function(a){var b=0;for(a=a.getInputTargetBlock("STACK");a;)b++,a=a.nextConnection&&a.nextConnection.targetBlock();a=this.restArgCount_;if(b<a)for(;this.restArgCount_>b;)this.restArgCount_--,this.removeInput("REST_ARG"+String(this.restArgCount_));else if(b>a)for(;this.restArgCount_<b;)this.appendValueWithType("REST_ARG"+String(this.restArgCount_),c),this.restArgCount_++;Ray.Blocks.TypeChecker.typecheckBlock(this)};
a.mutationToDom=function(a){a=document.createElement("mutation");a.setAttribute("rest_args",String(this.restArgCount_));return a};a.domToMutation=function(a){for(var b=0;b<this.restArgCount_;b++)this.removeInput("REST_ARG"+String(b));this.restArgCount_=window.parseInt(a.getAttribute("rest_args"),10);for(b=0;b<this.restArgCount_;b++)this.appendValueWithType("REST_ARG"+String(b),c)};a.originalInit_=a.init;a.init=function(){this.originalInit_();this.appendValueWithType("REST_ARG0",c);this.appendValueWithType("REST_ARG1",
c);this.setMutator(new this.Blockly.Mutator([Ray.Blocks.restArgArgBlockName]));this.restArgCount_=2};return d};var jsnums=Ray.JSNumbers;
Ray.Numbers=function(){var a={},b=jsnums.isReal,c=jsnums.isRational,d=jsnums.isSchemeNumber,e=jsnums.isInteger,f=function(a){return jsnums.isExact(a)&&e(a)&&jsnums.greaterThanOrEqual(a,0)},g={}.hasOwnProperty,k;for(k in jsnums)g.call(jsnums,k)&&(a[k]=jsnums[k]);a.isNumber=jsnums.isSchemeNumber;a.isReal=b;a.isRational=c;a.isComplex=d;a.isInteger=e;a.isNatural=f;a.isByte=function(a){return f(a)&&jsnums.lessThan(a,256)};a.isNonNegativeReal=function(a){return b(a)&&jsnums.greaterThanOrEqual(a,0)};a.sign=
function(a){return jsnums.isInexact(a)?jsnums.greaterThan(a,0)?jsnums.makeFloat(1):jsnums.lessThan(a,0)?jsnums.makeFloat(-1):jsnums.makeFloat(0):jsnums.greaterThan(a,0)?1:jsnums.lessThan(a,0)?-1:0};return a}();Ray.Generator={};Values=Ray.Globals.Values;RT=Ray.Runtime;Ray.Generator.getArgument=function(a,b){var c=a.getInputTargetBlock(b);if(c)return Ray.Generator.generate(c);throw"Missing argument!";};
Ray.Generator.fromForm=function(a){var b=[],c;switch(a.form_){case "and":for(c=0;c<a.restArgCount_;c++)b.push(Ray.Generator.getArgument(a,"REST_ARG"+String(c)));return RT.and.apply(null,b);case "or":for(c=0;c<a.restArgCount_;c++)b.push(Ray.Generator.getArgument(a,"REST_ARG"+String(c)));return RT.or.apply(null,b);case "if":return b=Ray.Generator.getArgument(a,"PRED"),c=Ray.Generator.getArgument(a,"THEN_EXPR"),a=Ray.Generator.getArgument(a,"ELSE_EXPR"),RT._if(b,c,a);case "cond":for(c=0;c<=a.testClauseCount_;c++){var d=
Ray.Generator.getArgument(a,"CONDITION"+String(c)),e=Ray.Generator.getArgument(a,"BODY"+String(c));b.push([d,e])}return this.elseClause_?(a=Ray.Generator.getArgument(a,"ELSE"),RT.cond(b,a)):RT.cond(b);default:throw"Unknown form!";}};
Ray.Generator.fromValue=function(a){var b=a.value_;if(RT.valueType(b)===Values.Empty)return RT.empty();if(RT.valueType(b)===Values.Primitive||RT.valueType(b)===Values.Closure){for(var b=b.argSpec,c=[],d=0;d<b.positionalArgs.length;d++)c.push(Ray.Generator.getArgument(a,b.positionalArgs[d]));if(b.restArg&&a.restArgCount_)for(d=0;d<a.restArgCount_;d++)c.push(Ray.Generator.getArgument(a,"REST_ARG"+String(d)));return RT.app(RT.name(a.name_),RT.positionalArgs.apply(null,c))}throw"Unknown value type for block";
};Ray.Generator.fromUserFunction=function(a){for(var b=a.value_.argSpec,c=[],d=0;d<b.positionalArgs.length;d++)c.push(Ray.Generator.getArgument(a,"P_ARG"+String(d)));if(b.restArg&&a.restArgCount_)for(d=0;d<a.restArgCount_;d++)c.push(Ray.Generator.getArgument(a,"REST_ARG"+String(d)));return RT.app(RT.name(a.name_),RT.positionalArgs.apply(null,c))};
Ray.Generator.fromDatatype=function(a){switch(a.blockClass_){case Ray.Globals.Blocks.Boolean:return a=a.getTitleValue("B"),RT.bool("TRUE"===a);case Ray.Globals.Blocks.Num:return a=a.getTitleValue("N"),RT.num(Ray.Numbers.fromString(a));case Ray.Globals.Blocks.Str:return a=a.getTitleValue("S"),RT.str(a);case Ray.Globals.Blocks.Char:return a=a.getTitleValue("C"),RT._char(a);default:throw"Unknown datatype!";}};Ray.Generator.fromArgument=function(a){return RT.name(a.name_)};
Ray.Generator.generate=function(a){if(a.isUserFunction_)return Ray.Generator.fromUserFunction(a);if(a.value_)return Ray.Generator.fromValue(a);if(a.form_)return Ray.Generator.fromForm(a);if(a.datatype_)return Ray.Generator.fromDatatype(a);if(a.arguments_)return Ray.Generator.fromArgument(a);throw"Unknown type of block! Can't generate!";};Ray.Evaluation={};Ray.Evaluation.getTests=function(a){a=a.mainWorkspace.getTopBlocks(!1);return goog.array.filter(a,Ray.Evaluation.isExampleBlock)};Ray.Evaluation.getFunBodyBlock=function(a){a=a.mainWorkspace.getTopBlocks(!1);a=goog.array.filter(a,function(a){return!Ray.Evaluation.isExampleBlock(a)});if(1<a.length)throw"Only one expression can be present at the top-level in a function definition workspace";return a[0]};Ray.Evaluation.blockToCode=function(a){return Ray.Generator.generate(a)};
Ray.Evaluation.evaluateCode=function(a){return Ray.Runtime.eval(a)};Ray.Evaluation.formatResult=function(a){return Ray.Runtime.display(a)};Ray.Evaluation.evaluateBlockAndFormat=function(a){a=Ray.Evaluation.blockToCode(a);a=Ray.Evaluation.evaluateCode(a);return Ray.Evaluation.formatResult(a)};Ray.Evaluation.getMainExpressionBlock=function(){var a=Ray.Shared.MainBlockly.mainWorkspace.getTopBlocks(!1);if(1<a.length||0===a.length)throw"Expecting exactly one expression at the top-level";return a[0]};
Ray.Evaluation.hasSingleMainExpressionBlock=function(){return 1===Ray.Shared.MainBlockly.mainWorkspace.getTopBlocks(!1).length};
Ray.Evaluation.checkAllAndEval=function(a){goog.array.forEach(Ray.Shared.FunDefBlocklys,Ray.Evaluation.bindFunDefBlockly);goog.array.forEach(Ray.Shared.FunDefBlocklys,Ray.Evaluation.runTests);a.enterHaltMode();var b=null;try{var c=Ray.Evaluation.getMainExpressionBlock(),d=Ray.Evaluation.blockToCode(c),b=Ray.Evaluation.evaluateCode(d);b.error_=!1}catch(e){b=e,b.error_=!0}a.exitHaltMode();return b};
Ray.Evaluation.checkFunTab=function(a,b){goog.array.forEach(Ray.Shared.FunDefBlocklys,Ray.Evaluation.bindFunDefBlockly);a.enterHaltMode();Ray.Evaluation.runTests(b);a.exitHaltMode()};
Ray.Evaluation.createFunArgSpec=function(a,b){var c=goog.isDef(b)?b:!1,d=goog.array.map(a.args,function(a){return a.getType()}),e=goog.array.map(a.args,function(a){return a.getName()}),d=new Ray.Types.ArgumentsType(new Ray.Types.ListOfTypes(d),null);return c?new Ray.Runtime.Value.ArgumentSpec(e,{},null,d):new Ray.Runtime.Expr.ArgumentSpec(e,{},null,d)};
Ray.Evaluation.bindFunDefBlockly=function(a){var b=Ray.Evaluation.getFunBodyBlock(a),b=Ray.Evaluation.blockToCode(b),c=Ray.Evaluation.createFunArgSpec(a.funSpec,!1),b=Ray.Runtime.Expr.Lambda(c,b,a.funSpec.returnType);Ray.Runtime.bindTopLevel(a.funSpec.name,b)};
Ray.Evaluation.runTests=function(a){a.allTestsPassed=null;var b=Ray.Evaluation.getTests(a),c=[];goog.array.forEach(b,function(b){b=Ray.Evaluation.runTest(b);goog.isNull(a.allTestsPassed)?a.allTestsPassed=b:a.allTestsPassed=a.allTestsPassed&&b;c.push(b)});a.funDefTab.animateColorFromTestResults(a.allTestsPassed);return c};
Ray.Evaluation.runTest=function(a){var b=a.getExpr();if(!b||Ray.Evaluation.hasHoles(b))return!1;var b=Ray.Evaluation.blockToCode(b),b=Ray.Runtime.eval(b),c=a.getResult();if(!c||Ray.Evaluation.hasHoles(c))return!1;c=Ray.Evaluation.blockToCode(c);c=Ray.Runtime.eval(c);b=Ray.Runtime.equals(b,c);console.log("Test "+(b?"passed":"failed")+"!");a.updateColourFromTestResult(b);var c=function(a){console.log(a);this.colourHue_=void 0;this.updateColour();this.handler.removeAll()},d=[a.Blockly.Block.EventType.SUBBLOCK_ADDED,
a.Blockly.Block.EventType.SUBBLOCK_REMOVED,a.Blockly.Block.EventType.PARENT_BLOCK_CHANGED,a.Blockly.Block.EventType.BLOCK_DISPOSED];a.handler.listen(Ray.Evaluation.getFunBodyBlock(a.Blockly),d,c);a.handler.listen(a,[a.Blockly.Block.EventType.SUBBLOCK_ADDED,a.Blockly.Block.EventType.SUBBLOCK_REMOVED],c);return b};Ray.Evaluation.isExampleBlock=function(a){return a.name_===Ray.Blocks.EXAMPLE_BLOCK_NAME};
Ray.Evaluation.hasFunBodyBlock=function(a){var b=a.mainWorkspace.getTopBlocks(!1),b=goog.array.filter(b,function(a){return!Ray.Evaluation.isExampleBlock(a)});if(1<b.length||0===b.length)return!1;b=b.shift();return Ray.Types.areMatchingTypes(a.funSpec.returnType,b.getOutputType())};
Ray.Evaluation.hasHoles=function(a){var b=a.getConnections_(!0);for(a.outputConnection&&goog.array.remove(b,a.outputConnection);0<b.length;){a=b.shift();if(!a.isConnected())return!0;a=a.getConnectedBlock();var c=a.getConnections_(!0);goog.array.remove(c,a.outputConnection);b=b.concat(c)}return!1};
Ray.Evaluation.isIncompleteFunctionDefinition=function(a){return Ray.Evaluation.hasFunBodyBlock(a)?Ray.Evaluation.hasHoles(Ray.Evaluation.getFunBodyBlock(a))?"The function body is not fully filled in yet.":!1:"There must be exactly one non-example block (of the correct type) for the function body."};Ray.UserFun={};Ray.UserFun.makeFunArgBlocks=function(a,b){return Ray.Blocks.UserFun.generateArgBlocks(a,b)};Ray.UserFun.makeFunAppBlock=function(a,b,c,d){b=new Ray.Runtime.Value.Closure(c,null,null,b);return Ray.Blocks.UserFun.generateAppBlock(a,b,d)};Ray.UserFun.makeFunAppAndArgBlocks=function(a){var b=Ray.Evaluation.createFunArgSpec(a,!0),c=Ray.UserFun.makeFunArgBlocks(a.args,a.funId);a=Ray.UserFun.makeFunAppBlock(a.name,a.returnType,b,a.funId);return{args:c,app:a}};
Ray.UserFun.funSpecToXml=function(a){var b=goog.dom.createDom("user_function_specification");goog.dom.xml.setAttributes(b,{fun_id:a.funId});var c=goog.dom.createDom("name");goog.dom.appendChild(c,goog.dom.createTextNode(a.funSpec.name));goog.dom.appendChild(b,c);c=goog.dom.createDom("description");goog.dom.appendChild(c,goog.dom.createTextNode(a.funSpec.desc));goog.dom.appendChild(b,c);goog.array.forEach(a.funSpec.args,function(a){var c=goog.dom.createDom("arg");a={name:a.getName(),type:a.getType().display()};
goog.dom.xml.setAttributes(c,a);goog.dom.appendChild(b,c)},this);c=goog.dom.createDom("return_type");goog.dom.xml.setAttributes(c,{type:a.funSpec.returnType.display()});goog.dom.appendChild(b,c);return b};
Ray.UserFun.xmlToFunSpec=function(a){if("user_function_specification"!==a.tagName)throw"Unknown tag!";a=goog.array.toArray(goog.dom.getChildren(a));for(var b=null,c=null,d=null,e=[],f;f=a.shift();)switch(f.tagName){case "name":b=goog.dom.getTextContent(f);break;case "description":c=goog.dom.getTextContent(f);break;case "arg":var g=f.getAttribute("name");f=f.getAttribute("type");f=Ray.Types.textToType(f);g=new Ray.UI.Arg(g,f);e.push(g);break;case "return_type":d=f.getAttribute("type");d=Ray.Types.textToType(d);
break;default:throw"Unknown tag";}if(!b||!c||!d)throw"Missing name, desc, or return type";return{name:b,desc:c,args:e,returnType:d}};Ray.Shared={};
Ray.Shared.serialize=function(){console.log("Serializing!");var a=goog.dom.createDom("xml"),b=Blockly.Xml.workspaceToDom(Ray.Shared.MainBlockly.mainWorkspace);goog.dom.xml.setAttributes(b,{kind:"main"});goog.dom.appendChild(a,b);goog.array.forEach(Ray.Shared.FunDefBlocklys,function(b){var d=goog.dom.createDom("user_function"),e=Ray.UserFun.funSpecToXml(b);goog.dom.appendChild(d,e);e=b.Xml.workspaceToDom(b.mainWorkspace);goog.dom.xml.setAttributes(e,{kind:"user_function",fun_id:String(b.funId)});goog.dom.appendChild(d,
e);goog.dom.appendChild(a,d)},this);console.log(a);return a};Ray.Shared.saveBlockXml=function(a){var b=Blockly.Xml.blockToDom_(a);a=a.getRelativeToSurfaceXY();b.setAttribute("x",a.x);b.setAttribute("y",a.y);Ray.Shared.savedBlockXml_=b};Ray.Shared.loadBlockXml=function(a,b){var c=Ray.Shared.savedBlockXml_,d=a.Xml.domToBlock_(b,c),e=parseInt(c.getAttribute("x"),10),c=parseInt(c.getAttribute("y"),10);!isNaN(e)&&!isNaN(c)&&d.moveBy(e,c);d.Blockly=a;return d};Ray.Shared.counter=0;
Ray.Shared.attachToBlockly=function(a){a.Ray_=Ray;a.id_=Ray.Shared.counter++};Ray.Shared.setMainBlockly=function(a){Ray.Shared.MainBlockly=a};Ray.Shared.FunDefBlocklys=[];Ray.Shared.registerFunDefBlockly=function(a){Ray.Shared.FunDefBlocklys.push(a)};Ray.Shared.lookupFunDefBlockly=function(a){return goog.array.find(Ray.Shared.FunDefBlocklys,function(b){return b.funId===a})};Ray.Shared.setBlocks=function(a){Ray.Shared.savedBlocks_=a;Ray.Shared.blockDirectory_=Ray.Blocks.generateBlockDirectory(a)};
Ray.Shared.getSavedBlock=function(a){return goog.array.find(Ray.Shared.savedBlocks_,function(b){return b.externalName_===a})};Ray.Shared.getToolbox=function(a){return Ray.Blocks.generateToolbox(Ray.Shared.blockDirectory_,a)};Ray.Shared.addToSavedBlocks=function(a){if(Ray.Shared.getSavedBlock(a.externalName_))throw"Would overwrite pre-existing block!";Ray.Shared.savedBlocks_.push(a)};
Ray.Shared.removeFromSavedBlocks=function(a){var b=goog.array.findIndex(Ray.Shared.savedBlocks_,function(b){return b.funId_===a});if(-1===b)throw"Block with funId not found in Ray.Shared.savedBlocks_";goog.array.removeAt(Ray.Shared.savedBlocks_,b)};Ray.Shared.lookupInBlockDirectory=function(a,b){return b.getItems(a)};Ray.Shared.lookupInSharedBlockDirectory_=function(a){if(a=Ray.Shared.lookupInBlockDirectory(a,Ray.Shared.blockDirectory_))return a;throw"Unknown category!";};
Ray.Shared.flyoutCategory=function(a,b,c,d,e,f){var g=[];if(f.funDef){var k=Ray.Blocks.generateBlockDirectory(f.funArgBlockProtos);(k=Ray.Shared.lookupInBlockDirectory(a,k))&&(g=g.concat(k))}Ray.Shared.blockDirectory_=Ray.Blocks.generateBlockDirectory(Ray.Shared.savedBlocks_);(a=Ray.Shared.lookupInSharedBlockDirectory_(a))&&(g=g.concat(a));0!==g.length&&(goog.array.stableSort(g,function(a,b){var c=Ray.Shared.getBlockPrototype(f,a),d=Ray.Shared.getBlockPrototype(f,b);return Ray.Shared.precedesOtherBlock_(c,
d)}),goog.array.forEach(g,function(a){a=new f.Block(e,a);a.initSvg();b.push(a);c.push(2*d)}))};Ray.Shared.precedesOtherBlock_=function(a,b){var c=b.priority_,d=goog.isNumber(a.priority_),c=goog.isNumber(c);return d&&c?a.priority_-b.priority_:d?-1:c?1:0};Ray.Shared.conflictingFunctionName=function(a){var b=goog.array.map(Ray.Shared.FunDefBlocklys,function(a){return a.funSpec.name}),c=function(b){return a===b};return goog.array.find(b,c)||goog.array.find(Ray.Runtime.getAllBoundIdentifiers(),c)};
Ray.Shared.funBlockInstanceDB={};Ray.Shared.addArgToDB=function(a){var b=a.funId_;goog.isDef(Ray.Shared.funBlockInstanceDB[b])||(Ray.Shared.funBlockInstanceDB[b]={app:[],args:{}});b=Ray.Shared.funBlockInstanceDB[b];goog.isDef(b.args[String(a.argIx_)])||(b.args[String(a.argIx_)]=[]);b.args[String(a.argIx_)].push(a)};Ray.Shared.addAppToDB=function(a){var b=a.funId_;goog.isDef(Ray.Shared.funBlockInstanceDB[b])||(Ray.Shared.funBlockInstanceDB[b]={app:[],args:[]});Ray.Shared.funBlockInstanceDB[b].app.push(a)};
Ray.Shared.getInstanceDBForFunId=function(a){return Ray.Shared.funBlockInstanceDB[a]||null};Ray.Shared.removeArgFromDB=function(a){goog.array.remove(Ray.Shared.funBlockInstanceDB[a.funId_].args[String(a.argIx_)],a)};Ray.Shared.removeAppFromDB=function(a){goog.array.remove(Ray.Shared.funBlockInstanceDB[a.funId_].app,a)};
Ray.Shared.applyFunDefChanges=function(a,b){var c=Ray.Shared.lookupFunDefBlockly(a),d=c.funAppBlockProto,e=c.funSpec;c.mainWorkspace.signature_.close();var f=Ray.Evaluation.createFunArgSpec(b,!0),g=new Ray.Runtime.Value.Closure(f,null,null,b.returnType);d.value_=g;goog.array.forEach(Ray.Shared.getFunAppBlocksFromDB(a),function(a){a.value_=g});e.name!==b.name&&(d.name_=b.name,Ray.Shared.updateFunAppBlockNames(a,b.name),Ray.Shared.updateFunTabName(c,b.name),console.log("Names changed!"));for(var f=
b.args,k=f.length>e.args.length,l=k?e.args.length:f.length,m=0;m<l;m++){var p=f[m],q=Ray.Shared.getArgBlockProto(c,m);q.name_=p.getName();q.outputType_=p.getType();Ray.Shared.updateFunArgBlockNameAndType(a,m,p.getName(),p.getType());Ray.Shared.updateFunAppBlockSlot(a,m,p.getType())}if(k)for(m=l;m<f.length;m++)p=f[m],q=new Ray.Blocks.UserFun.ArgumentBlock(p.getName(),p.getType(),a,m),c.funArgBlockProtos.push(q),Ray.Shared.addFunAppBlockSlot(a,m,p.getType());else for(m=l;m<e.args.length;m++)Ray.Shared.destroyFunArgGlobally(c,
a,m),Ray.Shared.removeFunAppBlockSlot(a,m);Ray.Shared.areSameTypes(e.returnType,b.returnType)||(d.outputType_=b.returnType,Ray.Shared.updateFunAppBlockOutputType(a,b.returnType));c.funSpec=b;c.mainWorkspace.signature_.open()};Ray.Shared.updateFunTabName=function(a,b){a.funDefTab.updateFunName(b)};Ray.Shared.removeFunAppBlockSlot=function(a,b){goog.array.forEach(Ray.Shared.getFunAppBlocksFromDB(a),function(a){a.removeInput("P_ARG"+String(b))})};
Ray.Shared.addFunAppBlockSlot=function(a,b,c){goog.array.forEach(Ray.Shared.getFunAppBlocksFromDB(a),function(a){a.appendValueWithType("P_ARG"+String(b),c)})};Ray.Shared.destroyFunArgGlobally=function(a,b,c){b=Ray.Shared.getFunArgBlocksFromDB(b,c);goog.array.forEach(b,function(a){a.dispose()});if(!goog.array.removeAt(a.funArgBlockProtos,c))throw"Invalid argIx!";};
Ray.Shared.destroyFunGlobally=function(a,b){for(var c=a.funSpec.length;0<=--c;)Ray.Shared.destroyFunArgGlobally(b,c);goog.array.forEach(Ray.Shared.getFunAppBlocksFromDB(b),function(a){a.dispose()});a.funArgBlockProtos=null;a.funAppBlockProto=null;a.funSpec=null;a.mainWorkspace.dispose();Ray.Shared.removeFromSavedBlocks(b);Ray.Shared.unregisterFunDefBlockly(a)};
Ray.Shared.unregisterFunDefBlockly=function(a){if(!goog.array.remove(Ray.Shared.FunDefBlocklys,a))throw"Unable to unregister FunDefBlockly!";};Ray.Shared.getArgBlockProto=function(a,b){return goog.array.find(a.funArgBlockProtos,function(a){return a.argIx_===b})};Ray.Shared.getFunAppBlocksFromDB=function(a){return Ray.Shared.getInstanceDBForFunId(a).app};Ray.Shared.getFunArgBlocksFromDB=function(a,b){return Ray.Shared.getInstanceDBForFunId(a).args[String(b)]};
Ray.Shared.updateFunAppBlockSlot=function(a,b,c){goog.array.forEach(Ray.Shared.getFunAppBlocksFromDB(a),function(a){a.getInput("P_ARG"+String(b)).setType(c);a.updateColour()})};Ray.Shared.updateFunAppBlockNames=function(a,b){goog.array.forEach(Ray.Shared.getFunAppBlocksFromDB(a),function(a){a.changeBlockTitle(b)})};Ray.Shared.updateFunAppBlockOutputType=function(a,b){goog.array.forEach(Ray.Shared.getFunAppBlocksFromDB(a),function(a){a.outputConnection.clearInferredType();a.setOutputType(b);a.updateColour()})};
Ray.Shared.updateFunArgBlockNameAndType=function(a,b,c,d){goog.array.forEach(Ray.Shared.getFunArgBlocksFromDB(a,b),function(a){a.name_=c;a.changeBlockTitle(c);a.outputConnection.clearInferredType();a.setOutputType(d);a.updateColour()})};Ray.Shared.getTypeColour=function(a){return Ray.Blocks.getColour(a)};Ray.Shared.areMatchingTypes=function(a,b){return Ray.Types.areMatchingTypes(a,b)};Ray.Shared.areSameTypes=function(a,b){return Ray.Types.areSameType(a,b)};Ray.Shared.principalType=function(a){return Ray.Types.principalType(a)};
Ray.Shared.principalType_=function(a,b){return Ray.Types.principalType_(a,b)};Ray.Shared.typecheckBlock=function(a){return Ray.Blocks.TypeChecker.typecheckBlock(a)};Ray.Shared.getBlockPrototype=function(a,b){if("example"===b)return Ray.Blocks.exampleBlock();var c=null;if(a.funDef){var d=goog.array.find(a.funArgBlockProtos,function(a){return a.externalName_===b});d&&(c=d)}c||(c=goog.array.find(Ray.Shared.savedBlocks_,function(a){return a.externalName_===b})||null);return c};(function(a,b){function c(a){var b=a.length,c=h.type(a);return h.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"===typeof b&&0<b&&b-1 in a)}function d(a){var b=qb[a]={};h.each(a.match(pa)||[],function(a,c){b[c]=!0});return b}function e(a,c,d,e){if(h.acceptData(a)){var f=h.expando,g=a.nodeType,k=g?h.cache:a,l=g?a[f]:a[f]&&f;if(l&&k[l]&&(e||k[l].data)||!(d===b&&"string"===typeof c)){l||(l=g?a[f]=G.pop()||h.guid++:f);k[l]||(k[l]=g?{}:{toJSON:h.noop});if("object"===typeof c||
"function"===typeof c)e?k[l]=h.extend(k[l],c):k[l].data=h.extend(k[l].data,c);a=k[l];e||(a.data||(a.data={}),a=a.data);d!==b&&(a[h.camelCase(c)]=d);"string"===typeof c?(d=a[c],null==d&&(d=a[h.camelCase(c)])):d=a;return d}}}function f(a,b,c){if(h.acceptData(a)){var d,e,f=a.nodeType,g=f?h.cache:a,l=f?a[h.expando]:h.expando;if(g[l]){if(b&&(d=c?g[l]:g[l].data)){h.isArray(b)?b=b.concat(h.map(b,h.camelCase)):b in d?b=[b]:(b=h.camelCase(b),b=b in d?[b]:b.split(" "));for(e=b.length;e--;)delete d[b[e]];if(c?
!k(d):!h.isEmptyObject(d))return}if(!c&&(delete g[l].data,!k(g[l])))return;f?h.cleanData([a],!0):h.support.deleteExpando||g!=g.window?delete g[l]:g[l]=null}}}function g(a,c,d){if(d===b&&1===a.nodeType)if(d="data-"+c.replace(Za,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:Eb.test(d)?h.parseJSON(d):d}catch(e){}h.data(a,c,d)}else d=b;return d}function k(a){for(var b in a)if(!("data"===b&&h.isEmptyObject(a[b]))&&"toJSON"!==
b)return!1;return!0}function l(){return!0}function m(){return!1}function p(){try{return A.activeElement}catch(a){}}function q(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function t(a,b,c){if(h.isFunction(b))return h.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return h.grep(a,function(a){return a===b!==c});if("string"===typeof b){if(Na.test(b))return h.filter(b,a,c);b=h.filter(b,a)}return h.grep(a,function(a){return 0<=h.inArray(a,b)!==c})}function D(a){var b=Q.split("|");a=
a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function C(a,b){return h.nodeName(a,"table")&&h.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function T(a){a.type=(null!==h.find.attr(a,"type"))+"/"+a.type;return a}function ba(a){var b=Sb.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function J(a,b){for(var c,d=0;null!=(c=a[d]);d++)h._data(c,"globalEval",
!b||h._data(b[d],"globalEval"))}function ma(a,b){if(1===b.nodeType&&h.hasData(a)){var c,d,e;d=h._data(a);var f=h._data(b,d),g=d.events;if(g)for(c in delete f.handle,f.events={},g){d=0;for(e=g[c].length;d<e;d++)h.event.add(b,c,g[c][d])}f.data&&(f.data=h.extend({},f.data))}}function ca(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==ga?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==ga?a.querySelectorAll(c||"*"):b;if(!g){g=[];for(d=a.childNodes||a;null!=(e=d[f]);f++)!c||h.nodeName(e,c)?
g.push(e):h.merge(g,ca(e,c))}return c===b||c&&h.nodeName(a,c)?h.merge([a],g):g}function va(a){B.test(a.type)&&(a.defaultChecked=a.checked)}function Xa(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=ra.length;e--;)if(b=ra[e]+c,b in a)return b;return d}function Fa(a,b){a=b||a;return"none"===h.css(a,"display")||!h.contains(a.ownerDocument,a)}function Ya(a,b){for(var c,d,e,f=[],g=0,k=a.length;g<k;g++)if(d=a[g],d.style)if(f[g]=h._data(d,"olddisplay"),c=d.style.display,b)!f[g]&&
"none"===c&&(d.style.display=""),""===d.style.display&&Fa(d)&&(f[g]=h._data(d,"olddisplay",Ca(d.nodeName)));else if(!f[g]&&(e=Fa(d),c&&"none"!==c||!e))h._data(d,"olddisplay",e?c:h.css(d,"display"));for(g=0;g<k;g++)if(d=a[g],d.style&&(!b||"none"===d.style.display||""===d.style.display))d.style.display=b?f[g]||"":"none";return a}function Da(a,b,c){return(a=Ub.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function Pa(a,b,c,d,e){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var f=0;4>b;b+=2)"margin"===
c&&(f+=h.css(a,c+wa[b],!0,e)),d?("content"===c&&(f-=h.css(a,"padding"+wa[b],!0,e)),"margin"!==c&&(f-=h.css(a,"border"+wa[b]+"Width",!0,e))):(f+=h.css(a,"padding"+wa[b],!0,e),"padding"!==c&&(f+=h.css(a,"border"+wa[b]+"Width",!0,e)));return f}function Qa(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ha(a),g=h.support.boxSizing&&"border-box"===h.css(a,"boxSizing",!1,f);if(0>=e||null==e){e=Aa(a,b,f);if(0>e||null==e)e=a.style[b];if(lb.test(e))return e;d=g&&(h.support.boxSizingReliable||
e===a.style[b]);e=parseFloat(e)||0}return e+Pa(a,b,c||(g?"border":"content"),d,f)+"px"}function Ca(a){var b=A,c=Ua[a];if(!c){c=Ra(a,b);if("none"===c||!c)Y=(Y||h("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(Y[0].contentWindow||Y[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=Ra(a,b),Y.detach();Ua[a]=c}return c}function Ra(a,b){var c=h(b.createElement(a)).appendTo(b.body),d=h.css(c[0],"display");
c.remove();return d}function u(a,b,c,d){var e;if(h.isArray(b))h.each(b,function(b,e){c||Wb.test(a)?d(a,e):u(a+"["+("object"===typeof e?b:"")+"]",e,c,d)});else if(!c&&"object"===h.type(b))for(e in b)u(a+"["+e+"]",b[e],c,d);else d(a,b)}function ka(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(pa)||[];if(h.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function na(a,b,c,d){function e(k){var l;
f[k]=!0;h.each(a[k]||[],function(a,z){var h=z(b,c,d);if("string"===typeof h&&!g&&!f[h])return b.dataTypes.unshift(h),e(h),!1;if(g)return!(l=h)});return l}var f={},g=a===Vb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function Sa(a,c){var d,e,f=h.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);d&&h.extend(!0,a,d);return a}function La(){try{return new a.XMLHttpRequest}catch(b){}}function v(){setTimeout(function(){mb=b});return mb=h.now()}function xa(a,b,c){for(var d,e=(vb[b]||
[]).concat(vb["*"]),f=0,h=e.length;f<h;f++)if(d=e[f].call(c,b,a))return d}function s(a,b,c){var d,e=0,f=Mb.length,g=h.Deferred().always(function(){delete k.elem}),k=function(){if(d)return!1;for(var b=mb||v(),b=Math.max(0,l.startTime+l.duration-b),c=1-(b/l.duration||0),e=0,f=l.tweens.length;e<f;e++)l.tweens[e].run(c);g.notifyWith(a,[l,c,b]);if(1>c&&f)return b;g.resolveWith(a,[l]);return!1},l=g.promise({elem:a,props:h.extend({},b),opts:h.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,
startTime:mb||v(),duration:c.duration,tweens:[],createTween:function(b,c){var d=h.Tween(a,l.opts,b,c,l.opts.specialEasing[b]||l.opts.easing);l.tweens.push(d);return d},stop:function(b){var c=0,e=b?l.tweens.length:0;if(d)return this;for(d=!0;c<e;c++)l.tweens[c].run(1);b?g.resolveWith(a,[l,b]):g.rejectWith(a,[l,b]);return this}});c=l.props;for(x(c,l.opts.specialEasing);e<f;e++)if(b=Mb[e].call(l,a,c,l.opts))return b;h.map(c,xa,l);h.isFunction(l.opts.start)&&l.opts.start.call(a,l);h.fx.timer(h.extend(k,
{elem:a,anim:l,queue:l.opts.queue}));return l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function x(a,b){var c,d,e,f,g;for(c in a)if(d=h.camelCase(c),e=b[d],f=a[c],h.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=h.cssHooks[d])&&"expand"in g)for(c in f=g.expand(f),delete a[d],f)c in a||(a[c]=f[c],b[c]=e);else b[d]=e}function H(a,b,c,d,e){return new H.prototype.init(a,b,c,d,e)}function K(a,b){var c,d={height:a},e=0;for(b=b?1:
0;4>e;e+=2-b)c=wa[e],d["margin"+c]=d["padding"+c]=a;b&&(d.opacity=d.width=a);return d}function M(a){return h.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var V,ea,ga=typeof b,Ja=a.location,A=a.document,ya=A.documentElement,X=a.jQuery,E=a.$,ha={},G=[],y=G.concat,P=G.push,za=G.slice,Ea=G.indexOf,Ka=ha.toString,ia=ha.hasOwnProperty,ob="1.10.1".trim,h=function(a,b){return new h.fn.init(a,b,ea)},$a=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pa=/\S+/g,zb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
Z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,aa=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,W=/^[\],:{}\s]*$/,Ab=/(?:^|:|,)(?:\s*\[)+/g,Bb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,hb=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,Cb=/^-ms-/,Db=/-([\da-z])/gi,pb=function(a,b){return b.toUpperCase()},ua=function(a){if(A.addEventListener||"load"===a.type||"complete"===A.readyState)ab(),h.ready()},ab=function(){A.addEventListener?(A.removeEventListener("DOMContentLoaded",ua,!1),a.removeEventListener("load",
ua,!1)):(A.detachEvent("onreadystatechange",ua),a.detachEvent("onload",ua))};h.fn=h.prototype={jquery:"1.10.1",constructor:h,init:function(a,c,d){var e;if(!a)return this;if("string"===typeof a){if((e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Z.exec(a))&&(e[1]||!c)){if(e[1]){if(c=c instanceof h?c[0]:c,h.merge(this,h.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:A,!0)),aa.test(e[1])&&h.isPlainObject(c))for(e in c)if(h.isFunction(this[e]))this[e](c[e]);else this.attr(e,
c[e])}else{if((c=A.getElementById(e[2]))&&c.parentNode){if(c.id!==e[2])return d.find(a);this.length=1;this[0]=c}this.context=A;this.selector=a}return this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(h.isFunction(a))return d.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return h.makeArray(a,this)},selector:"",length:0,toArray:function(){return za.call(this)},get:function(a){return null==
a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){a=h.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},each:function(a,b){return h.each(this,a,b)},ready:function(a){h.ready.promise().done(a);return this},slice:function(){return this.pushStack(za.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},map:function(a){return this.pushStack(h.map(this,
function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:P,sort:[].sort,splice:[].splice};h.fn.init.prototype=h.fn;h.extend=h.fn.extend=function(){var a,c,d,e,f,g=arguments[0]||{},k=1,l=arguments.length,m=!1;"boolean"===typeof g&&(m=g,g=arguments[1]||{},k=2);"object"!==typeof g&&!h.isFunction(g)&&(g={});l===k&&(g=this,--k);for(;k<l;k++)if(null!=(f=arguments[k]))for(e in f)a=g[e],d=f[e],g!==d&&(m&&d&&(h.isPlainObject(d)||(c=h.isArray(d)))?(c?(c=!1,
a=a&&h.isArray(a)?a:[]):a=a&&h.isPlainObject(a)?a:{},g[e]=h.extend(m,a,d)):d!==b&&(g[e]=d));return g};h.extend({expando:"jQuery"+("1.10.1"+Math.random()).replace(/\D/g,""),noConflict:function(b){a.$===h&&(a.$=E);b&&a.jQuery===h&&(a.jQuery=X);return h},isReady:!1,readyWait:1,holdReady:function(a){a?h.readyWait++:h.ready(!0)},ready:function(a){if(!(!0===a?--h.readyWait:h.isReady)){if(!A.body)return setTimeout(h.ready);h.isReady=!0;!0!==a&&0<--h.readyWait||(V.resolveWith(A,[h]),h.fn.trigger&&h(A).trigger("ready").off("ready"))}},
isFunction:function(a){return"function"===h.type(a)},isArray:Array.isArray||function(a){return"array"===h.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"===typeof a||"function"===typeof a?ha[Ka.call(a)]||"object":typeof a},isPlainObject:function(a){var c;if(!a||"object"!==h.type(a)||a.nodeType||h.isWindow(a))return!1;try{if(a.constructor&&!ia.call(a,"constructor")&&!ia.call(a.constructor.prototype,
"isPrototypeOf"))return!1}catch(d){return!1}if(h.support.ownLast)for(c in a)return ia.call(a,c);for(c in a);return c===b||ia.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||A;var d=aa.exec(a);c=!c&&[];if(d)return[b.createElement(d[1])];d=h.buildFragment([a],b,c);c&&h(c).remove();return h.merge([],d.childNodes)},parseJSON:function(b){if(a.JSON&&
a.JSON.parse)return a.JSON.parse(b);if(null===b)return b;if("string"===typeof b&&(b=h.trim(b))&&W.test(b.replace(Bb,"@").replace(hb,"]").replace(Ab,"")))return(new Function("return "+b))();h.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||"string"!==typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&
h.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&h.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(Cb,"ms-").replace(Db,pb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,h=a.length;e=c(a);if(d)if(e)for(;f<h&&!(e=b.apply(a[f],d),!1===e);f++);else for(f in a){if(e=b.apply(a[f],d),!1===e)break}else if(e)for(;f<h&&!(e=b.call(a[f],f,a[f]),!1===e);f++);
else for(f in a)if(e=b.call(a[f],f,a[f]),!1===e)break;return a},trim:ob&&!ob.call("\ufeff\u00a0")?function(a){return null==a?"":ob.call(a)}:function(a){return null==a?"":(a+"").replace(zb,"")},makeArray:function(a,b){var d=b||[];null!=a&&(c(Object(a))?h.merge(d,"string"===typeof a?[a]:a):P.call(d,a));return d},inArray:function(a,b,c){var d;if(b){if(Ea)return Ea.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,
e=a.length,f=0;if("number"===typeof d)for(;f<d;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];a.length=e;return a},grep:function(a,b,c){var d,e=[],f=0,h=a.length;for(c=!!c;f<h;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,h=a.length,g=[];if(c(a))for(;f<h;f++)e=b(a[f],f,d),null!=e&&(g[g.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(g[g.length]=e);return y.apply([],g)},guid:1,proxy:function(a,c){var d,e;"string"===typeof c&&(e=a[c],c=a,a=e);if(!h.isFunction(a))return b;
d=za.call(arguments,2);e=function(){return a.apply(c||this,d.concat(za.call(arguments)))};e.guid=a.guid=a.guid||h.guid++;return e},access:function(a,c,d,e,f,g,k){var l=0,m=a.length,x=null==d;if("object"===h.type(d))for(l in f=!0,d)h.access(a,c,l,d[l],!0,g,k);else if(e!==b&&(f=!0,h.isFunction(e)||(k=!0),x&&(k?(c.call(a,e),c=null):(x=c,c=function(a,b,c){return x.call(h(a),c)})),c))for(;l<m;l++)c(a[l],d,k?e:e.call(a[l],l,c(a[l],d)));return f?a:x?c.call(a):m?c(a[0],d):g},now:function(){return(new Date).getTime()},
swap:function(a,b,c,d){var e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];c=c.apply(a,d||[]);for(e in b)a.style[e]=f[e];return c}});h.ready.promise=function(b){if(!V)if(V=h.Deferred(),"complete"===A.readyState)setTimeout(h.ready);else if(A.addEventListener)A.addEventListener("DOMContentLoaded",ua,!1),a.addEventListener("load",ua,!1);else{A.attachEvent("onreadystatechange",ua);a.attachEvent("onload",ua);var c=!1;try{c=null==a.frameElement&&A.documentElement}catch(d){}c&&c.doScroll&&function S(){if(!h.isReady){try{c.doScroll("left")}catch(a){return setTimeout(S,
50)}ab();h.ready()}}()}return V.promise(b)};h.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){ha["[object "+b+"]"]=b.toLowerCase()});ea=h(A);(function(a,b){function c(a,b,d,e){var f,z,h,g,F;(b?b.ownerDocument||b:O)!==G&&ea(b);b=b||G;d=d||[];if(!a||"string"!==typeof a)return d;if(1!==(g=b.nodeType)&&9!==g)return[];if(ya&&!e){if(f=Ka.exec(a))if(h=f[1])if(9===g)if((z=b.getElementById(h))&&z.parentNode){if(z.id===h)return d.push(z),d}else return d;else{if(b.ownerDocument&&
(z=b.ownerDocument.getElementById(h))&&U(b,z)&&z.id===h)return d.push(z),d}else{if(f[2])return Y.apply(d,b.getElementsByTagName(a)),d;if((h=f[3])&&y.getElementsByClassName&&b.getElementsByClassName)return Y.apply(d,b.getElementsByClassName(h)),d}if(y.qsa&&(!ha||!ha.test(a))){z=f=I;h=b;F=9===g&&a;if(1===g&&"object"!==b.nodeName.toLowerCase()){g=q(a);(f=b.getAttribute("id"))?z=f.replace(Ha,"\\$&"):b.setAttribute("id",z);z="[id='"+z+"'] ";for(h=g.length;h--;)g[h]=z+K(g[h]);h=ua.test(a)&&b.parentNode||
b;F=g.join(",")}if(F)try{return Y.apply(d,h.querySelectorAll(F)),d}catch(N){}finally{f||b.removeAttribute("id")}}}var k;a:{a=a.replace(Ea,"$1");z=q(a);if(!e&&1===z.length){f=z[0]=z[0].slice(0);if(2<f.length&&"ID"===(k=f[0]).type&&y.getById&&9===b.nodeType&&ya&&v.relative[f[1].type]){b=(v.find.ID(k.matches[0].replace(la,ma),b)||[])[0];if(!b){k=d;break a}a=a.slice(f.shift().value.length)}for(g=va.needsContext.test(a)?0:f.length;g--;){k=f[g];if(v.relative[h=k.type])break;if(h=v.find[h])if(e=h(k.matches[0].replace(la,
ma),ua.test(f[0].type)&&b.parentNode||b)){f.splice(g,1);a=e.length&&K(f);if(!a){Y.apply(d,e);k=d;break a}break}}}Ja(a,z)(e,b,!ya,d,ua.test(a));k=d}return k}function d(a){return Da.test(a+"")}function e(){function a(c,d){b.push(c+=" ")>v.cacheLength&&delete a[b.shift()];return a[c]=d}var b=[];return a}function f(a){a[I]=!0;return a}function g(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function k(a,b,c){a=a.split("|");var d,
e=a.length;for(c=c?null:b;e--;)if(!(d=v.attrHandle[a[e]])||d===b)v.attrHandle[a[e]]=c}function l(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:!0===a[b]?b.toLowerCase():null}function m(a,b){return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}function x(a){if("input"===a.nodeName.toLowerCase())return a.defaultValue}function n(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||ka)-(~a.sourceIndex||ka);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?
1:-1}function s(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function H(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function p(a){return f(function(b){b=+b;return f(function(c,d){for(var e,f=a([],c.length,b),z=f.length;z--;)if(c[e=f[z]])c[e]=!(d[e]=c[e])})})}function q(a,b){var d,e,f,z,h,g,F;if(h=fa[a+" "])return b?0:h.slice(0);h=a;g=[];for(F=v.preFilter;h;){if(!d||(e=wa.exec(h)))e&&(h=h.slice(e[0].length)||h),
g.push(f=[]);d=!1;if(e=xa.exec(h))d=e.shift(),f.push({value:d,type:e[0].replace(Ea," ")}),h=h.slice(d.length);for(z in v.filter)if((e=va[z].exec(h))&&(!F[z]||(e=F[z](e))))d=e.shift(),f.push({value:d,type:z,matches:e}),h=h.slice(d.length);if(!d)break}return b?h.length:h?c.error(a):fa(a,g).slice(0)}function K(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function A(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=ca++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,
c,f)}:function(b,c,z){var h,g,F,N=Q+" "+f;if(z)for(;b=b[d];){if((1===b.nodeType||e)&&a(b,c,z))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(F=b[I]||(b[I]={}),(g=F[d])&&g[0]===N){if(!0===(h=g[1])||h===V)return!0===h}else if(g=F[d]=[N],g[1]=a(b,c,z)||V,!0===g[1])return!0}}function w(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function M(a,b,c,d,e){for(var f,z=[],h=0,g=a.length,F=null!=b;h<g;h++)if(f=a[h])if(!c||c(f,d,e))z.push(f),F&&b.push(h);
return z}function u(a,b,d,e,z,h){e&&!e[I]&&(e=u(e));z&&!z[I]&&(z=u(z,h));return f(function(f,h,g,F){var k,L,l=[],S=[],Ia=h.length,ja;if(!(ja=f)){ja=b||"*";for(var m=g.nodeType?[g]:g,fb=[],x=0,n=m.length;x<n;x++)c(ja,m[x],fb);ja=fb}ja=a&&(f||!b)?M(ja,l,a,g,F):ja;m=d?z||(f?a:Ia||e)?[]:h:ja;d&&d(ja,m,g,F);if(e){k=M(m,S);e(k,[],g,F);for(g=k.length;g--;)if(L=k[g])m[S[g]]=!(ja[S[g]]=L)}if(f){if(z||a){if(z){k=[];for(g=m.length;g--;)if(L=m[g])k.push(ja[g]=L);z(null,m=[],k,F)}for(g=m.length;g--;)if((L=m[g])&&
-1<(k=z?Z.call(f,L):l[g]))f[k]=!(h[k]=L)}}else m=M(m===h?m.splice(Ia,m.length):m),z?z(null,h,m,F):Y.apply(h,m)})}function t(a){var b,c,d,e=a.length,f=v.relative[a[0].type];c=f||v.relative[" "];for(var z=f?1:0,h=A(function(a){return a===b},c,!0),g=A(function(a){return-1<Z.call(b,a)},c,!0),F=[function(a,c,d){return!f&&(d||c!==X)||((b=c).nodeType?h(a,c,d):g(a,c,d))}];z<e;z++)if(c=v.relative[a[z].type])F=[A(w(F),c)];else{c=v.filter[a[z].type].apply(null,a[z].matches);if(c[I]){for(d=++z;d<e&&!v.relative[a[d].type];d++);
return u(1<z&&w(F),1<z&&K(a.slice(0,z-1).concat({value:" "===a[z-2].type?"*":""})).replace(Ea,"$1"),c,z<d&&t(a.slice(z,d)),d<e&&t(a=a.slice(d)),d<e&&K(a))}F.push(c)}return w(F)}function B(a,b){var d=0,e=0<b.length,z=0<a.length,h=function(f,h,g,F,k){var L,l,S=[],Ia=0,ja="0",m=f&&[],fb=null!=k,x=X,n=f||z&&v.find.TAG("*",k&&h.parentNode||h),s=Q+=null==x?1:Math.random()||0.1;fb&&(X=h!==G&&h,V=d);for(;null!=(k=n[ja]);ja++){if(z&&k){for(L=0;l=a[L++];)if(l(k,h,g)){F.push(k);break}fb&&(Q=s,V=++d)}e&&((k=
!l&&k)&&Ia--,f&&m.push(k))}Ia+=ja;if(e&&ja!==Ia){for(L=0;l=b[L++];)l(m,S,h,g);if(f){if(0<Ia)for(;ja--;)!m[ja]&&!S[ja]&&(S[ja]=sa.call(F));S=M(S)}Y.apply(F,S);fb&&(!f&&0<S.length&&1<Ia+b.length)&&c.uniqueSort(F)}fb&&(Q=s,X=x);return m};return e?f(h):h}function C(){}var E,y,V,v,D,ga,Ja,X,P,ea,G,Ma,ya,ha,J,T,U,I="sizzle"+-new Date,O=a.document,Q=0,ca=0,za=e(),fa=e(),ia=e(),aa=!1,da=function(){return 0},ba=typeof b,ka=-2147483648,oa={}.hasOwnProperty,W=[],sa=W.pop,ta=W.push,Y=W.push,pa=W.slice,Z=W.indexOf||
function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},qa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),ra="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+qa+")|)|)[\\x20\\t\\r\\n\\f]*\\]",na=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ra.replace(3,8)+")*)|.*)\\)|)",Ea=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$",
"g"),wa=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,xa=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ua=/[\x20\t\r\n\f]*[+~]/,Aa=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*)[\\x20\\t\\r\\n\\f]*\\]","g"),Ba=RegExp(na),Ca=RegExp("^"+qa+"$"),va={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+ra),PSEUDO:RegExp("^"+na),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Da=/^[^{]+\{\s*\[native \w/,Ka=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Fa=/^(?:input|select|textarea|button)$/i,Ga=/^h\d$/i,Ha=/'|\\/g,la=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)",
"ig"),ma=function(a,b,c){a="0x"+b-65536;return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{Y.apply(W=pa.call(O.childNodes),O.childNodes),W[O.childNodes.length].nodeType}catch(La){Y={apply:W.length?function(a,b){ta.apply(a,pa.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}ga=c.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};y=c.support={};ea=c.setDocument=function(a){var b=
a?a.ownerDocument||a:O;a=b.parentWindow;if(b===G||9!==b.nodeType||!b.documentElement)return G;G=b;Ma=b.documentElement;ya=!ga(b);a&&a.frameElement&&a.attachEvent("onbeforeunload",function(){ea()});y.attributes=g(function(a){a.innerHTML="<a href='#'></a>";k("type|href|height|width",m,"#"===a.firstChild.getAttribute("href"));k("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",l,null==a.getAttribute("disabled"));a.className="i";
return!a.getAttribute("className")});y.input=g(function(a){a.innerHTML="<input>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")});k("value",x,y.attributes&&y.input);y.getElementsByTagName=g(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});y.getElementsByClassName=g(function(a){a.innerHTML="<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});y.getById=
g(function(a){Ma.appendChild(a).id=I;return!b.getElementsByName||!b.getElementsByName(I).length});y.getById?(v.find.ID=function(a,b){if(typeof b.getElementById!==ba&&ya){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},v.filter.ID=function(a){var b=a.replace(la,ma);return function(a){return a.getAttribute("id")===b}}):(delete v.find.ID,v.filter.ID=function(a){var b=a.replace(la,ma);return function(a){return(a=typeof a.getAttributeNode!==ba&&a.getAttributeNode("id"))&&a.value===b}});v.find.TAG=
y.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==ba)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f};v.find.CLASS=y.getElementsByClassName&&function(a,b){if(typeof b.getElementsByClassName!==ba&&ya)return b.getElementsByClassName(a)};J=[];ha=[];if(y.qsa=d(b.querySelectorAll))g(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||
ha.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||ha.push(":checked")}),g(function(a){var c=b.createElement("input");c.setAttribute("type","hidden");a.appendChild(c).setAttribute("t","");a.querySelectorAll("[t^='']").length&&ha.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll(":enabled").length||ha.push(":enabled",":disabled");
a.querySelectorAll("*,:x");ha.push(",.*:")});(y.matchesSelector=d(T=Ma.webkitMatchesSelector||Ma.mozMatchesSelector||Ma.oMatchesSelector||Ma.msMatchesSelector))&&g(function(a){y.disconnectedMatch=T.call(a,"div");T.call(a,"[s!='']:x");J.push("!=",na)});ha=ha.length&&RegExp(ha.join("|"));J=J.length&&RegExp(J.join("|"));U=d(Ma.contains)||Ma.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||!(1===d.nodeType&&(c.contains?c.contains(d):
a.compareDocumentPosition&&a.compareDocumentPosition(d)&16)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};y.sortDetached=g(function(a){return a.compareDocumentPosition(b.createElement("div"))&1});da=Ma.compareDocumentPosition?function(a,c){if(a===c)return aa=!0,0;var d=c.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(c);return d?d&1||!y.sortDetached&&c.compareDocumentPosition(a)===d?a===b||U(O,a)?-1:c===b||U(O,c)?1:P?Z.call(P,a)-Z.call(P,c):
0:d&4?-1:1:a.compareDocumentPosition?-1:1}:function(a,c){var d,e=0;d=a.parentNode;var f=c.parentNode,z=[a],h=[c];if(a===c)return aa=!0,0;if(!d||!f)return a===b?-1:c===b?1:d?-1:f?1:P?Z.call(P,a)-Z.call(P,c):0;if(d===f)return n(a,c);for(d=a;d=d.parentNode;)z.unshift(d);for(d=c;d=d.parentNode;)h.unshift(d);for(;z[e]===h[e];)e++;return e?n(z[e],h[e]):z[e]===O?-1:h[e]===O?1:0};return b};c.matches=function(a,b){return c(a,null,null,b)};c.matchesSelector=function(a,b){(a.ownerDocument||a)!==G&&ea(a);b=b.replace(Aa,
"='$1']");if(y.matchesSelector&&ya&&(!J||!J.test(b))&&(!ha||!ha.test(b)))try{var d=T.call(a,b);if(d||y.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return 0<c(b,G,null,[a]).length};c.contains=function(a,b){(a.ownerDocument||a)!==G&&ea(a);return U(a,b)};c.attr=function(a,c){(a.ownerDocument||a)!==G&&ea(a);var d=v.attrHandle[c.toLowerCase()],d=d&&oa.call(v.attrHandle,c.toLowerCase())?d(a,c,!ya):b;return d===b?y.attributes||!ya?a.getAttribute(c):(d=a.getAttributeNode(c))&&
d.specified?d.value:null:d};c.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};c.uniqueSort=function(a){var b,c=[],d=0,e=0;aa=!y.detectDuplicates;P=!y.sortStable&&a.slice(0);a.sort(da);if(aa){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a};D=c.getText=function(a){var b,c="",d=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=D(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=
a[d];d++)c+=D(b);return c};v=c.selectors={cacheLength:50,createPseudo:f,match:va,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(la,ma);a[3]=(a[4]||a[5]||"").replace(la,ma);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===
a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]);return a},PSEUDO:function(a){var c,d=!a[5]&&a[2];if(va.CHILD.test(a[0]))return null;if(a[3]&&a[4]!==b)a[2]=a[4];else if(d&&Ba.test(d)&&(c=q(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length))a[0]=a[0].slice(0,c),a[2]=d.slice(0,c);return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(la,ma).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=
za[a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&za(a,function(a){return b.test("string"===typeof a.className&&a.className||typeof a.getAttribute!==ba&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e){e=c.attr(e,a);if(null==e)return"!="===b;if(!b)return!0;e+="";return"="===b?e===d:"!="===b?e!==d:"^="===b?d&&0===e.indexOf(d):"*="===b?d&&-1<e.indexOf(d):"$="===b?d&&e.slice(-d.length)===d:"~="===b?-1<(" "+e+" ").indexOf(d):"|="===b?e===d||
e.slice(0,d.length+1)===d+"-":!1}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),z="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,g){var F,N,k,L,l;c=f!==z?"nextSibling":"previousSibling";var S=b.parentNode,Ia=h&&b.nodeName.toLowerCase();g=!g&&!h;if(S){if(f){for(;c;){for(N=b;N=N[c];)if(h?N.nodeName.toLowerCase()===Ia:1===N.nodeType)return!1;l=c="only"===a&&!l&&"nextSibling"}return!0}l=[z?S.firstChild:S.lastChild];if(z&&g){g=S[I]||(S[I]=
{});F=g[a]||[];L=F[0]===Q&&F[1];k=F[0]===Q&&F[2];for(N=L&&S.childNodes[L];N=++L&&N&&N[c]||(k=L=0)||l.pop();)if(1===N.nodeType&&++k&&N===b){g[a]=[Q,L,k];break}}else if(g&&(F=(b[I]||(b[I]={}))[a])&&F[0]===Q)k=F[1];else for(;N=++L&&N&&N[c]||(k=L=0)||l.pop();)if((h?N.nodeName.toLowerCase()===Ia:1===N.nodeType)&&++k)if(g&&((N[I]||(N[I]={}))[a]=[Q,k]),N===b)break;k-=e;return k===d||0===k%d&&0<=k/d}}},PSEUDO:function(a,b){var d,e=v.pseudos[a]||v.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+
a);return e[I]?e(b):1<e.length?(d=[a,a,"",b],v.setFilters.hasOwnProperty(a.toLowerCase())?f(function(a,c){for(var d,f=e(a,b),z=f.length;z--;)d=Z.call(a,f[z]),a[d]=!(c[d]=f[z])}):function(a){return e(a,0,d)}):e}},pseudos:{not:f(function(a){var b=[],c=[],d=Ja(a.replace(Ea,"$1"));return d[I]?f(function(a,b,c,e){e=d(a,null,e,[]);for(var f=a.length;f--;)if(c=e[f])a[f]=!(b[f]=c)}):function(a,e,f){b[0]=a;d(b,null,f,c);return!c.pop()}}),has:f(function(a){return function(b){return 0<c(a,b).length}}),contains:f(function(a){return function(b){return-1<
(b.textContent||b.innerText||D(b)).indexOf(a)}}),lang:f(function(a){Ca.test(a||"")||c.error("unsupported lang: "+a);a=a.replace(la,ma).toLowerCase();return function(b){var c;do if(c=ya?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===Ma},focus:function(a){return a===G.activeElement&&
(!G.hasFocus||G.hasFocus())&&!(!a.type&&!a.href&&!~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if("@"<a.nodeName||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!v.pseudos.empty(a)},
header:function(a){return Ga.test(a.nodeName)},input:function(a){return Fa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:p(function(){return[0]}),last:p(function(a,b){return[b-1]}),eq:p(function(a,b,c){return[0>c?c+b:c]}),even:p(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),
odd:p(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:p(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:p(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})v.pseudos[E]=s(E);for(E in{submit:!0,reset:!0})v.pseudos[E]=H(E);Ja=c.compile=function(a,b){var c,d=[],e=[],f=ia[a+" "];if(!f){b||(b=q(a));for(c=b.length;c--;)f=t(b[c]),f[I]?d.push(f):e.push(f);f=ia(a,B(e,d))}return f};v.pseudos.nth=v.pseudos.eq;
C.prototype=v.filters=v.pseudos;v.setFilters=new C;y.sortStable=I.split("").sort(da).join("")===I;ea();[0,0].sort(da);y.detectDuplicates=aa;h.find=c;h.expr=c.selectors;h.expr[":"]=h.expr.pseudos;h.unique=c.uniqueSort;h.text=c.getText;h.isXMLDoc=c.isXML;h.contains=c.contains})(a);var qb={};h.Callbacks=function(a){a="string"===typeof a?qb[a]||d(a):h.extend({},a);var c,e,f,g,k,l,m=[],x=!a.once&&[],n=function(b){e=a.memory&&b;f=!0;k=l||0;l=0;g=m.length;for(c=!0;m&&k<g;k++)if(!1===m[k].apply(b[0],b[1])&&
a.stopOnFalse){e=!1;break}c=!1;m&&(x?x.length&&n(x.shift()):e?m=[]:s.disable())},s={add:function(){if(m){var b=m.length;(function lc(b){h.each(b,function(b,c){var d=h.type(c);"function"===d?(!a.unique||!s.has(c))&&m.push(c):c&&(c.length&&"string"!==d)&&lc(c)})})(arguments);c?g=m.length:e&&(l=b,n(e))}return this},remove:function(){m&&h.each(arguments,function(a,b){for(var d;-1<(d=h.inArray(b,m,d));)m.splice(d,1),c&&(d<=g&&g--,d<=k&&k--)});return this},has:function(a){return a?-1<h.inArray(a,m):!(!m||
!m.length)},empty:function(){m=[];g=0;return this},disable:function(){m=x=e=b;return this},disabled:function(){return!m},lock:function(){x=b;e||s.disable();return this},locked:function(){return!x},fireWith:function(a,b){b=b||[];b=[a,b.slice?b.slice():b];if(m&&(!f||x))c?x.push(b):n(b);return this},fire:function(){s.fireWith(this,arguments);return this},fired:function(){return!!f}};return s};h.extend({Deferred:function(a){var b=[["resolve","done",h.Callbacks("once memory"),"resolved"],["reject","fail",
h.Callbacks("once memory"),"rejected"],["notify","progress",h.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return h.Deferred(function(c){h.each(b,function(b,f){var z=f[0],g=h.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);if(a&&h.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[z+"With"](this===d?c.promise():this,
g?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?h.extend(a,d):d}},e={};d.pipe=d.then;h.each(b,function(a,f){var z=f[2],h=f[3];d[f[1]]=z.add;h&&z.add(function(){c=h},b[a^1][2].disable,b[2][2].lock);e[f[0]]=function(){e[f[0]+"With"](this===e?d:this,arguments);return this};e[f[0]+"With"]=z.fireWith});d.promise(e);a&&a.call(e,e);return e},when:function(a){var b=0,c=za.call(arguments),d=c.length,e=1!==d||a&&h.isFunction(a.promise)?d:0,f=1===e?a:h.Deferred(),g=function(a,b,c){return function(d){b[a]=
this;c[a]=1<arguments.length?za.call(arguments):d;c===k?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},k,l,m;if(1<d){k=Array(d);l=Array(d);for(m=Array(d);b<d;b++)c[b]&&h.isFunction(c[b].promise)?c[b].promise().done(g(b,m,c)).fail(f.reject).progress(g(b,l,k)):--e}e||f.resolveWith(m,c);return f.promise()}});h.support=function(b){var c,d,e,f,g,k,l=A.createElement("div");l.setAttribute("className","t");l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";c=l.getElementsByTagName("*")||
[];d=l.getElementsByTagName("a")[0];if(!d||!d.style||!c.length)return b;e=A.createElement("select");f=e.appendChild(A.createElement("option"));c=l.getElementsByTagName("input")[0];d.style.cssText="top:1px;float:left;opacity:.5";b.getSetAttribute="t"!==l.className;b.leadingWhitespace=3===l.firstChild.nodeType;b.tbody=!l.getElementsByTagName("tbody").length;b.htmlSerialize=!!l.getElementsByTagName("link").length;b.style=/top/.test(d.getAttribute("style"));b.hrefNormalized="/a"===d.getAttribute("href");
b.opacity=/^0.5/.test(d.style.opacity);b.cssFloat=!!d.style.cssFloat;b.checkOn=!!c.value;b.optSelected=f.selected;b.enctype=!!A.createElement("form").enctype;b.html5Clone="<:nav></:nav>"!==A.createElement("nav").cloneNode(!0).outerHTML;b.inlineBlockNeedsLayout=!1;b.shrinkWrapBlocks=!1;b.pixelPosition=!1;b.deleteExpando=!0;b.noCloneEvent=!0;b.reliableMarginRight=!0;b.boxSizingReliable=!0;c.checked=!0;b.noCloneChecked=c.cloneNode(!0).checked;e.disabled=!0;b.optDisabled=!f.disabled;try{delete l.test}catch(m){b.deleteExpando=
!1}c=A.createElement("input");c.setAttribute("value","");b.input=""===c.getAttribute("value");c.value="t";c.setAttribute("type","radio");b.radioValue="t"===c.value;c.setAttribute("checked","t");c.setAttribute("name","t");d=A.createDocumentFragment();d.appendChild(c);b.appendChecked=c.checked;b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(d=
"on"+k,"t"),b[k+"Bubbles"]=d in a||!1===l.attributes[d].expando;l.style.backgroundClip="content-box";l.cloneNode(!0).style.backgroundClip="";b.clearCloneStyle="content-box"===l.style.backgroundClip;for(k in h(b))break;b.ownLast="0"!==k;h(function(){var c,d,e=A.getElementsByTagName("body")[0];e&&(c=A.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",e.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",
d=l.getElementsByTagName("td"),d[0].style.cssText="padding:0;margin:0;border:0;display:none",g=0===d[0].offsetHeight,d[0].style.display="",d[1].style.display="none",b.reliableHiddenOffsets=g&&0===d[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",h.swap(e,null!=e.style.zoom?{zoom:1}:{},function(){b.boxSizing=4===l.offsetWidth}),a.getComputedStyle&&
(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(A.createElement("div")),d.style.cssText=l.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==ga&&
(l.innerHTML="",l.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(e.style.zoom=1)),e.removeChild(c),c=l=d=d=null)});c=e=d=f=d=c=null;return b}({});var Eb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
Za=/([A-Z])/g;h.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){a=a.nodeType?h.cache[a[h.expando]]:a[h.expando];return!!a&&!k(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&h.noData[a.nodeName.toLowerCase()];return!b||
!0!==b&&a.getAttribute("classid")===b}});h.fn.extend({data:function(a,c){var d,e,f=null,k=0,l=this[0];if(a===b){if(this.length&&(f=h.data(l),1===l.nodeType&&!h._data(l,"parsedAttrs"))){for(d=l.attributes;k<d.length;k++)e=d[k].name,0===e.indexOf("data-")&&(e=h.camelCase(e.slice(5)),g(l,e,f[e]));h._data(l,"parsedAttrs",!0)}return f}return"object"===typeof a?this.each(function(){h.data(this,a)}):1<arguments.length?this.each(function(){h.data(this,a,c)}):l?g(l,a,h.data(l,a)):null},removeData:function(a){return this.each(function(){h.removeData(this,
a)})}});h.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=h._data(a,b),c&&(!d||h.isArray(c)?d=h._data(a,b,h.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=h.queue(a,b),d=c.length,e=c.shift(),f=h._queueHooks(a,b),g=function(){h.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--);e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f));!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return h._data(a,c)||h._data(a,c,{empty:h.Callbacks("once memory").add(function(){h._removeData(a,
b+"queue");h._removeData(a,c)})})}});h.fn.extend({queue:function(a,c){var d=2;"string"!==typeof a&&(c=a,a="fx",d--);return arguments.length<d?h.queue(this[0],a):c===b?this:this.each(function(){var b=h.queue(this,a,c);h._queueHooks(this,a);"fx"===a&&"inprogress"!==b[0]&&h.dequeue(this,a)})},dequeue:function(a){return this.each(function(){h.dequeue(this,a)})},delay:function(a,b){a=h.fx?h.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},
clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=h.Deferred(),g=this,k=this.length,l=function(){--e||f.resolveWith(g,[g])};"string"!==typeof a&&(c=a,a=b);for(a=a||"fx";k--;)if((d=h._data(g[k],a+"queueHooks"))&&d.empty)e++,d.empty.add(l);l();return f.promise(c)}});var oa,rb,Ga=/[\t\r\n\f]/g,Fb=/\r/g,ib=/^(?:input|select|textarea|button|object)$/i,jb=/^(?:a|area)$/i,ta=/^(?:checked|selected)$/i,I=h.support.getSetAttribute,cb=h.support.input;h.fn.extend({attr:function(a,
b){return h.access(this,h.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){h.removeAttr(this,a)})},prop:function(a,b){return h.access(this,h.prop,a,b,1<arguments.length)},removeProp:function(a){a=h.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g=0,k=this.length;b="string"===typeof a&&a;if(h.isFunction(a))return this.each(function(b){h(this).addClass(a.call(this,b,this.className))});if(b)for(b=
(a||"").match(pa)||[];g<k;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ga," "):" ")){for(f=0;e=b[f++];)0>d.indexOf(" "+e+" ")&&(d+=e+" ");c.className=h.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,k=this.length;b=0===arguments.length||"string"===typeof a&&a;if(h.isFunction(a))return this.each(function(b){h(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(pa)||[];g<k;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+
" ").replace(Ga," "):"")){for(f=0;e=b[f++];)for(;0<=d.indexOf(" "+e+" ");)d=d.replace(" "+e+" "," ");c.className=a?h.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"===typeof b;return h.isFunction(a)?this.each(function(c){h(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=h(this),k=b,l=a.match(pa)||[];e=l[f++];)k=d?k:!g.hasClass(e),g[k?"addClass":"removeClass"](e);else if(c===ga||"boolean"===c)this.className&&h._data(this,
"__className__",this.className),this.className=this.className||!1===a?"":h._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Ga," ").indexOf(a))return!0;return!1},val:function(a){var c,d,e,f=this[0];if(arguments.length)return e=h.isFunction(a),this.each(function(c){if(1===this.nodeType&&(c=e?a.call(this,c,h(this).val()):a,null==c?c="":"number"===typeof c?c+="":h.isArray(c)&&(c=h.map(c,
function(a){return null==a?"":a+""})),d=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()],!d||!("set"in d)||d.set(this,c,"value")===b))this.value=c});if(f){if((d=h.valHooks[f.type]||h.valHooks[f.nodeName.toLowerCase()])&&"get"in d&&(c=d.get(f,"value"))!==b)return c;c=f.value;return"string"===typeof c?c.replace(Fb,""):null==c?"":c}}});h.extend({valHooks:{option:{get:function(a){var b=h.find.attr(a,"value");return null!=b?b:a.text}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,
e=(a="select-one"===a.type||0>d)?null:[],f=a?d+1:c.length,g=0>d?f:a?d:0;g<f;g++)if(b=c[g],(b.selected||g===d)&&(h.support.optDisabled?!b.disabled:null===b.getAttribute("disabled"))&&(!b.parentNode.disabled||!h.nodeName(b.parentNode,"optgroup"))){b=h(b).val();if(a)return b;e.push(b)}return e},set:function(a,b){for(var c,d,e=a.options,f=h.makeArray(b),g=e.length;g--;)if(d=e[g],d.selected=0<=h.inArray(h(d).val(),f))c=!0;c||(a.selectedIndex=-1);return f}}},attr:function(a,c,d){var e,f,g=a.nodeType;if(a&&
!(3===g||8===g||2===g)){if(typeof a.getAttribute===ga)return h.prop(a,c,d);if(1!==g||!h.isXMLDoc(a))c=c.toLowerCase(),e=h.attrHooks[c]||(h.expr.match.bool.test(c)?rb:oa);if(d!==b)if(null===d)h.removeAttr(a,c);else{if(e&&"set"in e&&(f=e.set(a,d,c))!==b)return f;a.setAttribute(c,d+"");return d}else{if(e&&"get"in e&&null!==(f=e.get(a,c)))return f;f=h.find.attr(a,c);return null==f?b:f}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(pa);if(f&&1===a.nodeType)for(;c=f[e++];)d=h.propFix[c]||c,h.expr.match.bool.test(c)?
cb&&I||!ta.test(c)?a[d]=!1:a[h.camelCase("default-"+c)]=a[d]=!1:h.attr(a,c,""),a.removeAttribute(I?c:d)},attrHooks:{type:{set:function(a,b){if(!h.support.radioValue&&"radio"===b&&h.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,c,d){var e,f,g;g=a.nodeType;if(a&&!(3===g||8===g||2===g)){if(g=1!==g||!h.isXMLDoc(a))c=h.propFix[c]||c,f=h.propHooks[c];return d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:
a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]}},propHooks:{tabIndex:{get:function(a){var b=h.find.attr(a,"tabindex");return b?parseInt(b,10):ib.test(a.nodeName)||jb.test(a.nodeName)&&a.href?0:-1}}}});rb={set:function(a,b,c){!1===b?h.removeAttr(a,c):cb&&I||!ta.test(c)?a.setAttribute(!I&&h.propFix[c]||c,c):a[h.camelCase("default-"+c)]=a[c]=!0;return c}};h.each(h.expr.match.bool.source.match(/\w+/g),function(a,c){var d=h.expr.attrHandle[c]||h.find.attr;h.expr.attrHandle[c]=cb&&I||!ta.test(c)?function(a,
c,e){var f=h.expr.attrHandle[c];a=e?b:(h.expr.attrHandle[c]=b)!=d(a,c,e)?c.toLowerCase():null;h.expr.attrHandle[c]=f;return a}:function(a,c,d){return d?b:a[h.camelCase("default-"+c)]?c.toLowerCase():null}});if(!cb||!I)h.attrHooks.value={set:function(a,b,c){if(h.nodeName(a,"input"))a.defaultValue=b;else return oa&&oa.set(a,b,c)}};I||(oa={set:function(a,c,d){var e=a.getAttributeNode(d);e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d));e.value=c+="";return"value"===d||c===a.getAttribute(d)?
c:b}},h.expr.attrHandle.id=h.expr.attrHandle.name=h.expr.attrHandle.coords=function(a,c,d){var e;return d?b:(e=a.getAttributeNode(c))&&""!==e.value?e.value:null},h.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&d.specified?d.value:b},set:oa.set},h.attrHooks.contenteditable={set:function(a,b,c){oa.set(a,""===b?!1:b,c)}},h.each(["width","height"],function(a,b){h.attrHooks[b]={set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}}}));h.support.hrefNormalized||h.each(["href",
"src"],function(a,b){h.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}});h.support.style||(h.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}});h.support.optSelected||(h.propHooks.selected={get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}});h.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){h.propFix[this.toLowerCase()]=
this});h.support.enctype||(h.propFix.enctype="encoding");h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(a,b){if(h.isArray(b))return a.checked=0<=h.inArray(h(a).val(),b)}};h.support.checkOn||(h.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var da=/^(?:input|select|textarea)$/i,sb=/^key/,yb=/^(?:mouse|contextmenu)|click/,db=/^(?:focusinfocus|focusoutblur)$/,O=/^([^.]*)(?:\.(.+)|)$/;h.event={global:{},add:function(a,c,d,e,f){var g,k,l,m,
x,n,s,p,H;if(l=h._data(a)){d.handler&&(m=d,d=m.handler,f=m.selector);d.guid||(d.guid=h.guid++);if(!(k=l.events))k=l.events={};if(!(x=l.handle))x=l.handle=function(a){return typeof h!==ga&&(!a||h.event.triggered!==a.type)?h.event.dispatch.apply(x.elem,arguments):b},x.elem=a;c=(c||"").match(pa)||[""];for(l=c.length;l--;)if(g=O.exec(c[l])||[],p=n=g[1],H=(g[2]||"").split(".").sort(),p){g=h.event.special[p]||{};p=(f?g.delegateType:g.bindType)||p;g=h.event.special[p]||{};n=h.extend({type:p,origType:n,data:e,
handler:d,guid:d.guid,selector:f,needsContext:f&&h.expr.match.needsContext.test(f),namespace:H.join(".")},m);if(!(s=k[p]))if(s=k[p]=[],s.delegateCount=0,!g.setup||!1===g.setup.call(a,e,H,x))a.addEventListener?a.addEventListener(p,x,!1):a.attachEvent&&a.attachEvent("on"+p,x);g.add&&(g.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid));f?s.splice(s.delegateCount++,0,n):s.push(n);h.event.global[p]=!0}a=null}},remove:function(a,b,c,d,e){var f,g,k,l,m,x,n,s,p,H,q,K=h.hasData(a)&&h._data(a);if(K&&(x=
K.events)){b=(b||"").match(pa)||[""];for(m=b.length;m--;)if(k=O.exec(b[m])||[],p=q=k[1],H=(k[2]||"").split(".").sort(),p){n=h.event.special[p]||{};p=(d?n.delegateType:n.bindType)||p;s=x[p]||[];k=k[2]&&RegExp("(^|\\.)"+H.join("\\.(?:.*\\.|)")+"(\\.|$)");for(l=f=s.length;f--;)if(g=s[f],(e||q===g.origType)&&(!c||c.guid===g.guid)&&(!k||k.test(g.namespace))&&(!d||d===g.selector||"**"===d&&g.selector))s.splice(f,1),g.selector&&s.delegateCount--,n.remove&&n.remove.call(a,g);l&&!s.length&&((!n.teardown||
!1===n.teardown.call(a,H,K.handle))&&h.removeEvent(a,p,K.handle),delete x[p])}else for(p in x)h.event.remove(a,p+b[m],c,d,!0);h.isEmptyObject(x)&&(delete K.handle,h._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,k,l,m,x,n,s=[e||A],p=ia.call(c,"type")?c.type:c;x=ia.call(c,"namespace")?c.namespace.split("."):[];l=g=e=e||A;if(!(3===e.nodeType||8===e.nodeType)&&!db.test(p+h.event.triggered))if(0<=p.indexOf(".")&&(x=p.split("."),p=x.shift(),x.sort()),k=0>p.indexOf(":")&&"on"+p,c=c[h.expando]?
c:new h.Event(p,"object"===typeof c&&c),c.isTrigger=f?2:3,c.namespace=x.join("."),c.namespace_re=c.namespace?RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:h.makeArray(d,[c]),x=h.event.special[p]||{},f||!(x.trigger&&!1===x.trigger.apply(e,d))){if(!f&&!x.noBubble&&!h.isWindow(e)){m=x.delegateType||p;db.test(m+p)||(l=l.parentNode);for(;l;l=l.parentNode)s.push(l),g=l;if(g===(e.ownerDocument||A))s.push(g.defaultView||g.parentWindow||a)}for(n=0;(l=
s[n++])&&!c.isPropagationStopped();)c.type=1<n?m:x.bindType||p,(g=(h._data(l,"events")||{})[c.type]&&h._data(l,"handle"))&&g.apply(l,d),(g=k&&l[k])&&(h.acceptData(l)&&g.apply&&!1===g.apply(l,d))&&c.preventDefault();c.type=p;if(!f&&!c.isDefaultPrevented()&&(!x._default||!1===x._default.apply(s.pop(),d))&&h.acceptData(e)&&k&&e[p]&&!h.isWindow(e)){(g=e[k])&&(e[k]=null);h.event.triggered=p;try{e[p]()}catch(H){}h.event.triggered=b;g&&(e[k]=g)}return c.result}},dispatch:function(a){a=h.event.fix(a);var c,
d,e,f,g=[],k=za.call(arguments);c=(h._data(this,"events")||{})[a.type]||[];var l=h.event.special[a.type]||{};k[0]=a;a.delegateTarget=this;if(!(l.preDispatch&&!1===l.preDispatch.call(this,a))){g=h.event.handlers.call(this,a,c);for(c=0;(e=g[c++])&&!a.isPropagationStopped();){a.currentTarget=e.elem;for(f=0;(d=e.handlers[f++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(d.namespace))if(a.handleObj=d,a.data=d.data,d=((h.event.special[d.origType]||{}).handle||d.handler).apply(e.elem,
k),d!==b&&!1===(a.result=d))a.preventDefault(),a.stopPropagation()}l.postDispatch&&l.postDispatch.call(this,a);return a.result}},handlers:function(a,c){var d,e,f,g,k=[],l=c.delegateCount,m=a.target;if(l&&m.nodeType&&(!a.button||"click"!==a.type))for(;m!=this;m=m.parentNode||this)if(1===m.nodeType&&(!0!==m.disabled||"click"!==a.type)){f=[];for(g=0;g<l;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?0<=h(d,this).index(m):h.find(d,this,null,[m]).length),f[d]&&f.push(e);f.length&&k.push({elem:m,
handlers:f})}l<c.length&&k.push({elem:this,handlers:c.slice(l)});return k},fix:function(a){if(a[h.expando])return a;var b,c,d;b=a.type;var e=a,f=this.fixHooks[b];f||(this.fixHooks[b]=f=yb.test(b)?this.mouseHooks:sb.test(b)?this.keyHooks:{});d=f.props?this.props.concat(f.props):this.props;a=new h.Event(e);for(b=d.length;b--;)c=d[b],a[c]=e[c];a.target||(a.target=e.srcElement||A);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return f.filter?f.filter(a,e):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f=c.button,h=c.fromElement;null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||A,e=d.documentElement,d=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||
d&&d.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0));!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h);!a.which&&f!==b&&(a.which=f&1?1:f&2?3:f&4?2:0);return a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){if(this===p()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(h.nodeName(this,
"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return h.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=h.extend(new h.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?h.event.trigger(a,null,b):h.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};h.removeEvent=A.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,
c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&(typeof a[b]===ga&&(a[b]=null),a.detachEvent(b,c))};h.Event=function(a,b){if(!(this instanceof h.Event))return new h.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?l:m):this.type=a;b&&h.extend(this,b);this.timeStamp=a&&a.timeStamp||h.now();this[h.expando]=!0};h.Event.prototype={isDefaultPrevented:m,isPropagationStopped:m,isImmediatePropagationStopped:m,
preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=l;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=l;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l;this.stopPropagation()}};h.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){h.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,
d=a.relatedTarget,e=a.handleObj;if(!d||d!==this&&!h.contains(this,d))a.type=e.origType,c=e.handler.apply(this,arguments),a.type=b;return c}}});h.support.submitBubbles||(h.event.special.submit={setup:function(){if(h.nodeName(this,"form"))return!1;h.event.add(this,"click._submit keypress._submit",function(a){a=a.target;if((a=h.nodeName(a,"input")||h.nodeName(a,"button")?a.form:b)&&!h._data(a,"submitBubbles"))h.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),h._data(a,"submitBubbles",
!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&h.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(h.nodeName(this,"form"))return!1;h.event.remove(this,"._submit")}});h.support.changeBubbles||(h.event.special.change={setup:function(){if(da.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)h.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=
!0)}),h.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);h.event.simulate("change",this,a,!0)});return!1}h.event.add(this,"beforeactivate._change",function(a){a=a.target;da.test(a.nodeName)&&!h._data(a,"changeBubbles")&&(h.event.add(a,"change._change",function(a){this.parentNode&&(!a.isSimulated&&!a.isTrigger)&&h.event.simulate("change",this.parentNode,a,!0)}),h._data(a,"changeBubbles",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||
a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){h.event.remove(this,"._change");return!da.test(this.nodeName)}});h.support.focusinBubbles||h.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){h.event.simulate(b,a.target,h.event.fix(a),!0)};h.event.special[b]={setup:function(){0===c++&&A.addEventListener(a,d,!0)},teardown:function(){0===--c&&A.removeEventListener(a,d,!0)}}});h.fn.extend({on:function(a,
c,d,e,f){var g,k;if("object"===typeof a){"string"!==typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}null==d&&null==e?(e=c,d=c=b):null==e&&("string"===typeof c?(e=d,d=b):(e=d,d=c,c=b));if(!1===e)e=m;else if(!e)return this;1===f&&(k=e,e=function(a){h().off(a);return k.apply(this,arguments)},e.guid=k.guid||(k.guid=h.guid++));return this.each(function(){h.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e;if(a&&a.preventDefault&&a.handleObj)return e=
a.handleObj,h(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"===typeof a){for(e in a)this.off(e,c,a[e]);return this}if(!1===c||"function"===typeof c)d=c,c=b;!1===d&&(d=m);return this.each(function(){h.event.remove(this,a,d,c)})},trigger:function(a,b){return this.each(function(){h.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return h.event.trigger(a,b,c,!0)}});var Na=/^.[^:#\[\.,]*$/,gb=/^(?:parents|prev(?:Until|All))/,
Hb=h.expr.match.needsContext,Qb={children:!0,contents:!0,next:!0,prev:!0};h.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!==typeof a)return this.pushStack(h(a).filter(function(){for(b=0;b<e;b++)if(h.contains(d[b],this))return!0}));for(b=0;b<e;b++)h.find(a,d[b],c);c=this.pushStack(1<e?h.unique(c):c);c.selector=this.selector?this.selector+" "+a:a;return c},has:function(a){var b,c=h(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(h.contains(this,c[b]))return!0})},
not:function(a){return this.pushStack(t(this,a||[],!0))},filter:function(a){return this.pushStack(t(this,a||[],!1))},is:function(a){return!!t(this,"string"===typeof a&&Hb.test(a)?h(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Hb.test(a)||"string"!==typeof a?h(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(g?-1<g.index(c):1===c.nodeType&&h.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(1<f.length?h.unique(f):
f)},index:function(a){return!a?this[0]&&this[0].parentNode?this.first().prevAll().length:-1:"string"===typeof a?h.inArray(this[0],h(a)):h.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c="string"===typeof a?h(a,b):h.makeArray(a&&a.nodeType?[a]:a),c=h.merge(this.get(),c);return this.pushStack(h.unique(c))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});h.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return h.dir(a,
"parentNode")},parentsUntil:function(a,b,c){return h.dir(a,"parentNode",c)},next:function(a){return q(a,"nextSibling")},prev:function(a){return q(a,"previousSibling")},nextAll:function(a){return h.dir(a,"nextSibling")},prevAll:function(a){return h.dir(a,"previousSibling")},nextUntil:function(a,b,c){return h.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return h.dir(a,"previousSibling",c)},siblings:function(a){return h.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return h.sibling(a.firstChild)},
contents:function(a){return h.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:h.merge([],a.childNodes)}},function(a,b){h.fn[a]=function(c,d){var e=h.map(this,b,c);"Until"!==a.slice(-5)&&(d=c);d&&"string"===typeof d&&(e=h.filter(d,e));1<this.length&&(Qb[a]||(e=h.unique(e)),gb.test(a)&&(e=e.reverse()));return this.pushStack(e)}});h.extend({filter:function(a,b,c){var d=b[0];c&&(a=":not("+a+")");return 1===b.length&&1===d.nodeType?h.find.matchesSelector(d,a)?[d]:[]:h.find.matches(a,h.grep(b,
function(a){return 1===a.nodeType}))},dir:function(a,c,d){var e=[];for(a=a[c];a&&9!==a.nodeType&&(d===b||1!==a.nodeType||!h(a).is(d));)1===a.nodeType&&e.push(a),a=a[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Q="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",bb=/ jQuery\d+="(?:null|\d+)"/g,Gb=RegExp("<(?:"+Q+")[\\s/>]",
"i"),fa=/^\s+/,tb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ub=/<([\w:]+)/,eb=/<tbody/i,Ib=/<|&#?\w+;/,Rb=/<(?:script|style|link)/i,B=/^(?:checkbox|radio)$/i,n=/checked\s*(?:[^=]|=\s*.checked.)/i,Ta=/^$|\/(?:java|ecma)script/i,Sb=/^true\/(.*)/,Jb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,qa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],
tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:h.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},kb=D(A).appendChild(A.createElement("div"));qa.optgroup=qa.option;qa.tbody=qa.tfoot=qa.colgroup=qa.caption=qa.thead;qa.th=qa.td;h.fn.extend({text:function(a){return h.access(this,function(a){return a===b?h.text(this):this.empty().append((this[0]&&this[0].ownerDocument||A).createTextNode(a))},
null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&C(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=C(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,
function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?h.filter(a,this):this,e=0;null!=(c=d[e]);e++)!b&&1===c.nodeType&&h.cleanData(ca(c)),c.parentNode&&(b&&h.contains(c.ownerDocument,c)&&J(ca(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&h.cleanData(ca(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&h.nodeName(a,"select")&&(a.options.length=0)}return this},
clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return h.clone(this,a,b)})},html:function(a){return h.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(bb,""):b;if("string"===typeof a&&!Rb.test(a)&&(h.support.htmlSerialize||!Gb.test(a))&&(h.support.leadingWhitespace||!fa.test(a))&&!qa[(ub.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(tb,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(h.cleanData(ca(c,
!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=h.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),h(this).remove(),e.insertBefore(c,d))},!0);return b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=y.apply([],a);var d,e,f,g,k=0,l=this.length,m=this,x=l-1,s=a[0],p=h.isFunction(s);
if(p||!(1>=l||"string"!==typeof s||h.support.checkClone||!n.test(s)))return this.each(function(d){var e=m.eq(d);p&&(a[0]=s.call(this,d,e.html()));e.domManip(a,b,c)});if(l&&(g=h.buildFragment(a,this[0].ownerDocument,!1,!c&&this),d=g.firstChild,1===g.childNodes.length&&(g=d),d)){f=h.map(ca(g,"script"),T);for(e=f.length;k<l;k++)d=g,k!==x&&(d=h.clone(d,!0,!0),e&&h.merge(f,ca(d,"script"))),b.call(this[k],d,k);if(e){g=f[f.length-1].ownerDocument;h.map(f,ba);for(k=0;k<e;k++)if(d=f[k],Ta.test(d.type||"")&&
!h._data(d,"globalEval")&&h.contains(g,d))d.src?h._evalUrl(d.src):h.globalEval((d.text||d.textContent||d.innerHTML||"").replace(Jb,""))}g=d=null}return this}});h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){h.fn[a]=function(a){for(var c=0,d=[],e=h(a),f=e.length-1;c<=f;c++)a=c===f?this:this.clone(!0),h(e[c])[b](a),P.apply(d,a.get());return this.pushStack(d)}});h.extend({clone:function(a,b,c){var d,e,f,g,k,l=h.contains(a.ownerDocument,
a);h.support.html5Clone||h.isXMLDoc(a)||!Gb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(kb.innerHTML=a.outerHTML,kb.removeChild(f=kb.firstChild));if((!h.support.noCloneEvent||!h.support.noCloneChecked)&&(1===a.nodeType||11===a.nodeType)&&!h.isXMLDoc(a)){d=ca(f);k=ca(a);for(g=0;null!=(e=k[g]);++g)if(d[g]){var m=d[g],x=void 0,s=void 0,n=void 0;if(1===m.nodeType){x=m.nodeName.toLowerCase();if(!h.support.noCloneEvent&&m[h.expando]){n=h._data(m);for(s in n.events)h.removeEvent(m,s,n.handle);m.removeAttribute(h.expando)}if("script"===
x&&m.text!==e.text)T(m).text=e.text,ba(m);else if("object"===x)m.parentNode&&(m.outerHTML=e.outerHTML),h.support.html5Clone&&(e.innerHTML&&!h.trim(m.innerHTML))&&(m.innerHTML=e.innerHTML);else if("input"===x&&B.test(e.type))m.defaultChecked=m.checked=e.checked,m.value!==e.value&&(m.value=e.value);else if("option"===x)m.defaultSelected=m.selected=e.defaultSelected;else if("input"===x||"textarea"===x)m.defaultValue=e.defaultValue}}}if(b)if(c){k=k||ca(a);d=d||ca(f);for(g=0;null!=(e=k[g]);g++)ma(e,d[g])}else ma(a,
f);d=ca(f,"script");0<d.length&&J(d,!l&&ca(a,"script"));return f},buildFragment:function(a,b,c,d){for(var e,f,g,k,l,m,x=a.length,s=D(b),n=[],p=0;p<x;p++)if((f=a[p])||0===f)if("object"===h.type(f))h.merge(n,f.nodeType?[f]:f);else if(Ib.test(f)){g=g||s.appendChild(b.createElement("div"));k=(ub.exec(f)||["",""])[1].toLowerCase();m=qa[k]||qa._default;g.innerHTML=m[1]+f.replace(tb,"<$1></$2>")+m[2];for(e=m[0];e--;)g=g.lastChild;!h.support.leadingWhitespace&&fa.test(f)&&n.push(b.createTextNode(fa.exec(f)[0]));
if(!h.support.tbody)for(e=(f="table"===k&&!eb.test(f)?g.firstChild:"<table>"===m[1]&&!eb.test(f)?g:0)&&f.childNodes.length;e--;)h.nodeName(l=f.childNodes[e],"tbody")&&!l.childNodes.length&&f.removeChild(l);h.merge(n,g.childNodes);for(g.textContent="";g.firstChild;)g.removeChild(g.firstChild);g=s.lastChild}else n.push(b.createTextNode(f));g&&s.removeChild(g);h.support.appendChecked||h.grep(ca(n,"input"),va);for(p=0;f=n[p++];)if(!(d&&-1!==h.inArray(f,d))&&(a=h.contains(f.ownerDocument,f),g=ca(s.appendChild(f),
"script"),a&&J(g),c))for(e=0;f=g[e++];)Ta.test(f.type||"")&&c.push(f);return s},cleanData:function(a,b){for(var c,d,e,f,g=0,k=h.expando,l=h.cache,m=h.support.deleteExpando,x=h.event.special;null!=(c=a[g]);g++)if(b||h.acceptData(c))if(f=(e=c[k])&&l[e]){if(f.events)for(d in f.events)x[d]?h.event.remove(c,d):h.removeEvent(c,d,f.handle);l[e]&&(delete l[e],m?delete c[k]:typeof c.removeAttribute!==ga?c.removeAttribute(k):c[k]=null,G.push(e))}},_evalUrl:function(a){return h.ajax({url:a,type:"GET",dataType:"script",
async:!1,global:!1,"throws":!0})}});h.fn.extend({wrapAll:function(a){if(h.isFunction(a))return this.each(function(b){h(this).wrapAll(a.call(this,b))});if(this[0]){var b=h(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return h.isFunction(a)?this.each(function(b){h(this).wrapInner(a.call(this,b))}):this.each(function(){var b=
h(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=h.isFunction(a);return this.each(function(c){h(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){h.nodeName(this,"body")||h(this).replaceWith(this.childNodes)}).end()}});var Y,Ha,Aa,w=/alpha\([^)]*\)/i,Ba=/opacity\s*=\s*([^)]*)/,Kb=/^(top|right|bottom|left)$/,Tb=/^(none|table(?!-c[ea]).+)/,Lb=/^margin/,Ub=RegExp("^("+$a+")(.*)$","i"),lb=RegExp("^("+$a+")(?!px)[a-z%]+$","i"),
xb=RegExp("^([+-])=("+$a+")","i"),Ua={BODY:"block"},la={position:"absolute",visibility:"hidden",display:"block"},Wa={letterSpacing:0,fontWeight:400},wa=["Top","Right","Bottom","Left"],ra=["Webkit","O","Moz","ms"];h.fn.extend({css:function(a,c){return h.access(this,function(a,c,d){var e,f={},g=0;if(h.isArray(c)){e=Ha(a);for(d=c.length;g<d;g++)f[c[g]]=h.css(a,c[g],!1,e);return f}return d!==b?h.style(a,c,d):h.css(a,c)},a,c,1<arguments.length)},show:function(){return Ya(this,!0)},hide:function(){return Ya(this)},
toggle:function(a){var b="boolean"===typeof a;return this.each(function(){(b?a:Fa(this))?h(this).show():h(this).hide()})}});h.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Aa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":h.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&!(3===a.nodeType||8===a.nodeType||!a.style)){var f,g,k,l=h.camelCase(c),
m=a.style;c=h.cssProps[l]||(h.cssProps[l]=Xa(m,l));k=h.cssHooks[c]||h.cssHooks[l];if(d!==b){g=typeof d;if("string"===g&&(f=xb.exec(d)))d=(f[1]+1)*f[2]+parseFloat(h.css(a,c)),g="number";if(!(null==d||"number"===g&&isNaN(d)))if("number"===g&&!h.cssNumber[l]&&(d+="px"),!h.support.clearCloneStyle&&(""===d&&0===c.indexOf("background"))&&(m[c]="inherit"),!k||!("set"in k)||(d=k.set(a,d,e))!==b)try{m[c]=d}catch(x){}}else return k&&"get"in k&&(f=k.get(a,!1,e))!==b?f:m[c]}},css:function(a,c,d,e){var f,g;g=
h.camelCase(c);c=h.cssProps[g]||(h.cssProps[g]=Xa(a.style,g));(g=h.cssHooks[c]||h.cssHooks[g])&&"get"in g&&(f=g.get(a,!0,d));f===b&&(f=Aa(a,c,e));"normal"===f&&c in Wa&&(f=Wa[c]);return""===d||d?(a=parseFloat(f),!0===d||h.isNumeric(a)?a||0:f):f}});a.getComputedStyle?(Ha=function(b){return a.getComputedStyle(b,null)},Aa=function(a,c,d){var e,f=(d=d||Ha(a))?d.getPropertyValue(c)||d[c]:b,g=a.style;d&&(""===f&&!h.contains(a.ownerDocument,a)&&(f=h.style(a,c)),lb.test(f)&&Lb.test(c)&&(a=g.width,c=g.minWidth,
e=g.maxWidth,g.minWidth=g.maxWidth=g.width=f,f=d.width,g.width=a,g.minWidth=c,g.maxWidth=e));return f}):A.documentElement.currentStyle&&(Ha=function(a){return a.currentStyle},Aa=function(a,c,d){var e,f,h=(d=d||Ha(a))?d[c]:b,g=a.style;null==h&&(g&&g[c])&&(h=g[c]);if(lb.test(h)&&!Kb.test(c)){d=g.left;if(f=(e=a.runtimeStyle)&&e.left)e.left=a.currentStyle.left;g.left="fontSize"===c?"1em":h;h=g.pixelLeft+"px";g.left=d;f&&(e.left=f)}return""===h?"auto":h});h.each(["height","width"],function(a,b){h.cssHooks[b]=
{get:function(a,c,d){if(c)return 0===a.offsetWidth&&Tb.test(h.css(a,"display"))?h.swap(a,la,function(){return Qa(a,b,d)}):Qa(a,b,d)},set:function(a,c,d){var e=d&&Ha(a);return Da(a,c,d?Pa(a,b,d,h.support.boxSizing&&"border-box"===h.css(a,"boxSizing",!1,e),e):0)}}});h.support.opacity||(h.cssHooks.opacity={get:function(a,b){return Ba.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=h.isNumeric(b)?
"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if((1<=b||""===b)&&""===h.trim(f.replace(w,""))&&c.removeAttribute)if(c.removeAttribute("filter"),""===b||d&&!d.filter)return;c.filter=w.test(f)?f.replace(w,e):f+" "+e}});h(function(){h.support.reliableMarginRight||(h.cssHooks.marginRight={get:function(a,b){if(b)return h.swap(a,{display:"inline-block"},Aa,[a,"marginRight"])}});!h.support.pixelPosition&&h.fn.position&&h.each(["top","left"],function(a,b){h.cssHooks[b]={get:function(a,
c){if(c)return c=Aa(a,b),lb.test(c)?h(a).position()[b]+"px":c}}})});h.expr&&h.expr.filters&&(h.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!h.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||h.css(a,"display"))},h.expr.filters.visible=function(a){return!h.expr.filters.hidden(a)});h.each({margin:"",padding:"",border:"Width"},function(a,b){h.cssHooks[a+b]={expand:function(c){var d=0,e={};for(c="string"===typeof c?c.split(" "):[c];4>d;d++)e[a+wa[d]+b]=
c[d]||c[d-2]||c[0];return e}};Lb.test(a)||(h.cssHooks[a+b].set=Da)});var sa=/%20/g,Wb=/\[\]$/,U=/\r?\n/g,Xb=/^(?:submit|button|image|reset|file)$/i,gc=/^(?:input|select|textarea|keygen)/i;h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=h.prop(this,"elements");return a?h.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!h(this).is(":disabled")&&gc.test(this.nodeName)&&!Xb.test(a)&&(this.checked||
!B.test(a))}).map(function(a,b){var c=h(this).val();return null==c?null:h.isArray(c)?h.map(c,function(a){return{name:b.name,value:a.replace(U,"\r\n")}}):{name:b.name,value:c.replace(U,"\r\n")}}).get()}});h.param=function(a,c){var d,e=[],f=function(a,b){b=h.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=h.ajaxSettings&&h.ajaxSettings.traditional);if(h.isArray(a)||a.jquery&&!h.isPlainObject(a))h.each(a,function(){f(this.name,this.value)});else for(d in a)u(d,
a[d],c,f);return e.join("&").replace(sa,"+")};h.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){h.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});h.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,
b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Va,Oa,Ob=h.now(),Pb=/\?/,hc=/#.*$/,$b=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,jc=/^(?:GET|HEAD)$/,kc=/^\/\//,ac=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,bc=h.fn.load,cc={},Vb={},dc="*/".concat("*");try{Oa=Ja.href}catch(pc){Oa=A.createElement("a"),Oa.href="",Oa=Oa.href}Va=ac.exec(Oa.toLowerCase())||[];
h.fn.load=function(a,c,d){if("string"!==typeof a&&bc)return bc.apply(this,arguments);var e,f,g,k=this,l=a.indexOf(" ");0<=l&&(e=a.slice(l,a.length),a=a.slice(0,l));h.isFunction(c)?(d=c,c=b):c&&"object"===typeof c&&(g="POST");0<k.length&&h.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments;k.html(e?h("<div>").append(h.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){k.each(d,f||[a.responseText,b,a])});return this};h.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){h.fn[b]=function(a){return this.on(b,a)}});h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Oa,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Va[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":dc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",
text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":h.parseJSON,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Sa(Sa(a,h.ajaxSettings),b):Sa(h.ajaxSettings,a)},ajaxPrefilter:ka(cc),ajaxTransport:ka(Vb),ajax:function(a,c){function d(a,c,e,f){var z,n,F,L;L=c;if(2!==u){u=2;l&&clearTimeout(l);x=b;k=f||"";t.readyState=0<a?4:0;f=200<=a&&300>a||304===a;if(e){F=s;for(var N=t,w,M,S,v,y=F.contents,B=F.dataTypes;"*"===B[0];)B.shift(),
M===b&&(M=F.mimeType||N.getResponseHeader("Content-Type"));if(M)for(v in y)if(y[v]&&y[v].test(M)){B.unshift(v);break}if(B[0]in e)S=B[0];else{for(v in e){if(!B[0]||F.converters[v+" "+B[0]]){S=v;break}w||(w=v)}S=S||w}S?(S!==B[0]&&B.unshift(S),F=e[S]):F=void 0}a:{e=s;w=F;M=t;S=f;var C,E,V,N={},y=e.dataTypes.slice();if(y[1])for(E in e.converters)N[E.toLowerCase()]=e.converters[E];for(v=y.shift();v;)if(e.responseFields[v]&&(M[e.responseFields[v]]=w),!V&&(S&&e.dataFilter)&&(w=e.dataFilter(w,e.dataType)),
V=v,v=y.shift())if("*"===v)v=V;else if("*"!==V&&V!==v){E=N[V+" "+v]||N["* "+v];if(!E)for(C in N)if(F=C.split(" "),F[1]===v&&(E=N[V+" "+F[0]]||N["* "+F[0]])){!0===E?E=N[C]:!0!==N[C]&&(v=F[0],y.unshift(F[1]));break}if(!0!==E)if(E&&e["throws"])w=E(w);else try{w=E(w)}catch(D){F={state:"parsererror",error:E?D:"No conversion from "+V+" to "+v};break a}}F={state:"success",data:w}}if(f)s.ifModified&&((L=t.getResponseHeader("Last-Modified"))&&(h.lastModified[g]=L),(L=t.getResponseHeader("etag"))&&(h.etag[g]=
L)),204===a||"HEAD"===s.type?L="nocontent":304===a?L="notmodified":(L=F.state,z=F.data,n=F.error,f=!n);else if(n=L,a||!L)L="error",0>a&&(a=0);t.status=a;t.statusText=(c||L)+"";f?q.resolveWith(p,[z,L,t]):q.rejectWith(p,[t,L,n]);t.statusCode(A);A=b;m&&H.trigger(f?"ajaxSuccess":"ajaxError",[t,s,f?z:n]);K.fireWith(p,[t,L]);m&&(H.trigger("ajaxComplete",[t,s]),--h.active||h.event.trigger("ajaxStop"))}}"object"===typeof a&&(c=a,a=b);c=c||{};var e,f,g,k,l,m,x,n,s=h.ajaxSetup({},c),p=s.context||s,H=s.context&&
(p.nodeType||p.jquery)?h(p):h.event,q=h.Deferred(),K=h.Callbacks("once memory"),A=s.statusCode||{},w={},M={},u=0,v="canceled",t={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!n)for(n={};b=ic.exec(k);)n[b[1].toLowerCase()]=b[2];b=n[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?k:null},setRequestHeader:function(a,b){var c=a.toLowerCase();u||(a=M[c]=M[c]||a,w[a]=b);return this},overrideMimeType:function(a){u||(s.mimeType=a);return this},statusCode:function(a){var b;
if(a)if(2>u)for(b in a)A[b]=[A[b],a[b]];else t.always(a[t.status]);return this},abort:function(a){a=a||v;x&&x.abort(a);d(0,a);return this}};q.promise(t).complete=K.add;t.success=t.done;t.error=t.fail;s.url=((a||s.url||Oa)+"").replace(hc,"").replace(kc,Va[1]+"//");s.type=c.method||c.type||s.method||s.type;s.dataTypes=h.trim(s.dataType||"*").toLowerCase().match(pa)||[""];null==s.crossDomain&&(e=ac.exec(s.url.toLowerCase()),s.crossDomain=!(!e||!(e[1]!==Va[1]||e[2]!==Va[2]||(e[3]||("http:"===e[1]?"80":
"443"))!==(Va[3]||("http:"===Va[1]?"80":"443")))));s.data&&(s.processData&&"string"!==typeof s.data)&&(s.data=h.param(s.data,s.traditional));na(cc,s,c,t);if(2===u)return t;(m=s.global)&&0===h.active++&&h.event.trigger("ajaxStart");s.type=s.type.toUpperCase();s.hasContent=!jc.test(s.type);g=s.url;s.hasContent||(s.data&&(g=s.url+=(Pb.test(g)?"&":"?")+s.data,delete s.data),!1===s.cache&&(s.url=$b.test(g)?g.replace($b,"$1_="+Ob++):g+(Pb.test(g)?"&":"?")+"_="+Ob++));s.ifModified&&(h.lastModified[g]&&t.setRequestHeader("If-Modified-Since",
h.lastModified[g]),h.etag[g]&&t.setRequestHeader("If-None-Match",h.etag[g]));(s.data&&s.hasContent&&!1!==s.contentType||c.contentType)&&t.setRequestHeader("Content-Type",s.contentType);t.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+dc+"; q=0.01":""):s.accepts["*"]);for(f in s.headers)t.setRequestHeader(f,s.headers[f]);if(s.beforeSend&&(!1===s.beforeSend.call(p,t,s)||2===u))return t.abort();v="abort";for(f in{success:1,error:1,
complete:1})t[f](s[f]);if(x=na(Vb,s,c,t)){t.readyState=1;m&&H.trigger("ajaxSend",[t,s]);s.async&&0<s.timeout&&(l=setTimeout(function(){t.abort("timeout")},s.timeout));try{u=1,x.send(w,d)}catch(y){if(2>u)d(-1,y);else throw y;}}else d(-1,"No Transport");return t},getJSON:function(a,b,c){return h.get(a,b,c,"json")},getScript:function(a,c){return h.get(a,b,c,"script")}});h.each(["get","post"],function(a,c){h[c]=function(a,d,e,f){h.isFunction(d)&&(f=f||e,e=d,d=b);return h.ajax({url:a,type:c,dataType:f,
data:d,success:e})}});h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){h.globalEval(a);return a}}});h.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});h.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=A.head||h("head")[0]||A.documentElement;return{send:function(b,e){c=A.createElement("script");
c.async=!0;a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,b){if(b||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(b,!0)}}}});var ec=[],Yb=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ec.pop()||h.expando+"_"+Ob++;this[a]=!0;return a}});h.ajaxPrefilter("json jsonp",
function(c,d,e){var f,g,k,l=!1!==c.jsonp&&(Yb.test(c.url)?"url":"string"===typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yb.test(c.data)&&"data");if(l||"jsonp"===c.dataTypes[0])return f=c.jsonpCallback=h.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,l?c[l]=c[l].replace(Yb,"$1"+f):!1!==c.jsonp&&(c.url+=(Pb.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){k||h.error(f+" was not called");return k[0]},c.dataTypes[0]="json",
g=a[f],a[f]=function(){k=arguments},e.always(function(){a[f]=g;c[f]&&(c.jsonpCallback=d.jsonpCallback,ec.push(f));k&&h.isFunction(g)&&g(k[0]);k=g=b}),"script"});var nb,wb,mc=0,Zb=a.ActiveXObject&&function(){for(var a in nb)nb[a](b,!0)};h.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&La()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:La;wb=h.ajaxSettings.xhr();h.support.cors=!!wb&&"withCredentials"in wb;(wb=h.support.ajax=!!wb)&&h.ajaxTransport(function(c){if(!c.crossDomain||
h.support.cors){var d;return{send:function(e,f){var g,k,l=c.xhr();c.username?l.open(c.type,c.url,c.async,c.username,c.password):l.open(c.type,c.url,c.async);if(c.xhrFields)for(k in c.xhrFields)l[k]=c.xhrFields[k];c.mimeType&&l.overrideMimeType&&l.overrideMimeType(c.mimeType);!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(k in e)l.setRequestHeader(k,e[k])}catch(m){}l.send(c.hasContent&&c.data||null);d=function(a,e){var k,m,s,x;try{if(d&&(e||4===l.readyState))if(d=
b,g&&(l.onreadystatechange=h.noop,Zb&&delete nb[g]),e)4!==l.readyState&&l.abort();else{x={};k=l.status;m=l.getAllResponseHeaders();"string"===typeof l.responseText&&(x.text=l.responseText);try{s=l.statusText}catch(n){s=""}!k&&c.isLocal&&!c.crossDomain?k=x.text?200:404:1223===k&&(k=204)}}catch(p){e||f(-1,p)}x&&f(k,s,x,m)};c.async?4===l.readyState?setTimeout(d):(g=++mc,Zb&&(nb||(nb={},h(a).unload(Zb)),nb[g]=d),l.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var mb,Nb,nc=/^(?:toggle|show|hide)$/,
fc=RegExp("^(?:([+-])=|)("+$a+")([a-z%]*)$","i"),oc=/queueHooks$/,Mb=[function(a,b,c){var d,e,f,g,k,l=this,m={},s=a.style,x=a.nodeType&&Fa(a),n=h._data(a,"fxshow");c.queue||(g=h._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,k=g.empty.fire,g.empty.fire=function(){g.unqueued||k()}),g.unqueued++,l.always(function(){l.always(function(){g.unqueued--;h.queue(a,"fx").length||g.empty.fire()})}));if(1===a.nodeType&&("height"in b||"width"in b))c.overflow=[s.overflow,s.overflowX,s.overflowY],"inline"===
h.css(a,"display")&&"none"===h.css(a,"float")&&(!h.support.inlineBlockNeedsLayout||"inline"===Ca(a.nodeName)?s.display="inline-block":s.zoom=1);c.overflow&&(s.overflow="hidden",h.support.shrinkWrapBlocks||l.always(function(){s.overflow=c.overflow[0];s.overflowX=c.overflow[1];s.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],nc.exec(e)&&(delete b[d],f=f||"toggle"===e,e!==(x?"hide":"show")))m[d]=n&&n[d]||h.style(a,d);if(!h.isEmptyObject(m))for(d in n?"hidden"in n&&(x=n.hidden):n=h._data(a,"fxshow",
{}),f&&(n.hidden=!x),x?h(a).show():l.done(function(){h(a).hide()}),l.done(function(){var b;h._removeData(a,"fxshow");for(b in m)h.style(a,b,m[b])}),m)b=xa(x?n[d]:0,d,l),d in n||(n[d]=b.start,x&&(b.end=b.start,b.start="width"===d||"height"===d?1:0))}],vb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=fc.exec(b),f=e&&e[3]||(h.cssNumber[a]?"":"px"),g=(h.cssNumber[a]||"px"!==f&&+d)&&fc.exec(h.css(c.elem,a)),k=1,l=20;if(g&&g[3]!==f){f=f||g[3];e=e||[];g=+d||1;do k=k||".5",g/=k,h.style(c.elem,
a,g+f);while(k!==(k=c.cur()/d)&&1!==k&&--l)}e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]);return c}]};h.Animation=h.extend(s,{tweener:function(a,b){h.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],vb[c]=vb[c]||[],vb[c].unshift(b)},prefilter:function(a,b){b?Mb.unshift(a):Mb.push(a)}});h.Tween=H;H.prototype={constructor:H,init:function(a,b,c,d,e,f){this.elem=a;this.prop=c;this.easing=e||"swing";this.options=b;this.start=this.now=this.cur();this.end=
d;this.unit=f||(h.cssNumber[c]?"":"px")},cur:function(){var a=H.propHooks[this.prop];return a&&a.get?a.get(this):H.propHooks._default.get(this)},run:function(a){var b,c=H.propHooks[this.prop];this.pos=this.options.duration?b=h.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):H.propHooks._default.set(this);return this}};H.prototype.init.prototype=
H.prototype;H.propHooks={_default:{get:function(a){if(null!=a.elem[a.prop]&&(!a.elem.style||null==a.elem.style[a.prop]))return a.elem[a.prop];a=h.css(a.elem,a.prop,"");return!a||"auto"===a?0:a},set:function(a){if(h.fx.step[a.prop])h.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[h.cssProps[a.prop]]||h.cssHooks[a.prop])?h.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=
a.now)}};h.each(["toggle","show","hide"],function(a,b){var c=h.fn[b];h.fn[b]=function(a,d,e){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(K(b,!0),a,d,e)}});h.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Fa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=h.isEmptyObject(a),f=h.speed(b,c,d);b=function(){var b=s(this,h.extend({},a),f);(e||h._data(this,"finish"))&&b.stop(!0)};b.finish=b;return e||!1===f.queue?this.each(b):
this.queue(f.queue,b)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop;b(d)};"string"!==typeof a&&(d=c,c=a,a=b);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=h.timers,g=h._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&(g[c].stop&&oc.test(c))&&e(g[c]);for(c=f.length;c--;)if(f[c].elem===this&&(null==a||f[c].queue===a))f[c].anim.stop(d),b=!1,f.splice(c,1);(b||!d)&&h.dequeue(this,a)})},finish:function(a){!1!==a&&(a=
a||"fx");return this.each(function(){var b,c=h._data(this),d=c[a+"queue"];b=c[a+"queueHooks"];var e=h.timers,f=d?d.length:0;c.finish=!0;h.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=e.length;b--;)e[b].elem===this&&e[b].queue===a&&(e[b].anim.stop(!0),e.splice(b,1));for(b=0;b<f;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}});h.each({slideDown:K("show"),slideUp:K("hide"),slideToggle:K("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},
function(a,b){h.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});h.speed=function(a,b,c){var d=a&&"object"===typeof a?h.extend({},a):{complete:c||!c&&b||h.isFunction(a)&&a,duration:a,easing:c&&b||b&&!h.isFunction(b)&&b};d.duration=h.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in h.fx.speeds?h.fx.speeds[d.duration]:h.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){h.isFunction(d.old)&&d.old.call(this);d.queue&&h.dequeue(this,
d.queue)};return d};h.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}};h.timers=[];h.fx=H.prototype.init;h.fx.tick=function(){var a,c=h.timers,d=0;for(mb=h.now();d<c.length;d++)a=c[d],!a()&&c[d]===a&&c.splice(d--,1);c.length||h.fx.stop();mb=b};h.fx.timer=function(a){a()&&h.timers.push(a)&&h.fx.start()};h.fx.interval=13;h.fx.start=function(){Nb||(Nb=setInterval(h.fx.tick,h.fx.interval))};h.fx.stop=function(){clearInterval(Nb);Nb=null};h.fx.speeds={slow:600,
fast:200,_default:400};h.fx.step={};h.expr&&h.expr.filters&&(h.expr.filters.animated=function(a){return h.grep(h.timers,function(b){return a===b.elem}).length});h.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){h.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=(d=this[0])&&d.ownerDocument;if(f){c=f.documentElement;if(!h.contains(c,d))return e;typeof d.getBoundingClientRect!==ga&&(e=d.getBoundingClientRect());d=M(f);return{top:e.top+(d.pageYOffset||c.scrollTop)-
(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}}};h.offset={setOffset:function(a,b,c){var d=h.css(a,"position");"static"===d&&(a.style.position="relative");var e=h(a),f=e.offset(),g=h.css(a,"top"),k=h.css(a,"left"),l={},m={};("absolute"===d||"fixed"===d)&&-1<h.inArray("auto",[g,k])?(m=e.position(),d=m.top,k=m.left):(d=parseFloat(g)||0,k=parseFloat(k)||0);h.isFunction(b)&&(b=b.call(a,c,f));null!=b.top&&(l.top=b.top-f.top+d);null!=b.left&&(l.left=b.left-f.left+k);"using"in
b?b.using.call(a,l):e.css(l)}};h.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];"fixed"===h.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),h.nodeName(a[0],"html")||(c=a.offset()),c.top+=h.css(a[0],"borderTopWidth",!0),c.left+=h.css(a[0],"borderLeftWidth",!0));return{top:b.top-c.top-h.css(d,"marginTop",!0),left:b.left-c.left-h.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||
ya;a&&!h.nodeName(a,"html")&&"static"===h.css(a,"position");)a=a.offsetParent;return a||ya})}});h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);h.fn[a]=function(e){return h.access(this,function(a,e,f){var g=M(a);if(f===b)return g?c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(!d?f:h(g).scrollLeft(),d?f:h(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}});h.each({Height:"height",Width:"width"},function(a,c){h.each({padding:"inner"+a,content:c,
"":"outer"+a},function(d,e){h.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!==typeof e),k=d||(!0===e||!0===f?"margin":"border");return h.access(this,function(c,d,e){return h.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(d=c.documentElement,Math.max(c.body["scroll"+a],d["scroll"+a],c.body["offset"+a],d["offset"+a],d["client"+a])):e===b?h.css(c,d,k):h.style(c,d,e,k)},c,g?e:b,g,null)}})});h.fn.size=function(){return this.length};h.fn.andSelf=h.fn.addBack;"object"===typeof module&&
module&&"object"===typeof module.exports?module.exports=h:(a.jQuery=a.$=h,"function"===typeof define&&define.amd&&define("jquery",[],function(){return h}))})(window);Ray.JQuery=$.noConflict();Ray.Lib={};RT=Ray.Runtime;Types=Ray.Types;
Ray.Lib.stringComparisons={EQ:function(a,b){for(var c=0;c<(a.length<b.length?a.length:b.length);c++)if(a.charCodeAt(c)!==b.charCodeAt(c))return!1;return a.length!==b.length},LT:function(a,b){for(var c=0;c<(a.length<b.length?a.length:b.length);c++){if(a.charCodeAt(c)>b.charCodeAt(c))return!1;if(a.charCodeAt(c)<b.charCodeAt(c))return!0}return a.length<b.length},GT:function(a,b){for(var c=0;c<(a.length<b.length?a.length:b.length);c++){if(a.charCodeAt(c)<b.charCodeAt(c))return!1;if(a.charCodeAt(c)>b.charCodeAt(c))return!0}return a.length>
b.length},LE:function(a,b){for(var c=0;c<(a.length<b.length?a.length:b.length);c++){if(a.charCodeAt(c)>b.charCodeAt(c))return!1;if(a.charCodeAt(c)<b.charCodeAt(c))return!0}return a.length<=b.length},GE:function(a,b){for(var c=0;c<(a.length<b.length?a.length:b.length);c++){if(a.charCodeAt(c)<b.charCodeAt(c))return!1;if(a.charCodeAt(c)>b.charCodeAt(c))return!0}return a.length>=b.length}};Ray.Lib.addBuiltin=function(a,b){RT.bindBuiltin(a,b)};
Ray.Lib.setPriority=function(a,b){var c=RT.lookup(a);c&&(c.priority_=b)};Ray.Lib.setDisplayName=function(a,b){var c=RT.lookup(a);c&&(c.display_name_=b)};Ray.Lib.makePredicate=function(a){Ray.Lib.addBuiltin(a+"?",RT.prim(RT.p_spec(["x",Types.unknown()]),function(b){return new RT.Value.Boolean(RT.nodeType(b)===a)},Types.bool()))};Ray.Lib.makeNumericUnaryOp=function(a,b){var c=b||a;Ray.Lib.addBuiltin(a,RT.prim(RT.p_spec(["x",Types.num()]),function(a){return new RT.Value.Num(Ray.Numbers[c](a.n))},Types.num()))};
Ray.Lib.makeNumericBinop=function(a,b){var c=b||a;Ray.Lib.addBuiltin(a,RT.prim(RT.p_spec(["x",Types.num()],["y",Types.num()]),function(a,b){return new RT.Value.Num(Ray.Numbers[c](a.n,b.n))},Types.num()))};Ray.Lib.makeNumericComparison=function(a,b){Ray.Lib.addBuiltin(a,RT.prim(RT.p_spec(["x",Types.num()],["y",Types.num()]),function(a,d){var e=Ray.Numbers[b](a.n,d.n);return new RT.Value.Boolean(e)},Types.bool()))};
Ray.Lib.makeStringComparison=function(a,b){Ray.Lib.addBuiltin(a,RT.prim(RT.p_spec(["x",Types.str()],["y",Types.str()]),function(a,d){var e=b(a.s,d.s);return new RT.Value.Boolean(e)},Types.bool()))};Ray.Lib.isInitialized_=!1;Ray.Lib.isInitialized=function(){return Ray.Lib.isInitialized_};
Ray.Lib.initialize=function(){Ray.Lib.makePredicate("boolean");Ray.Lib.makePredicate("pair");Ray.Lib.makePredicate("number");Ray.Lib.makePredicate("string");Ray.Lib.makePredicate("empty");Ray.Lib.addBuiltin("empty",RT.empty());Ray.Lib.addBuiltin("first",RT.prim(RT.p_spec(["x",Types.list(Types.unknown())]),function(a){return a.car},Types.unknown()));Ray.Lib.addBuiltin("rest",RT.prim(RT.p_spec(["x",Types.list(Types.unknown())]),function(a){return a.cdr},Types.list(Types.unknown())));Ray.Lib.addBuiltin("cons",
RT.prim(RT.p_spec(["car",Types.unknown()],["cdr",Types.list(Types.unknown())]),function(a,b){return new RT.Value.Pair(a,b)},Types.list(Types.unknown())));Ray.Lib.addBuiltin("list",RT.prim(RT.rest_spec("ls",Types.unknown()),function(a){return goog.array.reduceRight(a,function(a,c){return new RT.Value.Pair(c,a)},new RT.Value.Empty)},Types.list(Types.unknown())));Ray.Lib.addBuiltin("list?",RT.fn(RT.p_spec(["x",Types.unknown()]),RT.or(RT.app(RT.name("empty?"),RT.positionalArgs(RT.name("x"))),RT.and(RT.app(RT.name("pair?"),
RT.positionalArgs(RT.name("x"))),RT.app(RT.name("list?"),RT.positionalArgs(RT.app(RT.name("cdr"),RT.positionalArgs(RT.name("x"))))))),Types.bool()));Ray.Lib.addBuiltin("map",RT.fn(RT.p_spec(["f",Types.fn(Types.positionalArgs(Types.unknown()),Types.unknown())],["ls",Types.list(Types.unknown())]),RT._if(RT.app(RT.name("empty?"),RT.positionalArgs(RT.name("ls"))),RT.empty(),RT.app(RT.name("cons"),RT.positionalArgs(RT.app(RT.name("f"),RT.positionalArgs(RT.app(RT.name("car"),RT.positionalArgs(RT.name("ls"))))),
RT.app(RT.name("map"),RT.positionalArgs(RT.name("f"),RT.app(RT.name("cdr"),RT.positionalArgs(RT.name("ls")))))))),Types.list(Types.unknown())));Ray.Lib.addBuiltin("not",RT.prim(RT.p_spec(["x",Types.bool()]),function(a){return new RT.Value.Boolean(!a.b)},Types.bool()));Ray.Lib.addBuiltin("+",RT.prim(RT.p_spec(["x",Types.num()],["y",Types.num()]),function(a,b){var c=Ray.Numbers.add(a.n,b.n);return new RT.Value.Num(c)},Types.num()));Ray.Lib.setPriority("+",Ray.Globals.Priorities.BASIC_NUMBER_OPERATION);
Ray.Lib.addBuiltin("*",RT.prim(RT.p_spec(["x",Types.num()],["y",Types.num()]),function(a,b){var c=Ray.Numbers.multiply(a.n,b.n);return new RT.Value.Num(c)},Types.num()));Ray.Lib.setPriority("*",Ray.Globals.Priorities.BASIC_NUMBER_OPERATION);Ray.Lib.setDisplayName("*","&times;");Ray.Lib.addBuiltin("-",RT.prim(RT.p_spec(["x",Types.num()],["y",Types.num()]),function(a,b){var c=Ray.Numbers.subtract(a.n,b.n);return new RT.Value.Num(c)},Types.num()));Ray.Lib.setPriority("-",Ray.Globals.Priorities.BASIC_NUMBER_OPERATION);
Ray.Lib.addBuiltin("/",RT.prim(RT.p_spec(["x",Types.num()],["y",Types.num()]),function(a,b){var c=Ray.Numbers.divide(a.n,b.n);return new RT.Value.Num(c)},Types.num()));Ray.Lib.setPriority("/",Ray.Globals.Priorities.BASIC_NUMBER_OPERATION);Ray.Lib.makeNumericComparison(">","greaterThan");Ray.Lib.makeNumericComparison("<","lessThan");Ray.Lib.makeNumericComparison(">=","greaterThanOrEqual");Ray.Lib.makeNumericComparison("<=","lessThanOrEqual");Ray.Lib.makeNumericComparison("=","equals");Ray.Lib.makeNumericBinop("quotient");
Ray.Lib.makeNumericBinop("remainder");Ray.Lib.makeNumericBinop("modulo");Ray.Lib.makeNumericUnaryOp("abs");Ray.Lib.makeNumericUnaryOp("sqrt");Ray.Lib.makeNumericUnaryOp("exp");Ray.Lib.makeNumericUnaryOp("log");Ray.Lib.makeNumericUnaryOp("magnitude");Ray.Lib.makeNumericUnaryOp("numerator");Ray.Lib.makeNumericUnaryOp("sgn");Ray.Lib.makeNumericUnaryOp("sqr");Ray.Lib.makeNumericUnaryOp("ceiling");Ray.Lib.makeNumericUnaryOp("floor");Ray.Lib.makeNumericUnaryOp("round");Ray.Lib.addBuiltin("make-string",
RT.prim(RT.p_spec(["k",Types.num()],["c",Types._char()]),function(a,b){for(var c="",d=0;d<a.n;d++)c+=b.c;return new RT.Value.Str(c)},Types.str()));Ray.Lib.addBuiltin("string",RT.prim(RT.rest_spec("ls",Types._char()),function(a){var b="";goog.array.forEach(a,function(a){b+=a.c});return new RT.Value.Str(b)},Types.str()));Ray.Lib.addBuiltin("string-length",RT.prim(RT.p_spec(["x",Types.str()]),function(a){return new RT.Value.Num(a.s.length)},Types.num()));Ray.Lib.addBuiltin("string-ref",RT.prim(RT.p_spec(["str",
Types.str()],["k",Types.num()]),function(a,b){var c=a.s.charAt(b.n);if(!c)throw new RT.Error("Invalid index passed to string-ref!");return new RT.Value.Char(c)},Types._char()));Ray.Lib.addBuiltin("string-append",RT.prim(RT.rest_spec("ls",Types.str()),function(a){a=goog.array.reduce(a,function(a,c){return a+c.s},"");return new RT.Value.Str(a)},Types.str()));Ray.Lib.addBuiltin("substring",RT.prim(RT.p_spec(["str",Types.str()],["start",Types.num()],["end",Types.num()]),function(a,b,c){if(0<=b.n&&b.n<=
a.s.length&&c.n>=b.n&&c.n<=a.s.length)return new RT.Value.Str(a.s.substring(b.n,c.n));throw new RT.Error("Invalid indices passed to substring");},Types.str()));Ray.Lib.makeStringComparison("string=?",Ray.Lib.stringComparisons.EQ);Ray.Lib.makeStringComparison("string<?",Ray.Lib.stringComparisons.LT);Ray.Lib.makeStringComparison("string>?",Ray.Lib.stringComparisons.GT);Ray.Lib.makeStringComparison("string<=?",Ray.Lib.stringComparisons.LE);Ray.Lib.makeStringComparison("string>=?",Ray.Lib.stringComparisons.GE);
Ray.Lib.isInitialized_=!0};Ray.Typechecker={};
var R=Ray.Runtime,Expressions=Ray.Globals.Expressions,Values=Ray.Globals.Values,typecheckList=function(a,b,c){switch(R.exprType(a)){case Expressions.Empty:return a=new Ray.Types.List(new Ray.Types.Unknown),Ray.Types.areMatchingTypes(b,a)&&a;case Expressions.Pair:if("list"!==b.outputType_)return!1;b=typecheckExpr(a.car,b.elementType,c);if(!b)return!1;for(a=a.cdr;R.exprType(a)===Expressions.Pair;){if(!Ray.Types.areMatchingTypes(b,a.car))return!1;a=a.cdr}return R.exprType(a)===Expressions.Empty?new Ray.Types.List(b):
!1;default:throw"Not a list!";}},typecheckFunctionArguments=function(a,b,c){var d=a.argumentsType,e=d.positionalArgTypes.list;b=b.positionalArgs;if(b.length<e.length)return!1;for(var f=0;f<b.length;f++){var g=typecheckExpr(b[f],c);if(!Ray.Types.areMatchingTypes(g,e[f]))return!1}if(!d.restArgType)return a.returnType;var e=goog.array.map(b.slice(f),function(a){return typecheckExpr(a,c)}),k=d.restArgType.elementType;return goog.array.every(e,function(a){return a&&Ray.Types.areMatchingTypes(a,k)})&&a.returnType},
typecheckExpr=function(a,b,c){switch(R.exprType(a)){case Expressions.Pair:return typecheckList(a,b,c);case Expressions.Empty:return typecheckList(a,b,c);case Expressions.Num:return a=new Ray.Types.Num,Ray.Types.areMatchingTypes(b,a)&&a;case Expressions.Char:return a=new Ray.Types.Char,Ray.Types.areMatchingTypes(b,a)&&a;case Expressions.Boolean:var d=new Ray.Types.Boolean;return Ray.Types.areMatchingTypes(b,d)&&d;case Expressions.Str:return a=new Ray.Types.Str,Ray.Types.areMatchingTypes(b,a)&&a;case Expressions.Primitive:return b=
a.argSpec,b=b.argsType,new Ray.Types.FunctionType(b,a.bodyType);case Expressions.Lambda:b=a.argSpec;var e=b.positionalArgs;b=b.argsType;for(var f=b.positionalArgTypes.list,g=c,k=0;k<f.length;k++)g=g.extend(e[k],f[k]);return(e=typecheckExpr(a.body,a.bodyType,g))&&Ray.Types.areMatchingTypes(e,a.bodyType)&&new Ray.Types.FunctionType(b,e);case Expressions.Name:return c.lookup(a.name)||typecheckValue(R.lookup(a.name))||!1;case Expressions.Cond:e=a.testClauses;f=goog.array.map(e,function(a){return typecheckExpr(a[0],
new Ray.Types.Boolean,c)});d=new Ray.Types.Boolean;if(!goog.array.every(f,function(a){return a&&Ray.Types.areMatchingTypes(d,a)}))return!1;e=goog.array.map(e,function(a){return typecheckExpr(a[1],c)});a.elseClause&&e.push(typecheckExpr(a.elseClause,c));var l=e[0];a=goog.array.every(e.slice(1),function(a){return a&&Ray.Types.areMatchingTypes(l,a)});return Ray.Types.match(l,b)&&a&&l;case Expressions.If:if(!typecheckExpr(a.pred,new Ray.Types.Boolean,c))return!1;e=typecheckExpr(a.thenExpr,b,c);a=typecheckExpr(a.elseExpr,
b,c);return Ray.Types.areMatchingTypes(e,a)&&e;case Expressions.And:return a=goog.array.map(a.args,function(a){return typecheckExpr(a,c)}),d=new Ray.Types.Boolean,goog.array.every(a,function(a){return Ray.Types.areMatchingTypes(d,a)})&&d;case Expressions.Or:return a=goog.array.map(a.args,function(a){return typecheckExpr(a,c)}),d=new Ray.Types.Boolean,goog.array.every(a,function(a){return Ray.Types.areMatchingTypes(d,a)})&&d;case Expressions.App:return(b=typecheckExpr(a.f,b,c))&&typecheckFunctionArguments(b,
a.args,c);case Expressions.Arguments:throw"Should typecheck arguments in App!";case Expressions.ArgumentSpec:throw"Should typecheck argument specification in primitive or lambda!";default:throw"Unknown variant of expression!";}},typecheckValue=function(a,b,c){switch(R.valueType(a)){case Values.Pair:return typecheckList(a,b,c);case Values.Empty:return typecheckList(a,b,c);case Values.Num:return a=new Ray.Types.Num,Ray.Types.areMatchingTypes(b,a)&&a;case Values.Char:return a=new Ray.Types.Char,Ray.Types.areMatchingTypes(b,
a)&&a;case Values.Str:return a=new Ray.Types.Str,Ray.Types.areMatchingTypes(b,a)&&a;case Values.Boolean:return a=new Ray.Types.Boolean,Ray.Types.areMatchingTypes(b,a)&&a;case Values.Primitive:case Values.Closure:return a=new Ray.Types.FunctionType(a.argSpec.argsType,a.bodyType),Ray.Types.areMatchingTypes(b,a)&&a;case Values.ArgumentSpec:throw"Should typecheck arguments in App!";case Values.Arguments:throw"Should typecheck argument specifications in primitive or closure!";default:throw"Unknown variant of value!";
}};Ray.Typechecker.typecheck=function(a){return typecheckExpr(a,Ray.Env.emptyEnv())};var RT=Ray.Runtime,$=Ray.JQuery,typecheck=Ray.Typechecker.typecheck,testClass=function(a){return a?"passed":"failed"},assert=function(a,b,c,d){if(!typecheck(a))throw"Failed to typecheck!";var e=RT.eval(a),e=b(e);b=$("#tests > dl");d=$("<dt>"+d+"</dt>");d.addClass(testClass(e));b.append(d);console.log("Test "+testClass(e)+"!");d=$("<dd></dd>");d.append("<code>"+goog.string.htmlEscape(RT.display(a))+"</code>");d.append(" "+c);b.append(d)},describe=function(a){$("#tests > dl").append("<p>"+a+"</p>")},
display=function(a,b){var c=$("#tests > dl"),d=b?RT.eval(a):a;c.append("<p><code>"+goog.string.htmlEscape(RT.display(d))+"</code></p>")},displayEvaluation=function(a){var b=$("#tests > dl"),c=RT.eval(a);b.append('<p class="in"><code>'+goog.string.htmlEscape(RT.display(a))+' </code>&rArr; <br></p><p class="out"><code>    '+goog.string.htmlEscape(RT.display(c))+"</code></p>")},assertTrue=function(a,b){assert(a,function(a){return a.b},"is true",b)},assertFalse=function(a,b){assert(a,function(a){return!a.b},
"is false",b)},assertEquals=function(a,b,c){assert(a,function(a){return a.n===b},"is equal to "+String(b),c)},endTests=function(){var a=$("#tests > dl > dt.passed").size(),b=$("#tests > dl > dt.failed").size(),a=String(a)+"/"+String(a+b);$("#tests").append("<p>Tests passed: ("+a+")</p>");0===b?$("#tests").append('<H1 class="perfect">All tests passed!</H1>'):$("#tests").append("<p>Almost there!</p>")},printLib=function(){$("#lib").prepend("<H2>Current builtins:</H2>");var a=$("#lib > dl");goog.object.forEach(RT.builtins.dict({}),
function(b,c){var d=$("<dt><code>"+c+"</code></dt>"),e=$("<dd><code>"+goog.string.htmlEscape(r.display(b))+"</code></dd>");a.append(d);a.append(e)})},createTestingEnvironment=function(){$("#tests").append("<dl></dl>");$("#tests").prepend("<H2>Test results:</H2>");$("#lib").append("<dl></dl>")};
Ray.Test=function(){Ray.Lib.isInitialized()||Ray.Lib.initialize();createTestingEnvironment();printLib();var a=RT.app(RT.name(">"),RT.positionalArgs(RT.num(3),RT.num(0)));assertTrue(a,"gt_1");a=RT.app(RT.name(">"),RT.positionalArgs(RT.num(3),RT.num(3)));assertFalse(a,"gt_2");RT.app(RT.name(">"),RT.positionalArgs(RT.num(3),RT.num(5)));assertFalse(a,"gt_3");a=RT.app(RT.name("<"),RT.positionalArgs(RT.num(1),RT.num(2)));assertTrue(a,"lt_1");a=RT.app(RT.name("<"),RT.positionalArgs(RT.num(2),RT.num(2)));
assertFalse(a,"lt_2");a=RT.app(RT.name("<"),RT.positionalArgs(RT.num(3),RT.num(2)));assertFalse(a,"lt_3");a=RT.app(RT.name(">="),RT.positionalArgs(RT.num(3),RT.num(0)));assertTrue(a,"ge_1");a=RT.app(RT.name(">="),RT.positionalArgs(RT.num(3),RT.num(3)));assertTrue(a,"ge_2");a=RT.app(RT.name(">="),RT.positionalArgs(RT.num(3),RT.num(5)));assertFalse(a,"ge_3");a=RT.app(RT.name("<="),RT.positionalArgs(RT.num(1),RT.num(2)));assertTrue(a,"le_1");a=RT.app(RT.name("<="),RT.positionalArgs(RT.num(2),RT.num(2)));
assertTrue(a,"le_2");a=RT.app(RT.name("<="),RT.positionalArgs(RT.num(3),RT.num(2)));assertFalse(a,"le_3");a=RT.or(RT.bool(!0),RT.bool(!1));assertTrue(a,"or_1");a=RT.or(RT.bool(!1),RT.bool(!0));assertTrue(a,"or_2");a=RT.or();assertFalse(a,"or_3");a=RT.and(RT.bool(!0),RT.bool(!1));assertFalse(a,"and_1");a=RT.and(RT.bool(!1),RT.bool(!0));assertFalse(a,"and_2");a=RT.and();assertTrue(a,"and_3");a=RT.app(RT.name("boolean?"),RT.positionalArgs(RT.app(RT.name("boolean?"),RT.positionalArgs(RT.num(5)))));assertTrue(a,
"yes_bool");a=RT.app(RT.name("boolean?"),RT.positionalArgs(RT.num(5)));assertFalse(a,"no_bool");a=RT.app(RT.name("pair?"),RT.positionalArgs(RT.pair(RT.num(1),RT.num(2))));assertTrue(a,"yes_pair");a=RT.app(RT.name("pair?"),RT.positionalArgs(RT.num(3)));assertFalse(a,"no_pair");a=RT.app(RT.name("list?"),RT.positionalArgs(RT.pair(RT.pair(RT.num(4),RT.num(8)),RT.num(7))));assertFalse(a,"no_list1");a=RT.app(RT.name("list?"),RT.positionalArgs(RT.num(3)));assertFalse(a,"no_list2");a=RT.app(RT.name("list?"),
RT.positionalArgs(RT.pair(RT.num(0),RT.pair(RT.empty(),RT.empty()))));assertTrue(a,"yes_list1");a=RT.app(RT.name("list?"),RT.positionalArgs(RT.empty()));assertTrue(a,"yes_list2");a=RT.app(RT.app(RT.fn(RT.p_spec(["x",Ray.Types.num()]),RT.fn(RT.p_spec(["y",Ray.Types.num()]),RT.app(RT.name("+"),RT.positionalArgs(RT.name("x"),RT.name("y"))),Ray.Types.num()),Ray.Types.fn(Ray.Types.positionalArgs(Ray.Types.num()),Ray.Types.num())),RT.positionalArgs(RT.num(4))),RT.positionalArgs(RT.num(5)));assertEquals(a,
9,"nested lambdas");a=RT.app(RT.app(RT.fn(RT.p_spec(["x",Ray.Types.num()]),RT.fn(RT.p_spec(["y",Ray.Types.num()]),RT.app(RT.name("+"),RT.positionalArgs(RT.name("x"),RT.name("x"))),Ray.Types.num()),Ray.Types.fn(Ray.Types.positionalArgs(Ray.Types.num()),Ray.Types.num())),RT.positionalArgs(RT.num(4))),RT.positionalArgs(RT.num(5)));assertEquals(a,8,"closed over x");a=RT._if(RT.app(RT.name(">"),RT.positionalArgs(RT.num(4),RT.num(3))),RT.num(8),RT.num(9));assertEquals(a,8,"if_test1");a=RT._if(RT.app(RT.name(">"),
RT.positionalArgs(RT.num(3),RT.num(4))),RT.num(8),RT.num(9));assertEquals(a,9,"if_test2");a=RT.cond([[RT.app(RT.name("="),RT.positionalArgs(RT.num(3),RT.num(5))),RT.num(6)],[RT.app(RT.name("="),RT.positionalArgs(RT.num(3),RT.num(4))),RT.num(5)],[RT.app(RT.name("="),RT.positionalArgs(RT.num(3),RT.num(3))),RT.num(3)]]);assertEquals(a,3,"cond_test1");a=RT.cond([[RT.app(RT.name("="),RT.positionalArgs(RT.num(3),RT.num(3))),RT.num(6)],[RT.app(RT.name("="),RT.positionalArgs(RT.num(3),RT.num(4))),RT.num(5)],
[RT.app(RT.name("="),RT.positionalArgs(RT.num(3),RT.num(3))),RT.num(3)]]);assertEquals(a,6,"cond_test2");a=RT.cond([[RT.app(RT.name("="),RT.positionalArgs(RT.num(3),RT.num(5))),RT.num(6)],[RT.app(RT.name("="),RT.positionalArgs(RT.num(3),RT.num(4))),RT.num(5)],[RT.app(RT.name("="),RT.positionalArgs(RT.num(3),RT.num(3))),RT.num(3)]],RT.num(7));assertEquals(a,3,"cond_test3");a=RT.cond([[RT.app(RT.name("="),RT.positionalArgs(RT.num(3),RT.num(5))),RT.num(6)],[RT.app(RT.name("="),RT.positionalArgs(RT.num(3),
RT.num(4))),RT.num(5)],[RT.app(RT.name("="),RT.positionalArgs(RT.num(3),RT.num(2))),RT.num(3)]],RT.num(8));assertEquals(a,8,"cond_test4");a=RT.cond([],RT.num(8));assertEquals(a,8,"cond_test5");a=RT.cond([],RT.bool(!0));assertTrue(a,"cond_test6");a=RT.cond([],RT.bool(!1));assertFalse(a,"cond_test7");describe("First, I bind <code>double_num</code> at the top level to:");a=RT.fn(RT.p_spec(["x",Ray.Types.num()]),RT.app(RT.name("*"),RT.positionalArgs(RT.name("x"),RT.num(2))),Ray.Types.num());display(a,
!1);RT.bindTopLevel("double",a);describe("The binding is available everywhere.");displayEvaluation(RT.app(RT.name("double"),RT.positionalArgs(RT.num(5))));describe("Since top level bindings are visible everywhere, we can make recursive bindings.");describe("Here, I bind <code>last</code>:");a=RT.fn(RT.p_spec(["x",Ray.Types.list(Ray.Types.num())]),RT._if(RT.app(RT.name("empty?"),RT.positionalArgs(RT.app(RT.name("cdr"),RT.positionalArgs(RT.name("x"))))),RT.app(RT.name("car"),RT.positionalArgs(RT.name("x"))),
RT.app(RT.name("last"),RT.positionalArgs(RT.app(RT.name("cdr"),RT.positionalArgs(RT.name("x")))))),Ray.Types.num());display(a,!1);RT.bindTopLevel("last",a);describe("It works as expected.");a=RT.app(RT.name("last"),RT.positionalArgs(RT.app(RT.name("list"),RT.positionalArgs(RT.num(1),RT.num(2),RT.num(3),RT.num(4),RT.num(5)))));displayEvaluation(a);describe("We can use any function defined at the top level in any other definition at the top level");describe("Let's define <code>double-last</code> as");
a=RT.fn(RT.p_spec(["x",Ray.Types.list(Ray.Types.num())]),RT.app(RT.name("double"),RT.positionalArgs(RT.app(RT.name("last"),RT.positionalArgs(RT.name("x"))))),Ray.Types.num());RT.bindTopLevel("double-last",a);display(a,!1);describe("No surprises here.");a=RT.app(RT.name("double-last"),RT.positionalArgs(RT.app(RT.name("list"),RT.positionalArgs(RT.num(1),RT.num(2),RT.num(3),RT.num(4),RT.num(5)))));displayEvaluation(a);describe("If we now change a binding at the top level, this will be reflected in any other definitions that rely upon it");
describe('I will now change the definition of <code>double_num</code> to a function of one argument that always just returns the string <code>"double"</code>');var b=RT.fn(RT.p_spec(["x",Ray.Types.num()]),RT.str("double"),Ray.Types.str());RT.bindTopLevel("double",b);displayEvaluation(RT.app(RT.name("double"),RT.positionalArgs(RT.num(5))));displayEvaluation(a);endTests()};goog.ui.TabRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.TabRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.TabRenderer);goog.ui.TabRenderer.CSS_CLASS="goog-tab";goog.ui.TabRenderer.prototype.getCssClass=function(){return goog.ui.TabRenderer.CSS_CLASS};goog.ui.TabRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.TAB};
goog.ui.TabRenderer.prototype.createDom=function(a){var b=goog.ui.TabRenderer.superClass_.createDom.call(this,a);(a=a.getTooltip())&&this.setTooltip(b,a);return b};goog.ui.TabRenderer.prototype.decorate=function(a,b){b=goog.ui.TabRenderer.superClass_.decorate.call(this,a,b);var c=this.getTooltip(b);c&&a.setTooltipInternal(c);if(a.isSelected()&&(c=a.getParent())&&goog.isFunction(c.setSelectedTab))a.setState(goog.ui.Component.State.SELECTED,!1),c.setSelectedTab(a);return b};
goog.ui.TabRenderer.prototype.getTooltip=function(a){return a.title||""};goog.ui.TabRenderer.prototype.setTooltip=function(a,b){a&&(a.title=b||"")};goog.ui.Tab=function(a,b,c){goog.ui.Control.call(this,a,b||goog.ui.TabRenderer.getInstance(),c);this.setSupportedState(goog.ui.Component.State.SELECTED,!0);this.setDispatchTransitionEvents(goog.ui.Component.State.DISABLED|goog.ui.Component.State.SELECTED,!0)};goog.inherits(goog.ui.Tab,goog.ui.Control);goog.ui.Tab.prototype.getTooltip=function(){return this.tooltip_};goog.ui.Tab.prototype.setTooltip=function(a){this.getRenderer().setTooltip(this.getElement(),a);this.setTooltipInternal(a)};
goog.ui.Tab.prototype.setTooltipInternal=function(a){this.tooltip_=a};goog.ui.registry.setDecoratorByClassName(goog.ui.TabRenderer.CSS_CLASS,function(){return new goog.ui.Tab(null)});goog.style.bidi={};goog.style.bidi.getScrollLeft=function(a){var b=goog.style.isRightToLeft(a);return b&&goog.userAgent.GECKO?-a.scrollLeft:b&&(!goog.userAgent.IE||!goog.userAgent.isVersionOrHigher("8"))&&"visible"!=goog.style.getComputedOverflowX(a)?a.scrollWidth-a.clientWidth-a.scrollLeft:a.scrollLeft};
goog.style.bidi.getOffsetStart=function(a){var b=a.offsetLeft,c=a.offsetParent;!c&&"fixed"==goog.style.getComputedPosition(a)&&(c=goog.dom.getOwnerDocument(a).documentElement);if(!c)return b;if(goog.userAgent.GECKO)var d=goog.style.getBorderBox(c),b=b+d.left;else goog.userAgent.isDocumentModeOrHigher(8)&&(d=goog.style.getBorderBox(c),b-=d.left);return goog.style.isRightToLeft(c)?c.clientWidth-(b+a.offsetWidth):b};
goog.style.bidi.setScrollOffset=function(a,b){b=Math.max(b,0);goog.style.isRightToLeft(a)?goog.userAgent.GECKO?a.scrollLeft=-b:!goog.userAgent.IE||!goog.userAgent.isVersionOrHigher("8")?a.scrollLeft=a.scrollWidth-b-a.clientWidth:a.scrollLeft=b:a.scrollLeft=b};goog.style.bidi.setPosition=function(a,b,c,d){goog.isNull(c)||(a.style.top=c+"px");d?(a.style.right=b+"px",a.style.left=""):(a.style.left=b+"px",a.style.right="")};goog.fx={};goog.fx.Dragger=function(a,b,c){goog.events.EventTarget.call(this);this.target=a;this.handle=b||a;this.limits=c||new goog.math.Rect(NaN,NaN,NaN,NaN);this.document_=goog.dom.getOwnerDocument(a);this.eventHandler_=new goog.events.EventHandler(this);this.registerDisposable(this.eventHandler_);goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this)};goog.inherits(goog.fx.Dragger,goog.events.EventTarget);
goog.fx.Dragger.HAS_SET_CAPTURE_=goog.userAgent.IE||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.3");goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"};goog.fx.Dragger.prototype.clientX=0;goog.fx.Dragger.prototype.clientY=0;goog.fx.Dragger.prototype.screenX=0;goog.fx.Dragger.prototype.screenY=0;goog.fx.Dragger.prototype.startX=0;goog.fx.Dragger.prototype.startY=0;goog.fx.Dragger.prototype.deltaX=0;
goog.fx.Dragger.prototype.deltaY=0;goog.fx.Dragger.prototype.enabled_=!0;goog.fx.Dragger.prototype.dragging_=!1;goog.fx.Dragger.prototype.hysteresisDistanceSquared_=0;goog.fx.Dragger.prototype.mouseDownTime_=0;goog.fx.Dragger.prototype.ieDragStartCancellingOn_=!1;goog.fx.Dragger.prototype.useRightPositioningForRtl_=!1;goog.fx.Dragger.prototype.enableRightPositioningForRtl=function(a){this.useRightPositioningForRtl_=a};goog.fx.Dragger.prototype.getHandler=function(){return this.eventHandler_};
goog.fx.Dragger.prototype.setLimits=function(a){this.limits=a||new goog.math.Rect(NaN,NaN,NaN,NaN)};goog.fx.Dragger.prototype.setHysteresis=function(a){this.hysteresisDistanceSquared_=Math.pow(a,2)};goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)};goog.fx.Dragger.prototype.setScrollTarget=function(a){this.scrollTarget_=a};goog.fx.Dragger.prototype.setCancelIeDragStart=function(a){this.ieDragStartCancellingOn_=a};
goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_};goog.fx.Dragger.prototype.setEnabled=function(a){this.enabled_=a};goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this);goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this);this.cleanUpAfterDragging_();this.handle=this.target=null};
goog.fx.Dragger.prototype.isRightToLeft_=function(){goog.isDef(this.rightToLeft_)||(this.rightToLeft_=goog.style.isRightToLeft(this.target));return this.rightToLeft_};
goog.fx.Dragger.prototype.startDrag=function(a){var b=a.type==goog.events.EventType.MOUSEDOWN;if(this.enabled_&&!this.dragging_&&(!b||a.isMouseActionButton())){this.maybeReinitTouchEvent_(a);if(0==this.hysteresisDistanceSquared_)if(this.fireDragStart_(a))this.dragging_=!0,a.preventDefault();else return;else a.preventDefault();this.setupDragHandlers();this.clientX=this.startX=a.clientX;this.clientY=this.startY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.deltaX=this.useRightPositioningForRtl_?
goog.style.bidi.getOffsetStart(this.target):this.target.offsetLeft;this.deltaY=this.target.offsetTop;this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll();this.mouseDownTime_=goog.now()}else this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)};
goog.fx.Dragger.prototype.setupDragHandlers=function(){var a=this.document_,b=a.documentElement,c=!goog.fx.Dragger.HAS_SET_CAPTURE_;this.eventHandler_.listen(a,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,c);this.eventHandler_.listen(a,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,c);goog.fx.Dragger.HAS_SET_CAPTURE_?(b.setCapture(!1),this.eventHandler_.listen(b,goog.events.EventType.LOSECAPTURE,this.endDrag)):this.eventHandler_.listen(goog.dom.getWindow(a),
goog.events.EventType.BLUR,this.endDrag);goog.userAgent.IE&&this.ieDragStartCancellingOn_&&this.eventHandler_.listen(a,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault);this.scrollTarget_&&this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,c)};goog.fx.Dragger.prototype.fireDragStart_=function(a){return this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,a.clientX,a.clientY,a))};
goog.fx.Dragger.prototype.cleanUpAfterDragging_=function(){this.eventHandler_.removeAll();goog.fx.Dragger.HAS_SET_CAPTURE_&&this.document_.releaseCapture()};goog.fx.Dragger.prototype.endDrag=function(a,b){this.cleanUpAfterDragging_();if(this.dragging_){this.maybeReinitTouchEvent_(a);this.dragging_=!1;var c=this.limitX(this.deltaX),d=this.limitY(this.deltaY);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,a.clientX,a.clientY,a,c,d,b||a.type==goog.events.EventType.TOUCHCANCEL))}else this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)};
goog.fx.Dragger.prototype.endDragCancel=function(a){this.endDrag(a,!0)};goog.fx.Dragger.prototype.maybeReinitTouchEvent_=function(a){var b=a.type;b==goog.events.EventType.TOUCHSTART||b==goog.events.EventType.TOUCHMOVE?a.init(a.getBrowserEvent().targetTouches[0],a.currentTarget):(b==goog.events.EventType.TOUCHEND||b==goog.events.EventType.TOUCHCANCEL)&&a.init(a.getBrowserEvent().changedTouches[0],a.currentTarget)};
goog.fx.Dragger.prototype.handleMove_=function(a){if(this.enabled_){this.maybeReinitTouchEvent_(a);var b=(this.useRightPositioningForRtl_&&this.isRightToLeft_()?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.dragging_){var d=this.startX-this.clientX,e=this.startY-this.clientY;if(d*d+e*e>this.hysteresisDistanceSquared_)if(this.fireDragStart_(a))this.dragging_=!0;else{this.isDisposed()||this.endDrag(a);
return}}c=this.calculatePosition_(b,c);b=c.x;c=c.y;this.dragging_&&this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,a.clientX,a.clientY,a,b,c))&&(this.doDrag(a,b,c,!1),a.preventDefault())}};
goog.fx.Dragger.prototype.calculatePosition_=function(a,b){var c=goog.dom.getDomHelper(this.document_).getDocumentScroll();a+=c.x-this.pageScroll.x;b+=c.y-this.pageScroll.y;this.pageScroll=c;this.deltaX+=a;this.deltaY+=b;var c=this.limitX(this.deltaX),d=this.limitY(this.deltaY);return new goog.math.Coordinate(c,d)};goog.fx.Dragger.prototype.onScroll_=function(a){var b=this.calculatePosition_(0,0);a.clientX=this.clientX;a.clientY=this.clientY;this.doDrag(a,b.x,b.y,!0)};
goog.fx.Dragger.prototype.doDrag=function(a,b,c,d){this.defaultAction(b,c);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,a.clientX,a.clientY,a,b,c))};goog.fx.Dragger.prototype.limitX=function(a){var b=this.limits,c=!isNaN(b.left)?b.left:null,b=!isNaN(b.width)?b.width:0;return Math.min(null!=c?c+b:Infinity,Math.max(null!=c?c:-Infinity,a))};
goog.fx.Dragger.prototype.limitY=function(a){var b=this.limits,c=!isNaN(b.top)?b.top:null,b=!isNaN(b.height)?b.height:0;return Math.min(null!=c?c+b:Infinity,Math.max(null!=c?c:-Infinity,a))};goog.fx.Dragger.prototype.defaultAction=function(a,b){this.useRightPositioningForRtl_&&this.isRightToLeft_()?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};goog.fx.Dragger.prototype.isDragging=function(){return this.dragging_};
goog.fx.DragEvent=function(a,b,c,d,e,f,g,k){goog.events.Event.call(this,a);this.clientX=c;this.clientY=d;this.browserEvent=e;this.left=goog.isDef(f)?f:b.deltaX;this.top=goog.isDef(g)?g:b.deltaY;this.dragger=b;this.dragCanceled=!!k};goog.inherits(goog.fx.DragEvent,goog.events.Event);goog.fx.Transition=function(){};goog.fx.Transition.EventType={PLAY:"play",BEGIN:"begin",RESUME:"resume",END:"end",STOP:"stop",FINISH:"finish",PAUSE:"pause"};goog.ui.PopupBase=function(a,b){goog.events.EventTarget.call(this);this.handler_=new goog.events.EventHandler(this);this.setElement(a||null);b&&this.setType(b)};goog.inherits(goog.ui.PopupBase,goog.events.EventTarget);goog.ui.PopupBase.Type={TOGGLE_DISPLAY:"toggle_display",MOVE_OFFSCREEN:"move_offscreen"};goog.ui.PopupBase.prototype.element_=null;goog.ui.PopupBase.prototype.autoHide_=!0;goog.ui.PopupBase.prototype.autoHideRegion_=null;goog.ui.PopupBase.prototype.isVisible_=!1;
goog.ui.PopupBase.prototype.shouldHideAsync_=!1;goog.ui.PopupBase.prototype.lastShowTime_=-1;goog.ui.PopupBase.prototype.lastHideTime_=-1;goog.ui.PopupBase.prototype.hideOnEscape_=!1;goog.ui.PopupBase.prototype.enableCrossIframeDismissal_=!0;goog.ui.PopupBase.prototype.type_=goog.ui.PopupBase.Type.TOGGLE_DISPLAY;goog.ui.PopupBase.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",BEFORE_HIDE:"beforehide",HIDE:"hide"};goog.ui.PopupBase.DEBOUNCE_DELAY_MS=150;goog.ui.PopupBase.prototype.getType=function(){return this.type_};
goog.ui.PopupBase.prototype.setType=function(a){this.type_=a};goog.ui.PopupBase.prototype.shouldHideAsync=function(){return this.shouldHideAsync_};goog.ui.PopupBase.prototype.setShouldHideAsync=function(a){this.shouldHideAsync_=a};goog.ui.PopupBase.prototype.getElement=function(){return this.element_};goog.ui.PopupBase.prototype.setElement=function(a){this.ensureNotVisible_();this.element_=a};goog.ui.PopupBase.prototype.getAutoHide=function(){return this.autoHide_};
goog.ui.PopupBase.prototype.setAutoHide=function(a){this.ensureNotVisible_();this.autoHide_=a};goog.ui.PopupBase.prototype.getHideOnEscape=function(){return this.hideOnEscape_};goog.ui.PopupBase.prototype.setHideOnEscape=function(a){this.ensureNotVisible_();this.hideOnEscape_=a};goog.ui.PopupBase.prototype.getEnableCrossIframeDismissal=function(){return this.enableCrossIframeDismissal_};goog.ui.PopupBase.prototype.setEnableCrossIframeDismissal=function(a){this.enableCrossIframeDismissal_=a};
goog.ui.PopupBase.prototype.getAutoHideRegion=function(){return this.autoHideRegion_};goog.ui.PopupBase.prototype.setAutoHideRegion=function(a){this.autoHideRegion_=a};goog.ui.PopupBase.prototype.setTransition=function(a,b){this.showTransition_=a;this.hideTransition_=b};goog.ui.PopupBase.prototype.getLastShowTime=function(){return this.lastShowTime_};goog.ui.PopupBase.prototype.getLastHideTime=function(){return this.lastHideTime_};goog.ui.PopupBase.prototype.getHandler=function(){return this.handler_};
goog.ui.PopupBase.prototype.ensureNotVisible_=function(){if(this.isVisible_)throw Error("Can not change this state of the popup while showing.");};goog.ui.PopupBase.prototype.isVisible=function(){return this.isVisible_};goog.ui.PopupBase.prototype.isOrWasRecentlyVisible=function(){return this.isVisible_||goog.now()-this.lastHideTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};
goog.ui.PopupBase.prototype.setVisible=function(a){this.showTransition_&&this.showTransition_.stop();this.hideTransition_&&this.hideTransition_.stop();a?this.show_():this.hide_()};goog.ui.PopupBase.prototype.reposition=goog.nullFunction;
goog.ui.PopupBase.prototype.show_=function(){if(!this.isVisible_&&this.onBeforeShow()){if(!this.element_)throw Error("Caller must call setElement before trying to show the popup");this.reposition();var a=goog.dom.getOwnerDocument(this.element_);this.hideOnEscape_&&this.handler_.listen(a,goog.events.EventType.KEYDOWN,this.onDocumentKeyDown_,!0);if(this.autoHide_)if(this.handler_.listen(a,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0),goog.userAgent.IE){var b;try{b=a.activeElement}catch(c){}for(;b&&
"IFRAME"==b.nodeName;){try{var d=goog.dom.getFrameContentDocument(b)}catch(e){break}a=d;b=a.activeElement}this.handler_.listen(a,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0);this.handler_.listen(a,goog.events.EventType.DEACTIVATE,this.onDocumentBlur_)}else this.handler_.listen(a,goog.events.EventType.BLUR,this.onDocumentBlur_);this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.showPopupElement():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.reposition();this.isVisible_=
!0;if(this.showTransition_)goog.events.listenOnce(this.showTransition_,goog.fx.Transition.EventType.END,this.onShow_,!1,this),this.showTransition_.play();else this.onShow_()}};
goog.ui.PopupBase.prototype.hide_=function(a){if(!this.isVisible_||!this.onBeforeHide_(a))return!1;this.handler_&&this.handler_.removeAll();this.isVisible_=!1;this.lastHideTime_=goog.now();this.hideTransition_?(goog.events.listenOnce(this.hideTransition_,goog.fx.Transition.EventType.END,goog.partial(this.continueHidingPopup_,a),!1,this),this.hideTransition_.play()):this.continueHidingPopup_(a);return!0};
goog.ui.PopupBase.prototype.continueHidingPopup_=function(a){this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.shouldHideAsync_?goog.Timer.callOnce(this.hidePopupElement_,0,this):this.hidePopupElement_():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.moveOffscreen_();this.onHide_(a)};goog.ui.PopupBase.prototype.showPopupElement=function(){this.element_.style.visibility="visible";goog.style.setElementShown(this.element_,!0)};
goog.ui.PopupBase.prototype.hidePopupElement_=function(){this.element_.style.visibility="hidden";goog.style.setElementShown(this.element_,!1)};goog.ui.PopupBase.prototype.moveOffscreen_=function(){this.element_.style.top="-10000px"};goog.ui.PopupBase.prototype.onBeforeShow=function(){return this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)};goog.ui.PopupBase.prototype.onShow_=function(){this.lastShowTime_=goog.now();this.lastHideTime_=-1;this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)};
goog.ui.PopupBase.prototype.onBeforeHide_=function(a){return this.dispatchEvent({type:goog.ui.PopupBase.EventType.BEFORE_HIDE,target:a})};goog.ui.PopupBase.prototype.onHide_=function(a){this.dispatchEvent({type:goog.ui.PopupBase.EventType.HIDE,target:a})};goog.ui.PopupBase.prototype.onDocumentMouseDown_=function(a){a=a.target;!goog.dom.contains(this.element_,a)&&((!this.autoHideRegion_||goog.dom.contains(this.autoHideRegion_,a))&&!this.shouldDebounce_())&&this.hide_(a)};
goog.ui.PopupBase.prototype.onDocumentKeyDown_=function(a){a.keyCode==goog.events.KeyCodes.ESC&&this.hide_(a.target)&&(a.preventDefault(),a.stopPropagation())};goog.ui.PopupBase.prototype.onDocumentBlur_=function(a){if(this.enableCrossIframeDismissal_){var b=goog.dom.getOwnerDocument(this.element_);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||goog.dom.contains(this.element_,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;this.shouldDebounce_()||this.hide_()}};
goog.ui.PopupBase.prototype.shouldDebounce_=function(){return goog.now()-this.lastShowTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};goog.ui.PopupBase.prototype.disposeInternal=function(){goog.ui.PopupBase.superClass_.disposeInternal.call(this);this.handler_.dispose();goog.dispose(this.showTransition_);goog.dispose(this.hideTransition_);delete this.element_;delete this.handler_};goog.dom.iframe={};goog.dom.iframe.BLANK_SOURCE='javascript:""';goog.dom.iframe.BLANK_SOURCE_NEW_FRAME=goog.userAgent.IE?'javascript:""':"javascript:undefined";goog.dom.iframe.STYLES_="border:0;vertical-align:bottom;";goog.dom.iframe.createBlank=function(a,b){return a.createDom("iframe",{frameborder:0,style:goog.dom.iframe.STYLES_+(b||""),src:goog.dom.iframe.BLANK_SOURCE})};goog.dom.iframe.writeContent=function(a,b){var c=goog.dom.getFrameContentDocument(a);c.open();c.write(b);c.close()};
goog.dom.iframe.createWithContent=function(a,b,c,d,e){var f=goog.dom.getDomHelper(a),g=[];e||g.push("<!DOCTYPE html>");g.push("<html><head>",b,"</head><body>",c,"</body></html>");b=goog.dom.iframe.createBlank(f,d);a.appendChild(b);goog.dom.iframe.writeContent(b,g.join(""));return b};goog.ui.ModalPopup=function(a,b){goog.ui.Component.call(this,b);this.useIframeMask_=!!a;this.lastFocus_=null};goog.inherits(goog.ui.ModalPopup,goog.ui.Component);goog.ui.ModalPopup.prototype.focusHandler_=null;goog.ui.ModalPopup.prototype.visible_=!1;goog.ui.ModalPopup.prototype.bgEl_=null;goog.ui.ModalPopup.prototype.bgIframeEl_=null;goog.ui.ModalPopup.prototype.tabCatcherElement_=null;goog.ui.ModalPopup.prototype.backwardTabWrapInProgress_=!1;goog.ui.ModalPopup.prototype.getCssClass=function(){return"goog-modalpopup"};
goog.ui.ModalPopup.prototype.getBackgroundIframe=function(){return this.bgIframeEl_};goog.ui.ModalPopup.prototype.getBackgroundElement=function(){return this.bgEl_};goog.ui.ModalPopup.prototype.createDom=function(){goog.ui.ModalPopup.superClass_.createDom.call(this);var a=this.getElement();goog.dom.classes.add(a,this.getCssClass());goog.dom.setFocusableTabIndex(a,!0);goog.style.setElementShown(a,!1);this.manageBackgroundDom_();this.createTabCatcher_()};
goog.ui.ModalPopup.prototype.manageBackgroundDom_=function(){this.useIframeMask_&&!this.bgIframeEl_&&(this.bgIframeEl_=goog.dom.iframe.createBlank(this.getDomHelper()),this.bgIframeEl_.className=this.getCssClass()+"-bg",goog.style.setElementShown(this.bgIframeEl_,!1),goog.style.setOpacity(this.bgIframeEl_,0));this.bgEl_||(this.bgEl_=this.getDomHelper().createDom("div",this.getCssClass()+"-bg"),goog.style.setElementShown(this.bgEl_,!1))};
goog.ui.ModalPopup.prototype.createTabCatcher_=function(){this.tabCatcherElement_||(this.tabCatcherElement_=this.getDomHelper().createElement("span"),goog.style.setElementShown(this.tabCatcherElement_,!1),goog.dom.setFocusableTabIndex(this.tabCatcherElement_,!0),this.tabCatcherElement_.style.position="absolute")};
goog.ui.ModalPopup.prototype.setupBackwardTabWrap=function(){this.backwardTabWrapInProgress_=!0;try{this.tabCatcherElement_.focus()}catch(a){}goog.Timer.callOnce(this.resetBackwardTabWrap_,0,this)};goog.ui.ModalPopup.prototype.resetBackwardTabWrap_=function(){this.backwardTabWrapInProgress_=!1};
goog.ui.ModalPopup.prototype.renderBackground_=function(){goog.asserts.assert(!!this.bgEl_,"Background element must not be null.");this.bgIframeEl_&&goog.dom.insertSiblingBefore(this.bgIframeEl_,this.getElement());goog.dom.insertSiblingBefore(this.bgEl_,this.getElement())};goog.ui.ModalPopup.prototype.canDecorate=function(a){return!!a&&a.tagName==goog.dom.TagName.DIV};
goog.ui.ModalPopup.prototype.decorateInternal=function(a){goog.ui.ModalPopup.superClass_.decorateInternal.call(this,a);goog.dom.classes.add(this.getElement(),this.getCssClass());this.manageBackgroundDom_();this.createTabCatcher_();goog.style.setElementShown(this.getElement(),!1)};
goog.ui.ModalPopup.prototype.enterDocument=function(){this.renderBackground_();goog.ui.ModalPopup.superClass_.enterDocument.call(this);goog.dom.insertSiblingAfter(this.tabCatcherElement_,this.getElement());this.focusHandler_=new goog.events.FocusHandler(this.getDomHelper().getDocument());this.getHandler().listen(this.focusHandler_,goog.events.FocusHandler.EventType.FOCUSIN,this.onFocus_);this.setA11YDetectBackground_(!1)};
goog.ui.ModalPopup.prototype.exitDocument=function(){this.isVisible()&&this.setVisible(!1);goog.dispose(this.focusHandler_);goog.ui.ModalPopup.superClass_.exitDocument.call(this);goog.dom.removeNode(this.bgIframeEl_);goog.dom.removeNode(this.bgEl_);goog.dom.removeNode(this.tabCatcherElement_)};
goog.ui.ModalPopup.prototype.setVisible=function(a){goog.asserts.assert(this.isInDocument(),"ModalPopup must be rendered first.");a!=this.visible_&&(this.popupShowTransition_&&this.popupShowTransition_.stop(),this.bgShowTransition_&&this.bgShowTransition_.stop(),this.popupHideTransition_&&this.popupHideTransition_.stop(),this.bgHideTransition_&&this.bgHideTransition_.stop(),this.isInDocument()&&this.setA11YDetectBackground_(a),a?this.show_():this.hide_())};
goog.ui.ModalPopup.setAriaHidden_=function(a,b){b?goog.a11y.aria.setState(a,goog.a11y.aria.State.HIDDEN,b):goog.a11y.aria.removeState(a,goog.a11y.aria.State.HIDDEN)};goog.ui.ModalPopup.prototype.setA11YDetectBackground_=function(a){for(var b=this.getDomHelper().getDocument().body.firstChild;b;b=b.nextSibling)b.nodeType==goog.dom.NodeType.ELEMENT&&goog.ui.ModalPopup.setAriaHidden_(b,a);goog.ui.ModalPopup.setAriaHidden_(this.getElementStrict(),!a)};
goog.ui.ModalPopup.prototype.setTransition=function(a,b,c,d){this.popupShowTransition_=a;this.popupHideTransition_=b;this.bgShowTransition_=c;this.bgHideTransition_=d};
goog.ui.ModalPopup.prototype.show_=function(){if(this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)){try{this.lastFocus_=this.getDomHelper().getDocument().activeElement}catch(a){}this.resizeBackground_();this.reposition();this.getHandler().listen(this.getDomHelper().getWindow(),goog.events.EventType.RESIZE,this.resizeBackground_);this.showPopupElement_(!0);this.focus();this.visible_=!0;if(this.popupShowTransition_&&this.bgShowTransition_)goog.events.listenOnce(this.popupShowTransition_,goog.fx.Transition.EventType.END,
this.onShow,!1,this),this.bgShowTransition_.play(),this.popupShowTransition_.play();else this.onShow()}};
goog.ui.ModalPopup.prototype.hide_=function(){if(this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_HIDE)){this.getHandler().unlisten(this.getDomHelper().getWindow(),goog.events.EventType.RESIZE,this.resizeBackground_);this.visible_=!1;if(this.popupHideTransition_&&this.bgHideTransition_)goog.events.listenOnce(this.popupHideTransition_,goog.fx.Transition.EventType.END,this.onHide,!1,this),this.bgHideTransition_.play(),this.popupHideTransition_.play();else this.onHide();try{var a=this.getDomHelper().getDocument().body,
b=this.getDomHelper().getDocument().activeElement||a;this.lastFocus_&&(b==a&&this.lastFocus_!=a)&&this.lastFocus_.focus()}catch(c){}this.lastFocus_=null}};goog.ui.ModalPopup.prototype.showPopupElement_=function(a){this.bgIframeEl_&&goog.style.setElementShown(this.bgIframeEl_,a);this.bgEl_&&goog.style.setElementShown(this.bgEl_,a);goog.style.setElementShown(this.getElement(),a);goog.style.setElementShown(this.tabCatcherElement_,a)};goog.ui.ModalPopup.prototype.onShow=function(){this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)};
goog.ui.ModalPopup.prototype.onHide=function(){this.showPopupElement_(!1);this.dispatchEvent(goog.ui.PopupBase.EventType.HIDE)};goog.ui.ModalPopup.prototype.isVisible=function(){return this.visible_};goog.ui.ModalPopup.prototype.focus=function(){this.focusElement_()};
goog.ui.ModalPopup.prototype.resizeBackground_=function(){this.bgIframeEl_&&goog.style.setElementShown(this.bgIframeEl_,!1);this.bgEl_&&goog.style.setElementShown(this.bgEl_,!1);var a=this.getDomHelper().getDocument(),b=goog.dom.getWindow(a)||window,c=goog.dom.getViewportSize(b),b=Math.max(c.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(c.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.bgIframeEl_&&(goog.style.setElementShown(this.bgIframeEl_,
!0),goog.style.setSize(this.bgIframeEl_,b,a));this.bgEl_&&(goog.style.setElementShown(this.bgEl_,!0),goog.style.setSize(this.bgEl_,b,a))};
goog.ui.ModalPopup.prototype.reposition=function(){var a=this.getDomHelper().getDocument(),b=goog.dom.getWindow(a)||window;if("fixed"==goog.style.getComputedPosition(this.getElement()))var c=a=0;else c=this.getDomHelper().getDocumentScroll(),a=c.x,c=c.y;var d=goog.style.getSize(this.getElement()),b=goog.dom.getViewportSize(b),a=Math.max(a+b.width/2-d.width/2,0),c=Math.max(c+b.height/2-d.height/2,0);goog.style.setPosition(this.getElement(),a,c);goog.style.setPosition(this.tabCatcherElement_,a,c)};
goog.ui.ModalPopup.prototype.onFocus_=function(a){this.backwardTabWrapInProgress_?this.resetBackwardTabWrap_():a.target==this.tabCatcherElement_&&goog.Timer.callOnce(this.focusElement_,0,this)};goog.ui.ModalPopup.prototype.focusElement_=function(){try{goog.userAgent.IE&&this.getDomHelper().getDocument().body.focus(),this.getElement().focus()}catch(a){}};
goog.ui.ModalPopup.prototype.disposeInternal=function(){goog.dispose(this.popupShowTransition_);this.popupShowTransition_=null;goog.dispose(this.popupHideTransition_);this.popupHideTransition_=null;goog.dispose(this.bgShowTransition_);this.bgShowTransition_=null;goog.dispose(this.bgHideTransition_);this.bgHideTransition_=null;goog.ui.ModalPopup.superClass_.disposeInternal.call(this)};goog.ui.Dialog=function(a,b,c){goog.ui.ModalPopup.call(this,b,c);this.class_=a||"modal-dialog";this.buttons_=goog.ui.Dialog.ButtonSet.createOkCancel()};goog.inherits(goog.ui.Dialog,goog.ui.ModalPopup);goog.ui.Dialog.prototype.escapeToCancel_=!0;goog.ui.Dialog.prototype.hasTitleCloseButton_=!0;goog.ui.Dialog.prototype.modal_=!0;goog.ui.Dialog.prototype.draggable_=!0;goog.ui.Dialog.prototype.backgroundElementOpacity_=0.5;goog.ui.Dialog.prototype.title_="";goog.ui.Dialog.prototype.content_="";
goog.ui.Dialog.prototype.dragger_=null;goog.ui.Dialog.prototype.disposeOnHide_=!1;goog.ui.Dialog.prototype.titleEl_=null;goog.ui.Dialog.prototype.titleTextEl_=null;goog.ui.Dialog.prototype.titleId_=null;goog.ui.Dialog.prototype.titleCloseEl_=null;goog.ui.Dialog.prototype.contentEl_=null;goog.ui.Dialog.prototype.buttonEl_=null;goog.ui.Dialog.prototype.preferredAriaRole_=goog.a11y.aria.Role.DIALOG;goog.ui.Dialog.prototype.getCssClass=function(){return this.class_};
goog.ui.Dialog.prototype.setTitle=function(a){this.title_=a;this.titleTextEl_&&goog.dom.setTextContent(this.titleTextEl_,a)};goog.ui.Dialog.prototype.getTitle=function(){return this.title_};goog.ui.Dialog.prototype.setContent=function(a){this.content_=a;this.contentEl_&&(this.contentEl_.innerHTML=a)};goog.ui.Dialog.prototype.getContent=function(){return this.content_};goog.ui.Dialog.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_};
goog.ui.Dialog.prototype.setPreferredAriaRole=function(a){this.preferredAriaRole_=a};goog.ui.Dialog.prototype.renderIfNoDom_=function(){this.getElement()||this.render()};goog.ui.Dialog.prototype.getContentElement=function(){this.renderIfNoDom_();return this.contentEl_};goog.ui.Dialog.prototype.getTitleElement=function(){this.renderIfNoDom_();return this.titleEl_};goog.ui.Dialog.prototype.getTitleTextElement=function(){this.renderIfNoDom_();return this.titleTextEl_};
goog.ui.Dialog.prototype.getTitleCloseElement=function(){this.renderIfNoDom_();return this.titleCloseEl_};goog.ui.Dialog.prototype.getButtonElement=function(){this.renderIfNoDom_();return this.buttonEl_};goog.ui.Dialog.prototype.getDialogElement=function(){this.renderIfNoDom_();return this.getElement()};goog.ui.Dialog.prototype.getBackgroundElement=function(){this.renderIfNoDom_();return goog.ui.Dialog.superClass_.getBackgroundElement.call(this)};
goog.ui.Dialog.prototype.getBackgroundElementOpacity=function(){return this.backgroundElementOpacity_};goog.ui.Dialog.prototype.setBackgroundElementOpacity=function(a){this.backgroundElementOpacity_=a;this.getElement()&&(a=this.getBackgroundElement())&&goog.style.setOpacity(a,this.backgroundElementOpacity_)};goog.ui.Dialog.prototype.setModal=function(a){a!=this.modal_&&this.setModalInternal_(a)};
goog.ui.Dialog.prototype.setModalInternal_=function(a){this.modal_=a;if(this.isInDocument()){var b=this.getDomHelper(),c=this.getBackgroundElement(),d=this.getBackgroundIframe();a?(d&&b.insertSiblingBefore(d,this.getElement()),b.insertSiblingBefore(c,this.getElement())):(b.removeNode(d),b.removeNode(c))}};goog.ui.Dialog.prototype.getModal=function(){return this.modal_};goog.ui.Dialog.prototype.getClass=function(){return this.getCssClass()};
goog.ui.Dialog.prototype.setDraggable=function(a){this.draggable_=a;this.setDraggingEnabled_(a&&this.isInDocument())};goog.ui.Dialog.prototype.createDragger=function(){return new goog.fx.Dragger(this.getElement(),this.titleEl_)};goog.ui.Dialog.prototype.getDraggable=function(){return this.draggable_};
goog.ui.Dialog.prototype.setDraggingEnabled_=function(a){this.getElement()&&goog.dom.classes.enable(this.titleEl_,this.class_+"-title-draggable",a);a&&!this.dragger_?(this.dragger_=this.createDragger(),goog.dom.classes.add(this.titleEl_,this.class_+"-title-draggable"),goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.START,this.setDraggerLimits_,!1,this)):!a&&this.dragger_&&(this.dragger_.dispose(),this.dragger_=null)};
goog.ui.Dialog.prototype.createDom=function(){goog.ui.Dialog.superClass_.createDom.call(this);var a=this.getElement();goog.asserts.assert(a,"getElement() returns null");var b=this.getDomHelper();this.titleEl_=b.createDom("div",{className:this.class_+"-title",id:this.getId()},this.titleTextEl_=b.createDom("span",this.class_+"-title-text",this.title_),this.titleCloseEl_=b.createDom("span",this.class_+"-title-close"));goog.dom.append(a,this.titleEl_,this.contentEl_=b.createDom("div",this.class_+"-content"),
this.buttonEl_=b.createDom("div",this.class_+"-buttons"));this.titleId_=this.titleEl_.id;goog.a11y.aria.setRole(a,this.getPreferredAriaRole());goog.a11y.aria.setState(a,goog.a11y.aria.State.LABELLEDBY,this.titleId_||"");this.content_&&(this.contentEl_.innerHTML=this.content_);goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_);this.buttons_&&this.buttons_.attachToElement(this.buttonEl_);goog.style.setElementShown(this.buttonEl_,!!this.buttons_);this.setBackgroundElementOpacity(this.backgroundElementOpacity_)};
goog.ui.Dialog.prototype.decorateInternal=function(a){goog.ui.Dialog.superClass_.decorateInternal.call(this,a);a=this.getElement();goog.asserts.assert(a,"The DOM element for dialog cannot be null.");var b=this.class_+"-content";(this.contentEl_=goog.dom.getElementsByTagNameAndClass(null,b,a)[0])?this.content_=this.contentEl_.innerHTML:(this.contentEl_=this.getDomHelper().createDom("div",b),this.content_&&(this.contentEl_.innerHTML=this.content_),a.appendChild(this.contentEl_));var b=this.class_+"-title",
c=this.class_+"-title-text",d=this.class_+"-title-close";(this.titleEl_=goog.dom.getElementsByTagNameAndClass(null,b,a)[0])?(this.titleTextEl_=goog.dom.getElementsByTagNameAndClass(null,c,this.titleEl_)[0],this.titleCloseEl_=goog.dom.getElementsByTagNameAndClass(null,d,this.titleEl_)[0],this.titleEl_.id||(this.titleEl_.id=this.getId())):(this.titleEl_=this.getDomHelper().createDom("div",{className:b,id:this.getId()}),a.insertBefore(this.titleEl_,this.contentEl_));this.titleId_=this.titleEl_.id;this.titleTextEl_?
this.title_=goog.dom.getTextContent(this.titleTextEl_):(this.titleTextEl_=this.getDomHelper().createDom("span",c,this.title_),this.titleEl_.appendChild(this.titleTextEl_));goog.a11y.aria.setState(a,goog.a11y.aria.State.LABELLEDBY,this.titleId_||"");this.titleCloseEl_||(this.titleCloseEl_=this.getDomHelper().createDom("span",d),this.titleEl_.appendChild(this.titleCloseEl_));goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_);b=this.class_+"-buttons";(this.buttonEl_=goog.dom.getElementsByTagNameAndClass(null,
b,a)[0])?(this.buttons_=new goog.ui.Dialog.ButtonSet(this.getDomHelper()),this.buttons_.decorate(this.buttonEl_)):(this.buttonEl_=this.getDomHelper().createDom("div",b),a.appendChild(this.buttonEl_),this.buttons_&&this.buttons_.attachToElement(this.buttonEl_),goog.style.setElementShown(this.buttonEl_,!!this.buttons_));this.setBackgroundElementOpacity(this.backgroundElementOpacity_)};
goog.ui.Dialog.prototype.enterDocument=function(){goog.ui.Dialog.superClass_.enterDocument.call(this);this.getHandler().listen(this.getElement(),goog.events.EventType.KEYDOWN,this.onKey_).listen(this.getElement(),goog.events.EventType.KEYPRESS,this.onKey_);this.getHandler().listen(this.buttonEl_,goog.events.EventType.CLICK,this.onButtonClick_);this.setDraggingEnabled_(this.draggable_);this.getHandler().listen(this.titleCloseEl_,goog.events.EventType.CLICK,this.onTitleCloseClick_);var a=this.getElement();
goog.asserts.assert(a,"The DOM element for dialog cannot be null");goog.a11y.aria.setRole(a,this.getPreferredAriaRole());""!==this.titleTextEl_.id&&goog.a11y.aria.setState(a,goog.a11y.aria.State.LABELLEDBY,this.titleTextEl_.id);this.modal_||this.setModalInternal_(!1)};goog.ui.Dialog.prototype.exitDocument=function(){this.isVisible()&&this.setVisible(!1);this.setDraggingEnabled_(!1);goog.ui.Dialog.superClass_.exitDocument.call(this)};
goog.ui.Dialog.prototype.setVisible=function(a){a!=this.isVisible()&&(this.isInDocument()||this.render(),goog.ui.Dialog.superClass_.setVisible.call(this,a))};goog.ui.Dialog.prototype.onShow=function(){goog.ui.Dialog.superClass_.onShow.call(this);this.dispatchEvent(goog.ui.Dialog.EventType.AFTER_SHOW)};goog.ui.Dialog.prototype.onHide=function(){goog.ui.Dialog.superClass_.onHide.call(this);this.dispatchEvent(goog.ui.Dialog.EventType.AFTER_HIDE);this.disposeOnHide_&&this.dispose()};
goog.ui.Dialog.prototype.focus=function(){goog.ui.Dialog.superClass_.focus.call(this);if(this.getButtonSet()){var a=this.getButtonSet().getDefault();if(a)for(var b=this.getDomHelper().getDocument(),c=this.buttonEl_.getElementsByTagName("button"),d=0,e;e=c[d];d++)if(e.name==a&&!e.disabled){try{if(goog.userAgent.WEBKIT||goog.userAgent.OPERA){var f=b.createElement("input");f.style.cssText="position:fixed;width:0;height:0;left:0;top:0;";this.getElement().appendChild(f);f.focus();this.getElement().removeChild(f)}e.focus()}catch(g){}break}}};
goog.ui.Dialog.prototype.setDraggerLimits_=function(a){var b=this.getDomHelper().getDocument();a=goog.dom.getWindow(b)||window;a=goog.dom.getViewportSize(a);var c=Math.max(b.body.scrollWidth,a.width),b=Math.max(b.body.scrollHeight,a.height),d=goog.style.getSize(this.getElement());"fixed"==goog.style.getComputedPosition(this.getElement())?this.dragger_.setLimits(new goog.math.Rect(0,0,Math.max(0,a.width-d.width),Math.max(0,a.height-d.height))):this.dragger_.setLimits(new goog.math.Rect(0,0,c-d.width,
b-d.height))};goog.ui.Dialog.prototype.onTitleCloseClick_=function(a){if(this.hasTitleCloseButton_){var b=this.getButtonSet();(a=b&&b.getCancel())?(b=b.get(a),this.dispatchEvent(new goog.ui.Dialog.Event(a,b))&&this.setVisible(!1)):this.setVisible(!1)}};goog.ui.Dialog.prototype.getHasTitleCloseButton=function(){return this.hasTitleCloseButton_};goog.ui.Dialog.prototype.setHasTitleCloseButton=function(a){this.hasTitleCloseButton_=a;this.titleCloseEl_&&goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_)};
goog.ui.Dialog.prototype.isEscapeToCancel=function(){return this.escapeToCancel_};goog.ui.Dialog.prototype.setEscapeToCancel=function(a){this.escapeToCancel_=a};goog.ui.Dialog.prototype.setDisposeOnHide=function(a){this.disposeOnHide_=a};goog.ui.Dialog.prototype.getDisposeOnHide=function(){return this.disposeOnHide_};goog.ui.Dialog.prototype.disposeInternal=function(){this.buttonEl_=this.titleCloseEl_=null;goog.ui.Dialog.superClass_.disposeInternal.call(this)};
goog.ui.Dialog.prototype.setButtonSet=function(a){this.buttons_=a;this.buttonEl_&&(this.buttons_?this.buttons_.attachToElement(this.buttonEl_):this.buttonEl_.innerHTML="",goog.style.setElementShown(this.buttonEl_,!!this.buttons_))};goog.ui.Dialog.prototype.getButtonSet=function(){return this.buttons_};
goog.ui.Dialog.prototype.onButtonClick_=function(a){if((a=this.findParentButton_(a.target))&&!a.disabled){a=a.name;var b=this.getButtonSet().get(a);this.dispatchEvent(new goog.ui.Dialog.Event(a,b))&&this.setVisible(!1)}};goog.ui.Dialog.prototype.findParentButton_=function(a){for(;null!=a&&a!=this.buttonEl_;){if("BUTTON"==a.tagName)return a;a=a.parentNode}return null};
goog.ui.Dialog.prototype.onKey_=function(a){var b=!1,c=!1,d=this.getButtonSet(),e=a.target;if(a.type==goog.events.EventType.KEYDOWN)if(this.escapeToCancel_&&a.keyCode==goog.events.KeyCodes.ESC){var f=d&&d.getCancel(),e="SELECT"==e.tagName&&!e.disabled;f&&!e?(c=!0,b=d.get(f),b=this.dispatchEvent(new goog.ui.Dialog.Event(f,b))):e||(b=!0)}else a.keyCode==goog.events.KeyCodes.TAB&&(a.shiftKey&&e==this.getElement())&&this.setupBackwardTabWrap();else if(a.keyCode==goog.events.KeyCodes.ENTER){if("BUTTON"==
e.tagName&&!e.disabled)f=e.name;else if(d){var g=d.getDefault(),k=g&&d.getButton(g),e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;k&&(!k.disabled&&!e)&&(f=g)}f&&d&&(c=!0,b=this.dispatchEvent(new goog.ui.Dialog.Event(f,String(d.get(f)))))}if(b||c)a.stopPropagation(),a.preventDefault();b&&this.setVisible(!1)};goog.ui.Dialog.Event=function(a,b){this.type=goog.ui.Dialog.EventType.SELECT;this.key=a;this.caption=b};goog.inherits(goog.ui.Dialog.Event,goog.events.Event);
goog.ui.Dialog.SELECT_EVENT="dialogselect";goog.ui.Dialog.EventType={SELECT:"dialogselect",AFTER_HIDE:"afterhide",AFTER_SHOW:"aftershow"};goog.ui.Dialog.ButtonSet=function(a){this.dom_=a||goog.dom.getDomHelper();goog.structs.Map.call(this)};goog.inherits(goog.ui.Dialog.ButtonSet,goog.structs.Map);goog.ui.Dialog.ButtonSet.prototype.class_="goog-buttonset";goog.ui.Dialog.ButtonSet.prototype.defaultButton_=null;goog.ui.Dialog.ButtonSet.prototype.element_=null;
goog.ui.Dialog.ButtonSet.prototype.cancelButton_=null;goog.ui.Dialog.ButtonSet.prototype.set=function(a,b,c,d){goog.structs.Map.prototype.set.call(this,a,b);c&&(this.defaultButton_=a);d&&(this.cancelButton_=a);return this};goog.ui.Dialog.ButtonSet.prototype.addButton=function(a,b,c){return this.set(a.key,a.caption,b,c)};goog.ui.Dialog.ButtonSet.prototype.attachToElement=function(a){this.element_=a;this.render()};
goog.ui.Dialog.ButtonSet.prototype.render=function(){if(this.element_){this.element_.innerHTML="";var a=goog.dom.getDomHelper(this.element_);goog.structs.forEach(this,function(b,c){var d=a.createDom("button",{name:c},b);c==this.defaultButton_&&(d.className=this.class_+"-default");this.element_.appendChild(d)},this)}};
goog.ui.Dialog.ButtonSet.prototype.decorate=function(a){if(a&&a.nodeType==goog.dom.NodeType.ELEMENT){this.element_=a;a=this.element_.getElementsByTagName("button");for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=goog.dom.getTextContent(c)||c.value,d){var f=0==b;this.set(d,e,f,c.name==goog.ui.Dialog.DefaultButtonKeys.CANCEL);f&&goog.dom.classes.add(c,this.class_+"-default")}}};goog.ui.Dialog.ButtonSet.prototype.getElement=function(){return this.element_};
goog.ui.Dialog.ButtonSet.prototype.getDomHelper=function(){return this.dom_};goog.ui.Dialog.ButtonSet.prototype.setDefault=function(a){this.defaultButton_=a};goog.ui.Dialog.ButtonSet.prototype.getDefault=function(){return this.defaultButton_};goog.ui.Dialog.ButtonSet.prototype.setCancel=function(a){this.cancelButton_=a};goog.ui.Dialog.ButtonSet.prototype.getCancel=function(){return this.cancelButton_};
goog.ui.Dialog.ButtonSet.prototype.getButton=function(a){for(var b=this.getAllButtons(),c=0,d;d=b[c];c++)if(d.name==a||d.id==a)return d;return null};goog.ui.Dialog.ButtonSet.prototype.getAllButtons=function(){return this.element_.getElementsByTagName(goog.dom.TagName.BUTTON)};goog.ui.Dialog.ButtonSet.prototype.setButtonEnabled=function(a,b){var c=this.getButton(a);c&&(c.disabled=!b)};
goog.ui.Dialog.ButtonSet.prototype.setAllButtonsEnabled=function(a){for(var b=this.getAllButtons(),c=0,d;d=b[c];c++)d.disabled=!a};goog.ui.Dialog.DefaultButtonKeys={OK:"ok",CANCEL:"cancel",YES:"yes",NO:"no",SAVE:"save",CONTINUE:"continue"};goog.ui.Dialog.MSG_DIALOG_OK_=goog.getMsg("OK");goog.ui.Dialog.MSG_DIALOG_CANCEL_=goog.getMsg("Cancel");goog.ui.Dialog.MSG_DIALOG_YES_=goog.getMsg("Yes");goog.ui.Dialog.MSG_DIALOG_NO_=goog.getMsg("No");goog.ui.Dialog.MSG_DIALOG_SAVE_=goog.getMsg("Save");
goog.ui.Dialog.MSG_DIALOG_CONTINUE_=goog.getMsg("Continue");goog.ui.Dialog.DefaultButtonCaptions={OK:goog.ui.Dialog.MSG_DIALOG_OK_,CANCEL:goog.ui.Dialog.MSG_DIALOG_CANCEL_,YES:goog.ui.Dialog.MSG_DIALOG_YES_,NO:goog.ui.Dialog.MSG_DIALOG_NO_,SAVE:goog.ui.Dialog.MSG_DIALOG_SAVE_,CONTINUE:goog.ui.Dialog.MSG_DIALOG_CONTINUE_};
goog.ui.Dialog.ButtonSet.DefaultButtons={OK:{key:goog.ui.Dialog.DefaultButtonKeys.OK,caption:goog.ui.Dialog.DefaultButtonCaptions.OK},CANCEL:{key:goog.ui.Dialog.DefaultButtonKeys.CANCEL,caption:goog.ui.Dialog.DefaultButtonCaptions.CANCEL},YES:{key:goog.ui.Dialog.DefaultButtonKeys.YES,caption:goog.ui.Dialog.DefaultButtonCaptions.YES},NO:{key:goog.ui.Dialog.DefaultButtonKeys.NO,caption:goog.ui.Dialog.DefaultButtonCaptions.NO},SAVE:{key:goog.ui.Dialog.DefaultButtonKeys.SAVE,caption:goog.ui.Dialog.DefaultButtonCaptions.SAVE},
CONTINUE:{key:goog.ui.Dialog.DefaultButtonKeys.CONTINUE,caption:goog.ui.Dialog.DefaultButtonCaptions.CONTINUE}};goog.ui.Dialog.ButtonSet.createOk=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!0,!0)};goog.ui.Dialog.ButtonSet.createOkCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0)};
goog.ui.Dialog.ButtonSet.createYesNo=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,!1,!0)};goog.ui.Dialog.ButtonSet.createYesNoCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0)};
goog.ui.Dialog.ButtonSet.createContinueSaveCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CONTINUE).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.SAVE).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!0,!0)};
(function(){"undefined"!=typeof document&&(goog.ui.Dialog.ButtonSet.OK=goog.ui.Dialog.ButtonSet.createOk(),goog.ui.Dialog.ButtonSet.OK_CANCEL=goog.ui.Dialog.ButtonSet.createOkCancel(),goog.ui.Dialog.ButtonSet.YES_NO=goog.ui.Dialog.ButtonSet.createYesNo(),goog.ui.Dialog.ButtonSet.YES_NO_CANCEL=goog.ui.Dialog.ButtonSet.createYesNoCancel(),goog.ui.Dialog.ButtonSet.CONTINUE_SAVE_CANCEL=goog.ui.Dialog.ButtonSet.createContinueSaveCancel())})();goog.ui.ContainerRenderer=function(){};goog.addSingletonGetter(goog.ui.ContainerRenderer);goog.ui.ContainerRenderer.getCustomRenderer=function(a,b){var c=new a;c.getCssClass=function(){return b};return c};goog.ui.ContainerRenderer.CSS_CLASS="goog-container";goog.ui.ContainerRenderer.prototype.getAriaRole=function(){};goog.ui.ContainerRenderer.prototype.enableTabIndex=function(a,b){a&&(a.tabIndex=b?0:-1)};
goog.ui.ContainerRenderer.prototype.createDom=function(a){return a.getDomHelper().createDom("div",this.getClassNames(a).join(" "))};goog.ui.ContainerRenderer.prototype.getContentElement=function(a){return a};goog.ui.ContainerRenderer.prototype.canDecorate=function(a){return"DIV"==a.tagName};
goog.ui.ContainerRenderer.prototype.decorate=function(a,b){b.id&&a.setId(b.id);var c=this.getCssClass(),d=!1,e=goog.dom.classes.get(b);e&&goog.array.forEach(e,function(b){b==c?d=!0:b&&this.setStateFromClassName(a,b,c)},this);d||goog.dom.classes.add(b,c);this.decorateChildren(a,this.getContentElement(b));return b};
goog.ui.ContainerRenderer.prototype.setStateFromClassName=function(a,b,c){b==c+"-disabled"?a.setEnabled(!1):b==c+"-horizontal"?a.setOrientation(goog.ui.Container.Orientation.HORIZONTAL):b==c+"-vertical"&&a.setOrientation(goog.ui.Container.Orientation.VERTICAL)};
goog.ui.ContainerRenderer.prototype.decorateChildren=function(a,b,c){if(b){c=c||b.firstChild;for(var d;c&&c.parentNode==b;){d=c.nextSibling;if(c.nodeType==goog.dom.NodeType.ELEMENT){var e=this.getDecoratorForChild(c);e&&(e.setElementInternal(c),a.isEnabled()||e.setEnabled(!1),a.addChild(e),e.decorate(c))}else(!c.nodeValue||""==goog.string.trim(c.nodeValue))&&b.removeChild(c);c=d}}};goog.ui.ContainerRenderer.prototype.getDecoratorForChild=function(a){return goog.ui.registry.getDecorator(a)};
goog.ui.ContainerRenderer.prototype.initializeDom=function(a){a=a.getElement();goog.asserts.assert(a,"The container DOM element cannot be null.");goog.style.setUnselectable(a,!0,goog.userAgent.GECKO);goog.userAgent.IE&&(a.hideFocus=!0);var b=this.getAriaRole();b&&goog.a11y.aria.setRole(a,b)};goog.ui.ContainerRenderer.prototype.getKeyEventTarget=function(a){return a.getElement()};goog.ui.ContainerRenderer.prototype.getCssClass=function(){return goog.ui.ContainerRenderer.CSS_CLASS};
goog.ui.ContainerRenderer.prototype.getClassNames=function(a){var b=this.getCssClass(),c=a.getOrientation()==goog.ui.Container.Orientation.HORIZONTAL,c=[b,c?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};goog.ui.ContainerRenderer.prototype.getDefaultOrientation=function(){return goog.ui.Container.Orientation.VERTICAL};goog.ui.Container=function(a,b,c){goog.ui.Component.call(this,c);this.renderer_=b||goog.ui.ContainerRenderer.getInstance();this.orientation_=a||this.renderer_.getDefaultOrientation()};goog.inherits(goog.ui.Container,goog.ui.Component);goog.ui.Container.EventType={AFTER_SHOW:"aftershow",AFTER_HIDE:"afterhide"};goog.ui.Container.Orientation={HORIZONTAL:"horizontal",VERTICAL:"vertical"};goog.ui.Container.prototype.keyEventTarget_=null;goog.ui.Container.prototype.keyHandler_=null;
goog.ui.Container.prototype.renderer_=null;goog.ui.Container.prototype.orientation_=null;goog.ui.Container.prototype.visible_=!0;goog.ui.Container.prototype.enabled_=!0;goog.ui.Container.prototype.focusable_=!0;goog.ui.Container.prototype.highlightedIndex_=-1;goog.ui.Container.prototype.openItem_=null;goog.ui.Container.prototype.mouseButtonPressed_=!1;goog.ui.Container.prototype.allowFocusableChildren_=!1;goog.ui.Container.prototype.openFollowsHighlight_=!0;
goog.ui.Container.prototype.childElementIdMap_=null;goog.ui.Container.prototype.getKeyEventTarget=function(){return this.keyEventTarget_||this.renderer_.getKeyEventTarget(this)};
goog.ui.Container.prototype.setKeyEventTarget=function(a){if(this.focusable_){var b=this.getKeyEventTarget(),c=this.isInDocument();this.keyEventTarget_=a;var d=this.getKeyEventTarget();c&&(this.keyEventTarget_=b,this.enableFocusHandling_(!1),this.keyEventTarget_=a,this.getKeyHandler().attach(d),this.enableFocusHandling_(!0))}else throw Error("Can't set key event target for container that doesn't support keyboard focus!");};
goog.ui.Container.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler(this.getKeyEventTarget()))};goog.ui.Container.prototype.getRenderer=function(){return this.renderer_};goog.ui.Container.prototype.setRenderer=function(a){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.renderer_=a};goog.ui.Container.prototype.createDom=function(){this.setElementInternal(this.renderer_.createDom(this))};
goog.ui.Container.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())};goog.ui.Container.prototype.canDecorate=function(a){return this.renderer_.canDecorate(a)};goog.ui.Container.prototype.decorateInternal=function(a){this.setElementInternal(this.renderer_.decorate(this,a));"none"==a.style.display&&(this.visible_=!1)};
goog.ui.Container.prototype.enterDocument=function(){goog.ui.Container.superClass_.enterDocument.call(this);this.forEachChild(function(a){a.isInDocument()&&this.registerChildId_(a)},this);var a=this.getElement();this.renderer_.initializeDom(this);this.setVisible(this.visible_,!0);this.getHandler().listen(this,goog.ui.Component.EventType.ENTER,this.handleEnterItem).listen(this,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem).listen(this,goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem).listen(this,
goog.ui.Component.EventType.OPEN,this.handleOpenItem).listen(this,goog.ui.Component.EventType.CLOSE,this.handleCloseItem).listen(a,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(goog.dom.getOwnerDocument(a),goog.events.EventType.MOUSEUP,this.handleDocumentMouseUp).listen(a,[goog.events.EventType.MOUSEDOWN,goog.events.EventType.MOUSEUP,goog.events.EventType.MOUSEOVER,goog.events.EventType.MOUSEOUT,goog.events.EventType.CONTEXTMENU],this.handleChildMouseEvents);this.isFocusable()&&this.enableFocusHandling_(!0)};
goog.ui.Container.prototype.enableFocusHandling_=function(a){var b=this.getHandler(),c=this.getKeyEventTarget();a?b.listen(c,goog.events.EventType.FOCUS,this.handleFocus).listen(c,goog.events.EventType.BLUR,this.handleBlur).listen(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent):b.unlisten(c,goog.events.EventType.FOCUS,this.handleFocus).unlisten(c,goog.events.EventType.BLUR,this.handleBlur).unlisten(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent)};
goog.ui.Container.prototype.exitDocument=function(){this.setHighlightedIndex(-1);this.openItem_&&this.openItem_.setOpen(!1);this.mouseButtonPressed_=!1;goog.ui.Container.superClass_.exitDocument.call(this)};goog.ui.Container.prototype.disposeInternal=function(){goog.ui.Container.superClass_.disposeInternal.call(this);this.keyHandler_&&(this.keyHandler_.dispose(),this.keyHandler_=null);this.renderer_=this.openItem_=this.childElementIdMap_=this.keyEventTarget_=null};
goog.ui.Container.prototype.handleEnterItem=function(a){return!0};
goog.ui.Container.prototype.handleHighlightItem=function(a){var b=this.indexOfChild(a.target);if(-1<b&&b!=this.highlightedIndex_){var c=this.getHighlighted();c&&c.setHighlighted(!1);this.highlightedIndex_=b;c=this.getHighlighted();this.isMouseButtonPressed()&&c.setActive(!0);this.openFollowsHighlight_&&(this.openItem_&&c!=this.openItem_)&&(c.isSupportedState(goog.ui.Component.State.OPENED)?c.setOpen(!0):this.openItem_.setOpen(!1))}b=this.getElement();goog.asserts.assert(b,"The DOM element for the container cannot be null.");
null!=a.target.getElement()&&goog.a11y.aria.setState(b,goog.a11y.aria.State.ACTIVEDESCENDANT,a.target.getElement().id)};goog.ui.Container.prototype.handleUnHighlightItem=function(a){a.target==this.getHighlighted()&&(this.highlightedIndex_=-1);a=this.getElement();goog.asserts.assert(a,"The DOM element for the container cannot be null.");goog.a11y.aria.removeState(a,goog.a11y.aria.State.ACTIVEDESCENDANT)};
goog.ui.Container.prototype.handleOpenItem=function(a){if((a=a.target)&&a!=this.openItem_&&a.getParent()==this)this.openItem_&&this.openItem_.setOpen(!1),this.openItem_=a};goog.ui.Container.prototype.handleCloseItem=function(a){a.target==this.openItem_&&(this.openItem_=null)};goog.ui.Container.prototype.handleMouseDown=function(a){this.enabled_&&this.setMouseButtonPressed(!0);var b=this.getKeyEventTarget();b&&goog.dom.isFocusableTabIndex(b)?b.focus():a.preventDefault()};
goog.ui.Container.prototype.handleDocumentMouseUp=function(a){this.setMouseButtonPressed(!1)};goog.ui.Container.prototype.handleChildMouseEvents=function(a){var b=this.getOwnerControl(a.target);if(b)switch(a.type){case goog.events.EventType.MOUSEDOWN:b.handleMouseDown(a);break;case goog.events.EventType.MOUSEUP:b.handleMouseUp(a);break;case goog.events.EventType.MOUSEOVER:b.handleMouseOver(a);break;case goog.events.EventType.MOUSEOUT:b.handleMouseOut(a);break;case goog.events.EventType.CONTEXTMENU:b.handleContextMenu(a)}};
goog.ui.Container.prototype.getOwnerControl=function(a){if(this.childElementIdMap_)for(var b=this.getElement();a&&a!==b;){var c=a.id;if(c in this.childElementIdMap_)return this.childElementIdMap_[c];a=a.parentNode}return null};goog.ui.Container.prototype.handleFocus=function(a){};goog.ui.Container.prototype.handleBlur=function(a){this.setHighlightedIndex(-1);this.setMouseButtonPressed(!1);this.openItem_&&this.openItem_.setOpen(!1)};
goog.ui.Container.prototype.handleKeyEvent=function(a){return this.isEnabled()&&this.isVisible()&&(0!=this.getChildCount()||this.keyEventTarget_)&&this.handleKeyEventInternal(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
goog.ui.Container.prototype.handleKeyEventInternal=function(a){var b=this.getHighlighted();if(b&&"function"==typeof b.handleKeyEvent&&b.handleKeyEvent(a)||this.openItem_&&this.openItem_!=b&&"function"==typeof this.openItem_.handleKeyEvent&&this.openItem_.handleKeyEvent(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case goog.events.KeyCodes.ESC:if(this.isFocusable())this.getKeyEventTarget().blur();else return!1;break;case goog.events.KeyCodes.HOME:this.highlightFirst();
break;case goog.events.KeyCodes.END:this.highlightLast();break;case goog.events.KeyCodes.UP:if(this.orientation_==goog.ui.Container.Orientation.VERTICAL)this.highlightPrevious();else return!1;break;case goog.events.KeyCodes.LEFT:if(this.orientation_==goog.ui.Container.Orientation.HORIZONTAL)this.isRightToLeft()?this.highlightNext():this.highlightPrevious();else return!1;break;case goog.events.KeyCodes.DOWN:if(this.orientation_==goog.ui.Container.Orientation.VERTICAL)this.highlightNext();else return!1;
break;case goog.events.KeyCodes.RIGHT:if(this.orientation_==goog.ui.Container.Orientation.HORIZONTAL)this.isRightToLeft()?this.highlightPrevious():this.highlightNext();else return!1;break;default:return!1}return!0};goog.ui.Container.prototype.registerChildId_=function(a){var b=a.getElement(),b=b.id||(b.id=a.getId());this.childElementIdMap_||(this.childElementIdMap_={});this.childElementIdMap_[b]=a};
goog.ui.Container.prototype.addChild=function(a,b){goog.asserts.assertInstanceof(a,goog.ui.Control,"The child of a container must be a control");goog.ui.Container.superClass_.addChild.call(this,a,b)};
goog.ui.Container.prototype.addChildAt=function(a,b,c){a.setDispatchTransitionEvents(goog.ui.Component.State.HOVER,!0);a.setDispatchTransitionEvents(goog.ui.Component.State.OPENED,!0);(this.isFocusable()||!this.isFocusableChildrenAllowed())&&a.setSupportedState(goog.ui.Component.State.FOCUSED,!1);a.setHandleMouseEvents(!1);goog.ui.Container.superClass_.addChildAt.call(this,a,b,c);a.isInDocument()&&this.isInDocument()&&this.registerChildId_(a);b<=this.highlightedIndex_&&this.highlightedIndex_++};
goog.ui.Container.prototype.removeChild=function(a,b){if(a=goog.isString(a)?this.getChild(a):a){var c=this.indexOfChild(a);-1!=c&&(c==this.highlightedIndex_?a.setHighlighted(!1):c<this.highlightedIndex_&&this.highlightedIndex_--);(c=a.getElement())&&(c.id&&this.childElementIdMap_)&&goog.object.remove(this.childElementIdMap_,c.id)}a=goog.ui.Container.superClass_.removeChild.call(this,a,b);a.setHandleMouseEvents(!0);return a};goog.ui.Container.prototype.getOrientation=function(){return this.orientation_};
goog.ui.Container.prototype.setOrientation=function(a){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.orientation_=a};goog.ui.Container.prototype.isVisible=function(){return this.visible_};
goog.ui.Container.prototype.setVisible=function(a,b){if(b||this.visible_!=a&&this.dispatchEvent(a?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){this.visible_=a;var c=this.getElement();c&&(goog.style.setElementShown(c,a),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),this.enabled_&&this.visible_),b||this.dispatchEvent(this.visible_?goog.ui.Container.EventType.AFTER_SHOW:goog.ui.Container.EventType.AFTER_HIDE));return!0}return!1};
goog.ui.Container.prototype.isEnabled=function(){return this.enabled_};
goog.ui.Container.prototype.setEnabled=function(a){if(this.enabled_!=a&&this.dispatchEvent(a?goog.ui.Component.EventType.ENABLE:goog.ui.Component.EventType.DISABLE))a?(this.enabled_=!0,this.forEachChild(function(a){a.wasDisabled?delete a.wasDisabled:a.setEnabled(!0)})):(this.forEachChild(function(a){a.isEnabled()?a.setEnabled(!1):a.wasDisabled=!0}),this.enabled_=!1,this.setMouseButtonPressed(!1)),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),a&&this.visible_)};
goog.ui.Container.prototype.isFocusable=function(){return this.focusable_};goog.ui.Container.prototype.setFocusable=function(a){a!=this.focusable_&&this.isInDocument()&&this.enableFocusHandling_(a);this.focusable_=a;this.enabled_&&this.visible_&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),a)};goog.ui.Container.prototype.isFocusableChildrenAllowed=function(){return this.allowFocusableChildren_};
goog.ui.Container.prototype.setFocusableChildrenAllowed=function(a){this.allowFocusableChildren_=a};goog.ui.Container.prototype.isOpenFollowsHighlight=function(){return this.openFollowsHighlight_};goog.ui.Container.prototype.setOpenFollowsHighlight=function(a){this.openFollowsHighlight_=a};goog.ui.Container.prototype.getHighlightedIndex=function(){return this.highlightedIndex_};
goog.ui.Container.prototype.setHighlightedIndex=function(a){(a=this.getChildAt(a))?a.setHighlighted(!0):-1<this.highlightedIndex_&&this.getHighlighted().setHighlighted(!1)};goog.ui.Container.prototype.setHighlighted=function(a){this.setHighlightedIndex(this.indexOfChild(a))};goog.ui.Container.prototype.getHighlighted=function(){return this.getChildAt(this.highlightedIndex_)};
goog.ui.Container.prototype.highlightFirst=function(){this.highlightHelper(function(a,b){return(a+1)%b},this.getChildCount()-1)};goog.ui.Container.prototype.highlightLast=function(){this.highlightHelper(function(a,b){a--;return 0>a?b-1:a},0)};goog.ui.Container.prototype.highlightNext=function(){this.highlightHelper(function(a,b){return(a+1)%b},this.highlightedIndex_)};goog.ui.Container.prototype.highlightPrevious=function(){this.highlightHelper(function(a,b){a--;return 0>a?b-1:a},this.highlightedIndex_)};
goog.ui.Container.prototype.highlightHelper=function(a,b){for(var c=0>b?this.indexOfChild(this.openItem_):b,d=this.getChildCount(),c=a.call(this,c,d),e=0;e<=d;){var f=this.getChildAt(c);if(f&&this.canHighlightItem(f))return this.setHighlightedIndexFromKeyEvent(c),!0;e++;c=a.call(this,c,d)}return!1};goog.ui.Container.prototype.canHighlightItem=function(a){return a.isVisible()&&a.isEnabled()&&a.isSupportedState(goog.ui.Component.State.HOVER)};
goog.ui.Container.prototype.setHighlightedIndexFromKeyEvent=function(a){this.setHighlightedIndex(a)};goog.ui.Container.prototype.getOpenItem=function(){return this.openItem_};goog.ui.Container.prototype.isMouseButtonPressed=function(){return this.mouseButtonPressed_};goog.ui.Container.prototype.setMouseButtonPressed=function(a){this.mouseButtonPressed_=a};goog.ui.TextareaRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.TextareaRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.TextareaRenderer);goog.ui.TextareaRenderer.CSS_CLASS="goog-textarea";goog.ui.TextareaRenderer.prototype.getAriaRole=function(){};goog.ui.TextareaRenderer.prototype.decorate=function(a,b){this.setUpTextarea_(a);goog.ui.TextareaRenderer.superClass_.decorate.call(this,a,b);a.setContent(b.value);return b};
goog.ui.TextareaRenderer.prototype.createDom=function(a){this.setUpTextarea_(a);return a.getDomHelper().createDom("textarea",{"class":this.getClassNames(a).join(" "),disabled:!a.isEnabled()},a.getContent()||"")};goog.ui.TextareaRenderer.prototype.canDecorate=function(a){return a.tagName==goog.dom.TagName.TEXTAREA};goog.ui.TextareaRenderer.prototype.setRightToLeft=goog.nullFunction;goog.ui.TextareaRenderer.prototype.isFocusable=function(a){return a.isEnabled()};
goog.ui.TextareaRenderer.prototype.setFocusable=goog.nullFunction;goog.ui.TextareaRenderer.prototype.setState=function(a,b,c){goog.ui.TextareaRenderer.superClass_.setState.call(this,a,b,c);if((a=a.getElement())&&b==goog.ui.Component.State.DISABLED)a.disabled=c};goog.ui.TextareaRenderer.prototype.updateAriaState=goog.nullFunction;
goog.ui.TextareaRenderer.prototype.setUpTextarea_=function(a){a.setHandleMouseEvents(!1);a.setAutoStates(goog.ui.Component.State.ALL,!1);a.setSupportedState(goog.ui.Component.State.FOCUSED,!1)};goog.ui.TextareaRenderer.prototype.setContent=function(a,b){a&&(a.value=b)};goog.ui.TextareaRenderer.prototype.getCssClass=function(){return goog.ui.TextareaRenderer.CSS_CLASS};goog.ui.Textarea=function(a,b,c){goog.ui.Control.call(this,a,b||goog.ui.TextareaRenderer.getInstance(),c);this.setHandleMouseEvents(!1);this.setAllowTextSelection(!0);a||this.setContentInternal("")};goog.inherits(goog.ui.Textarea,goog.ui.Control);goog.ui.Textarea.NEEDS_HELP_SHRINKING_=goog.userAgent.GECKO||goog.userAgent.WEBKIT;goog.ui.Textarea.prototype.isResizing_=!1;goog.ui.Textarea.prototype.height_=0;goog.ui.Textarea.prototype.maxHeight_=0;goog.ui.Textarea.prototype.minHeight_=0;
goog.ui.Textarea.prototype.hasDiscoveredTextareaCharacteristics_=!1;goog.ui.Textarea.prototype.needsPaddingBorderFix_=!1;goog.ui.Textarea.prototype.scrollHeightIncludesPadding_=!1;goog.ui.Textarea.prototype.scrollHeightIncludesBorder_=!1;goog.ui.Textarea.EventType={RESIZE:"resize"};goog.ui.Textarea.prototype.getPaddingBorderBoxHeight_=function(){return this.paddingBox_.top+this.paddingBox_.bottom+this.borderBox_.top+this.borderBox_.bottom};goog.ui.Textarea.prototype.getMinHeight=function(){return this.minHeight_};
goog.ui.Textarea.prototype.getMinHeight_=function(){var a=this.minHeight_,b=this.getElement();a&&(b&&this.needsPaddingBorderFix_)&&(a-=this.getPaddingBorderBoxHeight_());return a};goog.ui.Textarea.prototype.setMinHeight=function(a){this.minHeight_=a;this.resize()};goog.ui.Textarea.prototype.getMaxHeight=function(){return this.maxHeight_};
goog.ui.Textarea.prototype.getMaxHeight_=function(){var a=this.maxHeight_,b=this.getElement();a&&(b&&this.needsPaddingBorderFix_)&&(a-=this.getPaddingBorderBoxHeight_());return a};goog.ui.Textarea.prototype.setMaxHeight=function(a){this.maxHeight_=a;this.resize()};goog.ui.Textarea.prototype.setValue=function(a){this.setContent(String(a))};goog.ui.Textarea.prototype.getValue=function(){return this.getElement().value};
goog.ui.Textarea.prototype.setContent=function(a){goog.ui.Textarea.superClass_.setContent.call(this,a);this.resize()};goog.ui.Textarea.prototype.setEnabled=function(a){goog.ui.Textarea.superClass_.setEnabled.call(this,a);this.getElement().disabled=!a};goog.ui.Textarea.prototype.resize=function(){this.getElement()&&this.grow_()};
goog.ui.Textarea.prototype.enterDocument=function(){goog.ui.Textarea.superClass_.enterDocument.call(this);var a=this.getElement();goog.style.setStyle(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.paddingBox_=goog.style.getPaddingBox(a);this.borderBox_=goog.style.getBorderBox(a);this.getHandler().listen(a,goog.events.EventType.SCROLL,this.grow_).listen(a,goog.events.EventType.FOCUS,this.grow_).listen(a,
goog.events.EventType.KEYUP,this.grow_).listen(a,goog.events.EventType.MOUSEUP,this.mouseUpListener_);this.resize()};
goog.ui.Textarea.prototype.getHeight_=function(){this.discoverTextareaCharacteristics_();var a=this.getElement(),b=this.getElement().scrollHeight+this.getHorizontalScrollBarHeight_();if(this.needsPaddingBorderFix_)b-=this.getPaddingBorderBoxHeight_();else{if(!this.scrollHeightIncludesPadding_)var c=this.paddingBox_,b=b+(c.top+c.bottom);this.scrollHeightIncludesBorder_||(a=goog.style.getBorderBox(a),b+=a.top+a.bottom)}return b};
goog.ui.Textarea.prototype.setHeight_=function(a){this.height_!=a&&(this.height_=a,this.getElement().style.height=a+"px")};goog.ui.Textarea.prototype.setHeightToEstimate_=function(){var a=this.getElement();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1};
goog.ui.Textarea.prototype.getHorizontalScrollBarHeight_=function(){var a=this.getElement(),b=a.offsetHeight-a.clientHeight;if(!this.scrollHeightIncludesPadding_)var c=this.paddingBox_,b=b-(c.top+c.bottom);this.scrollHeightIncludesBorder_||(a=goog.style.getBorderBox(a),b-=a.top+a.bottom);return 0<b?b:0};
goog.ui.Textarea.prototype.discoverTextareaCharacteristics_=function(){if(!this.hasDiscoveredTextareaCharacteristics_){var a=this.getElement().cloneNode(!1);goog.style.setStyle(a,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});goog.dom.appendChild(this.getDomHelper().getDocument().body,a);var b=a.scrollHeight;a.style.padding="10px";var c=a.scrollHeight;this.scrollHeightIncludesPadding_=c>b;a.style.borderWidth="10px";this.scrollHeightIncludesBorder_=
a.scrollHeight>c;a.style.height="100px";100!=a.offsetHeight&&(this.needsPaddingBorderFix_=!0);goog.dom.removeNode(a);this.hasDiscoveredTextareaCharacteristics_=!0}};
goog.ui.Textarea.prototype.grow_=function(a){if(!this.isResizing_){a=!1;this.isResizing_=!0;var b=this.getElement(),c=this.height_;if(b.scrollHeight){var d=!1,e=!1,f=this.getHeight_(),g=b.offsetHeight,k=this.getMinHeight_(),l=this.getMaxHeight_();k&&f<k?(this.setHeight_(k),d=!0):l&&f>l?(this.setHeight_(l),b.style.overflowY="",e=!0):g!=f?this.setHeight_(f):this.height_||(this.height_=f);!d&&(!e&&goog.ui.Textarea.NEEDS_HELP_SHRINKING_)&&(a=!0)}else this.setHeightToEstimate_();this.isResizing_=!1;a&&
this.shrink_();c!=this.height_&&this.dispatchEvent(goog.ui.Textarea.EventType.RESIZE)}};
goog.ui.Textarea.prototype.shrink_=function(){var a=this.getElement();if(!this.isResizing_){this.isResizing_=!0;var b=a.scrollHeight;if(b){var c=this.getHeight_(),d=this.getMinHeight_(),e=this.getMaxHeight_();!(d&&c<=d)&&!(e&&c>=e)&&(e=this.paddingBox_,a.style.paddingBottom=e.bottom+1+"px",this.getHeight_()==c&&(a.style.paddingBottom=e.bottom+b+"px",a.scrollTop=0,b=this.getHeight_()-b,b>=d?this.setHeight_(b):this.setHeight_(d)),a.style.paddingBottom=e.bottom+"px")}else this.setHeightToEstimate_();
this.isResizing_=!1}};goog.ui.Textarea.prototype.mouseUpListener_=function(a){var b=this.getElement();a=b.offsetHeight;b.filters&&b.filters.length&&(b=b.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(a-=b.offX);a!=this.height_&&(this.height_=this.minHeight_=a)};goog.dom.classlist={};goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST=!1;goog.dom.classlist.NATIVE_DOM_TOKEN_LIST_=goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||!!goog.global.DOMTokenList;goog.dom.classlist.get=goog.dom.classlist.NATIVE_DOM_TOKEN_LIST_?function(a){return a.classList}:function(a){a=a.className;return goog.isString(a)&&a.match(/\S+/g)||[]};goog.dom.classlist.set=function(a,b){a.className=b};
goog.dom.classlist.contains=goog.dom.classlist.NATIVE_DOM_TOKEN_LIST_?function(a,b){goog.asserts.assert(!!a.classList);return a.classList.contains(b)}:function(a,b){return goog.array.contains(goog.dom.classlist.get(a),b)};goog.dom.classlist.add=goog.dom.classlist.NATIVE_DOM_TOKEN_LIST_?function(a,b){a.classList.add(b)}:function(a,b){goog.dom.classlist.contains(a,b)||(a.className+=0<a.className.length?" "+b:b)};
goog.dom.classlist.addAll=goog.dom.classlist.NATIVE_DOM_TOKEN_LIST_?function(a,b){goog.array.forEach(b,function(b){goog.dom.classlist.add(a,b)})}:function(a,b){var c={};goog.array.forEach(goog.dom.classlist.get(a),function(a){c[a]=!0});goog.array.forEach(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d};
goog.dom.classlist.remove=goog.dom.classlist.NATIVE_DOM_TOKEN_LIST_?function(a,b){a.classList.remove(b)}:function(a,b){goog.dom.classlist.contains(a,b)&&(a.className=goog.array.filter(goog.dom.classlist.get(a),function(a){return a!=b}).join(" "))};
goog.dom.classlist.removeAll=goog.dom.classlist.NATIVE_DOM_TOKEN_LIST_?function(a,b){goog.array.forEach(b,function(b){goog.dom.classlist.remove(a,b)})}:function(a,b){a.className=goog.array.filter(goog.dom.classlist.get(a),function(a){return!goog.array.contains(b,a)}).join(" ")};goog.dom.classlist.enable=function(a,b,c){c?goog.dom.classlist.add(a,b):goog.dom.classlist.remove(a,b)};
goog.dom.classlist.swap=function(a,b,c){return goog.dom.classlist.contains(a,b)?(goog.dom.classlist.remove(a,b),goog.dom.classlist.add(a,c),!0):!1};goog.dom.classlist.toggle=function(a,b){var c=!goog.dom.classlist.contains(a,b);goog.dom.classlist.enable(a,b,c);return c};goog.dom.classlist.addRemove=function(a,b,c){goog.dom.classlist.remove(a,b);goog.dom.classlist.add(a,c)};goog.ui.LabelInput=function(a,b){goog.ui.Component.call(this,b);this.label_=a||""};goog.inherits(goog.ui.LabelInput,goog.ui.Component);goog.ui.LabelInput.prototype.ffKeyRestoreValue_=null;goog.ui.LabelInput.prototype.labelRestoreDelayMs=10;goog.ui.LabelInput.SUPPORTS_PLACEHOLDER_="placeholder"in document.createElement("input");goog.ui.LabelInput.prototype.hasFocus_=!1;goog.ui.LabelInput.prototype.createDom=function(){this.setElementInternal(this.getDomHelper().createDom("input",{type:"text"}))};
goog.ui.LabelInput.prototype.decorateInternal=function(a){goog.ui.LabelInput.superClass_.decorateInternal.call(this,a);this.label_||(this.label_=a.getAttribute("label")||"");goog.dom.getActiveElement(goog.dom.getOwnerDocument(a))==a&&(this.hasFocus_=!0,a=this.getElement(),goog.asserts.assert(a),goog.dom.classlist.remove(a,this.LABEL_CLASS_NAME));goog.ui.LabelInput.SUPPORTS_PLACEHOLDER_?this.getElement().placeholder=this.label_:(a=this.getElement(),goog.asserts.assert(a,"The label input element cannot be null."),
goog.a11y.aria.setState(a,goog.a11y.aria.State.LABEL,this.label_))};goog.ui.LabelInput.prototype.enterDocument=function(){goog.ui.LabelInput.superClass_.enterDocument.call(this);this.attachEvents_();this.check_();this.getElement().labelInput_=this};goog.ui.LabelInput.prototype.exitDocument=function(){goog.ui.LabelInput.superClass_.exitDocument.call(this);this.detachEvents_();this.getElement().labelInput_=null};
goog.ui.LabelInput.prototype.attachEvents_=function(){var a=new goog.events.EventHandler(this);a.listen(this.getElement(),goog.events.EventType.FOCUS,this.handleFocus_);a.listen(this.getElement(),goog.events.EventType.BLUR,this.handleBlur_);if(goog.ui.LabelInput.SUPPORTS_PLACEHOLDER_)this.eventHandler_=a;else{goog.userAgent.GECKO&&a.listen(this.getElement(),[goog.events.EventType.KEYPRESS,goog.events.EventType.KEYDOWN,goog.events.EventType.KEYUP],this.handleEscapeKeys_);var b=goog.dom.getOwnerDocument(this.getElement()),
b=goog.dom.getWindow(b);a.listen(b,goog.events.EventType.LOAD,this.handleWindowLoad_);this.eventHandler_=a;this.attachEventsToForm_()}};goog.ui.LabelInput.prototype.attachEventsToForm_=function(){!this.formAttached_&&(this.eventHandler_&&this.getElement().form)&&(this.eventHandler_.listen(this.getElement().form,goog.events.EventType.SUBMIT,this.handleFormSubmit_),this.formAttached_=!0)};
goog.ui.LabelInput.prototype.detachEvents_=function(){this.eventHandler_&&(this.eventHandler_.dispose(),this.eventHandler_=null)};goog.ui.LabelInput.prototype.disposeInternal=function(){goog.ui.LabelInput.superClass_.disposeInternal.call(this);this.detachEvents_()};goog.ui.LabelInput.prototype.LABEL_CLASS_NAME="label-input-label";
goog.ui.LabelInput.prototype.handleFocus_=function(a){this.hasFocus_=!0;a=this.getElement();goog.asserts.assert(a);goog.dom.classlist.remove(a,this.LABEL_CLASS_NAME);if(!goog.ui.LabelInput.SUPPORTS_PLACEHOLDER_&&!this.hasChanged()&&!this.inFocusAndSelect_){var b=this;a=function(){b.getElement()&&(b.getElement().value="")};goog.userAgent.IE?goog.Timer.callOnce(a,10):a()}};
goog.ui.LabelInput.prototype.handleBlur_=function(a){goog.ui.LabelInput.SUPPORTS_PLACEHOLDER_||(this.eventHandler_.unlisten(this.getElement(),goog.events.EventType.CLICK,this.handleFocus_),this.ffKeyRestoreValue_=null);this.hasFocus_=!1;this.check_()};
goog.ui.LabelInput.prototype.handleEscapeKeys_=function(a){27==a.keyCode&&(a.type==goog.events.EventType.KEYDOWN?this.ffKeyRestoreValue_=this.getElement().value:a.type==goog.events.EventType.KEYPRESS?this.getElement().value=this.ffKeyRestoreValue_:a.type==goog.events.EventType.KEYUP&&(this.ffKeyRestoreValue_=null),a.preventDefault())};goog.ui.LabelInput.prototype.handleFormSubmit_=function(a){this.hasChanged()||(this.getElement().value="",goog.Timer.callOnce(this.handleAfterSubmit_,10,this))};
goog.ui.LabelInput.prototype.handleAfterSubmit_=function(a){this.hasChanged()||(this.getElement().value=this.label_)};goog.ui.LabelInput.prototype.handleWindowLoad_=function(a){this.check_()};goog.ui.LabelInput.prototype.hasFocus=function(){return this.hasFocus_};goog.ui.LabelInput.prototype.hasChanged=function(){return!!this.getElement()&&""!=this.getElement().value&&this.getElement().value!=this.label_};
goog.ui.LabelInput.prototype.clear=function(){this.getElement().value="";null!=this.ffKeyRestoreValue_&&(this.ffKeyRestoreValue_="")};goog.ui.LabelInput.prototype.reset=function(){this.hasChanged()&&(this.clear(),this.check_())};goog.ui.LabelInput.prototype.setValue=function(a){null!=this.ffKeyRestoreValue_&&(this.ffKeyRestoreValue_=a);this.getElement().value=a;this.check_()};
goog.ui.LabelInput.prototype.getValue=function(){return null!=this.ffKeyRestoreValue_?this.ffKeyRestoreValue_:this.hasChanged()?this.getElement().value:""};
goog.ui.LabelInput.prototype.setLabel=function(a){goog.ui.LabelInput.SUPPORTS_PLACEHOLDER_?(this.label_=a,this.getElement()&&(this.getElement().placeholder=this.label_)):(this.getElement()&&!this.hasChanged()&&(this.getElement().value=""),this.label_=a,this.restoreLabel_(),(a=this.getElement())&&goog.a11y.aria.setState(a,goog.a11y.aria.State.LABEL,this.label_))};goog.ui.LabelInput.prototype.getLabel=function(){return this.label_};
goog.ui.LabelInput.prototype.check_=function(){var a=this.getElement();goog.asserts.assert(a,"The label input element cannot be null.");goog.ui.LabelInput.SUPPORTS_PLACEHOLDER_?this.getElement().placeholder!=this.label_&&(this.getElement().placeholder=this.label_):(this.attachEventsToForm_(),goog.a11y.aria.setState(a,goog.a11y.aria.State.LABEL,this.label_));this.hasChanged()?(a=this.getElement(),goog.asserts.assert(a),goog.dom.classlist.remove(a,this.LABEL_CLASS_NAME)):(!this.inFocusAndSelect_&&!this.hasFocus_&&
(a=this.getElement(),goog.asserts.assert(a),goog.dom.classlist.add(a,this.LABEL_CLASS_NAME)),goog.ui.LabelInput.SUPPORTS_PLACEHOLDER_||goog.Timer.callOnce(this.restoreLabel_,this.labelRestoreDelayMs,this))};
goog.ui.LabelInput.prototype.focusAndSelect=function(){var a=this.hasChanged();this.inFocusAndSelect_=!0;this.getElement().focus();!a&&!goog.ui.LabelInput.SUPPORTS_PLACEHOLDER_&&(this.getElement().value=this.label_);this.getElement().select();goog.ui.LabelInput.SUPPORTS_PLACEHOLDER_||(this.eventHandler_&&this.eventHandler_.listenOnce(this.getElement(),goog.events.EventType.CLICK,this.handleFocus_),goog.Timer.callOnce(this.focusAndSelect_,10,this))};
goog.ui.LabelInput.prototype.setEnabled=function(a){this.getElement().disabled=!a;var b=this.getElement();goog.asserts.assert(b);goog.dom.classlist.enable(b,this.LABEL_CLASS_NAME+"-disabled",!a)};goog.ui.LabelInput.prototype.isEnabled=function(){return!this.getElement().disabled};goog.ui.LabelInput.prototype.focusAndSelect_=function(){this.inFocusAndSelect_=!1};
goog.ui.LabelInput.prototype.restoreLabel_=function(){this.getElement()&&(!this.hasChanged()&&!this.hasFocus_)&&(this.getElement().value=this.label_)};/*
 Portions of this code are from the Dojo Toolkit, received by
 The Closure Library Authors under the BSD license. All other code is
 Copyright 2005-2009 The Closure Library Authors. All Rights Reserved.

The "New" BSD License:

Copyright (c) 2005-2009, The Dojo Foundation
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.
 Neither the name of the Dojo Foundation nor the names of its contributors
    may be used to endorse or promote products derived from this software
    without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
goog.dom.query=function(){function a(a,b){var c=b||[];a&&c.push(a);return c}var b=goog.userAgent.WEBKIT&&"BackCompat"==goog.dom.getDocument().compatMode,c=goog.dom.getDocument().firstChild.children?"children":"childNodes",d=!1,e=function(a){a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ";for(var b=function(b,c){return goog.string.trim(a.slice(b,c))},c=[],e=-1,f=-1,g=-1,k=-1,l=-1,m=-1,p=-1,q="",t="",v,u=0,C=a.length,y=null,D=null,J=function(){0<=m&&(y.id=b(m,u).replace(/\\/g,""),m=-1);if(0<=p){var a=
p==u?null:b(p,u);0>">~+".indexOf(a)?y.tag=a:y.oper=a;p=-1}0<=l&&(y.classes.push(b(l+1,u).replace(/\\/g,"")),l=-1)};q=t,t=a.charAt(u),u<C;u++)if("\\"!=q)if(y||(v=u,y={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return d?this.otag:this.tag}},p=u),0<=e)if("]"==t){D.attr?D.matchFor=b(g||e+1,u):D.attr=b(e+1,u);if((e=D.matchFor)&&('"'==e.charAt(0)||"'"==e.charAt(0)))D.matchFor=e.slice(1,-1);y.attrs.push(D);D=null;e=g=-1}else"="==t&&(g=0<="|~^$*".indexOf(q)?q:"",
D.type=g+t,D.attr=b(e+1,u-g.length),g=u+1);else 0<=f?")"==t&&(0<=k&&(D.value=b(f+1,u)),k=f=-1):"#"==t?(J(),m=u+1):"."==t?(J(),l=u):":"==t?(J(),k=u):"["==t?(J(),e=u,D={}):"("==t?(0<=k&&(D={name:b(k+1,u),value:null},y.pseudos.push(D)),f=u):" "==t&&q!=t&&(J(),0<=k&&y.pseudos.push({name:b(k+1,u)}),y.loops=y.pseudos.length||y.attrs.length||y.classes.length,y.oquery=y.query=b(v,u),y.otag=y.tag=y.oper?null:y.tag||"*",y.tag&&(y.tag=y.tag.toUpperCase()),c.length&&c[c.length-1].oper&&(y.infixOper=c.pop(),y.query=
y.infixOper.query+" "+y.query),c.push(y),y=null);return c},f=function(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}},g=function(a){return 1==a.nodeType},k=function(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(d?a.getAttribute(b):a.getAttribute(b,2))||""},l={"*=":function(a,b){return function(c){return 0<=k(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==k(c,a).indexOf(b)}},"$=":function(a,
b){return function(c){c=" "+k(c,a);return c.lastIndexOf(b)==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+k(b,a)+" ").indexOf(c)}},"|=":function(a,b){b=" "+b;return function(c){c=" "+k(c,a);return c==b||0==c.indexOf(b+"-")}},"=":function(a,b){return function(c){return k(c,a)==b}}},m="undefined"==typeof goog.dom.getDocument().firstChild.nextElementSibling,p=!m?"nextElementSibling":"nextSibling",q=!m?"previousElementSibling":"previousSibling",t=m?g:goog.functions.TRUE,
D=function(a){for(;a=a[q];)if(t(a))return!1;return!0},C=function(a){for(;a=a[p];)if(t(a))return!1;return!0},T=function(a){var b=a.parentNode,d=0,e=b[c],f=a._i||-1,g=b._l||-1;if(!e)return-1;e=e.length;if(g==e&&0<=f&&0<=g)return f;b._l=e;f=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[p])t(b)&&(b._i=++d,a===b&&(f=d));return f},ba=function(a){return!(T(a)%2)},J=function(a){return T(a)%2},ma={checked:function(a,b){return function(a){return a.checked||a.attributes.checked}},"first-child":function(){return D},
"last-child":function(){return C},"only-child":function(a,b){return function(a){return!D(a)||!C(a)?!1:!0}},empty:function(a,b){return function(a){var b=a.childNodes;for(a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return!1}return!0}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=e(b)[0],d={el:1};"*"!=c.tag&&(d.tag=1);c.classes.length||(d.classes=1);var f=va(c,d);return function(a){return!f(a)}},
"nth-child":function(a,b){if("odd"==b)return J;if("even"==b)return ba;if(-1!=b.indexOf("n")){var c=b.split("n",2),d=c[0]?"-"==c[0]?-1:parseInt(c[0],10):1,e=c[1]?parseInt(c[1],10):0,f=0,g=-1;0<d?0>e?e=e%d&&d+e%d:0<e&&(e>=d&&(f=e-e%d),e%=d):0>d&&(d*=-1,0<e&&(g=e,e%=d));if(0<d)return function(a){a=T(a);return a>=f&&(0>g||a<=g)&&a%d==e};b=e}var k=parseInt(b,10);return function(a){return T(a)==k}}},ca=goog.userAgent.IE?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return d?
c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},va=function(a,b){if(!a)return goog.functions.TRUE;b=b||{};var c=null;b.el||(c=f(c,g));b.tag||"*"!=a.tag&&(c=f(c,function(b){return b&&b.tagName==a.getTag()}));b.classes||goog.array.forEach(a.classes,function(a,b,d){var e=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=f(c,function(a){return e.test(a.className)});c.count=b});b.pseudos||goog.array.forEach(a.pseudos,function(a){var b=a.name;ma[b]&&(c=f(c,
ma[b](b,a.value)))});b.attrs||goog.array.forEach(a.attrs,function(a){var b,d=a.attr;a.type&&l[a.type]?b=l[a.type](d,a.matchFor):d.length&&(b=ca(d));b&&(c=f(c,b))});b.id||a.id&&(c=f(c,function(b){return!!b&&b.id==a.id}));!c&&!("default"in b)&&(c=goog.functions.TRUE);return c},Xa=function(a){return function(b,c,d){for(;b=b[p];)if(!m||g(b)){(!d||La(b,d))&&a(b)&&c.push(b);break}return c}},Fa=function(a){return function(b,c,d){for(b=b[p];b;){if(t(b)){if(d&&!La(b,d))break;a(b)&&c.push(b)}b=b[p]}return c}},
Ya=function(a){a=a||goog.functions.TRUE;return function(b,d,e){for(var f=0,g=b[c];b=g[f++];)t(b)&&((!e||La(b,e))&&a(b,f))&&d.push(b);return d}},Da={},Pa=function(c){var d=Da[c.query];if(d)return d;var e=c.infixOper,e=e?e.oper:"",f=va(c,{el:1}),g="*"==c.tag,k=goog.dom.getDocument().getElementsByClassName;if(e)k={el:1},g&&(k.tag=1),f=va(c,k),"+"==e?d=Xa(f):"~"==e?d=Fa(f):">"==e&&(d=Ya(f));else if(c.id)f=!c.loops&&g?goog.functions.TRUE:va(c,{el:1,id:1}),d=function(b,d){var e=goog.dom.getDomHelper(b).getElement(c.id);
if(e&&f(e)){if(9==b.nodeType)return a(e,d);for(var g=e.parentNode;g&&g!=b;)g=g.parentNode;if(g)return a(e,d)}};else if(k&&/\{\s*\[native code\]\s*\}/.test(String(k))&&c.classes.length&&!b)var f=va(c,{el:1,classes:1,id:1}),l=c.classes.join(" "),d=function(b,c){for(var d=a(0,c),e,g=0,k=b.getElementsByClassName(l);e=k[g++];)f(e,b)&&d.push(e);return d};else!g&&!c.loops?d=function(b,d){for(var e=a(0,d),f,g=0,k=b.getElementsByTagName(c.getTag());f=k[g++];)e.push(f);return e}:(f=va(c,{el:1,tag:1,id:1}),
d=function(b,d){for(var e=a(0,d),g,k=0,l=b.getElementsByTagName(c.getTag());g=l[k++];)f(g,b)&&e.push(g);return e});return Da[c.query]=d},Qa={},Ca={},Ra=function(b){var c=e(goog.string.trim(b));if(1==c.length){var d=Pa(c[0]);return function(a){if(a=d(a,[]))a.nozip=!0;return a}}return function(b){b=a(b);for(var d,e,f=c.length,g,k,l=0;l<f;l++){k=[];d=c[l];e=b.length-1;0<e&&(g={},k.nozip=!0);e=Pa(d);for(var m=0;d=b[m];m++)e(d,k,g);if(!k.length)break;b=k}return k}},u=!!goog.dom.getDocument().querySelectorAll&&
(!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("526")),ka=function(a,c){if(u){var d=Ca[a];if(d&&!c)return d}if(d=Qa[a])return d;var d=a.charAt(0),e=-1==a.indexOf(" ");0<=a.indexOf("#")&&e&&(c=!0);if(u&&!c&&-1==">~+".indexOf(d)&&(!goog.userAgent.IE||-1==a.indexOf(":"))&&!(b&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf("|=")){var f=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return Ca[a]=function(b){try{if(!(9==b.nodeType||e))throw"";var c=b.querySelectorAll(f);goog.userAgent.IE?
c.commentStrip=!0:c.nozip=!0;return c}catch(d){return ka(a,!0)(b)}}}var g=a.split(/\s*,\s*/);return Qa[a]=2>g.length?Ra(a):function(a){for(var b=0,c=[],d;d=g[b++];)c=c.concat(Ra(d)(a));return c}},na=0,Sa=goog.userAgent.IE?function(a){return d?a.getAttribute("_uid")||a.setAttribute("_uid",++na)||na:a.uniqueID}:function(a){return a._uid||(a._uid=++na)},La=function(a,b){if(!b)return 1;var c=Sa(a);return!b[c]?b[c]=1:0},v=function(a){if(a&&a.nozip)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);
if(2>a.length)return b;na++;if(goog.userAgent.IE&&d){var c=na+"";a[0].setAttribute("_zipIdx",c);for(var e=1,f;f=a[e];e++)a[e].getAttribute("_zipIdx")!=c&&b.push(f),f.setAttribute("_zipIdx",c)}else if(goog.userAgent.IE&&a.commentStrip)try{for(e=1;f=a[e];e++)g(f)&&b.push(f)}catch(k){}else{a[0]&&(a[0]._zipIdx=na);for(e=1;f=a[e];e++)a[e]._zipIdx!=na&&b.push(f),f._zipIdx=na}return b},xa=function(a,b){if(!a)return[];if(a.constructor==Array)return a;if(!goog.isString(a))return[a];if(goog.isString(b)&&(b=
goog.dom.getElement(b),!b))return[];b=b||goog.dom.getDocument();var c=b.ownerDocument||b.documentElement;d=b.contentType&&"application/xml"==b.contentType||goog.userAgent.OPERA&&(b.doctype||"[object XMLDocument]"==c.toString())||!!c&&(goog.userAgent.IE?c.xml:b.xmlVersion||c.xmlVersion);return(c=ka(a)(b))&&c.nozip?c:v(c)};xa.pseudos=ma;return xa}();goog.exportSymbol("goog.dom.query",goog.dom.query);goog.exportSymbol("goog.dom.query.pseudos",goog.dom.query.pseudos);goog.ui.MenuItemRenderer=function(){goog.ui.ControlRenderer.call(this);this.classNameCache_=[]};goog.inherits(goog.ui.MenuItemRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuItemRenderer);goog.ui.MenuItemRenderer.CSS_CLASS="goog-menuitem";goog.ui.MenuItemRenderer.CompositeCssClassIndex_={HOVER:0,CHECKBOX:1,CONTENT:2};
goog.ui.MenuItemRenderer.prototype.getCompositeCssClass_=function(a){var b=this.classNameCache_[a];if(!b){switch(a){case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER:b=this.getStructuralCssClass()+"-highlight";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX:b=this.getStructuralCssClass()+"-checkbox";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT:b=this.getStructuralCssClass()+"-content"}this.classNameCache_[a]=b}return b};
goog.ui.MenuItemRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.MENU_ITEM};goog.ui.MenuItemRenderer.prototype.createDom=function(a){var b=a.getDomHelper().createDom("div",this.getClassNames(a).join(" "),this.createContent(a.getContent(),a.getDomHelper()));this.setEnableCheckBoxStructure(a,b,a.isSupportedState(goog.ui.Component.State.SELECTED)||a.isSupportedState(goog.ui.Component.State.CHECKED));this.setAriaStates(a,b);return b};
goog.ui.MenuItemRenderer.prototype.getContentElement=function(a){return a&&a.firstChild};goog.ui.MenuItemRenderer.prototype.decorate=function(a,b){this.hasContentStructure(b)||b.appendChild(this.createContent(b.childNodes,a.getDomHelper()));goog.dom.classes.has(b,"goog-option")&&(a.setCheckable(!0),this.setCheckable(a,b,!0));return goog.ui.MenuItemRenderer.superClass_.decorate.call(this,a,b)};
goog.ui.MenuItemRenderer.prototype.setContent=function(a,b){var c=this.getContentElement(a),d=this.hasCheckBoxStructure(a)?c.firstChild:null;goog.ui.MenuItemRenderer.superClass_.setContent.call(this,a,b);d&&!this.hasCheckBoxStructure(a)&&c.insertBefore(d,c.firstChild||null)};
goog.ui.MenuItemRenderer.prototype.hasContentStructure=function(a){a=goog.dom.getFirstElementChild(a);var b=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return!!a&&goog.dom.classes.has(a,b)};goog.ui.MenuItemRenderer.prototype.createContent=function(a,b){var c=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return b.createDom("div",c,a)};
goog.ui.MenuItemRenderer.prototype.setSelectable=function(a,b,c){b&&(goog.a11y.aria.setRole(b,c?goog.a11y.aria.Role.MENU_ITEM_RADIO:this.getAriaRole()),this.setEnableCheckBoxStructure(a,b,c))};goog.ui.MenuItemRenderer.prototype.setCheckable=function(a,b,c){b&&(goog.a11y.aria.setRole(b,c?goog.a11y.aria.Role.MENU_ITEM_CHECKBOX:this.getAriaRole()),this.setEnableCheckBoxStructure(a,b,c))};
goog.ui.MenuItemRenderer.prototype.hasCheckBoxStructure=function(a){if(a=this.getContentElement(a)){a=a.firstChild;var b=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX);return!!a&&goog.dom.classes.has(a,b)}return!1};
goog.ui.MenuItemRenderer.prototype.setEnableCheckBoxStructure=function(a,b,c){c!=this.hasCheckBoxStructure(b)&&(goog.dom.classes.enable(b,"goog-option",c),b=this.getContentElement(b),c?(c=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX),b.insertBefore(a.getDomHelper().createDom("div",c),b.firstChild||null)):b.removeChild(b.firstChild))};
goog.ui.MenuItemRenderer.prototype.getClassForState=function(a){switch(a){case goog.ui.Component.State.HOVER:return this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);case goog.ui.Component.State.CHECKED:case goog.ui.Component.State.SELECTED:return"goog-option-selected";default:return goog.ui.MenuItemRenderer.superClass_.getClassForState.call(this,a)}};
goog.ui.MenuItemRenderer.prototype.getStateFromClass=function(a){var b=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);switch(a){case "goog-option-selected":return goog.ui.Component.State.CHECKED;case b:return goog.ui.Component.State.HOVER;default:return goog.ui.MenuItemRenderer.superClass_.getStateFromClass.call(this,a)}};goog.ui.MenuItemRenderer.prototype.getCssClass=function(){return goog.ui.MenuItemRenderer.CSS_CLASS};goog.ui.MenuItem=function(a,b,c,d){goog.ui.Control.call(this,a,d||goog.ui.MenuItemRenderer.getInstance(),c);this.setValue(b)};goog.inherits(goog.ui.MenuItem,goog.ui.Control);goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_="goog-menuitem-mnemonic-separator";goog.ui.MenuItem.ACCELERATOR_CLASS_="goog-menuitem-accel";goog.ui.MenuItem.prototype.getValue=function(){var a=this.getModel();return null!=a?a:this.getCaption()};goog.ui.MenuItem.prototype.setValue=function(a){this.setModel(a)};
goog.ui.MenuItem.prototype.setSelectable=function(a){this.setSupportedState(goog.ui.Component.State.SELECTED,a);this.isChecked()&&!a&&this.setChecked(!1);var b=this.getElement();b&&this.getRenderer().setSelectable(this,b,a)};goog.ui.MenuItem.prototype.setCheckable=function(a){this.setSupportedState(goog.ui.Component.State.CHECKED,a);var b=this.getElement();b&&this.getRenderer().setCheckable(this,b,a)};
goog.ui.MenuItem.prototype.getCaption=function(){var a=this.getContent();if(goog.isArray(a)){var b=goog.ui.MenuItem.ACCELERATOR_CLASS_,c=goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_,a=goog.array.map(a,function(a){var e=goog.dom.classes.get(a);return goog.array.contains(e,b)||goog.array.contains(e,c)?"":goog.dom.getRawTextContent(a)}).join("");return goog.string.collapseBreakingSpaces(a)}return goog.ui.MenuItem.superClass_.getCaption.call(this)};
goog.ui.MenuItem.prototype.handleMouseUp=function(a){var b=this.getParent();if(b){var c=b.openingCoords;b.openingCoords=null;if(c&&goog.isNumber(a.clientX)&&(b=new goog.math.Coordinate(a.clientX,a.clientY),goog.math.Coordinate.equals(c,b)))return}goog.ui.MenuItem.superClass_.handleMouseUp.call(this,a)};goog.ui.MenuItem.prototype.handleKeyEventInternal=function(a){return a.keyCode==this.getMnemonic()&&this.performActionInternal(a)?!0:goog.ui.MenuItem.superClass_.handleKeyEventInternal.call(this,a)};
goog.ui.MenuItem.prototype.setMnemonic=function(a){this.mnemonicKey_=a};goog.ui.MenuItem.prototype.getMnemonic=function(){return this.mnemonicKey_};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuItemRenderer.CSS_CLASS,function(){return new goog.ui.MenuItem(null)});goog.ui.Option=function(a,b,c){goog.ui.MenuItem.call(this,a,b,c);this.setSelectable(!0)};goog.inherits(goog.ui.Option,goog.ui.MenuItem);goog.ui.Option.prototype.performActionInternal=function(a){return this.dispatchEvent(goog.ui.Component.EventType.ACTION)};goog.ui.registry.setDecoratorByClassName("goog-option",function(){return new goog.ui.Option(null)});goog.ui.INLINE_BLOCK_CLASSNAME="goog-inline-block";goog.ui.ButtonSide={NONE:0,START:1,END:2,BOTH:3};goog.ui.ButtonRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.ButtonRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.ButtonRenderer);goog.ui.ButtonRenderer.CSS_CLASS="goog-button";goog.ui.ButtonRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.BUTTON};
goog.ui.ButtonRenderer.prototype.updateAriaState=function(a,b,c){switch(b){case goog.ui.Component.State.SELECTED:case goog.ui.Component.State.CHECKED:goog.asserts.assert(a,"The button DOM element cannot be null.");goog.a11y.aria.setState(a,goog.a11y.aria.State.PRESSED,c);break;default:case goog.ui.Component.State.OPENED:case goog.ui.Component.State.DISABLED:goog.ui.ButtonRenderer.superClass_.updateAriaState.call(this,a,b,c)}};
goog.ui.ButtonRenderer.prototype.createDom=function(a){var b=goog.ui.ButtonRenderer.superClass_.createDom.call(this,a);this.setTooltip(b,a.getTooltip());var c=a.getValue();c&&this.setValue(b,c);a.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(b,goog.ui.Component.State.CHECKED,a.isChecked());return b};
goog.ui.ButtonRenderer.prototype.decorate=function(a,b){b=goog.ui.ButtonRenderer.superClass_.decorate.call(this,a,b);a.setValueInternal(this.getValue(b));a.setTooltipInternal(this.getTooltip(b));a.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(b,goog.ui.Component.State.CHECKED,a.isChecked());return b};goog.ui.ButtonRenderer.prototype.getValue=goog.nullFunction;goog.ui.ButtonRenderer.prototype.setValue=goog.nullFunction;goog.ui.ButtonRenderer.prototype.getTooltip=function(a){return a.title};
goog.ui.ButtonRenderer.prototype.setTooltip=function(a,b){a&&b&&(a.title=b)};goog.ui.ButtonRenderer.prototype.setCollapsed=function(a,b){var c=a.isRightToLeft(),d=this.getStructuralCssClass()+"-collapse-left",e=this.getStructuralCssClass()+"-collapse-right";a.enableClassName(c?e:d,!!(b&goog.ui.ButtonSide.START));a.enableClassName(c?d:e,!!(b&goog.ui.ButtonSide.END))};goog.ui.ButtonRenderer.prototype.getCssClass=function(){return goog.ui.ButtonRenderer.CSS_CLASS};goog.ui.CustomButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)};goog.inherits(goog.ui.CustomButtonRenderer,goog.ui.ButtonRenderer);goog.addSingletonGetter(goog.ui.CustomButtonRenderer);goog.ui.CustomButtonRenderer.CSS_CLASS="goog-custom-button";
goog.ui.CustomButtonRenderer.prototype.createDom=function(a){var b=this.getClassNames(a),b={"class":goog.ui.INLINE_BLOCK_CLASSNAME+" "+b.join(" ")},b=a.getDomHelper().createDom("div",b,this.createButton(a.getContent(),a.getDomHelper()));this.setTooltip(b,a.getTooltip());this.setAriaStates(a,b);return b};goog.ui.CustomButtonRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.BUTTON};goog.ui.CustomButtonRenderer.prototype.getContentElement=function(a){return a&&a.firstChild.firstChild};
goog.ui.CustomButtonRenderer.prototype.createButton=function(a,b){return b.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-outer-box"),b.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-inner-box"),a))};goog.ui.CustomButtonRenderer.prototype.canDecorate=function(a){return"DIV"==a.tagName};
goog.ui.CustomButtonRenderer.prototype.hasBoxStructure=function(a,b){var c=a.getDomHelper().getFirstElementChild(b),d=this.getCssClass()+"-outer-box";return c&&goog.dom.classes.has(c,d)&&(c=a.getDomHelper().getFirstElementChild(c),d=this.getCssClass()+"-inner-box",c&&goog.dom.classes.has(c,d))?!0:!1};
goog.ui.CustomButtonRenderer.prototype.decorate=function(a,b){goog.ui.CustomButtonRenderer.trimTextNodes_(b,!0);goog.ui.CustomButtonRenderer.trimTextNodes_(b,!1);this.hasBoxStructure(a,b)||b.appendChild(this.createButton(b.childNodes,a.getDomHelper()));goog.dom.classes.add(b,goog.ui.INLINE_BLOCK_CLASSNAME,this.getCssClass());return goog.ui.CustomButtonRenderer.superClass_.decorate.call(this,a,b)};goog.ui.CustomButtonRenderer.prototype.getCssClass=function(){return goog.ui.CustomButtonRenderer.CSS_CLASS};
goog.ui.CustomButtonRenderer.trimTextNodes_=function(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(c.nodeType==goog.dom.NodeType.TEXT){var e=c.nodeValue;if(""==goog.string.trim(e))a.removeChild(c);else{c.nodeValue=b?goog.string.trimLeft(e):goog.string.trimRight(e);break}}else break;c=d}};goog.positioning={};goog.positioning.Corner={TOP_LEFT:0,TOP_RIGHT:2,BOTTOM_LEFT:1,BOTTOM_RIGHT:3,TOP_START:4,TOP_END:6,BOTTOM_START:5,BOTTOM_END:7};goog.positioning.CornerBit={BOTTOM:1,RIGHT:2,FLIP_RTL:4};goog.positioning.Overflow={IGNORE:0,ADJUST_X:1,FAIL_X:2,ADJUST_Y:4,FAIL_Y:8,RESIZE_WIDTH:16,RESIZE_HEIGHT:32,ADJUST_X_EXCEPT_OFFSCREEN:65,ADJUST_Y_EXCEPT_OFFSCREEN:132};
goog.positioning.OverflowStatus={NONE:0,ADJUSTED_X:1,ADJUSTED_Y:2,WIDTH_ADJUSTED:4,HEIGHT_ADJUSTED:8,FAILED_LEFT:16,FAILED_RIGHT:32,FAILED_TOP:64,FAILED_BOTTOM:128,FAILED_OUTSIDE_VIEWPORT:256};goog.positioning.OverflowStatus.FAILED=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT|goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM|goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT;
goog.positioning.OverflowStatus.FAILED_HORIZONTAL=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT;goog.positioning.OverflowStatus.FAILED_VERTICAL=goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM;
goog.positioning.positionAtAnchor=function(a,b,c,d,e,f,g,k,l){goog.asserts.assert(c);var m=goog.positioning.getOffsetParentPageOffset(c),p=goog.positioning.getVisiblePart_(a);goog.style.translateRectForAnotherFrame(p,goog.dom.getDomHelper(a),goog.dom.getDomHelper(c));a=goog.positioning.getEffectiveCorner(a,b);p=new goog.math.Coordinate(a&goog.positioning.CornerBit.RIGHT?p.left+p.width:p.left,a&goog.positioning.CornerBit.BOTTOM?p.top+p.height:p.top);p=goog.math.Coordinate.difference(p,m);e&&(p.x+=
(a&goog.positioning.CornerBit.RIGHT?-1:1)*e.x,p.y+=(a&goog.positioning.CornerBit.BOTTOM?-1:1)*e.y);var q;if(g)if(l)q=l;else if(q=goog.style.getVisibleRectForElement(c))q.top-=m.y,q.right-=m.x,q.bottom-=m.y,q.left-=m.x;return goog.positioning.positionAtCoordinate(p,c,d,f,q,g,k)};
goog.positioning.getOffsetParentPageOffset=function(a){var b;if(a=a.offsetParent){var c=a.tagName==goog.dom.TagName.HTML||a.tagName==goog.dom.TagName.BODY;if(!c||"static"!=goog.style.getComputedPosition(a))b=goog.style.getPageOffset(a),c||(b=goog.math.Coordinate.difference(b,new goog.math.Coordinate(goog.style.bidi.getScrollLeft(a),a.scrollTop)))}return b||new goog.math.Coordinate};
goog.positioning.getVisiblePart_=function(a){var b=goog.style.getBounds(a);(a=goog.style.getVisibleRectForElement(a))&&b.intersection(goog.math.Rect.createFromBox(a));return b};
goog.positioning.positionAtCoordinate=function(a,b,c,d,e,f,g){a=a.clone();var k=goog.positioning.OverflowStatus.NONE;c=goog.positioning.getEffectiveCorner(b,c);var l=goog.style.getSize(b);g=g?g.clone():l.clone();if(d||c!=goog.positioning.Corner.TOP_LEFT)c&goog.positioning.CornerBit.RIGHT?a.x-=g.width+(d?d.right:0):d&&(a.x+=d.left),c&goog.positioning.CornerBit.BOTTOM?a.y-=g.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f&&(k=e?goog.positioning.adjustForViewport_(a,g,e,f):goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT,
k&goog.positioning.OverflowStatus.FAILED))return k;goog.style.setPosition(b,a);goog.math.Size.equals(l,g)||goog.style.setBorderBoxSize(b,g);return k};
goog.positioning.adjustForViewport_=function(a,b,c,d){var e=goog.positioning.OverflowStatus.NONE,f=goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN,g=goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN;if((d&f)==f&&(a.x<c.left||a.x>=c.right))d&=~goog.positioning.Overflow.ADJUST_X;if((d&g)==g&&(a.y<c.top||a.y>=c.bottom))d&=~goog.positioning.Overflow.ADJUST_Y;a.x<c.left&&d&goog.positioning.Overflow.ADJUST_X&&(a.x=c.left,e|=goog.positioning.OverflowStatus.ADJUSTED_X);a.x<c.left&&(a.x+b.width>c.right&&
d&goog.positioning.Overflow.RESIZE_WIDTH)&&(b.width=Math.max(b.width-(a.x+b.width-c.right),0),e|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED);a.x+b.width>c.right&&d&goog.positioning.Overflow.ADJUST_X&&(a.x=Math.max(c.right-b.width,c.left),e|=goog.positioning.OverflowStatus.ADJUSTED_X);d&goog.positioning.Overflow.FAIL_X&&(e|=(a.x<c.left?goog.positioning.OverflowStatus.FAILED_LEFT:0)|(a.x+b.width>c.right?goog.positioning.OverflowStatus.FAILED_RIGHT:0));a.y<c.top&&d&goog.positioning.Overflow.ADJUST_Y&&
(a.y=c.top,e|=goog.positioning.OverflowStatus.ADJUSTED_Y);a.y<=c.top&&(a.y+b.height<c.bottom&&d&goog.positioning.Overflow.RESIZE_HEIGHT)&&(b.height=Math.max(b.height-(c.top-a.y),0),a.y=c.top,e|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED);a.y>=c.top&&(a.y+b.height>c.bottom&&d&goog.positioning.Overflow.RESIZE_HEIGHT)&&(b.height=Math.max(b.height-(a.y+b.height-c.bottom),0),e|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED);a.y+b.height>c.bottom&&d&goog.positioning.Overflow.ADJUST_Y&&(a.y=Math.max(c.bottom-
b.height,c.top),e|=goog.positioning.OverflowStatus.ADJUSTED_Y);d&goog.positioning.Overflow.FAIL_Y&&(e|=(a.y<c.top?goog.positioning.OverflowStatus.FAILED_TOP:0)|(a.y+b.height>c.bottom?goog.positioning.OverflowStatus.FAILED_BOTTOM:0));return e};goog.positioning.getEffectiveCorner=function(a,b){return(b&goog.positioning.CornerBit.FLIP_RTL&&goog.style.isRightToLeft(a)?b^goog.positioning.CornerBit.RIGHT:b)&~goog.positioning.CornerBit.FLIP_RTL};
goog.positioning.flipCornerHorizontal=function(a){return a^goog.positioning.CornerBit.RIGHT};goog.positioning.flipCornerVertical=function(a){return a^goog.positioning.CornerBit.BOTTOM};goog.positioning.flipCorner=function(a){return a^goog.positioning.CornerBit.BOTTOM^goog.positioning.CornerBit.RIGHT};goog.userAgent.product={};goog.userAgent.product.ASSUME_FIREFOX=!1;goog.userAgent.product.ASSUME_CAMINO=!1;goog.userAgent.product.ASSUME_IPHONE=!1;goog.userAgent.product.ASSUME_IPAD=!1;goog.userAgent.product.ASSUME_ANDROID=!1;goog.userAgent.product.ASSUME_CHROME=!1;goog.userAgent.product.ASSUME_SAFARI=!1;
goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_CAMINO||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI;
goog.userAgent.product.init_=function(){goog.userAgent.product.detectedFirefox_=!1;goog.userAgent.product.detectedCamino_=!1;goog.userAgent.product.detectedIphone_=!1;goog.userAgent.product.detectedIpad_=!1;goog.userAgent.product.detectedAndroid_=!1;goog.userAgent.product.detectedChrome_=!1;goog.userAgent.product.detectedSafari_=!1;var a=goog.userAgent.getUserAgentString();a&&(-1!=a.indexOf("Firefox")?goog.userAgent.product.detectedFirefox_=!0:-1!=a.indexOf("Camino")?goog.userAgent.product.detectedCamino_=
!0:-1!=a.indexOf("iPhone")||-1!=a.indexOf("iPod")?goog.userAgent.product.detectedIphone_=!0:-1!=a.indexOf("iPad")?goog.userAgent.product.detectedIpad_=!0:-1!=a.indexOf("Android")?goog.userAgent.product.detectedAndroid_=!0:-1!=a.indexOf("Chrome")?goog.userAgent.product.detectedChrome_=!0:-1!=a.indexOf("Safari")&&(goog.userAgent.product.detectedSafari_=!0))};goog.userAgent.product.PRODUCT_KNOWN_||goog.userAgent.product.init_();goog.userAgent.product.OPERA=goog.userAgent.OPERA;
goog.userAgent.product.IE=goog.userAgent.IE;goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.userAgent.product.detectedFirefox_;goog.userAgent.product.CAMINO=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CAMINO:goog.userAgent.product.detectedCamino_;goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.detectedIphone_;
goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.userAgent.product.detectedIpad_;goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.userAgent.product.detectedAndroid_;goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.userAgent.product.detectedChrome_;
goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.detectedSafari_;goog.ui.MenuSeparatorRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.MenuSeparatorRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuSeparatorRenderer);goog.ui.MenuSeparatorRenderer.CSS_CLASS="goog-menuseparator";goog.ui.MenuSeparatorRenderer.prototype.createDom=function(a){return a.getDomHelper().createDom("div",this.getCssClass())};
goog.ui.MenuSeparatorRenderer.prototype.decorate=function(a,b){b.id&&a.setId(b.id);if("HR"==b.tagName){var c=b;b=this.createDom(a);goog.dom.insertSiblingBefore(b,c);goog.dom.removeNode(c)}else goog.dom.classes.add(b,this.getCssClass());return b};goog.ui.MenuSeparatorRenderer.prototype.setContent=function(a,b){};goog.ui.MenuSeparatorRenderer.prototype.getCssClass=function(){return goog.ui.MenuSeparatorRenderer.CSS_CLASS};goog.ui.Separator=function(a,b){goog.ui.Control.call(this,null,a||goog.ui.MenuSeparatorRenderer.getInstance(),b);this.setSupportedState(goog.ui.Component.State.DISABLED,!1);this.setSupportedState(goog.ui.Component.State.HOVER,!1);this.setSupportedState(goog.ui.Component.State.ACTIVE,!1);this.setSupportedState(goog.ui.Component.State.FOCUSED,!1);this.setStateInternal(goog.ui.Component.State.DISABLED)};goog.inherits(goog.ui.Separator,goog.ui.Control);
goog.ui.Separator.prototype.enterDocument=function(){goog.ui.Separator.superClass_.enterDocument.call(this);var a=this.getElement();goog.asserts.assert(a,"The DOM element for the separator cannot be null.");goog.a11y.aria.setRole(a,"separator")};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator});goog.ui.MenuRenderer=function(){goog.ui.ContainerRenderer.call(this)};goog.inherits(goog.ui.MenuRenderer,goog.ui.ContainerRenderer);goog.addSingletonGetter(goog.ui.MenuRenderer);goog.ui.MenuRenderer.CSS_CLASS="goog-menu";goog.ui.MenuRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.MENU};goog.ui.MenuRenderer.prototype.canDecorate=function(a){return"UL"==a.tagName||goog.ui.MenuRenderer.superClass_.canDecorate.call(this,a)};
goog.ui.MenuRenderer.prototype.getDecoratorForChild=function(a){return"HR"==a.tagName?new goog.ui.Separator:goog.ui.MenuRenderer.superClass_.getDecoratorForChild.call(this,a)};goog.ui.MenuRenderer.prototype.containsElement=function(a,b){return goog.dom.contains(a.getElement(),b)};goog.ui.MenuRenderer.prototype.getCssClass=function(){return goog.ui.MenuRenderer.CSS_CLASS};
goog.ui.MenuRenderer.prototype.initializeDom=function(a){goog.ui.MenuRenderer.superClass_.initializeDom.call(this,a);a=a.getElement();goog.asserts.assert(a,"The menu DOM element cannot be null.");goog.a11y.aria.setState(a,goog.a11y.aria.State.HASPOPUP,"true")};goog.ui.MenuSeparator=function(a){goog.ui.Separator.call(this,goog.ui.MenuSeparatorRenderer.getInstance(),a)};goog.inherits(goog.ui.MenuSeparator,goog.ui.Separator);goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator});goog.ui.MenuHeaderRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.MenuHeaderRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuHeaderRenderer);goog.ui.MenuHeaderRenderer.CSS_CLASS="goog-menuheader";goog.ui.MenuHeaderRenderer.prototype.getCssClass=function(){return goog.ui.MenuHeaderRenderer.CSS_CLASS};goog.ui.MenuHeader=function(a,b,c){goog.ui.Control.call(this,a,c||goog.ui.MenuHeaderRenderer.getInstance(),b);this.setSupportedState(goog.ui.Component.State.DISABLED,!1);this.setSupportedState(goog.ui.Component.State.HOVER,!1);this.setSupportedState(goog.ui.Component.State.ACTIVE,!1);this.setSupportedState(goog.ui.Component.State.FOCUSED,!1);this.setStateInternal(goog.ui.Component.State.DISABLED)};goog.inherits(goog.ui.MenuHeader,goog.ui.Control);
goog.ui.registry.setDecoratorByClassName(goog.ui.MenuHeaderRenderer.CSS_CLASS,function(){return new goog.ui.MenuHeader(null)});goog.ui.Menu=function(a,b){goog.ui.Container.call(this,goog.ui.Container.Orientation.VERTICAL,b||goog.ui.MenuRenderer.getInstance(),a);this.setFocusable(!1)};goog.inherits(goog.ui.Menu,goog.ui.Container);goog.ui.Menu.EventType={BEFORE_SHOW:goog.ui.Component.EventType.BEFORE_SHOW,SHOW:goog.ui.Component.EventType.SHOW,BEFORE_HIDE:goog.ui.Component.EventType.HIDE,HIDE:goog.ui.Component.EventType.HIDE};goog.ui.Menu.CSS_CLASS=goog.ui.MenuRenderer.CSS_CLASS;goog.ui.Menu.prototype.allowAutoFocus_=!0;
goog.ui.Menu.prototype.allowHighlightDisabled_=!1;goog.ui.Menu.prototype.getCssClass=function(){return this.getRenderer().getCssClass()};goog.ui.Menu.prototype.containsElement=function(a){if(this.getRenderer().containsElement(this,a))return!0;for(var b=0,c=this.getChildCount();b<c;b++){var d=this.getChildAt(b);if("function"==typeof d.containsElement&&d.containsElement(a))return!0}return!1};goog.ui.Menu.prototype.addItem=function(a){this.addChild(a,!0)};
goog.ui.Menu.prototype.addItemAt=function(a,b){this.addChildAt(a,b,!0)};goog.ui.Menu.prototype.removeItem=function(a){(a=this.removeChild(a,!0))&&a.dispose()};goog.ui.Menu.prototype.removeItemAt=function(a){(a=this.removeChildAt(a,!0))&&a.dispose()};goog.ui.Menu.prototype.getItemAt=function(a){return this.getChildAt(a)};goog.ui.Menu.prototype.getItemCount=function(){return this.getChildCount()};goog.ui.Menu.prototype.getItems=function(){var a=[];this.forEachChild(function(b){a.push(b)});return a};
goog.ui.Menu.prototype.setPosition=function(a,b){var c=this.isVisible();c||goog.style.setElementShown(this.getElement(),!0);goog.style.setPageOffset(this.getElement(),a,b);c||goog.style.setElementShown(this.getElement(),!1)};goog.ui.Menu.prototype.getPosition=function(){return this.isVisible()?goog.style.getPageOffset(this.getElement()):null};goog.ui.Menu.prototype.setAllowAutoFocus=function(a){(this.allowAutoFocus_=a)&&this.setFocusable(!0)};goog.ui.Menu.prototype.getAllowAutoFocus=function(){return this.allowAutoFocus_};
goog.ui.Menu.prototype.setAllowHighlightDisabled=function(a){this.allowHighlightDisabled_=a};goog.ui.Menu.prototype.getAllowHighlightDisabled=function(){return this.allowHighlightDisabled_};goog.ui.Menu.prototype.setVisible=function(a,b,c){(b=goog.ui.Menu.superClass_.setVisible.call(this,a,b))&&(a&&this.isInDocument()&&this.allowAutoFocus_)&&this.getKeyEventTarget().focus();a&&c&&goog.isNumber(c.clientX)?this.openingCoords=new goog.math.Coordinate(c.clientX,c.clientY):this.openingCoords=null;return b};
goog.ui.Menu.prototype.handleEnterItem=function(a){this.allowAutoFocus_&&this.getKeyEventTarget().focus();return goog.ui.Menu.superClass_.handleEnterItem.call(this,a)};goog.ui.Menu.prototype.highlightNextPrefix=function(a){var b=RegExp("^"+goog.string.regExpEscape(a),"i");return this.highlightHelper(function(a,d){var e=0>a?0:a,f=!1;do{++a;a==d&&(a=0,f=!0);var g=this.getChildAt(a).getCaption();if(g&&g.match(b))return a}while(!f||a!=e);return this.getHighlightedIndex()},this.getHighlightedIndex())};
goog.ui.Menu.prototype.canHighlightItem=function(a){return(this.allowHighlightDisabled_||a.isEnabled())&&a.isVisible()&&a.isSupportedState(goog.ui.Component.State.HOVER)};goog.ui.Menu.prototype.decorateInternal=function(a){this.decorateContent(a);goog.ui.Menu.superClass_.decorateInternal.call(this,a)};
goog.ui.Menu.prototype.handleKeyEventInternal=function(a){var b=goog.ui.Menu.superClass_.handleKeyEventInternal.call(this,a);b||this.forEachChild(function(c){!b&&(c.getMnemonic&&c.getMnemonic()==a.keyCode)&&(this.isEnabled()&&this.setHighlighted(c),b=c.handleKeyEvent(a))},this);return b};goog.ui.Menu.prototype.setHighlightedIndex=function(a){goog.ui.Menu.superClass_.setHighlightedIndex.call(this,a);(a=this.getChildAt(a))&&goog.style.scrollIntoContainerView(a.getElement(),this.getElement())};
goog.ui.Menu.prototype.decorateContent=function(a){var b=this.getRenderer();a=this.getDomHelper().getElementsByTagNameAndClass("div",b.getCssClass()+"-content",a);for(var c=a.length,d=0;d<c;d++)b.decorateChildren(this,a[d])};goog.positioning.AbstractPosition=function(){};goog.positioning.AbstractPosition.prototype.reposition=function(a,b,c,d){};goog.positioning.AnchoredPosition=function(a,b,c){this.element=a;this.corner=b;this.overflow_=c};goog.inherits(goog.positioning.AnchoredPosition,goog.positioning.AbstractPosition);goog.positioning.AnchoredPosition.prototype.reposition=function(a,b,c,d){goog.positioning.positionAtAnchor(this.element,this.corner,a,b,void 0,c,this.overflow_)};goog.positioning.AnchoredViewportPosition=function(a,b,c,d){goog.positioning.AnchoredPosition.call(this,a,b);this.lastResortOverflow_=c?goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y:goog.positioning.Overflow.IGNORE;this.overflowConstraint_=d||void 0};goog.inherits(goog.positioning.AnchoredViewportPosition,goog.positioning.AnchoredPosition);goog.positioning.AnchoredViewportPosition.prototype.getOverflowConstraint=function(){return this.overflowConstraint_};
goog.positioning.AnchoredViewportPosition.prototype.setOverflowConstraint=function(a){this.overflowConstraint_=a};goog.positioning.AnchoredViewportPosition.prototype.getLastResortOverflow=function(){return this.lastResortOverflow_};goog.positioning.AnchoredViewportPosition.prototype.setLastResortOverflow=function(a){this.lastResortOverflow_=a};
goog.positioning.AnchoredViewportPosition.prototype.reposition=function(a,b,c,d){var e=goog.positioning.positionAtAnchor(this.element,this.corner,a,b,null,c,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,d,this.overflowConstraint_);if(e&goog.positioning.OverflowStatus.FAILED){var f=this.adjustCorner(e,this.corner);b=this.adjustCorner(e,b);e=goog.positioning.positionAtAnchor(this.element,f,a,b,null,c,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,d,this.overflowConstraint_);
e&goog.positioning.OverflowStatus.FAILED&&(f=this.adjustCorner(e,f),b=this.adjustCorner(e,b),goog.positioning.positionAtAnchor(this.element,f,a,b,null,c,this.getLastResortOverflow(),d,this.overflowConstraint_))}};goog.positioning.AnchoredViewportPosition.prototype.adjustCorner=function(a,b){a&goog.positioning.OverflowStatus.FAILED_HORIZONTAL&&(b=goog.positioning.flipCornerHorizontal(b));a&goog.positioning.OverflowStatus.FAILED_VERTICAL&&(b=goog.positioning.flipCornerVertical(b));return b};goog.positioning.MenuAnchoredPosition=function(a,b,c,d){goog.positioning.AnchoredViewportPosition.call(this,a,b,c||d);if(c||d)this.setLastResortOverflow(goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN|(d?goog.positioning.Overflow.RESIZE_HEIGHT:goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN))};goog.inherits(goog.positioning.MenuAnchoredPosition,goog.positioning.AnchoredViewportPosition);goog.ui.NativeButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)};goog.inherits(goog.ui.NativeButtonRenderer,goog.ui.ButtonRenderer);goog.addSingletonGetter(goog.ui.NativeButtonRenderer);goog.ui.NativeButtonRenderer.prototype.getAriaRole=function(){};
goog.ui.NativeButtonRenderer.prototype.createDom=function(a){this.setUpNativeButton_(a);return a.getDomHelper().createDom("button",{"class":this.getClassNames(a).join(" "),disabled:!a.isEnabled(),title:a.getTooltip()||"",value:a.getValue()||""},a.getCaption()||"")};goog.ui.NativeButtonRenderer.prototype.canDecorate=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};
goog.ui.NativeButtonRenderer.prototype.decorate=function(a,b){this.setUpNativeButton_(a);b.disabled&&goog.dom.classes.add(b,this.getClassForState(goog.ui.Component.State.DISABLED));return goog.ui.NativeButtonRenderer.superClass_.decorate.call(this,a,b)};goog.ui.NativeButtonRenderer.prototype.initializeDom=function(a){a.getHandler().listen(a.getElement(),goog.events.EventType.CLICK,a.performActionInternal)};goog.ui.NativeButtonRenderer.prototype.setAllowTextSelection=goog.nullFunction;
goog.ui.NativeButtonRenderer.prototype.setRightToLeft=goog.nullFunction;goog.ui.NativeButtonRenderer.prototype.isFocusable=function(a){return a.isEnabled()};goog.ui.NativeButtonRenderer.prototype.setFocusable=goog.nullFunction;goog.ui.NativeButtonRenderer.prototype.setState=function(a,b,c){goog.ui.NativeButtonRenderer.superClass_.setState.call(this,a,b,c);if((a=a.getElement())&&b==goog.ui.Component.State.DISABLED)a.disabled=c};goog.ui.NativeButtonRenderer.prototype.getValue=function(a){return a.value};
goog.ui.NativeButtonRenderer.prototype.setValue=function(a,b){a&&(a.value=b)};goog.ui.NativeButtonRenderer.prototype.updateAriaState=goog.nullFunction;goog.ui.NativeButtonRenderer.prototype.setUpNativeButton_=function(a){a.setHandleMouseEvents(!1);a.setAutoStates(goog.ui.Component.State.ALL,!1);a.setSupportedState(goog.ui.Component.State.FOCUSED,!1)};goog.ui.Button=function(a,b,c){goog.ui.Control.call(this,a,b||goog.ui.NativeButtonRenderer.getInstance(),c)};goog.inherits(goog.ui.Button,goog.ui.Control);goog.ui.Button.Side=goog.ui.ButtonSide;goog.ui.Button.prototype.getValue=function(){return this.value_};goog.ui.Button.prototype.setValue=function(a){this.value_=a;this.getRenderer().setValue(this.getElement(),a)};goog.ui.Button.prototype.setValueInternal=function(a){this.value_=a};goog.ui.Button.prototype.getTooltip=function(){return this.tooltip_};
goog.ui.Button.prototype.setTooltip=function(a){this.tooltip_=a;this.getRenderer().setTooltip(this.getElement(),a)};goog.ui.Button.prototype.setTooltipInternal=function(a){this.tooltip_=a};goog.ui.Button.prototype.setCollapsed=function(a){this.getRenderer().setCollapsed(this,a)};goog.ui.Button.prototype.disposeInternal=function(){goog.ui.Button.superClass_.disposeInternal.call(this);delete this.value_;delete this.tooltip_};
goog.ui.Button.prototype.enterDocument=function(){goog.ui.Button.superClass_.enterDocument.call(this);if(this.isSupportedState(goog.ui.Component.State.FOCUSED)){var a=this.getKeyEventTarget();a&&this.getHandler().listen(a,goog.events.EventType.KEYUP,this.handleKeyEventInternal)}};
goog.ui.Button.prototype.handleKeyEventInternal=function(a){return a.keyCode==goog.events.KeyCodes.ENTER&&a.type==goog.events.KeyHandler.EventType.KEY||a.keyCode==goog.events.KeyCodes.SPACE&&a.type==goog.events.EventType.KEYUP?this.performActionInternal(a):a.keyCode==goog.events.KeyCodes.SPACE};goog.ui.registry.setDecoratorByClassName(goog.ui.ButtonRenderer.CSS_CLASS,function(){return new goog.ui.Button(null)});goog.ui.MenuButtonRenderer=function(){goog.ui.CustomButtonRenderer.call(this)};goog.inherits(goog.ui.MenuButtonRenderer,goog.ui.CustomButtonRenderer);goog.addSingletonGetter(goog.ui.MenuButtonRenderer);goog.ui.MenuButtonRenderer.CSS_CLASS="goog-menu-button";goog.ui.MenuButtonRenderer.WRAPPER_PROP_="__goog_wrapper_div";
goog.userAgent.GECKO&&(goog.ui.MenuButtonRenderer.prototype.setContent=function(a,b){var c=goog.ui.MenuButtonRenderer.superClass_.getContentElement.call(this,a&&a.firstChild);c&&goog.dom.replaceNode(this.createCaption(b,goog.dom.getDomHelper(a)),c)});goog.ui.MenuButtonRenderer.prototype.getContentElement=function(a){a=goog.ui.MenuButtonRenderer.superClass_.getContentElement.call(this,a&&a.firstChild);goog.userAgent.GECKO&&(a&&a[goog.ui.MenuButtonRenderer.WRAPPER_PROP_])&&(a=a.firstChild);return a};
goog.ui.MenuButtonRenderer.prototype.updateAriaState=function(a,b,c){goog.asserts.assert(a,"The menu button DOM element cannot be null.");goog.asserts.assert(goog.string.isEmpty(goog.a11y.aria.getState(a,goog.a11y.aria.State.EXPANDED)),"Menu buttons do not support the ARIA expanded attribute. Please use ARIA disabled instead."+goog.a11y.aria.getState(a,goog.a11y.aria.State.EXPANDED).length);b!=goog.ui.Component.State.OPENED&&goog.ui.MenuButtonRenderer.superClass_.updateAriaState.call(this,a,b,c)};
goog.ui.MenuButtonRenderer.prototype.decorate=function(a,b){var c=goog.dom.getElementsByTagNameAndClass("*",goog.ui.MenuRenderer.CSS_CLASS,b)[0];if(c){goog.style.setElementShown(c,!1);goog.dom.appendChild(goog.dom.getOwnerDocument(c).body,c);var d=new goog.ui.Menu;d.decorate(c);a.setMenu(d)}return goog.ui.MenuButtonRenderer.superClass_.decorate.call(this,a,b)};
goog.ui.MenuButtonRenderer.prototype.createButton=function(a,b){return goog.ui.MenuButtonRenderer.superClass_.createButton.call(this,[this.createCaption(a,b),this.createDropdown(b)],b)};goog.ui.MenuButtonRenderer.prototype.createCaption=function(a,b){return goog.ui.MenuButtonRenderer.wrapCaption(a,this.getCssClass(),b)};goog.ui.MenuButtonRenderer.wrapCaption=function(a,b,c){return c.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(b+"-caption"),a)};
goog.ui.MenuButtonRenderer.prototype.createDropdown=function(a){return a.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-dropdown"),"\u00a0")};goog.ui.MenuButtonRenderer.prototype.getCssClass=function(){return goog.ui.MenuButtonRenderer.CSS_CLASS};goog.ui.MenuButton=function(a,b,c,d){goog.ui.Button.call(this,a,c||goog.ui.MenuButtonRenderer.getInstance(),d);this.setSupportedState(goog.ui.Component.State.OPENED,!0);this.menuPosition_=new goog.positioning.MenuAnchoredPosition(null,goog.positioning.Corner.BOTTOM_START);b&&this.setMenu(b);this.menuMargin_=null;this.timer_=new goog.Timer(500);(goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD)&&!goog.userAgent.isVersionOrHigher("533.17.9")&&this.setFocusablePopupMenu(!0)};
goog.inherits(goog.ui.MenuButton,goog.ui.Button);goog.ui.MenuButton.prototype.isFocusablePopupMenu_=!1;goog.ui.MenuButton.prototype.renderMenuAsSibling_=!1;goog.ui.MenuButton.prototype.enterDocument=function(){goog.ui.MenuButton.superClass_.enterDocument.call(this);this.menu_&&this.attachMenuEventListeners_(this.menu_,!0);goog.a11y.aria.setState(this.getElementStrict(),goog.a11y.aria.State.HASPOPUP,!!this.menu_)};
goog.ui.MenuButton.prototype.exitDocument=function(){goog.ui.MenuButton.superClass_.exitDocument.call(this);if(this.menu_){this.setOpen(!1);this.menu_.exitDocument();this.attachMenuEventListeners_(this.menu_,!1);var a=this.menu_.getElement();a&&goog.dom.removeNode(a)}};goog.ui.MenuButton.prototype.disposeInternal=function(){goog.ui.MenuButton.superClass_.disposeInternal.call(this);this.menu_&&(this.menu_.dispose(),delete this.menu_);delete this.positionElement_;this.timer_.dispose()};
goog.ui.MenuButton.prototype.handleMouseDown=function(a){goog.ui.MenuButton.superClass_.handleMouseDown.call(this,a);this.isActive()&&(this.setOpen(!this.isOpen(),a),this.menu_&&this.menu_.setMouseButtonPressed(this.isOpen()))};goog.ui.MenuButton.prototype.handleMouseUp=function(a){goog.ui.MenuButton.superClass_.handleMouseUp.call(this,a);this.menu_&&!this.isActive()&&this.menu_.setMouseButtonPressed(!1)};goog.ui.MenuButton.prototype.performActionInternal=function(a){this.setActive(!1);return!0};
goog.ui.MenuButton.prototype.handleDocumentMouseDown=function(a){this.menu_&&(this.menu_.isVisible()&&!this.containsElement(a.target))&&this.setOpen(!1)};goog.ui.MenuButton.prototype.containsElement=function(a){return a&&goog.dom.contains(this.getElement(),a)||this.menu_&&this.menu_.containsElement(a)||!1};
goog.ui.MenuButton.prototype.handleKeyEventInternal=function(a){if(a.keyCode==goog.events.KeyCodes.SPACE){if(a.preventDefault(),a.type!=goog.events.EventType.KEYUP)return!0}else if(a.type!=goog.events.KeyHandler.EventType.KEY)return!1;if(this.menu_&&this.menu_.isVisible()){var b=this.menu_.handleKeyEvent(a);return a.keyCode==goog.events.KeyCodes.ESC?(this.setOpen(!1),!0):b}return a.keyCode==goog.events.KeyCodes.DOWN||a.keyCode==goog.events.KeyCodes.UP||a.keyCode==goog.events.KeyCodes.SPACE||a.keyCode==
goog.events.KeyCodes.ENTER?(this.setOpen(!0),!0):!1};goog.ui.MenuButton.prototype.handleMenuAction=function(a){this.setOpen(!1)};goog.ui.MenuButton.prototype.handleMenuBlur=function(a){this.isActive()||this.setOpen(!1)};goog.ui.MenuButton.prototype.handleBlur=function(a){this.isFocusablePopupMenu()||this.setOpen(!1);goog.ui.MenuButton.superClass_.handleBlur.call(this,a)};
goog.ui.MenuButton.prototype.getMenu=function(){this.menu_||this.setMenu(new goog.ui.Menu(this.getDomHelper()));return this.menu_||null};
goog.ui.MenuButton.prototype.setMenu=function(a){var b=this.menu_;a!=b&&(b&&(this.setOpen(!1),this.isInDocument()&&this.attachMenuEventListeners_(b,!1),delete this.menu_),this.isInDocument()&&goog.a11y.aria.setState(this.getElementStrict(),goog.a11y.aria.State.HASPOPUP,!!a),a&&(this.menu_=a,a.setParent(this),a.setVisible(!1),a.setAllowAutoFocus(this.isFocusablePopupMenu()),this.isInDocument()&&this.attachMenuEventListeners_(a,!0)));return b};
goog.ui.MenuButton.prototype.setMenuPosition=function(a){a&&(this.menuPosition_=a,this.positionElement_=a.element)};goog.ui.MenuButton.prototype.setPositionElement=function(a){this.positionElement_=a;this.positionMenu()};goog.ui.MenuButton.prototype.setMenuMargin=function(a){this.menuMargin_=a};goog.ui.MenuButton.prototype.addItem=function(a){this.getMenu().addChild(a,!0)};goog.ui.MenuButton.prototype.addItemAt=function(a,b){this.getMenu().addChildAt(a,b,!0)};
goog.ui.MenuButton.prototype.removeItem=function(a){(a=this.getMenu().removeChild(a,!0))&&a.dispose()};goog.ui.MenuButton.prototype.removeItemAt=function(a){(a=this.getMenu().removeChildAt(a,!0))&&a.dispose()};goog.ui.MenuButton.prototype.getItemAt=function(a){return this.menu_?this.menu_.getChildAt(a):null};goog.ui.MenuButton.prototype.getItemCount=function(){return this.menu_?this.menu_.getChildCount():0};
goog.ui.MenuButton.prototype.setVisible=function(a,b){var c=goog.ui.MenuButton.superClass_.setVisible.call(this,a,b);c&&!this.isVisible()&&this.setOpen(!1);return c};goog.ui.MenuButton.prototype.setEnabled=function(a){goog.ui.MenuButton.superClass_.setEnabled.call(this,a);this.isEnabled()||this.setOpen(!1)};goog.ui.MenuButton.prototype.isAlignMenuToStart=function(){var a=this.menuPosition_.corner;return a==goog.positioning.Corner.BOTTOM_START||a==goog.positioning.Corner.TOP_START};
goog.ui.MenuButton.prototype.setAlignMenuToStart=function(a){this.menuPosition_.corner=a?goog.positioning.Corner.BOTTOM_START:goog.positioning.Corner.BOTTOM_END};goog.ui.MenuButton.prototype.setScrollOnOverflow=function(a){this.menuPosition_.setLastResortOverflow&&this.menuPosition_.setLastResortOverflow(goog.positioning.Overflow.ADJUST_X|(a?goog.positioning.Overflow.RESIZE_HEIGHT:goog.positioning.Overflow.ADJUST_Y))};
goog.ui.MenuButton.prototype.isScrollOnOverflow=function(){return this.menuPosition_.getLastResortOverflow&&!!(this.menuPosition_.getLastResortOverflow()&goog.positioning.Overflow.RESIZE_HEIGHT)};goog.ui.MenuButton.prototype.isFocusablePopupMenu=function(){return this.isFocusablePopupMenu_};goog.ui.MenuButton.prototype.setFocusablePopupMenu=function(a){this.isFocusablePopupMenu_=a};goog.ui.MenuButton.prototype.setRenderMenuAsSibling=function(a){this.renderMenuAsSibling_=a};
goog.ui.MenuButton.prototype.showMenu=function(){this.setOpen(!0)};goog.ui.MenuButton.prototype.hideMenu=function(){this.setOpen(!1)};
goog.ui.MenuButton.prototype.setOpen=function(a,b){goog.ui.MenuButton.superClass_.setOpen.call(this,a);if(this.menu_&&this.hasState(goog.ui.Component.State.OPENED)==a){if(a)this.menu_.isInDocument()||(this.renderMenuAsSibling_?this.menu_.render(this.getElement().parentNode):this.menu_.render()),this.viewportBox_=goog.style.getVisibleRectForElement(this.getElement()),this.buttonRect_=goog.style.getBounds(this.getElement()),this.positionMenu(),this.menu_.setHighlightedIndex(-1);else{this.setActive(!1);
this.menu_.setMouseButtonPressed(!1);var c=this.getElement();c&&goog.a11y.aria.setState(c,goog.a11y.aria.State.ACTIVEDESCENDANT,"");goog.isDefAndNotNull(this.originalSize_)&&(this.originalSize_=void 0,(c=this.menu_.getElement())&&goog.style.setSize(c,"",""))}this.menu_.setVisible(a,!1,b);this.isDisposed()||this.attachPopupListeners_(a)}};goog.ui.MenuButton.prototype.invalidateMenuSize=function(){this.originalSize_=void 0};
goog.ui.MenuButton.prototype.positionMenu=function(){if(this.menu_.isInDocument()){var a=this.positionElement_||this.getElement(),b=this.menuPosition_;this.menuPosition_.element=a;a=this.menu_.getElement();this.menu_.isVisible()||(a.style.visibility="hidden",goog.style.setElementShown(a,!0));!this.originalSize_&&this.isScrollOnOverflow()&&(this.originalSize_=goog.style.getSize(a));var c=goog.positioning.flipCornerVertical(b.corner);b.reposition(a,c,this.menuMargin_,this.originalSize_);this.menu_.isVisible()||
(goog.style.setElementShown(a,!1),a.style.visibility="visible")}};goog.ui.MenuButton.prototype.onTick_=function(a){a=goog.style.getBounds(this.getElement());var b=goog.style.getVisibleRectForElement(this.getElement());if(!goog.math.Rect.equals(this.buttonRect_,a)||!goog.math.Box.equals(this.viewportBox_,b))this.buttonRect_=a,this.viewportBox_=b,this.positionMenu()};
goog.ui.MenuButton.prototype.attachMenuEventListeners_=function(a,b){var c=this.getHandler(),d=b?c.listen:c.unlisten;d.call(c,a,goog.ui.Component.EventType.ACTION,this.handleMenuAction);d.call(c,a,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem);d.call(c,a,goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem)};
goog.ui.MenuButton.prototype.handleHighlightItem=function(a){var b=this.getElement();goog.asserts.assert(b,"The menu button DOM element cannot be null.");null!=a.target.getElement()&&goog.a11y.aria.setState(b,goog.a11y.aria.State.ACTIVEDESCENDANT,a.target.getElement().id)};
goog.ui.MenuButton.prototype.handleUnHighlightItem=function(a){this.menu_.getHighlighted()||(a=this.getElement(),goog.asserts.assert(a,"The menu button DOM element cannot be null."),goog.a11y.aria.setState(a,goog.a11y.aria.State.ACTIVEDESCENDANT,""))};
goog.ui.MenuButton.prototype.attachPopupListeners_=function(a){var b=this.getHandler(),c=a?b.listen:b.unlisten;c.call(b,this.getDomHelper().getDocument(),goog.events.EventType.MOUSEDOWN,this.handleDocumentMouseDown,!0);this.isFocusablePopupMenu()&&c.call(b,this.menu_,goog.ui.Component.EventType.BLUR,this.handleMenuBlur);c.call(b,this.timer_,goog.Timer.TICK,this.onTick_);a?this.timer_.start():this.timer_.stop()};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuButtonRenderer.CSS_CLASS,function(){return new goog.ui.MenuButton(null)});goog.ui.FlatButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)};goog.inherits(goog.ui.FlatButtonRenderer,goog.ui.ButtonRenderer);goog.addSingletonGetter(goog.ui.FlatButtonRenderer);goog.ui.FlatButtonRenderer.CSS_CLASS="goog-flat-button";
goog.ui.FlatButtonRenderer.prototype.createDom=function(a){var b=this.getClassNames(a),b={"class":goog.ui.INLINE_BLOCK_CLASSNAME+" "+b.join(" ")},b=a.getDomHelper().createDom("div",b,a.getContent());this.setTooltip(b,a.getTooltip());this.setAriaStates(a,b);return b};goog.ui.FlatButtonRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.BUTTON};goog.ui.FlatButtonRenderer.prototype.canDecorate=function(a){return"DIV"==a.tagName};
goog.ui.FlatButtonRenderer.prototype.decorate=function(a,b){goog.dom.classes.add(b,goog.ui.INLINE_BLOCK_CLASSNAME);return goog.ui.FlatButtonRenderer.superClass_.decorate.call(this,a,b)};goog.ui.FlatButtonRenderer.prototype.getValue=function(a){return""};goog.ui.FlatButtonRenderer.prototype.getCssClass=function(){return goog.ui.FlatButtonRenderer.CSS_CLASS};goog.ui.registry.setDecoratorByClassName(goog.ui.FlatButtonRenderer.CSS_CLASS,function(){return new goog.ui.Button(null,goog.ui.FlatButtonRenderer.getInstance())});goog.ui.FlatMenuButtonRenderer=function(){goog.ui.FlatButtonRenderer.call(this)};goog.inherits(goog.ui.FlatMenuButtonRenderer,goog.ui.FlatButtonRenderer);goog.addSingletonGetter(goog.ui.FlatMenuButtonRenderer);goog.ui.FlatMenuButtonRenderer.CSS_CLASS="goog-flat-menu-button";
goog.ui.FlatMenuButtonRenderer.prototype.createDom=function(a){var b=this.getClassNames(a),b={"class":goog.ui.INLINE_BLOCK_CLASSNAME+" "+b.join(" ")},b=a.getDomHelper().createDom("div",b,[this.createCaption(a.getContent(),a.getDomHelper()),this.createDropdown(a.getDomHelper())]);this.setTooltip(b,a.getTooltip());return b};goog.ui.FlatMenuButtonRenderer.prototype.getContentElement=function(a){return a&&a.firstChild};
goog.ui.FlatMenuButtonRenderer.prototype.updateAriaState=function(a,b,c){goog.asserts.assertObject(a,"The flat button menu DOM element cannot be null.");goog.asserts.assert(goog.string.isEmpty(goog.a11y.aria.getState(a,goog.a11y.aria.State.EXPANDED)),"Menu buttons do not support the ARIA expanded attribute. Please use ARIA disabled instead.");b!=goog.ui.Component.State.OPENED&&goog.ui.FlatMenuButtonRenderer.superClass_.updateAriaState.call(this,a,b,c)};
goog.ui.FlatMenuButtonRenderer.prototype.decorate=function(a,b){var c=goog.dom.getElementsByTagNameAndClass("*",goog.ui.MenuRenderer.CSS_CLASS,b)[0];if(c){goog.style.setElementShown(c,!1);a.getDomHelper().getDocument().body.appendChild(c);var d=new goog.ui.Menu;d.decorate(c);a.setMenu(d)}goog.dom.getElementsByTagNameAndClass("*",this.getCssClass()+"-caption",b)[0]||b.appendChild(this.createCaption(b.childNodes,a.getDomHelper()));goog.dom.getElementsByTagNameAndClass("*",this.getCssClass()+"-dropdown",
b)[0]||b.appendChild(this.createDropdown(a.getDomHelper()));return goog.ui.FlatMenuButtonRenderer.superClass_.decorate.call(this,a,b)};goog.ui.FlatMenuButtonRenderer.prototype.createCaption=function(a,b){return b.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-caption"),a)};goog.ui.FlatMenuButtonRenderer.prototype.createDropdown=function(a){return a.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-dropdown"),"\u00a0")};
goog.ui.FlatMenuButtonRenderer.prototype.getCssClass=function(){return goog.ui.FlatMenuButtonRenderer.CSS_CLASS};goog.ui.registry.setDecoratorByClassName(goog.ui.FlatMenuButtonRenderer.CSS_CLASS,function(){return new goog.ui.MenuButton(null,null,goog.ui.FlatMenuButtonRenderer.getInstance())});goog.ui.Select=function(a,b,c,d){goog.ui.MenuButton.call(this,a,b,c,d);this.setDefaultCaption(a)};goog.inherits(goog.ui.Select,goog.ui.MenuButton);goog.ui.Select.prototype.selectionModel_=null;goog.ui.Select.prototype.defaultCaption_=null;goog.ui.Select.prototype.enterDocument=function(){goog.ui.Select.superClass_.enterDocument.call(this);this.updateCaption();this.listenToSelectionModelEvents_()};
goog.ui.Select.prototype.decorateInternal=function(a){goog.ui.Select.superClass_.decorateInternal.call(this,a);(a=this.getCaption())?this.setDefaultCaption(a):this.setSelectedIndex(0)};goog.ui.Select.prototype.disposeInternal=function(){goog.ui.Select.superClass_.disposeInternal.call(this);this.selectionModel_&&(this.selectionModel_.dispose(),this.selectionModel_=null);this.defaultCaption_=null};
goog.ui.Select.prototype.handleMenuAction=function(a){this.setSelectedItem(a.target);goog.ui.Select.superClass_.handleMenuAction.call(this,a);a.stopPropagation();this.dispatchEvent(goog.ui.Component.EventType.ACTION)};goog.ui.Select.prototype.handleSelectionChange=function(a){a=this.getSelectedItem();goog.ui.Select.superClass_.setValue.call(this,a&&a.getValue());this.updateCaption()};
goog.ui.Select.prototype.setMenu=function(a){var b=goog.ui.Select.superClass_.setMenu.call(this,a);a!=b&&(this.selectionModel_&&this.selectionModel_.clear(),a&&(this.selectionModel_?a.forEachChild(function(a,b){this.setCorrectAriaRole_(a);this.selectionModel_.addItem(a)},this):this.createSelectionModel_(a)));return b};goog.ui.Select.prototype.getDefaultCaption=function(){return this.defaultCaption_};goog.ui.Select.prototype.setDefaultCaption=function(a){this.defaultCaption_=a;this.updateCaption()};
goog.ui.Select.prototype.addItem=function(a){this.setCorrectAriaRole_(a);goog.ui.Select.superClass_.addItem.call(this,a);this.selectionModel_?this.selectionModel_.addItem(a):this.createSelectionModel_(this.getMenu())};goog.ui.Select.prototype.addItemAt=function(a,b){this.setCorrectAriaRole_(a);goog.ui.Select.superClass_.addItemAt.call(this,a,b);this.selectionModel_?this.selectionModel_.addItemAt(a,b):this.createSelectionModel_(this.getMenu())};
goog.ui.Select.prototype.removeItem=function(a){goog.ui.Select.superClass_.removeItem.call(this,a);this.selectionModel_&&this.selectionModel_.removeItem(a)};goog.ui.Select.prototype.removeItemAt=function(a){goog.ui.Select.superClass_.removeItemAt.call(this,a);this.selectionModel_&&this.selectionModel_.removeItemAt(a)};goog.ui.Select.prototype.setSelectedItem=function(a){if(this.selectionModel_){var b=this.getSelectedItem();this.selectionModel_.setSelectedItem(a);a!=b&&this.dispatchEvent(goog.ui.Component.EventType.CHANGE)}};
goog.ui.Select.prototype.setSelectedIndex=function(a){this.selectionModel_&&this.setSelectedItem(this.selectionModel_.getItemAt(a))};goog.ui.Select.prototype.setValue=function(a){if(goog.isDefAndNotNull(a)&&this.selectionModel_)for(var b=0,c;c=this.selectionModel_.getItemAt(b);b++)if(c&&"function"==typeof c.getValue&&c.getValue()==a){this.setSelectedItem(c);return}this.setSelectedItem(null)};
goog.ui.Select.prototype.getSelectedItem=function(){return this.selectionModel_?this.selectionModel_.getSelectedItem():null};goog.ui.Select.prototype.getSelectedIndex=function(){return this.selectionModel_?this.selectionModel_.getSelectedIndex():-1};goog.ui.Select.prototype.getSelectionModel=function(){return this.selectionModel_};
goog.ui.Select.prototype.createSelectionModel_=function(a){this.selectionModel_=new goog.ui.SelectionModel;a&&a.forEachChild(function(a,c){this.setCorrectAriaRole_(a);this.selectionModel_.addItem(a)},this);this.listenToSelectionModelEvents_()};goog.ui.Select.prototype.listenToSelectionModelEvents_=function(){this.selectionModel_&&this.getHandler().listen(this.selectionModel_,goog.events.EventType.SELECT,this.handleSelectionChange)};
goog.ui.Select.prototype.updateCaption=function(){var a=this.getSelectedItem();this.setContent(a?a.getCaption():this.defaultCaption_)};goog.ui.Select.prototype.setCorrectAriaRole_=function(a){a.setPreferredAriaRole(a instanceof goog.ui.MenuItem?goog.a11y.aria.Role.OPTION:goog.a11y.aria.Role.SEPARATOR)};goog.ui.Select.prototype.setOpen=function(a,b){goog.ui.Select.superClass_.setOpen.call(this,a,b);this.isOpen()&&this.getMenu().setHighlightedIndex(this.getSelectedIndex())};
goog.ui.registry.setDecoratorByClassName("goog-select",function(){return new goog.ui.Select(null)});Ray.UI={};Ray.UI.FunDef={};Ray.UI.FunDef.CHANGE_EVENTS=[goog.events.EventType.PROPERTYCHANGE,goog.events.EventType.KEYUP,goog.events.EventType.INPUT,goog.events.EventType.PASTE];Ray.UI.Arg=function(a,b){this.name_=a||null;this.type_=b||null};Ray.UI.Arg.prototype.getName=function(){return this.name_};Ray.UI.Arg.prototype.getType=function(){return this.type_};Ray.UI.Arg.prototype.setName=function(a){this.name_=a};Ray.UI.Arg.prototype.setType=function(a){this.type_=a};
Ray.UI.Arg.prototype.clone=function(){return new Ray.UI.Arg(this.name_,this.type_)};Ray.UI.ArgList=function(a){this.args_=a?goog.array.map(a,function(a){return a.clone()}):[]};Ray.UI.ArgList.EventType={REMOVE_ARG_EVENT:"REMOVE_ARG"};Ray.UI.ArgList.prototype.getArgs=function(){return goog.array.clone(this.args_)};Ray.UI.ArgList.prototype.removeArgAt=function(a){if(this.args_.length>a&&0<=a)return this.args_.splice(a,1)[0];throw"Index out of bounds!";};Ray.UI.ArgList.prototype.addArg=function(a){this.args_.push(a)};
Ray.UI.ArgUI=function(a){goog.ui.Component.call(this);this.arg_=a};goog.inherits(Ray.UI.ArgUI,goog.ui.Component);Ray.UI.ArgUI.prototype.getArg=function(){return this.arg_};
Ray.UI.ArgUI.prototype.createDom=function(){Ray.UI.ArgUI.superClass_.createDom.call(this);var a=this.getContentElement();goog.dom.classes.add(a,"arg-control");var b=this.getParent().indexOfChild(this);this.argName_=b=new goog.ui.LabelInput("arg"+String(b));this.addChild(b,!0);this.arg_.getName()&&this.arg_.getName().length&&b.setValue(this.arg_.getName());goog.dom.append(a," of type ");this.argType_=a=Ray.UI.FunDef.makeTypeSelector_();this.arg_.getType()&&Ray.UI.FunDef.setSelectedType(a,this.arg_.getType());
a.setDefaultCaption("pick a type...");this.addChild(a,!0);goog.style.setInlineBlock(a.getContentElement());a=goog.dom.createDom("i",{"class":"icon-remove"});this.argRemoveButton_=a=Ray.UI.FunDef.makeButton_(a);this.addChild(a,!0);goog.style.setInlineBlock(a.getContentElement())};
Ray.UI.ArgUI.prototype.enterDocument=function(){Ray.UI.ArgUI.superClass_.enterDocument.call(this);this.getHandler().listen(this.argRemoveButton_,goog.ui.Component.EventType.ACTION,function(a){this.dispatchEvent(Ray.UI.ArgList.EventType.REMOVE_ARG_EVENT)},!0,this);this.getHandler().listen(this.argName_.getContentElement(),Ray.UI.FunDef.CHANGE_EVENTS,function(a){this.arg_.setName(this.argName_.getValue());this.dispatchEvent(goog.ui.Component.EventType.CHANGE)},!1,this);this.getHandler().listen(this.argType_,
goog.ui.Component.EventType.CHANGE,function(a){this.arg_.setType(this.argType_.getValue());this.dispatchEvent(goog.ui.Component.EventType.CHANGE)},!1,this)};Ray.UI.ArgUI.prototype.getName=function(){return this.arg_.getName()};Ray.UI.ArgUI.prototype.getType=function(){return this.arg_.getType()};Ray.UI.ArgUI.prototype.getArg=function(){return this.arg_};Ray.UI.ArgUI.prototype.setArgTypeIndex=function(a){this.argType_.setSelectedIndex(a);this.arg_.setType(this.argType_.getValue())};
Ray.UI.ArgUI.prototype.setArgName=function(a){this.argName_.setValue(a);this.arg_.setName(a)};Ray.UI.ArgUI.prototype.updateArgNameLabelIndex=function(){var a=this.getParent().indexOfChild(this);this.argName_.setLabel("arg"+String(a))};Ray.UI.ArgListContainer=function(a,b){goog.ui.Component.call(this,b);this.argList_=a};goog.inherits(Ray.UI.ArgListContainer,goog.ui.Component);Ray.UI.ArgListContainer.nextId_=0;Ray.UI.ArgListContainer.makeUniqueIdNum=function(){return Ray.UI.ArgListContainer.nextId_++};
Ray.UI.ArgListContainer.prototype.getContentElement=function(){return this.argListElement_};
Ray.UI.ArgListContainer.prototype.createDom=function(){Ray.UI.ArgListContainer.superClass_.createDom.call(this);var a=this.element_;goog.dom.classes.set(a,"arg-list-container");var b=goog.dom.createDom("div",{"class":"arg-list"});goog.dom.append(a,b);this.argListElement_=b;goog.array.forEach(this.argList_.getArgs(),function(a){this.addChild(new Ray.UI.ArgUI(a),!0)},this);b=goog.dom.createDom("i",{"class":"icon-plus"});this.argAddButton_=b=Ray.UI.FunDef.makeButton_(b);b.render(a);goog.style.setInlineBlock(b.getContentElement())};
Ray.UI.ArgListContainer.prototype.enterDocument=function(){Ray.UI.ArgListContainer.superClass_.enterDocument.call(this);this.forEachChild(function(a){this.getHandler().listen(a,Ray.UI.ArgList.EventType.REMOVE_ARG_EVENT,this.onRemoveArg_,!0,this);this.getHandler().listen(a,goog.ui.Component.EventType.CHANGE,this.dispatchChange,!1,this)},this);this.getHandler().listen(this.argAddButton_,goog.ui.Component.EventType.ACTION,this.addArg,!0,this)};Ray.UI.ArgListContainer.prototype.dispatchChange=function(a){this.dispatchEvent(goog.ui.Component.EventType.CHANGE)};
Ray.UI.ArgListContainer.prototype.addArg=function(a,b){b||(b=new Ray.UI.Arg);this.argList_.addArg(b);var c=new Ray.UI.ArgUI(b);this.addChild(c,!0);this.getHandler().listen(c,Ray.UI.ArgList.EventType.REMOVE_ARG_EVENT,this.onRemoveArg_,!0,this);this.getHandler().listen(c,goog.ui.Component.EventType.CHANGE,this.dispatchChange,!1,this);this.dispatchEvent(goog.ui.Component.EventType.CHANGE)};
Ray.UI.ArgListContainer.prototype.onRemoveArg_=function(a){a.stopPropagation();this.argList_.removeArgAt(this.indexOfChild(a.currentTarget));this.removeChild(a.currentTarget,!0);this.forEachChild(function(a){a.updateArgNameLabelIndex()});this.dispatchEvent(goog.ui.Component.EventType.CHANGE)};Ray.UI.ArgListContainer.prototype.getArgs=function(){var a=[];this.forEachChild(function(b){a.push(b.getArg())});return a};Ray.UI.FunDef.Dialog=function(a){goog.ui.Dialog.call(this,null,!0,a)};
goog.inherits(Ray.UI.FunDef.Dialog,goog.ui.Dialog);
Ray.UI.FunDef.Dialog.prototype.createDom=function(){Ray.UI.FunDef.Dialog.superClass_.createDom.call(this);this.asCreate();var a=this.getContentElement();goog.dom.append(a,"What will you name the function?");goog.dom.append(a,goog.dom.createElement("br"));var b=new goog.ui.LabelInput("name");this.funName_=b;this.addChild(b,!0);goog.dom.append(a,goog.dom.createElement("br"));goog.dom.append(a,"What does this function do?");goog.dom.append(a,goog.dom.createElement("br"));this.funDescription_=b=new goog.ui.Textarea("description");
this.addChild(b,!0);goog.dom.append(a,goog.dom.createElement("br"));goog.dom.append(a,"This function consumes:");goog.dom.append(a,goog.dom.createElement("br"));b=new Ray.UI.ArgList;this.argListContainer_=b=new Ray.UI.ArgListContainer(b);this.addChild(b,!0);this.producesStart_=b=goog.dom.createTextNode("This function produces:");goog.dom.append(a,b);this.returnType_=b=Ray.UI.FunDef.makeTypeSelector_();b.setSelectedIndex(0);b.setDefaultCaption("Pick a return type for this function");this.addChild(b,
!0);goog.dom.append(a,goog.dom.createElement("br"));b=goog.dom.createDom("span",{"class":"invalid-state-message"});goog.dom.setTextContent(b,"");goog.dom.append(a,b);this.message_=b;this.resetValidity();goog.dom.append(a,goog.dom.createElement("br"));b=goog.dom.createDom("iframe",{src:"Javascript:''"});goog.style.setSize(b,200,200);goog.dom.append(a,b);this.blocklyContainer_=b;return this};
Ray.UI.FunDef.Dialog.prototype.asCreate=function(){this.getButtonSet().getButton("apply")&&this.getHandler().unlisten(this.getButtonSet().getButton("apply")||null,goog.events.EventType.CLICK,this.onApplyChangesFun_);this.getButtonSet().getButton("delete")&&this.getHandler().unlisten(this.getButtonSet().getButton("delete")||null,goog.events.EventType.CLICK,this.onDeleteFun_);var a=new goog.ui.Dialog.ButtonSet;a.set("create","Create function");a.set("cancel","Cancel");a.setCancel("cancel");a.setDefault("create");
this.setButtonSet(a);this.setTitle("Define a new function");this.onCreateFun_&&this.getHandler().listen(this.getButtonSet().getButton("create"),goog.events.EventType.CLICK,this.onCreateFun_)};
Ray.UI.FunDef.Dialog.prototype.asEdit=function(){this.getButtonSet().getButton("create")&&this.getHandler().unlisten(this.getButtonSet().getButton("create")||null,goog.events.EventType.CLICK,this.onCreateFun_);var a=new goog.ui.Dialog.ButtonSet;a.set("apply","Apply changes");a.set("delete","Delete this function");a.set("cancel","Cancel");a.setCancel("cancel");a.setDefault("apply");this.setButtonSet(a);this.setTitle("Edit this function");this.onApplyChangesFun_&&this.getHandler().listen(this.getButtonSet().getButton("apply"),
goog.events.EventType.CLICK,this.onApplyChangesFun_);this.onDeleteFun_&&this.getHandler().listen(this.getButtonSet().getButton("delete"),goog.events.EventType.CLICK,this.onDeleteFun_)};
Ray.UI.FunDef.Dialog.prototype.onCreate=function(a){this.getButtonSet().getButton("create")?(this.onCreateFun_&&this.getHandler().unlisten(this.getButtonSet().getButton("create"),goog.events.EventType.CLICK,this.onCreateFun_),this.onCreateFun_=function(b){b=this.getFunSpec();a(b)},this.getHandler().listen(this.getButtonSet().getButton("create"),goog.events.EventType.CLICK,this.onCreateFun_)):this.onCreateFun_=function(b){b=this.getFunSpec();a(b)}};
Ray.UI.FunDef.Dialog.prototype.onApplyChanges=function(a){this.getButtonSet().getButton("apply")?(this.onApplyChangesFun_&&this.getHandler().unlisten(this.getButtonSet().getButton("apply"),goog.events.EventType.CLICK,this.onApplyChangesFun_),this.onApplyChangesFun_=a,this.getHandler().listen(this.getButtonSet().getButton("apply"),goog.events.EventType.CLICK,this.onApplyChangesFun_)):this.onApplyChangesFun_=a};
Ray.UI.FunDef.Dialog.prototype.onDelete=function(a){this.getButtonSet().getButton("delete")?(this.onDeleteFun_&&this.getHandler().unlisten(this.getButtonSet().getButton("delete"),goog.events.EventType.CLICK,this.onDeleteFun_),this.onDeleteFun_=a,this.getHandler().listen(this.getButtonSet().getButton("delete"),goog.events.EventType.CLICK,this.onDeleteFun_)):this.onDeleteFun_=a};
Ray.UI.FunDef.Dialog.prototype.enterDocument=function(){Ray.UI.FunDef.Dialog.superClass_.enterDocument.call(this);this.getHandler().listen(this.funName_.getContentElement(),Ray.UI.FunDef.CHANGE_EVENTS,this.updatePreviewAndValidate);this.getHandler().listen(this.argListContainer_,goog.ui.Component.EventType.CHANGE,this.updatePreviewAndValidate);this.getHandler().listen(this.returnType_,goog.ui.Component.EventType.CHANGE,this.updatePreviewAndValidate);Ray.UI.Util.loadBlocklyAsObjField(this,this.blocklyContainer_)};
Ray.UI.FunDef.Dialog.prototype.resetValidity=function(){var a=this.message_;goog.dom.setProperties(a,{display:"none"});goog.dom.setTextContent(a,"");this.getButtonSet().setButtonEnabled("create",!0)};Ray.UI.FunDef.Dialog.prototype.markInvalid=function(a){var b=this.message_;goog.dom.setTextContent(b,a);goog.style.setInlineBlock(b);this.getButtonSet().setButtonEnabled("create",!1)};
Ray.UI.FunDef.Dialog.prototype.updatePreviewAndValidate=function(a){this.block&&this.block.dispose(!0,!1);this.block=null;this.resetValidity();if(a=this.isInvalid())this.markInvalid(a);else if(this.Blockly_){var b=this.getFunSpec(),c=new this.Blockly_.Block(this.Blockly_.mainWorkspace,{outputType_:b.returnType,renderAsExpression_:!0,init:function(){this.makeTitleRow(b.name);goog.array.forEach(b.args,function(a){this.appendValueInput(a.getName()).setType(a.getType())},this)}});c.initSvg();c.render();
this.Blockly_.svgResize();goog.array.forEach(b.args,function(a){var b={outputType_:a.getType(),renderAsExpression_:!0,init:function(){this.makeTitleRow(a.getName())}},b=new this.Blockly_.Block(this.Blockly_.mainWorkspace,b);b.initSvg();b.render();c.getInput(a.getName()).connection.connect(b.outputConnection)},this);a=c.getRelativeToSurfaceXY();c.moveBy(this.Blockly_.BlockSvg.SEP_SPACE_X+this.Blockly_.BlockSvg.TAB_WIDTH-a.x,this.Blockly_.BlockSvg.SEP_SPACE_Y-a.y);this.block=c}else setTimeout(goog.bind(this.updatePreviewAndValidate,
this),200)};
Ray.UI.FunDef.Dialog.prototype.isInvalid=function(){var a=this.getFunSpec();if(0===a.name.length)return"Function name must contain at least one character";if(Ray.Shared.conflictingFunctionName(a.name))return"Function name can't be the same as already existing function";for(var b=[],c=0;c<a.args.length;c++){var d=a.args[c],e=d.getType(),f=d.getName();if(!f||0===f.length)return"all argument names must contain at least one character";if(!e)return"all arguments must have a type";if(goog.array.contains(b,d.getName()))return"all arguments names must be distinct";
b.push(d.getName())}return!1};Ray.UI.FunDef.Dialog.prototype.setVisible=function(a){Ray.UI.FunDef.Dialog.superClass_.setVisible.call(this,a);this.updatePreviewAndValidate();if(a){var b=this,c=function(){b.Blockly_?b.Blockly_.svgResize():setTimeout(c,200)};c()}};
Ray.UI.FunDef.Dialog.prototype.testPopulate_=function(){this.funName_.setValue("string-last");this.funDescription_.setValue("gets the last character of the passed-in string");this.argListContainer_.addArg();this.argListContainer_.getChildAt(0).setArgTypeIndex(2);this.argListContainer_.getChildAt(0).setArgName("x");this.returnType_.setSelectedIndex(3)};
Ray.UI.FunDef.Dialog.prototype.getFunSpec=function(){var a=this.funName_.getValue(),b=this.funDescription_.getValue(),c=this.argListContainer_.getArgs(),d=this.returnType_.getValue();return{name:a,desc:b,args:c,returnType:d}};
Ray.UI.FunDef.Dialog.prototype.setFunSpec=function(a){this.funName_.setValue(a.name);this.funDescription_.setValue(a.desc);var b=this.indexOfChild(this.argListContainer_);this.removeChild(this.argListContainer_,!0);this.getHandler().unlisten(this.argListContainer_,goog.ui.Component.EventType.CHANGE,this.updatePreviewAndValidate);this.argListContainer_=new Ray.UI.ArgListContainer(new ArgList(a.args));this.addChildAt(this.argListContainer_,b,!1);this.argListContainer_.renderBefore(this.producesStart_);
this.getHandler().listen(this.argListContainer_,goog.ui.Component.EventType.CHANGE,this.updatePreviewAndValidate);Ray.UI.FunDef.setSelectedType(this.returnType_,a.returnType)};Ray.UI.FunDef.makeTypeSelector_=function(){var a=new goog.ui.Select(null,null,goog.ui.FlatMenuButtonRenderer.getInstance());goog.object.forEach(Ray.Types.atomicTypes_,function(b,c){a.addItem(new goog.ui.Option(c,new b))});return a};
Ray.UI.FunDef.setSelectedType=function(a,b){for(var c=0,d;d=a.selectionModel_.getItemAt(c);){if(d&&Ray.Types.areSameType(d.getValue(),b)){a.setSelectedItem(d);return}c++}a.setSelectedItem(null)};Ray.UI.FunDef.makeButton_=function(a){return new goog.ui.Button(a,goog.ui.FlatButtonRenderer.getInstance())};Ray.UI.FunDef.makeDialog=function(a){a=new Ray.UI.FunDef.Dialog(a);return Ray.UI.dialog=a};Ray.UI.Util={};Ray.UI.Util.FUN_DEF_DOM_PREFIX="blockly_function_definition_";Ray.UI.Util.funDefDomId=function(a){return Ray.UI.Util.FUN_DEF_DOM_PREFIX+String(a)};Ray.UI.Util.RUN_BUTTON_MAIN_WORKSPACE_TEXT="Check all and run program in main workspace";Ray.UI.Util.RUN_BUTTON_MAIN_WORKSPACE_TOOLTIP="Make sure all tests pass and run the program in the main workspace";Ray.UI.Util.RUN_BUTTON_MAIN_WORKSPACE_DISABLED_TOOLTIP="There must be exactly one block in the main workspace at the top level";
Ray.UI.Util.RUN_BUTTON_FUN_TAB_TEXT="Run function tests";Ray.UI.Util.RUN_BUTTON_FUN_TAB_TOOLTIP="Run all of the tests for this function";Ray.UI.Util.RUN_BUTTON_FUN_TAB_DISABLED_TOOLTIP="Hover over the error icon in the current tab to find out what's wrong";Ray.UI.Util.HALT_BUTTON_TEXT="Computing... click to stop";Ray.UI.Util.HALT_BUTTON_TOOLTIP="Click to interrupt the current computation";Ray.UI.Util.HALT_BUTTON_CLASS="halt-button";Ray.UI.Util.CREATE_FUN_BUTTON_TEXT="Create a new function";
Ray.UI.Util.CREATE_FUN_BUTTON_TOOLTIP="Define a new function to use in your program";Ray.UI.Util.DIRECTORY_PREFIX="ray/blockly/";Ray.UI.Util.MAIN_BLOCKLY_FILENAME="main_blockly.html";Ray.UI.Util.FUN_DEF_BLOCKLY_FILENAME="fun_def_blockly.html";Ray.UI.Util.READ_ONLY_BLOCKLY_FILENAME="read_only_blockly.html";Ray.UI.Util.MAIN_BLOCKLY_ID="blockly_main";Ray.UI.Util.FUN_DEF_BLOCKLY_ID="blockly_function_definition";Ray.UI.Util.funDefBlockly=function(){return goog.dom.getElement(Ray.UI.Util.FUN_DEF_BLOCKLY_ID)};
Ray.UI.Util.mainBlockly=function(){return goog.dom.getElement(Ray.UI.Util.MAIN_BLOCKLY_ID)};Ray.UI.Util.isMainWorkspaceOpen=function(){return Ray.UI.Util.isMainWorkspaceTab(Ray.UI.tabBar.getSelectedTab())};Ray.UI.Util.isMainWorkspaceTab=function(a){return Ray.UI.mainBlocklyTabId===a.workspaceId_};Ray.UI.Util.isFunDefTab=function(a){return Ray.UI.mainBlocklyTabId!==a.workspaceId_};
Ray.UI.Util.loadBlocklyAsObjField=function(a,b){Ray.UI.Util.loadBlocklyIFrameThenCall(b,function(b){a.Blockly_=b;console.log("Blockly loaded");console.log(a)})};Ray.UI.Util.loadBlocklyIFrameThenCall=function(a,b){window._callback=b;goog.dom.setProperties(a,{src:Ray.UI.Util.DIRECTORY_PREFIX+Ray.UI.Util.READ_ONLY_BLOCKLY_FILENAME})};goog.ui.LinkButtonRenderer=function(){goog.ui.FlatButtonRenderer.call(this)};goog.inherits(goog.ui.LinkButtonRenderer,goog.ui.FlatButtonRenderer);goog.addSingletonGetter(goog.ui.LinkButtonRenderer);goog.ui.LinkButtonRenderer.CSS_CLASS="goog-link-button";goog.ui.LinkButtonRenderer.prototype.getCssClass=function(){return goog.ui.LinkButtonRenderer.CSS_CLASS};goog.ui.registry.setDecoratorByClassName(goog.ui.LinkButtonRenderer.CSS_CLASS,function(){return new goog.ui.Button(null,goog.ui.LinkButtonRenderer.getInstance())});goog.dom.dataset={};goog.dom.dataset.PREFIX_="data-";goog.dom.dataset.set=function(a,b,c){a.dataset?a.dataset[b]=c:a.setAttribute(goog.dom.dataset.PREFIX_+goog.string.toSelectorCase(b),c)};goog.dom.dataset.get=function(a,b){return a.dataset?a.dataset[b]:a.getAttribute(goog.dom.dataset.PREFIX_+goog.string.toSelectorCase(b))};goog.dom.dataset.remove=function(a,b){a.dataset?delete a.dataset[b]:a.removeAttribute(goog.dom.dataset.PREFIX_+goog.string.toSelectorCase(b))};
goog.dom.dataset.has=function(a,b){return a.dataset?b in a.dataset:a.hasAttribute?a.hasAttribute(goog.dom.dataset.PREFIX_+goog.string.toSelectorCase(b)):!!a.getAttribute(goog.dom.dataset.PREFIX_+goog.string.toSelectorCase(b))};goog.dom.dataset.getAll=function(a){if(a.dataset)return a.dataset;var b={};a=a.attributes;for(var c=0;c<a.length;++c){var d=a[c];if(goog.string.startsWith(d.name,goog.dom.dataset.PREFIX_)){var e=goog.string.toCamelCase(d.name.substr(5));b[e]=d.value}}return b};goog.ui.CustomButton=function(a,b,c){goog.ui.Button.call(this,a,b||goog.ui.CustomButtonRenderer.getInstance(),c)};goog.inherits(goog.ui.CustomButton,goog.ui.Button);goog.ui.registry.setDecoratorByClassName(goog.ui.CustomButtonRenderer.CSS_CLASS,function(){return new goog.ui.CustomButton(null)});goog.async={};goog.async.Delay=function(a,b,c){goog.Disposable.call(this);this.listener_=a;this.interval_=b||0;this.handler_=c;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.Delay,goog.Disposable);goog.Delay=goog.async.Delay;goog.async.Delay.prototype.id_=0;goog.async.Delay.prototype.disposeInternal=function(){goog.async.Delay.superClass_.disposeInternal.call(this);this.stop();delete this.listener_;delete this.handler_};
goog.async.Delay.prototype.start=function(a){this.stop();this.id_=goog.Timer.callOnce(this.callback_,goog.isDef(a)?a:this.interval_)};goog.async.Delay.prototype.stop=function(){this.isActive()&&goog.Timer.clear(this.id_);this.id_=0};goog.async.Delay.prototype.fire=function(){this.stop();this.doAction_()};goog.async.Delay.prototype.fireIfActive=function(){this.isActive()&&this.fire()};goog.async.Delay.prototype.isActive=function(){return 0!=this.id_};
goog.async.Delay.prototype.doAction_=function(){this.id_=0;this.listener_&&this.listener_.call(this.handler_)};goog.async.AnimationDelay=function(a,b,c){goog.Disposable.call(this);this.listener_=a;this.handler_=c;this.win_=b||window;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.AnimationDelay,goog.Disposable);goog.async.AnimationDelay.prototype.id_=null;goog.async.AnimationDelay.prototype.usingListeners_=!1;goog.async.AnimationDelay.TIMEOUT=20;goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_="MozBeforePaint";
goog.async.AnimationDelay.prototype.start=function(){this.stop();this.usingListeners_=!1;var a=this.getRaf_(),b=this.getCancelRaf_();a&&!b&&this.win_.mozRequestAnimationFrame?(this.id_=goog.events.listen(this.win_,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_,this.callback_),this.win_.mozRequestAnimationFrame(null),this.usingListeners_=!0):this.id_=a&&b?a.call(this.win_,this.callback_):this.win_.setTimeout(goog.functions.lock(this.callback_),goog.async.AnimationDelay.TIMEOUT)};
goog.async.AnimationDelay.prototype.stop=function(){if(this.isActive()){var a=this.getRaf_(),b=this.getCancelRaf_();a&&!b&&this.win_.mozRequestAnimationFrame?goog.events.unlistenByKey(this.id_):a&&b?b.call(this.win_,this.id_):this.win_.clearTimeout(this.id_)}this.id_=null};goog.async.AnimationDelay.prototype.fire=function(){this.stop();this.doAction_()};goog.async.AnimationDelay.prototype.fireIfActive=function(){this.isActive()&&this.fire()};
goog.async.AnimationDelay.prototype.isActive=function(){return null!=this.id_};goog.async.AnimationDelay.prototype.doAction_=function(){this.usingListeners_&&this.id_&&goog.events.unlistenByKey(this.id_);this.id_=null;this.listener_.call(this.handler_,goog.now())};goog.async.AnimationDelay.prototype.disposeInternal=function(){this.stop();goog.async.AnimationDelay.superClass_.disposeInternal.call(this)};
goog.async.AnimationDelay.prototype.getRaf_=function(){var a=this.win_;return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||null};goog.async.AnimationDelay.prototype.getCancelRaf_=function(){var a=this.win_;return a.cancelRequestAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||null};goog.fx.anim={};goog.fx.anim.Animated=function(){};goog.fx.anim.TIMEOUT=goog.async.AnimationDelay.TIMEOUT;goog.fx.anim.activeAnimations_={};goog.fx.anim.animationWindow_=null;goog.fx.anim.animationDelay_=null;goog.fx.anim.registerAnimation=function(a){var b=goog.getUid(a);b in goog.fx.anim.activeAnimations_||(goog.fx.anim.activeAnimations_[b]=a);goog.fx.anim.requestAnimationFrame_()};
goog.fx.anim.unregisterAnimation=function(a){a=goog.getUid(a);delete goog.fx.anim.activeAnimations_[a];goog.object.isEmpty(goog.fx.anim.activeAnimations_)&&goog.fx.anim.cancelAnimationFrame_()};goog.fx.anim.tearDown=function(){goog.fx.anim.animationWindow_=null;goog.dispose(goog.fx.anim.animationDelay_);goog.fx.anim.animationDelay_=null;goog.fx.anim.activeAnimations_={}};
goog.fx.anim.setAnimationWindow=function(a){var b=goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.isActive();goog.dispose(goog.fx.anim.animationDelay_);goog.fx.anim.animationDelay_=null;goog.fx.anim.animationWindow_=a;b&&goog.fx.anim.requestAnimationFrame_()};
goog.fx.anim.requestAnimationFrame_=function(){goog.fx.anim.animationDelay_||(goog.fx.anim.animationDelay_=goog.fx.anim.animationWindow_?new goog.async.AnimationDelay(function(a){goog.fx.anim.cycleAnimations_(a)},goog.fx.anim.animationWindow_):new goog.async.Delay(function(){goog.fx.anim.cycleAnimations_(goog.now())},goog.fx.anim.TIMEOUT));var a=goog.fx.anim.animationDelay_;a.isActive()||a.start()};goog.fx.anim.cancelAnimationFrame_=function(){goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.stop()};
goog.fx.anim.cycleAnimations_=function(a){goog.object.forEach(goog.fx.anim.activeAnimations_,function(b){b.onAnimationFrame(a)});goog.object.isEmpty(goog.fx.anim.activeAnimations_)||goog.fx.anim.requestAnimationFrame_()};goog.fx.TransitionBase=function(){goog.events.EventTarget.call(this);this.state_=goog.fx.TransitionBase.State.STOPPED;this.endTime=this.startTime=null};goog.inherits(goog.fx.TransitionBase,goog.events.EventTarget);goog.fx.TransitionBase.State={STOPPED:0,PAUSED:-1,PLAYING:1};goog.fx.TransitionBase.prototype.getStateInternal=function(){return this.state_};goog.fx.TransitionBase.prototype.setStatePlaying=function(){this.state_=goog.fx.TransitionBase.State.PLAYING};
goog.fx.TransitionBase.prototype.setStatePaused=function(){this.state_=goog.fx.TransitionBase.State.PAUSED};goog.fx.TransitionBase.prototype.setStateStopped=function(){this.state_=goog.fx.TransitionBase.State.STOPPED};goog.fx.TransitionBase.prototype.isPlaying=function(){return this.state_==goog.fx.TransitionBase.State.PLAYING};goog.fx.TransitionBase.prototype.isPaused=function(){return this.state_==goog.fx.TransitionBase.State.PAUSED};
goog.fx.TransitionBase.prototype.isStopped=function(){return this.state_==goog.fx.TransitionBase.State.STOPPED};goog.fx.TransitionBase.prototype.onBegin=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.BEGIN)};goog.fx.TransitionBase.prototype.onEnd=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.END)};goog.fx.TransitionBase.prototype.onFinish=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.FINISH)};
goog.fx.TransitionBase.prototype.onPause=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PAUSE)};goog.fx.TransitionBase.prototype.onPlay=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PLAY)};goog.fx.TransitionBase.prototype.onResume=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.RESUME)};goog.fx.TransitionBase.prototype.onStop=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.STOP)};
goog.fx.TransitionBase.prototype.dispatchAnimationEvent=function(a){this.dispatchEvent(a)};goog.fx.Animation=function(a,b,c,d){goog.fx.TransitionBase.call(this);if(!goog.isArray(a)||!goog.isArray(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.startPoint=a;this.endPoint=b;this.duration=c;this.accel_=d;this.coords=[];this.useRightPositioningForRtl_=!1};goog.inherits(goog.fx.Animation,goog.fx.TransitionBase);
goog.fx.Animation.prototype.enableRightPositioningForRtl=function(a){this.useRightPositioningForRtl_=a};goog.fx.Animation.prototype.isRightPositioningForRtlEnabled=function(){return this.useRightPositioningForRtl_};
goog.fx.Animation.EventType={PLAY:goog.fx.Transition.EventType.PLAY,BEGIN:goog.fx.Transition.EventType.BEGIN,RESUME:goog.fx.Transition.EventType.RESUME,END:goog.fx.Transition.EventType.END,STOP:goog.fx.Transition.EventType.STOP,FINISH:goog.fx.Transition.EventType.FINISH,PAUSE:goog.fx.Transition.EventType.PAUSE,ANIMATE:"animate",DESTROY:"destroy"};goog.fx.Animation.TIMEOUT=goog.fx.anim.TIMEOUT;goog.fx.Animation.State=goog.fx.TransitionBase.State;goog.fx.Animation.setAnimationWindow=function(a){goog.fx.anim.setAnimationWindow(a)};
goog.fx.Animation.prototype.fps_=0;goog.fx.Animation.prototype.progress=0;goog.fx.Animation.prototype.lastFrame=null;
goog.fx.Animation.prototype.play=function(a){if(a||this.isStopped())this.progress=0,this.coords=this.startPoint;else if(this.isPlaying())return!1;goog.fx.anim.unregisterAnimation(this);this.startTime=a=goog.now();this.isPaused()&&(this.startTime-=this.duration*this.progress);this.endTime=this.startTime+this.duration;this.lastFrame=this.startTime;if(!this.progress)this.onBegin();this.onPlay();if(this.isPaused())this.onResume();this.setStatePlaying();goog.fx.anim.registerAnimation(this);this.cycle(a);
return!0};goog.fx.Animation.prototype.stop=function(a){goog.fx.anim.unregisterAnimation(this);this.setStateStopped();a&&(this.progress=1);this.updateCoords_(this.progress);this.onStop();this.onEnd()};goog.fx.Animation.prototype.pause=function(){this.isPlaying()&&(goog.fx.anim.unregisterAnimation(this),this.setStatePaused(),this.onPause())};goog.fx.Animation.prototype.getProgress=function(){return this.progress};
goog.fx.Animation.prototype.setProgress=function(a){this.progress=a;this.isPlaying()&&(this.startTime=goog.now()-this.duration*this.progress,this.endTime=this.startTime+this.duration)};goog.fx.Animation.prototype.disposeInternal=function(){this.isStopped()||this.stop(!1);this.onDestroy();goog.fx.Animation.superClass_.disposeInternal.call(this)};goog.fx.Animation.prototype.destroy=function(){this.dispose()};goog.fx.Animation.prototype.onAnimationFrame=function(a){this.cycle(a)};
goog.fx.Animation.prototype.cycle=function(a){this.progress=(a-this.startTime)/(this.endTime-this.startTime);1<=this.progress&&(this.progress=1);this.fps_=1E3/(a-this.lastFrame);this.lastFrame=a;this.updateCoords_(this.progress);if(1==this.progress)this.setStateStopped(),goog.fx.anim.unregisterAnimation(this),this.onFinish(),this.onEnd();else if(this.isPlaying())this.onAnimate()};
goog.fx.Animation.prototype.updateCoords_=function(a){goog.isFunction(this.accel_)&&(a=this.accel_(a));this.coords=Array(this.startPoint.length);for(var b=0;b<this.startPoint.length;b++)this.coords[b]=(this.endPoint[b]-this.startPoint[b])*a+this.startPoint[b]};goog.fx.Animation.prototype.onAnimate=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.ANIMATE)};goog.fx.Animation.prototype.onDestroy=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.DESTROY)};
goog.fx.Animation.prototype.dispatchAnimationEvent=function(a){this.dispatchEvent(new goog.fx.AnimationEvent(a,this))};goog.fx.AnimationEvent=function(a,b){goog.events.Event.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.progress=b.getProgress();this.fps=b.fps_;this.state=b.getStateInternal();this.anim=b};goog.inherits(goog.fx.AnimationEvent,goog.events.Event);
goog.fx.AnimationEvent.prototype.coordsAsInts=function(){return goog.array.map(this.coords,Math.round)};goog.fx.dom={};goog.fx.dom.PredefinedEffect=function(a,b,c,d,e){goog.fx.Animation.call(this,b,c,d,e);this.element=a};goog.inherits(goog.fx.dom.PredefinedEffect,goog.fx.Animation);goog.fx.dom.PredefinedEffect.prototype.updateStyle=goog.nullFunction;goog.fx.dom.PredefinedEffect.prototype.isRightToLeft=function(){goog.isDef(this.rightToLeft_)||(this.rightToLeft_=goog.style.isRightToLeft(this.element));return this.rightToLeft_};
goog.fx.dom.PredefinedEffect.prototype.onAnimate=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onAnimate.call(this)};goog.fx.dom.PredefinedEffect.prototype.onEnd=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onEnd.call(this)};goog.fx.dom.PredefinedEffect.prototype.onBegin=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onBegin.call(this)};
goog.fx.dom.Slide=function(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.Slide,goog.fx.dom.PredefinedEffect);goog.fx.dom.Slide.prototype.updateStyle=function(){var a=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};
goog.fx.dom.SlideFrom=function(a,b,c,d){var e=[this.isRightPositioningForRtlEnabled()?goog.style.bidi.getOffsetStart(a):a.offsetLeft,a.offsetTop];goog.fx.dom.Slide.call(this,a,e,b,c,d)};goog.inherits(goog.fx.dom.SlideFrom,goog.fx.dom.Slide);goog.fx.dom.SlideFrom.prototype.onBegin=function(){this.startPoint=[this.isRightPositioningForRtlEnabled()?goog.style.bidi.getOffsetStart(this.element):this.element.offsetLeft,this.element.offsetTop];goog.fx.dom.SlideFrom.superClass_.onBegin.call(this)};
goog.fx.dom.Swipe=function(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments);this.maxWidth_=Math.max(this.endPoint[0],this.startPoint[0]);this.maxHeight_=Math.max(this.endPoint[1],this.startPoint[1])};goog.inherits(goog.fx.dom.Swipe,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Swipe.prototype.updateStyle=function(){var a=this.coords[0],b=this.coords[1];this.clip_(Math.round(a),Math.round(b),this.maxWidth_,this.maxHeight_);this.element.style.width=Math.round(a)+"px";var c=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"marginRight":"marginLeft";this.element.style[c]=Math.round(a)-this.maxWidth_+"px";this.element.style.marginTop=Math.round(b)-this.maxHeight_+"px"};
goog.fx.dom.Swipe.prototype.clip_=function(a,b,c,d){this.element.style.clip="rect("+(d-b)+"px "+c+"px "+d+"px "+(c-a)+"px)"};goog.fx.dom.Scroll=function(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.Scroll,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Scroll.prototype.updateStyle=function(){this.isRightPositioningForRtlEnabled()?goog.style.bidi.setScrollOffset(this.element,Math.round(this.coords[0])):this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};goog.fx.dom.Resize=function(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.Resize,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Resize.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};goog.fx.dom.ResizeWidth=function(a,b,c,d,e){goog.fx.dom.PredefinedEffect.call(this,a,[b],[c],d,e)};goog.inherits(goog.fx.dom.ResizeWidth,goog.fx.dom.PredefinedEffect);goog.fx.dom.ResizeWidth.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px"};
goog.fx.dom.ResizeHeight=function(a,b,c,d,e){goog.fx.dom.PredefinedEffect.call(this,a,[b],[c],d,e)};goog.inherits(goog.fx.dom.ResizeHeight,goog.fx.dom.PredefinedEffect);goog.fx.dom.ResizeHeight.prototype.updateStyle=function(){this.element.style.height=Math.round(this.coords[0])+"px"};goog.fx.dom.Fade=function(a,b,c,d,e){goog.isNumber(b)&&(b=[b]);goog.isNumber(c)&&(c=[c]);goog.fx.dom.PredefinedEffect.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");};
goog.inherits(goog.fx.dom.Fade,goog.fx.dom.PredefinedEffect);goog.fx.dom.Fade.prototype.updateStyle=function(){goog.style.setOpacity(this.element,this.coords[0])};goog.fx.dom.Fade.prototype.show=function(){this.element.style.display=""};goog.fx.dom.Fade.prototype.hide=function(){this.element.style.display="none"};goog.fx.dom.FadeOut=function(a,b,c){goog.fx.dom.Fade.call(this,a,1,0,b,c)};goog.inherits(goog.fx.dom.FadeOut,goog.fx.dom.Fade);
goog.fx.dom.FadeIn=function(a,b,c){goog.fx.dom.Fade.call(this,a,0,1,b,c)};goog.inherits(goog.fx.dom.FadeIn,goog.fx.dom.Fade);goog.fx.dom.FadeOutAndHide=function(a,b,c){goog.fx.dom.Fade.call(this,a,1,0,b,c)};goog.inherits(goog.fx.dom.FadeOutAndHide,goog.fx.dom.Fade);goog.fx.dom.FadeOutAndHide.prototype.onBegin=function(){this.show();goog.fx.dom.FadeOutAndHide.superClass_.onBegin.call(this)};goog.fx.dom.FadeOutAndHide.prototype.onEnd=function(){this.hide();goog.fx.dom.FadeOutAndHide.superClass_.onEnd.call(this)};
goog.fx.dom.FadeInAndShow=function(a,b,c){goog.fx.dom.Fade.call(this,a,0,1,b,c)};goog.inherits(goog.fx.dom.FadeInAndShow,goog.fx.dom.Fade);goog.fx.dom.FadeInAndShow.prototype.onBegin=function(){this.show();goog.fx.dom.FadeInAndShow.superClass_.onBegin.call(this)};goog.fx.dom.BgColorTransform=function(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.BgColorTransform,goog.fx.dom.PredefinedEffect);
goog.fx.dom.BgColorTransform.prototype.setColor=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);a="rgb("+a.join(",")+")";this.element.style.backgroundColor=a};goog.fx.dom.BgColorTransform.prototype.updateStyle=function(){this.setColor()};
goog.fx.dom.bgColorFadeIn=function(a,b,c,d){function e(){a.style.backgroundColor=f}var f=a.style.backgroundColor||"",g=goog.style.getBackgroundColor(a),g=g&&"transparent"!=g&&"rgba(0, 0, 0, 0)"!=g?goog.color.hexToRgb(goog.color.parse(g).hex):[255,255,255];b=new goog.fx.dom.BgColorTransform(a,b,g,c);d?d.listen(b,goog.fx.Transition.EventType.END,e):goog.events.listen(b,goog.fx.Transition.EventType.END,e);b.play()};
goog.fx.dom.ColorTransform=function(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.ColorTransform,goog.fx.dom.PredefinedEffect);goog.fx.dom.ColorTransform.prototype.updateStyle=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);a="rgb("+a.join(",")+")";this.element.style.color=a};goog.positioning.ViewportPosition=function(a,b){this.coordinate=a instanceof goog.math.Coordinate?a:new goog.math.Coordinate(a,b)};goog.inherits(goog.positioning.ViewportPosition,goog.positioning.AbstractPosition);goog.positioning.ViewportPosition.prototype.reposition=function(a,b,c,d){goog.positioning.positionAtAnchor(goog.style.getClientViewportElement(a),goog.positioning.Corner.TOP_LEFT,a,b,this.coordinate,c,null,d)};goog.positioning.ClientPosition=function(a,b){this.coordinate=a instanceof goog.math.Coordinate?a:new goog.math.Coordinate(a,b)};goog.inherits(goog.positioning.ClientPosition,goog.positioning.AbstractPosition);
goog.positioning.ClientPosition.prototype.reposition=function(a,b,c,d){goog.asserts.assert(a);var e=goog.style.getViewportPageOffset(goog.dom.getOwnerDocument(a)),f=this.coordinate.x+e.x,e=this.coordinate.y+e.y,g=goog.positioning.getOffsetParentPageOffset(a),f=f-g.x,e=e-g.y;goog.positioning.positionAtCoordinate(new goog.math.Coordinate(f,e),a,b,c,null,null,d)};goog.positioning.ViewportClientPosition=function(a,b){goog.positioning.ClientPosition.call(this,a,b)};goog.inherits(goog.positioning.ViewportClientPosition,goog.positioning.ClientPosition);goog.positioning.ViewportClientPosition.prototype.lastResortOverflow_=0;goog.positioning.ViewportClientPosition.prototype.setLastResortOverflow=function(a){this.lastResortOverflow_=a};
goog.positioning.ViewportClientPosition.prototype.reposition=function(a,b,c,d){var e=goog.style.getClientViewportElement(a),e=goog.style.getVisibleRectForElement(e),f=goog.dom.getDomHelper(a).getDocumentScrollElement(),f=new goog.math.Coordinate(this.coordinate.x+f.scrollLeft,this.coordinate.y+f.scrollTop),g=goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,k=b,l=goog.positioning.positionAtCoordinate(f,a,k,c,e,g,d);if(0!=(l&goog.positioning.OverflowStatus.FAILED)){if(l&goog.positioning.OverflowStatus.FAILED_LEFT||
l&goog.positioning.OverflowStatus.FAILED_RIGHT)k=goog.positioning.flipCornerHorizontal(k);if(l&goog.positioning.OverflowStatus.FAILED_TOP||l&goog.positioning.OverflowStatus.FAILED_BOTTOM)k=goog.positioning.flipCornerVertical(k);l=goog.positioning.positionAtCoordinate(f,a,k,c,e,g,d);0!=(l&goog.positioning.OverflowStatus.FAILED)&&goog.positioning.positionAtCoordinate(f,a,b,c,e,this.lastResortOverflow_,d)}};goog.positioning.AbsolutePosition=function(a,b){this.coordinate=a instanceof goog.math.Coordinate?a:new goog.math.Coordinate(a,b)};goog.inherits(goog.positioning.AbsolutePosition,goog.positioning.AbstractPosition);goog.positioning.AbsolutePosition.prototype.reposition=function(a,b,c,d){goog.positioning.positionAtCoordinate(this.coordinate,a,b,c,null,null,d)};goog.ui.Popup=function(a,b){this.popupCorner_=goog.positioning.Corner.TOP_START;this.position_=b||void 0;goog.ui.PopupBase.call(this,a)};goog.inherits(goog.ui.Popup,goog.ui.PopupBase);goog.ui.Popup.Corner=goog.positioning.Corner;goog.ui.Popup.Overflow=goog.positioning.Overflow;goog.ui.Popup.prototype.getPinnedCorner=function(){return this.popupCorner_};goog.ui.Popup.prototype.setPinnedCorner=function(a){this.popupCorner_=a;this.isVisible()&&this.reposition()};
goog.ui.Popup.prototype.getPosition=function(){return this.position_||null};goog.ui.Popup.prototype.setPosition=function(a){this.position_=a||void 0;this.isVisible()&&this.reposition()};goog.ui.Popup.prototype.getMargin=function(){return this.margin_||null};goog.ui.Popup.prototype.setMargin=function(a,b,c,d){this.margin_=null==a||a instanceof goog.math.Box?a:new goog.math.Box(a,b,c,d);this.isVisible()&&this.reposition()};
goog.ui.Popup.prototype.reposition=function(){if(this.position_){var a=!this.isVisible()&&this.getType()!=goog.ui.PopupBase.Type.MOVE_OFFSCREEN,b=this.getElement();a&&(b.style.visibility="hidden",goog.style.setElementShown(b,!0));this.position_.reposition(b,this.popupCorner_,this.margin_);a&&goog.style.setElementShown(b,!1)}};goog.ui.Popup.AnchoredPosition=goog.positioning.AnchoredPosition;goog.ui.Popup.AnchoredViewPortPosition=goog.positioning.AnchoredViewportPosition;
goog.ui.Popup.AbsolutePosition=goog.positioning.AbsolutePosition;goog.ui.Popup.ViewPortPosition=goog.positioning.ViewportPosition;goog.ui.Popup.ClientPosition=goog.positioning.ClientPosition;goog.ui.Popup.ViewPortClientPosition=goog.positioning.ViewportClientPosition;goog.ui.Tooltip=function(a,b,c){this.dom_=c||(a?goog.dom.getDomHelper(goog.dom.getElement(a)):goog.dom.getDomHelper());goog.ui.Popup.call(this,this.dom_.createDom("div",{style:"position:absolute;display:none;"}));this.cursorPosition=new goog.math.Coordinate(1,1);this.elements_=new goog.structs.Set;a&&this.attach(a);null!=b&&this.setText(b)};goog.inherits(goog.ui.Tooltip,goog.ui.Popup);goog.ui.Tooltip.activeInstances_=[];goog.ui.Tooltip.prototype.activeEl_=null;
goog.ui.Tooltip.prototype.className="goog-tooltip";goog.ui.Tooltip.prototype.showDelayMs_=500;goog.ui.Tooltip.prototype.hideDelayMs_=0;goog.ui.Tooltip.State={INACTIVE:0,WAITING_TO_SHOW:1,SHOWING:2,WAITING_TO_HIDE:3,UPDATING:4};goog.ui.Tooltip.Activation={CURSOR:0,FOCUS:1};goog.ui.Tooltip.prototype.getDomHelper=function(){return this.dom_};goog.ui.Tooltip.prototype.getChildTooltip=function(){return this.childTooltip_};
goog.ui.Tooltip.prototype.attach=function(a){a=goog.dom.getElement(a);this.elements_.add(a);goog.events.listen(a,goog.events.EventType.MOUSEOVER,this.handleMouseOver,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEOUT,this.handleMouseOutAndBlur,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this);goog.events.listen(a,goog.events.EventType.FOCUS,this.handleFocus,!1,this);goog.events.listen(a,goog.events.EventType.BLUR,this.handleMouseOutAndBlur,!1,this)};
goog.ui.Tooltip.prototype.detach=function(a){if(a)a=goog.dom.getElement(a),this.detachElement_(a),this.elements_.remove(a);else{for(var b=this.elements_.getValues(),c=0;a=b[c];c++)this.detachElement_(a);this.elements_.clear()}};
goog.ui.Tooltip.prototype.detachElement_=function(a){goog.events.unlisten(a,goog.events.EventType.MOUSEOVER,this.handleMouseOver,!1,this);goog.events.unlisten(a,goog.events.EventType.MOUSEOUT,this.handleMouseOutAndBlur,!1,this);goog.events.unlisten(a,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this);goog.events.unlisten(a,goog.events.EventType.FOCUS,this.handleFocus,!1,this);goog.events.unlisten(a,goog.events.EventType.BLUR,this.handleMouseOutAndBlur,!1,this)};
goog.ui.Tooltip.prototype.setShowDelayMs=function(a){this.showDelayMs_=a};goog.ui.Tooltip.prototype.getShowDelayMs=function(){return this.showDelayMs_};goog.ui.Tooltip.prototype.setHideDelayMs=function(a){this.hideDelayMs_=a};goog.ui.Tooltip.prototype.getHideDelayMs=function(){return this.hideDelayMs_};goog.ui.Tooltip.prototype.setText=function(a){goog.dom.setTextContent(this.getElement(),a)};goog.ui.Tooltip.prototype.setHtml=function(a){this.getElement().innerHTML=a};
goog.ui.Tooltip.prototype.setElement=function(a){var b=this.getElement();b&&goog.dom.removeNode(b);goog.ui.Tooltip.superClass_.setElement.call(this,a);a&&(b=this.dom_.getDocument().body,b.insertBefore(a,b.lastChild))};goog.ui.Tooltip.prototype.getText=function(){return goog.dom.getTextContent(this.getElement())};goog.ui.Tooltip.prototype.getHtml=function(){return this.getElement().innerHTML};
goog.ui.Tooltip.prototype.getState=function(){return this.showTimer?this.isVisible()?goog.ui.Tooltip.State.UPDATING:goog.ui.Tooltip.State.WAITING_TO_SHOW:this.hideTimer?goog.ui.Tooltip.State.WAITING_TO_HIDE:this.isVisible()?goog.ui.Tooltip.State.SHOWING:goog.ui.Tooltip.State.INACTIVE};goog.ui.Tooltip.prototype.setRequireInteraction=function(a){this.requireInteraction_=a};
goog.ui.Tooltip.prototype.isCoordinateInTooltip=function(a){if(!this.isVisible())return!1;var b=goog.style.getPageOffset(this.getElement()),c=goog.style.getSize(this.getElement());return b.x<=a.x&&a.x<=b.x+c.width&&b.y<=a.y&&a.y<=b.y+c.height};
goog.ui.Tooltip.prototype.onBeforeShow=function(){if(!goog.ui.PopupBase.prototype.onBeforeShow.call(this))return!1;if(this.anchor)for(var a,b=0;a=goog.ui.Tooltip.activeInstances_[b];b++)goog.dom.contains(a.getElement(),this.anchor)||a.setVisible(!1);goog.array.insert(goog.ui.Tooltip.activeInstances_,this);a=this.getElement();a.className=this.className;this.clearHideTimer();goog.events.listen(a,goog.events.EventType.MOUSEOVER,this.handleTooltipMouseOver,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEOUT,
this.handleTooltipMouseOut,!1,this);this.clearShowTimer();return!0};
goog.ui.Tooltip.prototype.onHide_=function(){goog.array.remove(goog.ui.Tooltip.activeInstances_,this);for(var a=this.getElement(),b,c=0;b=goog.ui.Tooltip.activeInstances_[c];c++)b.anchor&&goog.dom.contains(a,b.anchor)&&b.setVisible(!1);this.parentTooltip_&&this.parentTooltip_.startHideTimer();goog.events.unlisten(a,goog.events.EventType.MOUSEOVER,this.handleTooltipMouseOver,!1,this);goog.events.unlisten(a,goog.events.EventType.MOUSEOUT,this.handleTooltipMouseOut,!1,this);this.anchor=void 0;this.getState()==
goog.ui.Tooltip.State.INACTIVE&&(this.seenInteraction_=!1);goog.ui.PopupBase.prototype.onHide_.call(this)};goog.ui.Tooltip.prototype.maybeShow=function(a,b){this.anchor==a&&this.elements_.contains(this.anchor)&&(this.seenInteraction_||!this.requireInteraction_?(this.setVisible(!1),this.isVisible()||this.positionAndShow_(a,b)):this.anchor=void 0);this.showTimer=void 0};goog.ui.Tooltip.prototype.getElements=function(){return this.elements_};goog.ui.Tooltip.prototype.getActiveElement=function(){return this.activeEl_};
goog.ui.Tooltip.prototype.setActiveElement=function(a){this.activeEl_=a};goog.ui.Tooltip.prototype.showForElement=function(a,b){this.attach(a);this.activeEl_=a;this.positionAndShow_(a,b)};goog.ui.Tooltip.prototype.positionAndShow_=function(a,b){this.anchor=a;this.setPosition(b||this.getPositioningStrategy(goog.ui.Tooltip.Activation.CURSOR));this.setVisible(!0)};
goog.ui.Tooltip.prototype.maybeHide=function(a){this.hideTimer=void 0;a==this.anchor&&(null==this.activeEl_||this.activeEl_!=this.getElement()&&!this.elements_.contains(this.activeEl_))&&!this.hasActiveChild()&&this.setVisible(!1)};goog.ui.Tooltip.prototype.hasActiveChild=function(){return!(!this.childTooltip_||!this.childTooltip_.activeEl_)};
goog.ui.Tooltip.prototype.saveCursorPosition_=function(a){var b=this.dom_.getDocumentScroll();this.cursorPosition.x=a.clientX+b.x;this.cursorPosition.y=a.clientY+b.y};goog.ui.Tooltip.prototype.handleMouseOver=function(a){var b=this.getAnchorFromElement(a.target);this.activeEl_=b;this.clearHideTimer();b!=this.anchor&&(this.anchor=b,this.startShowTimer(b),this.checkForParentTooltip_(),this.saveCursorPosition_(a))};
goog.ui.Tooltip.prototype.getAnchorFromElement=function(a){try{for(;a&&!this.elements_.contains(a);)a=a.parentNode;return a}catch(b){return null}};goog.ui.Tooltip.prototype.handleMouseMove=function(a){this.saveCursorPosition_(a);this.seenInteraction_=!0};
goog.ui.Tooltip.prototype.handleFocus=function(a){this.activeEl_=a=this.getAnchorFromElement(a.target);this.seenInteraction_=!0;if(this.anchor!=a){this.anchor=a;var b=this.getPositioningStrategy(goog.ui.Tooltip.Activation.FOCUS);this.clearHideTimer();this.startShowTimer(a,b);this.checkForParentTooltip_()}};goog.ui.Tooltip.prototype.getPositioningStrategy=function(a){return a==goog.ui.Tooltip.Activation.CURSOR?(a=this.cursorPosition.clone(),new goog.ui.Tooltip.CursorTooltipPosition(a)):new goog.ui.Tooltip.ElementTooltipPosition(this.activeEl_)};
goog.ui.Tooltip.prototype.checkForParentTooltip_=function(){if(this.anchor)for(var a,b=0;a=goog.ui.Tooltip.activeInstances_[b];b++)goog.dom.contains(a.getElement(),this.anchor)&&(a.childTooltip_=this,this.parentTooltip_=a)};
goog.ui.Tooltip.prototype.handleMouseOutAndBlur=function(a){var b=this.getAnchorFromElement(a.target),c=this.getAnchorFromElement(a.relatedTarget);b!=c&&(b==this.activeEl_&&(this.activeEl_=null),this.clearShowTimer(),this.seenInteraction_=!1,this.isVisible()&&(!a.relatedTarget||!goog.dom.contains(this.getElement(),a.relatedTarget))?this.startHideTimer():this.anchor=void 0)};
goog.ui.Tooltip.prototype.handleTooltipMouseOver=function(a){a=this.getElement();this.activeEl_!=a&&(this.clearHideTimer(),this.activeEl_=a)};goog.ui.Tooltip.prototype.handleTooltipMouseOut=function(a){var b=this.getElement();if(this.activeEl_==b&&(!a.relatedTarget||!goog.dom.contains(b,a.relatedTarget)))this.activeEl_=null,this.startHideTimer()};goog.ui.Tooltip.prototype.startShowTimer=function(a,b){this.showTimer||(this.showTimer=goog.Timer.callOnce(goog.bind(this.maybeShow,this,a,b),this.showDelayMs_))};
goog.ui.Tooltip.prototype.clearShowTimer=function(){this.showTimer&&(goog.Timer.clear(this.showTimer),this.showTimer=void 0)};goog.ui.Tooltip.prototype.startHideTimer=function(){this.getState()==goog.ui.Tooltip.State.SHOWING&&(this.hideTimer=goog.Timer.callOnce(goog.bind(this.maybeHide,this,this.anchor),this.getHideDelayMs()))};goog.ui.Tooltip.prototype.clearHideTimer=function(){this.hideTimer&&(goog.Timer.clear(this.hideTimer),this.hideTimer=void 0)};
goog.ui.Tooltip.prototype.disposeInternal=function(){this.setVisible(!1);this.clearShowTimer();this.detach();this.getElement()&&goog.dom.removeNode(this.getElement());this.activeEl_=null;delete this.dom_;goog.ui.Tooltip.superClass_.disposeInternal.call(this)};goog.ui.Tooltip.CursorTooltipPosition=function(a,b){goog.positioning.ViewportPosition.call(this,a,b)};goog.inherits(goog.ui.Tooltip.CursorTooltipPosition,goog.positioning.ViewportPosition);
goog.ui.Tooltip.CursorTooltipPosition.prototype.reposition=function(a,b,c){b=goog.style.getClientViewportElement(a);b=goog.style.getVisibleRectForElement(b);c=c?new goog.math.Box(c.top+10,c.right,c.bottom,c.left+10):new goog.math.Box(10,0,0,10);goog.positioning.positionAtCoordinate(this.coordinate,a,goog.positioning.Corner.TOP_START,c,b,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y)&goog.positioning.OverflowStatus.FAILED&&goog.positioning.positionAtCoordinate(this.coordinate,
a,goog.positioning.Corner.TOP_START,c,b,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y)};goog.ui.Tooltip.ElementTooltipPosition=function(a){goog.positioning.AnchoredPosition.call(this,a,goog.positioning.Corner.BOTTOM_RIGHT)};goog.inherits(goog.ui.Tooltip.ElementTooltipPosition,goog.positioning.AnchoredPosition);
goog.ui.Tooltip.ElementTooltipPosition.prototype.reposition=function(a,b,c){var d=new goog.math.Coordinate(10,0);goog.positioning.positionAtAnchor(this.element,this.corner,a,b,d,c,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y)&goog.positioning.OverflowStatus.FAILED&&goog.positioning.positionAtAnchor(this.element,goog.positioning.Corner.TOP_RIGHT,a,goog.positioning.Corner.BOTTOM_LEFT,d,c,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y)};Ray.UI.FunTab=function(a){this.Blockly=a;a=this.getFunName();this.nameSpan_=goog.dom.createDom("span",{},[goog.dom.createTextNode(Ray.UI.FunTab.makeTabText(a))]);a=goog.dom.createDom("div","goog-inline-block",[this.nameSpan_]);goog.ui.Tab.call(this,a);this.editButton_=Ray.UI.FunTab.makeEditIconButton();this.addChild(this.editButton_,!0);a=new goog.ui.Tooltip(this.editButton_.getContentElement(),"Edit the function signature and description or remove this function");a.className=Ray.UI.FunTab.getIconTooltipClass("edit");
this.editButton_.registerDisposable(a);this.workspaceId_=this.getFunWorkspaceId()};goog.inherits(Ray.UI.FunTab,goog.ui.Tab);Ray.UI.FunTab.makeTabText=function(a){return"Define "+a+" "};Ray.UI.FunTab.EditButtonRenderer=goog.ui.ControlRenderer.getCustomRenderer(goog.ui.CustomButtonRenderer,"edit-button");Ray.UI.FunTab.UnfinishedButtonRenderer=goog.ui.ControlRenderer.getCustomRenderer(goog.ui.CustomButtonRenderer,"unfinished-button");Ray.UI.FunTab.ICON_TOOLTIP_CLASS_PREFIX="icontooltip";
Ray.UI.FunTab.getIconTooltipClass=function(a){return Ray.UI.FunTab.ICON_TOOLTIP_CLASS_PREFIX+"-"+a};Ray.UI.FunTab.TEST_FAILURE_COLOR=[255,0,0];Ray.UI.FunTab.TEST_SUCCESS_COLOR=[0,255,0];Ray.UI.FunTab.TEST_COLOR_ANIMATION_MILLIS=1E3;Ray.UI.FunTab.POLLING_INTERVAL_MILLIS=250;Ray.UI.FunTab.makeUnfinishedIconButton=function(){var a=goog.dom.createDom("i",{"class":"icon-exclamation-sign"});return new goog.ui.CustomButton(a,Ray.UI.FunTab.UnfinishedButtonRenderer)};
Ray.UI.FunTab.makeEditIconButton=function(){var a=goog.dom.createDom("i",{"class":"icon-gears"});return new goog.ui.CustomButton(a,Ray.UI.FunTab.EditButtonRenderer)};Ray.UI.FunTab.prototype.workspaceId_=null;Ray.UI.FunTab.prototype.getFunWorkspaceId=function(){return Ray.UI.Util.funDefDomId(this.Blockly.funId)};Ray.UI.FunTab.prototype.getFunName=function(){return this.Blockly.funSpec.name};Ray.UI.FunTab.prototype.updateFunName=function(a){goog.dom.setTextContent(this.nameSpan_,Ray.UI.FunTab.makeTabText(a))};
Ray.UI.FunTab.prototype.onEdit=function(a){return this.getHandler().listen(this.editButton_.getContentElement(),goog.events.EventType.CLICK,a)};
Ray.UI.FunTab.prototype.updateStatus=function(){var a=Ray.Evaluation.isIncompleteFunctionDefinition(this.Blockly);if(a){if(!this.unfinishedButton_){this.unfinishedButton_=Ray.UI.FunTab.makeUnfinishedIconButton();this.addChild(this.unfinishedButton_,!0);var b=new goog.ui.Tooltip(this.unfinishedButton_.getContentElement());b.className=Ray.UI.FunTab.getIconTooltipClass("unfinished");this.unfinishedTooltip_=b;this.unfinishedButton_.registerDisposable(b)}this.unfinishedTooltip_.setText(a)}else this.unfinishedButton_&&
(this.removeChild(this.unfinishedButton_,!0),this.unfinishedButton_.dispose(),this.unfinishedTooltip_=this.unfinishedButton_=null)};
Ray.UI.FunTab.prototype.animateColorFromTestResults=function(a){if(!goog.isNull(a)){var b=this.getContentElement(),c=goog.color.parse(goog.style.getComputedStyle(b,"background-color")),c=goog.color.hexToRgb(c.hex),d=new goog.fx.dom.BgColorTransform(this.getContentElement(),c,a?Ray.UI.FunTab.TEST_SUCCESS_COLOR:Ray.UI.FunTab.TEST_FAILURE_COLOR,Ray.UI.FunTab.TEST_COLOR_ANIMATION_MILLIS);d.addEventListener(goog.fx.Transition.EventType.END,function(a){this.isSelected()&&goog.style.setStyle(b,"background-color",
"");d.dispose()},!1,this);d.play()}};Ray.UI.FunTab.prototype.clearStatus=function(){this.unfinishedButton_&&(this.removeChild(this.unfinishedButton_,!0),this.unfinishedButton_.dispose(),this.unfinishedButton_=null);goog.style.setStyle(this.getContentElement(),"background-color","")};Ray.UI.FunTab.prototype.activate=function(){this.clearStatus();this.updateStatus();this.startPollingForStatus()};Ray.UI.FunTab.prototype.deactivate=function(){this.stopPollingForStatus();this.clearStatus();this.updateStatus()};
Ray.UI.FunTab.prototype.startPollingForStatus=function(){this.timer_=new goog.Timer(Ray.UI.FunTab.POLLING_INTERVAL_MILLIS);this.timer_.addEventListener(goog.Timer.TICK,this.updateStatus,!1,this);this.timer_.start()};Ray.UI.FunTab.prototype.stopPollingForStatus=function(){return this.timer_?(this.timer_.stop(),this.timer_.dispose(),this.timer_=null,!0):!1};Ray.UI.RunButton=function(a){goog.ui.Button.call(this,void 0,Ray.UI.RunButton.EvaluateButtonRenderer);this.decorate(a);this.setContent(Ray.UI.Util.RUN_BUTTON_MAIN_WORKSPACE_TEXT);this.setTooltip(Ray.UI.Util.RUN_BUTTON_MAIN_WORKSPACE_TOOLTIP);this.haltMode_=!1;this.handler=new goog.events.EventHandler(this);this.registerDisposable(this.handler);this.handler.listen(Ray.UI.tabBar,goog.ui.Component.EventType.SELECT,function(a){a=a.target;this.changeListener_&&this.watchedTab_.Blockly.removeChangeListener(this.changeListener_);
Ray.UI.Util.isFunDefTab(a)?(this.setFunTab(),this.watchedTab_=a,this.changeListener_=a.Blockly.addChangeListener(goog.bind(this.checkValidFunDef,this))):(this.setMainWorkspace(),this.watchedTab_=a,this.changeListener_=a.Blockly.addChangeListener(goog.bind(this.checkValidMainWorkspace,this)))})};goog.inherits(Ray.UI.RunButton,goog.ui.Button);Ray.UI.RunButton.prototype.changeListener_=null;Ray.UI.RunButton.prototype.watchedTab_=null;
Ray.UI.RunButton.EvaluateButtonRenderer=goog.ui.ControlRenderer.getCustomRenderer(goog.ui.FlatButtonRenderer,"run-button");Ray.UI.RunButton.prototype.watchMainWorkspace=function(a){this.watchedTab_=a;this.changeListener_=a.Blockly.addChangeListener(goog.bind(this.checkValidMainWorkspace,this));this.checkValidMainWorkspace()};
Ray.UI.RunButton.prototype.checkValidFunDef=function(){Ray.Evaluation.isIncompleteFunctionDefinition(Ray.UI.currentTab.Blockly)?(this.setEnabled(!1),this.setTooltip(Ray.UI.Util.RUN_BUTTON_FUN_TAB_DISABLED_TOOLTIP)):(this.setEnabled(!0),this.setTooltip(Ray.UI.Util.RUN_BUTTON_FUN_TAB_TOOLTIP))};
Ray.UI.RunButton.prototype.checkValidMainWorkspace=function(){Ray.Evaluation.hasSingleMainExpressionBlock()?(this.setEnabled(!0),this.setTooltip(Ray.UI.Util.RUN_BUTTON_MAIN_WORKSPACE_TOOLTIP)):(this.setEnabled(!1),this.setTooltip(Ray.UI.Util.RUN_BUTTON_MAIN_WORKSPACE_DISABLED_TOOLTIP))};Ray.UI.RunButton.prototype.setFunTab=function(){this.setContent(Ray.UI.Util.RUN_BUTTON_FUN_TAB_TEXT);this.setTooltip(Ray.UI.Util.RUN_BUTTON_FUN_TAB_TOOLTIP)};
Ray.UI.RunButton.prototype.setMainWorkspace=function(){this.setContent(Ray.UI.Util.RUN_BUTTON_MAIN_WORKSPACE_TEXT);this.setTooltip(Ray.UI.Util.RUN_BUTTON_MAIN_WORKSPACE_TOOLTIP)};Ray.UI.RunButton.prototype.enterHaltMode=function(){this.oldContent_=this.getContent();this.oldTooltip_=this.getTooltip();this.setContent(Ray.UI.Util.HALT_BUTTON_TEXT);this.setTooltip(Ray.UI.Util.HALT_BUTTON_TOOLTIP);goog.dom.classes.add(this.getContentElement(),Ray.UI.Util.HALT_BUTTON_CLASS);this.haltMode_=!0};
Ray.UI.RunButton.prototype.exitHaltMode=function(){if(!this.haltMode_)throw"unmatched call to exitHaltMode!";this.setContent(this.oldContent_);this.setTooltip(this.oldTooltip_);this.oldTooltip_=this.oldContent_=null;goog.dom.classes.remove(this.getContentElement(),Ray.UI.Util.HALT_BUTTON_CLASS);this.haltMode_=!1};goog.uri={};goog.uri.utils={};goog.uri.utils.CharCode_={AMPERSAND:38,EQUAL:61,HASH:35,QUESTION:63};goog.uri.utils.buildFromEncodedParts=function(a,b,c,d,e,f,g){var k="";a&&(k+=a+":");c&&(k+="//",b&&(k+=b+"@"),k+=c,d&&(k+=":"+d));e&&(k+=e);f&&(k+="?"+f);g&&(k+="#"+g);return k};goog.uri.utils.splitRe_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
goog.uri.utils.ComponentIndex={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};goog.uri.utils.split=function(a){goog.uri.utils.phishingProtection_();return a.match(goog.uri.utils.splitRe_)};goog.uri.utils.needsPhishingProtection_=goog.userAgent.WEBKIT;
goog.uri.utils.phishingProtection_=function(){if(goog.uri.utils.needsPhishingProtection_){goog.uri.utils.needsPhishingProtection_=!1;var a=goog.global.location;if(a){var b=a.href;if(b&&(b=goog.uri.utils.getDomain(b))&&b!=a.hostname)throw goog.uri.utils.needsPhishingProtection_=!0,Error();}}};goog.uri.utils.decodeIfPossible_=function(a){return a&&decodeURIComponent(a)};goog.uri.utils.getComponentByIndex_=function(a,b){return goog.uri.utils.split(b)[a]||null};
goog.uri.utils.getScheme=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.SCHEME,a)};goog.uri.utils.getEffectiveScheme=function(a){a=goog.uri.utils.getScheme(a);!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1));return a?a.toLowerCase():""};goog.uri.utils.getUserInfoEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.USER_INFO,a)};goog.uri.utils.getUserInfo=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getUserInfoEncoded(a))};
goog.uri.utils.getDomainEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.DOMAIN,a)};goog.uri.utils.getDomain=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getDomainEncoded(a))};goog.uri.utils.getPort=function(a){return Number(goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PORT,a))||null};goog.uri.utils.getPathEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PATH,a)};
goog.uri.utils.getPath=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getPathEncoded(a))};goog.uri.utils.getQueryData=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.QUERY_DATA,a)};goog.uri.utils.getFragmentEncoded=function(a){var b=a.indexOf("#");return 0>b?null:a.substr(b+1)};goog.uri.utils.setFragmentEncoded=function(a,b){return goog.uri.utils.removeFragment(a)+(b?"#"+b:"")};goog.uri.utils.getFragment=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getFragmentEncoded(a))};
goog.uri.utils.getHost=function(a){a=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(a[goog.uri.utils.ComponentIndex.SCHEME],a[goog.uri.utils.ComponentIndex.USER_INFO],a[goog.uri.utils.ComponentIndex.DOMAIN],a[goog.uri.utils.ComponentIndex.PORT])};goog.uri.utils.getPathAndAfter=function(a){a=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(null,null,null,null,a[goog.uri.utils.ComponentIndex.PATH],a[goog.uri.utils.ComponentIndex.QUERY_DATA],a[goog.uri.utils.ComponentIndex.FRAGMENT])};
goog.uri.utils.removeFragment=function(a){var b=a.indexOf("#");return 0>b?a:a.substr(0,b)};goog.uri.utils.haveSameDomain=function(a,b){var c=goog.uri.utils.split(a),d=goog.uri.utils.split(b);return c[goog.uri.utils.ComponentIndex.DOMAIN]==d[goog.uri.utils.ComponentIndex.DOMAIN]&&c[goog.uri.utils.ComponentIndex.SCHEME]==d[goog.uri.utils.ComponentIndex.SCHEME]&&c[goog.uri.utils.ComponentIndex.PORT]==d[goog.uri.utils.ComponentIndex.PORT]};
goog.uri.utils.assertNoFragmentsOrQueries_=function(a){if(goog.DEBUG&&(0<=a.indexOf("#")||0<=a.indexOf("?")))throw Error("goog.uri.utils: Fragment or query identifiers are not supported: ["+a+"]");};goog.uri.utils.appendQueryData_=function(a){if(a[1]){var b=a[0],c=b.indexOf("#");0<=c&&(a.push(b.substr(c)),a[0]=b=b.substr(0,c));c=b.indexOf("?");0>c?a[1]="?":c==b.length-1&&(a[1]=void 0)}return a.join("")};
goog.uri.utils.appendKeyValuePairs_=function(a,b,c){if(goog.isArray(b)){goog.asserts.assertArray(b);for(var d=0;d<b.length;d++)goog.uri.utils.appendKeyValuePairs_(a,String(b[d]),c)}else null!=b&&c.push("&",a,""===b?"":"=",goog.string.urlEncode(b))};goog.uri.utils.buildQueryDataBuffer_=function(a,b,c){goog.asserts.assert(0==Math.max(b.length-(c||0),0)%2,"goog.uri.utils: Key/value lists must be even in length.");for(c=c||0;c<b.length;c+=2)goog.uri.utils.appendKeyValuePairs_(b[c],b[c+1],a);return a};
goog.uri.utils.buildQueryData=function(a,b){var c=goog.uri.utils.buildQueryDataBuffer_([],a,b);c[0]="";return c.join("")};goog.uri.utils.buildQueryDataBufferFromMap_=function(a,b){for(var c in b)goog.uri.utils.appendKeyValuePairs_(c,b[c],a);return a};goog.uri.utils.buildQueryDataFromMap=function(a){a=goog.uri.utils.buildQueryDataBufferFromMap_([],a);a[0]="";return a.join("")};
goog.uri.utils.appendParams=function(a,b){return goog.uri.utils.appendQueryData_(2==arguments.length?goog.uri.utils.buildQueryDataBuffer_([a],arguments[1],0):goog.uri.utils.buildQueryDataBuffer_([a],arguments,1))};goog.uri.utils.appendParamsFromMap=function(a,b){return goog.uri.utils.appendQueryData_(goog.uri.utils.buildQueryDataBufferFromMap_([a],b))};goog.uri.utils.appendParam=function(a,b,c){a=[a,"&",b];goog.isDefAndNotNull(c)&&a.push("=",goog.string.urlEncode(c));return goog.uri.utils.appendQueryData_(a)};
goog.uri.utils.findParam_=function(a,b,c,d){for(var e=c.length;0<=(b=a.indexOf(c,b))&&b<d;){var f=a.charCodeAt(b-1);if(f==goog.uri.utils.CharCode_.AMPERSAND||f==goog.uri.utils.CharCode_.QUESTION)if(f=a.charCodeAt(b+e),!f||f==goog.uri.utils.CharCode_.EQUAL||f==goog.uri.utils.CharCode_.AMPERSAND||f==goog.uri.utils.CharCode_.HASH)return b;b+=e+1}return-1};goog.uri.utils.hashOrEndRe_=/#|$/;goog.uri.utils.hasParam=function(a,b){return 0<=goog.uri.utils.findParam_(a,0,b,a.search(goog.uri.utils.hashOrEndRe_))};
goog.uri.utils.getParamValue=function(a,b){var c=a.search(goog.uri.utils.hashOrEndRe_),d=goog.uri.utils.findParam_(a,0,b,c);if(0>d)return null;var e=a.indexOf("&",d);if(0>e||e>c)e=c;d+=b.length+1;return goog.string.urlDecode(a.substr(d,e-d))};goog.uri.utils.getParamValues=function(a,b){for(var c=a.search(goog.uri.utils.hashOrEndRe_),d=0,e,f=[];0<=(e=goog.uri.utils.findParam_(a,d,b,c));){d=a.indexOf("&",e);if(0>d||d>c)d=c;e+=b.length+1;f.push(goog.string.urlDecode(a.substr(e,d-e)))}return f};
goog.uri.utils.trailingQueryPunctuationRe_=/[?&]($|#)/;goog.uri.utils.removeParam=function(a,b){for(var c=a.search(goog.uri.utils.hashOrEndRe_),d=0,e,f=[];0<=(e=goog.uri.utils.findParam_(a,d,b,c));)f.push(a.substring(d,e)),d=Math.min(a.indexOf("&",e)+1||c,c);f.push(a.substr(d));return f.join("").replace(goog.uri.utils.trailingQueryPunctuationRe_,"$1")};goog.uri.utils.setParam=function(a,b,c){return goog.uri.utils.appendParam(goog.uri.utils.removeParam(a,b),b,c)};
goog.uri.utils.appendPath=function(a,b){goog.uri.utils.assertNoFragmentsOrQueries_(a);goog.string.endsWith(a,"/")&&(a=a.substr(0,a.length-1));goog.string.startsWith(b,"/")&&(b=b.substr(1));return goog.string.buildString(a,"/",b)};goog.uri.utils.StandardQueryParam={RANDOM:"zx"};goog.uri.utils.makeUnique=function(a){return goog.uri.utils.setParam(a,goog.uri.utils.StandardQueryParam.RANDOM,goog.string.getRandomString())};goog.Uri=function(a,b){var c;a instanceof goog.Uri?(this.ignoreCase_=goog.isDef(b)?b:a.getIgnoreCase(),this.setScheme(a.getScheme()),this.setUserInfo(a.getUserInfo()),this.setDomain(a.getDomain()),this.setPort(a.getPort()),this.setPath(a.getPath()),this.setQueryData(a.getQueryData().clone()),this.setFragment(a.getFragment())):a&&(c=goog.uri.utils.split(String(a)))?(this.ignoreCase_=!!b,this.setScheme(c[goog.uri.utils.ComponentIndex.SCHEME]||"",!0),this.setUserInfo(c[goog.uri.utils.ComponentIndex.USER_INFO]||
"",!0),this.setDomain(c[goog.uri.utils.ComponentIndex.DOMAIN]||"",!0),this.setPort(c[goog.uri.utils.ComponentIndex.PORT]),this.setPath(c[goog.uri.utils.ComponentIndex.PATH]||"",!0),this.setQueryData(c[goog.uri.utils.ComponentIndex.QUERY_DATA]||"",!0),this.setFragment(c[goog.uri.utils.ComponentIndex.FRAGMENT]||"",!0)):(this.ignoreCase_=!!b,this.queryData_=new goog.Uri.QueryData(null,null,this.ignoreCase_))};goog.Uri.preserveParameterTypesCompatibilityFlag=!1;goog.Uri.RANDOM_PARAM=goog.uri.utils.StandardQueryParam.RANDOM;
goog.Uri.prototype.scheme_="";goog.Uri.prototype.userInfo_="";goog.Uri.prototype.domain_="";goog.Uri.prototype.port_=null;goog.Uri.prototype.path_="";goog.Uri.prototype.fragment_="";goog.Uri.prototype.isReadOnly_=!1;goog.Uri.prototype.ignoreCase_=!1;
goog.Uri.prototype.toString=function(){var a=[],b=this.getScheme();b&&a.push(goog.Uri.encodeSpecialChars_(b,goog.Uri.reDisallowedInSchemeOrUserInfo_),":");if(b=this.getDomain()){a.push("//");var c=this.getUserInfo();c&&a.push(goog.Uri.encodeSpecialChars_(c,goog.Uri.reDisallowedInSchemeOrUserInfo_),"@");a.push(goog.string.urlEncode(b));b=this.getPort();null!=b&&a.push(":",String(b))}if(b=this.getPath())this.hasDomain()&&"/"!=b.charAt(0)&&a.push("/"),a.push(goog.Uri.encodeSpecialChars_(b,"/"==b.charAt(0)?
goog.Uri.reDisallowedInAbsolutePath_:goog.Uri.reDisallowedInRelativePath_));(b=this.getEncodedQuery())&&a.push("?",b);(b=this.getFragment())&&a.push("#",goog.Uri.encodeSpecialChars_(b,goog.Uri.reDisallowedInFragment_));return a.join("")};
goog.Uri.prototype.resolve=function(a){var b=this.clone(),c=a.hasScheme();c?b.setScheme(a.getScheme()):c=a.hasUserInfo();c?b.setUserInfo(a.getUserInfo()):c=a.hasDomain();c?b.setDomain(a.getDomain()):c=a.hasPort();var d=a.getPath();if(c)b.setPort(a.getPort());else if(c=a.hasPath()){if("/"!=d.charAt(0))if(this.hasDomain()&&!this.hasPath())d="/"+d;else{var e=b.getPath().lastIndexOf("/");-1!=e&&(d=b.getPath().substr(0,e+1)+d)}d=goog.Uri.removeDotSegments(d)}c?b.setPath(d):c=a.hasQuery();c?b.setQueryData(a.getDecodedQuery()):
c=a.hasFragment();c&&b.setFragment(a.getFragment());return b};goog.Uri.prototype.clone=function(){return new goog.Uri(this)};goog.Uri.prototype.getScheme=function(){return this.scheme_};goog.Uri.prototype.setScheme=function(a,b){this.enforceReadOnly();if(this.scheme_=b?goog.Uri.decodeOrEmpty_(a):a)this.scheme_=this.scheme_.replace(/:$/,"");return this};goog.Uri.prototype.hasScheme=function(){return!!this.scheme_};goog.Uri.prototype.getUserInfo=function(){return this.userInfo_};
goog.Uri.prototype.setUserInfo=function(a,b){this.enforceReadOnly();this.userInfo_=b?goog.Uri.decodeOrEmpty_(a):a;return this};goog.Uri.prototype.hasUserInfo=function(){return!!this.userInfo_};goog.Uri.prototype.getDomain=function(){return this.domain_};goog.Uri.prototype.setDomain=function(a,b){this.enforceReadOnly();this.domain_=b?goog.Uri.decodeOrEmpty_(a):a;return this};goog.Uri.prototype.hasDomain=function(){return!!this.domain_};goog.Uri.prototype.getPort=function(){return this.port_};
goog.Uri.prototype.setPort=function(a){this.enforceReadOnly();if(a){a=Number(a);if(isNaN(a)||0>a)throw Error("Bad port number "+a);this.port_=a}else this.port_=null;return this};goog.Uri.prototype.hasPort=function(){return null!=this.port_};goog.Uri.prototype.getPath=function(){return this.path_};goog.Uri.prototype.setPath=function(a,b){this.enforceReadOnly();this.path_=b?goog.Uri.decodeOrEmpty_(a):a;return this};goog.Uri.prototype.hasPath=function(){return!!this.path_};
goog.Uri.prototype.hasQuery=function(){return""!==this.queryData_.toString()};goog.Uri.prototype.setQueryData=function(a,b){this.enforceReadOnly();a instanceof goog.Uri.QueryData?(this.queryData_=a,this.queryData_.setIgnoreCase(this.ignoreCase_)):(b||(a=goog.Uri.encodeSpecialChars_(a,goog.Uri.reDisallowedInQuery_)),this.queryData_=new goog.Uri.QueryData(a,null,this.ignoreCase_));return this};goog.Uri.prototype.setQuery=function(a,b){return this.setQueryData(a,b)};
goog.Uri.prototype.getEncodedQuery=function(){return this.queryData_.toString()};goog.Uri.prototype.getDecodedQuery=function(){return this.queryData_.toDecodedString()};goog.Uri.prototype.getQueryData=function(){return this.queryData_};goog.Uri.prototype.getQuery=function(){return this.getEncodedQuery()};goog.Uri.prototype.setParameterValue=function(a,b){this.enforceReadOnly();this.queryData_.set(a,b);return this};
goog.Uri.prototype.setParameterValues=function(a,b){this.enforceReadOnly();goog.isArray(b)||(b=[String(b)]);this.queryData_.setValues(a,b);return this};goog.Uri.prototype.getParameterValues=function(a){return this.queryData_.getValues(a)};goog.Uri.prototype.getParameterValue=function(a){return this.queryData_.get(a)};goog.Uri.prototype.getFragment=function(){return this.fragment_};goog.Uri.prototype.setFragment=function(a,b){this.enforceReadOnly();this.fragment_=b?goog.Uri.decodeOrEmpty_(a):a;return this};
goog.Uri.prototype.hasFragment=function(){return!!this.fragment_};goog.Uri.prototype.hasSameDomainAs=function(a){return(!this.hasDomain()&&!a.hasDomain()||this.getDomain()==a.getDomain())&&(!this.hasPort()&&!a.hasPort()||this.getPort()==a.getPort())};goog.Uri.prototype.makeUnique=function(){this.enforceReadOnly();this.setParameterValue(goog.Uri.RANDOM_PARAM,goog.string.getRandomString());return this};goog.Uri.prototype.removeParameter=function(a){this.enforceReadOnly();this.queryData_.remove(a);return this};
goog.Uri.prototype.setReadOnly=function(a){this.isReadOnly_=a;return this};goog.Uri.prototype.isReadOnly=function(){return this.isReadOnly_};goog.Uri.prototype.enforceReadOnly=function(){if(this.isReadOnly_)throw Error("Tried to modify a read-only Uri");};goog.Uri.prototype.setIgnoreCase=function(a){this.ignoreCase_=a;this.queryData_&&this.queryData_.setIgnoreCase(a);return this};goog.Uri.prototype.getIgnoreCase=function(){return this.ignoreCase_};
goog.Uri.parse=function(a,b){return a instanceof goog.Uri?a.clone():new goog.Uri(a,b)};goog.Uri.create=function(a,b,c,d,e,f,g,k){k=new goog.Uri(null,k);a&&k.setScheme(a);b&&k.setUserInfo(b);c&&k.setDomain(c);d&&k.setPort(d);e&&k.setPath(e);f&&k.setQueryData(f);g&&k.setFragment(g);return k};goog.Uri.resolve=function(a,b){a instanceof goog.Uri||(a=goog.Uri.parse(a));b instanceof goog.Uri||(b=goog.Uri.parse(b));return a.resolve(b)};
goog.Uri.removeDotSegments=function(a){if(".."==a||"."==a)return"";if(!goog.string.contains(a,"./")&&!goog.string.contains(a,"/."))return a;var b=goog.string.startsWith(a,"/");a=a.split("/");for(var c=[],d=0;d<a.length;){var e=a[d++];"."==e?b&&d==a.length&&c.push(""):".."==e?((1<c.length||1==c.length&&""!=c[0])&&c.pop(),b&&d==a.length&&c.push("")):(c.push(e),b=!0)}return c.join("/")};goog.Uri.decodeOrEmpty_=function(a){return a?decodeURIComponent(a):""};
goog.Uri.encodeSpecialChars_=function(a,b){return goog.isString(a)?encodeURI(a).replace(b,goog.Uri.encodeChar_):null};goog.Uri.encodeChar_=function(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)};goog.Uri.reDisallowedInSchemeOrUserInfo_=/[#\/\?@]/g;goog.Uri.reDisallowedInRelativePath_=/[\#\?:]/g;goog.Uri.reDisallowedInAbsolutePath_=/[\#\?]/g;goog.Uri.reDisallowedInQuery_=/[\#\?@]/g;goog.Uri.reDisallowedInFragment_=/#/g;
goog.Uri.haveSameDomain=function(a,b){var c=goog.uri.utils.split(a),d=goog.uri.utils.split(b);return c[goog.uri.utils.ComponentIndex.DOMAIN]==d[goog.uri.utils.ComponentIndex.DOMAIN]&&c[goog.uri.utils.ComponentIndex.PORT]==d[goog.uri.utils.ComponentIndex.PORT]};goog.Uri.QueryData=function(a,b,c){this.encodedQuery_=a||null;this.ignoreCase_=!!c};
goog.Uri.QueryData.prototype.ensureKeyMapInitialized_=function(){if(!this.keyMap_&&(this.keyMap_=new goog.structs.Map,this.count_=0,this.encodedQuery_))for(var a=this.encodedQuery_.split("&"),b=0;b<a.length;b++){var c=a[b].indexOf("="),d=null,e=null;0<=c?(d=a[b].substring(0,c),e=a[b].substring(c+1)):d=a[b];d=goog.string.urlDecode(d);d=this.getKeyName_(d);this.add(d,e?goog.string.urlDecode(e):"")}};
goog.Uri.QueryData.createFromMap=function(a,b,c){b=goog.structs.getKeys(a);if("undefined"==typeof b)throw Error("Keys are undefined");c=new goog.Uri.QueryData(null,null,c);a=goog.structs.getValues(a);for(var d=0;d<b.length;d++){var e=b[d],f=a[d];goog.isArray(f)?c.setValues(e,f):c.add(e,f)}return c};
goog.Uri.QueryData.createFromKeysValues=function(a,b,c,d){if(a.length!=b.length)throw Error("Mismatched lengths for keys/values");c=new goog.Uri.QueryData(null,null,d);for(d=0;d<a.length;d++)c.add(a[d],b[d]);return c};goog.Uri.QueryData.prototype.keyMap_=null;goog.Uri.QueryData.prototype.count_=null;goog.Uri.QueryData.prototype.getCount=function(){this.ensureKeyMapInitialized_();return this.count_};
goog.Uri.QueryData.prototype.add=function(a,b){this.ensureKeyMapInitialized_();this.invalidateCache_();a=this.getKeyName_(a);var c=this.keyMap_.get(a);c||this.keyMap_.set(a,c=[]);c.push(b);this.count_++;return this};goog.Uri.QueryData.prototype.remove=function(a){this.ensureKeyMapInitialized_();a=this.getKeyName_(a);return this.keyMap_.containsKey(a)?(this.invalidateCache_(),this.count_-=this.keyMap_.get(a).length,this.keyMap_.remove(a)):!1};
goog.Uri.QueryData.prototype.clear=function(){this.invalidateCache_();this.keyMap_=null;this.count_=0};goog.Uri.QueryData.prototype.isEmpty=function(){this.ensureKeyMapInitialized_();return 0==this.count_};goog.Uri.QueryData.prototype.containsKey=function(a){this.ensureKeyMapInitialized_();a=this.getKeyName_(a);return this.keyMap_.containsKey(a)};goog.Uri.QueryData.prototype.containsValue=function(a){var b=this.getValues();return goog.array.contains(b,a)};
goog.Uri.QueryData.prototype.getKeys=function(){this.ensureKeyMapInitialized_();for(var a=this.keyMap_.getValues(),b=this.keyMap_.getKeys(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};goog.Uri.QueryData.prototype.getValues=function(a){this.ensureKeyMapInitialized_();var b=[];if(a)this.containsKey(a)&&(b=goog.array.concat(b,this.keyMap_.get(this.getKeyName_(a))));else{a=this.keyMap_.getValues();for(var c=0;c<a.length;c++)b=goog.array.concat(b,a[c])}return b};
goog.Uri.QueryData.prototype.set=function(a,b){this.ensureKeyMapInitialized_();this.invalidateCache_();a=this.getKeyName_(a);this.containsKey(a)&&(this.count_-=this.keyMap_.get(a).length);this.keyMap_.set(a,[b]);this.count_++;return this};goog.Uri.QueryData.prototype.get=function(a,b){var c=a?this.getValues(a):[];return goog.Uri.preserveParameterTypesCompatibilityFlag?0<c.length?c[0]:b:0<c.length?String(c[0]):b};
goog.Uri.QueryData.prototype.setValues=function(a,b){this.remove(a);0<b.length&&(this.invalidateCache_(),this.keyMap_.set(this.getKeyName_(a),goog.array.clone(b)),this.count_+=b.length)};
goog.Uri.QueryData.prototype.toString=function(){if(this.encodedQuery_)return this.encodedQuery_;if(!this.keyMap_)return"";for(var a=[],b=this.keyMap_.getKeys(),c=0;c<b.length;c++)for(var d=b[c],e=goog.string.urlEncode(d),d=this.getValues(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+goog.string.urlEncode(d[f]));a.push(g)}return this.encodedQuery_=a.join("&")};goog.Uri.QueryData.prototype.toDecodedString=function(){return goog.Uri.decodeOrEmpty_(this.toString())};
goog.Uri.QueryData.prototype.invalidateCache_=function(){this.encodedQuery_=null};goog.Uri.QueryData.prototype.filterKeys=function(a){this.ensureKeyMapInitialized_();goog.structs.forEach(this.keyMap_,function(b,c,d){goog.array.contains(a,c)||this.remove(c)},this);return this};goog.Uri.QueryData.prototype.clone=function(){var a=new goog.Uri.QueryData;a.encodedQuery_=this.encodedQuery_;this.keyMap_&&(a.keyMap_=this.keyMap_.clone(),a.count_=this.count_);return a};
goog.Uri.QueryData.prototype.getKeyName_=function(a){a=String(a);this.ignoreCase_&&(a=a.toLowerCase());return a};goog.Uri.QueryData.prototype.setIgnoreCase=function(a){a&&!this.ignoreCase_&&(this.ensureKeyMapInitialized_(),this.invalidateCache_(),goog.structs.forEach(this.keyMap_,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.setValues(d,a))},this));this.ignoreCase_=a};
goog.Uri.QueryData.prototype.extend=function(a){for(var b=0;b<arguments.length;b++)goog.structs.forEach(arguments[b],function(a,b){this.add(b,a)},this)};Ray.UI.ResultsBox=function(a){this.div_=a;goog.style.setInlineBlock(a);this.errorMessageSpan_=goog.dom.createDom("span",{"class":Ray.UI.ResultsBox.ERROR_CLASS});goog.dom.appendChild(this.div_,this.errorMessageSpan_);goog.style.setElementShown(this.errorMessageSpan_,!1);this.messageSpan_=goog.dom.createDom("span",{});goog.dom.appendChild(this.div_,this.messageSpan_);goog.style.setElementShown(this.messageSpan_,!1);this.blocklyContainer_=goog.dom.createDom("iframe",{src:"Javascript:''"});goog.dom.appendChild(this.div_,
this.blocklyContainer_);goog.style.setElementShown(this.blocklyContainer_,!1);goog.style.setSize(this.blocklyContainer_,Ray.UI.ResultsBox.INITIAL_BLOCKLY_WIDTH,Ray.UI.ResultsBox.INITIAL_BLOCKLY_HEIGHT);Ray.UI.Util.loadBlocklyAsObjField(this,this.blocklyContainer_)};Ray.UI.ResultsBox.ERROR_CLASS="results_box-error";Ray.UI.ResultsBox.INITIAL_BLOCKLY_WIDTH=100;Ray.UI.ResultsBox.INITIAL_BLOCKLY_HEIGHT=50;Ray.UI.ResultsBox.prototype.getSize=function(){return goog.style.getSize(this.div_)};
Ray.UI.ResultsBox.prototype.getMarginWidth=function(){var a=goog.style.getMarginBox(this.div_);return a.left+a.right};Ray.UI.ResultsBox.prototype.setSize=function(a,b){goog.style.setSize(this.div_,a,b)};Ray.UI.ResultsBox.prototype.resetSize=function(){goog.style.setStyle(this.div_,"width","");goog.style.setStyle(this.div_,"height","")};
Ray.UI.ResultsBox.prototype.showError=function(a){goog.style.setElementShown(this.blocklyContainer_,!1);goog.style.setElementShown(this.messageSpan_,!1);goog.dom.setTextContent(this.errorMessageSpan_,a);goog.style.setElementShown(this.errorMessageSpan_,!0)};
Ray.UI.ResultsBox.prototype.showValue=function(a){if(this.Blockly_){a=this.getPrimitiveDataBlockFromValue(a);a.initSvg();a.render();this.Blockly_.svgResize();var b=a.getRelativeToSurfaceXY();a.moveBy(this.Blockly_.BlockSvg.SEP_SPACE_X+this.Blockly_.BlockSvg.TAB_WIDTH-b.x,this.Blockly_.BlockSvg.SEP_SPACE_Y-b.y);goog.style.setElementShown(this.errorMessageSpan_,!1);goog.style.setElementShown(this.messageSpan_,!1);goog.style.setElementShown(this.blocklyContainer_,!0)}else setTimeout(goog.bind(this.showValue,
this),200)};
Ray.UI.ResultsBox.prototype.getPrimitiveDataBlockFromValue=function(a){var b=null;switch(Ray.Runtime.valueType(a)){case Ray.Globals.Values.Boolean:case Ray.Globals.Values.Num:case Ray.Globals.Values.Str:case Ray.Globals.Values.Char:b=Ray.UI.ResultsBox.getTypeFromValue(a);b=Ray.Shared.getSavedBlock(Ray.Blocks.primitiveDataBlockName(b.display()));break;default:throw"No primitive data block for this kind of value";}if(!b)throw"No prototype found!";b=new this.Blockly_.Block(this.Blockly_.mainWorkspace,b);
switch(Ray.Runtime.valueType(a)){case Ray.Globals.Values.Boolean:b.getTitle_("B").setValue(a.b?"TRUE":"FALSE");break;case Ray.Globals.Values.Num:b.getTitle_("N").setText(a.n.toString());break;case Ray.Globals.Values.Str:b.getTitle_("S").setText(a.s);break;case Ray.Globals.Values.Char:b.getTitle_("C").setText(a.c);break;default:throw"Unknown value type";}return b};
Ray.UI.ResultsBox.getTypeFromValue=function(a){switch(Ray.Runtime.valueType(a)){case Ray.Globals.Values.Boolean:return new Ray.Types.Boolean;case Ray.Globals.Values.Num:return new Ray.Types.Num;case Ray.Globals.Values.Str:return new Ray.Types.Str;case Ray.Globals.Values.Char:return new Ray.Types.Char;default:throw"No type found for this value!";}};goog.ui.TabBarRenderer=function(){goog.ui.ContainerRenderer.call(this)};goog.inherits(goog.ui.TabBarRenderer,goog.ui.ContainerRenderer);goog.addSingletonGetter(goog.ui.TabBarRenderer);goog.ui.TabBarRenderer.CSS_CLASS="goog-tab-bar";goog.ui.TabBarRenderer.prototype.getCssClass=function(){return goog.ui.TabBarRenderer.CSS_CLASS};goog.ui.TabBarRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.TAB_LIST};
goog.ui.TabBarRenderer.prototype.setStateFromClassName=function(a,b,c){this.locationByClass_||this.createLocationByClassMap_();var d=this.locationByClass_[b];d?a.setLocation(d):goog.ui.TabBarRenderer.superClass_.setStateFromClassName.call(this,a,b,c)};goog.ui.TabBarRenderer.prototype.getClassNames=function(a){var b=goog.ui.TabBarRenderer.superClass_.getClassNames.call(this,a);this.classByLocation_||this.createClassByLocationMap_();b.push(this.classByLocation_[a.getLocation()]);return b};
goog.ui.TabBarRenderer.prototype.createClassByLocationMap_=function(){var a=this.getCssClass();this.classByLocation_=goog.object.create(goog.ui.TabBar.Location.TOP,a+"-top",goog.ui.TabBar.Location.BOTTOM,a+"-bottom",goog.ui.TabBar.Location.START,a+"-start",goog.ui.TabBar.Location.END,a+"-end")};goog.ui.TabBarRenderer.prototype.createLocationByClassMap_=function(){this.classByLocation_||this.createClassByLocationMap_();this.locationByClass_=goog.object.transpose(this.classByLocation_)};goog.ui.TabBar=function(a,b,c){this.setLocation(a||goog.ui.TabBar.Location.TOP);goog.ui.Container.call(this,this.getOrientation(),b||goog.ui.TabBarRenderer.getInstance(),c);this.listenToTabEvents_()};goog.inherits(goog.ui.TabBar,goog.ui.Container);goog.ui.TabBar.Location={TOP:"top",BOTTOM:"bottom",START:"start",END:"end"};goog.ui.TabBar.prototype.autoSelectTabs_=!0;goog.ui.TabBar.prototype.selectedTab_=null;
goog.ui.TabBar.prototype.enterDocument=function(){goog.ui.TabBar.superClass_.enterDocument.call(this);this.listenToTabEvents_()};goog.ui.TabBar.prototype.disposeInternal=function(){goog.ui.TabBar.superClass_.disposeInternal.call(this);this.selectedTab_=null};goog.ui.TabBar.prototype.removeChild=function(a,b){this.deselectIfSelected(a);return goog.ui.TabBar.superClass_.removeChild.call(this,a,b)};goog.ui.TabBar.prototype.getLocation=function(){return this.location_};
goog.ui.TabBar.prototype.setLocation=function(a){this.setOrientation(goog.ui.TabBar.getOrientationFromLocation(a));this.location_=a};goog.ui.TabBar.prototype.isAutoSelectTabs=function(){return this.autoSelectTabs_};goog.ui.TabBar.prototype.setAutoSelectTabs=function(a){this.autoSelectTabs_=a};goog.ui.TabBar.prototype.setHighlightedIndexFromKeyEvent=function(a){goog.ui.TabBar.superClass_.setHighlightedIndexFromKeyEvent.call(this,a);this.autoSelectTabs_&&this.setSelectedTabIndex(a)};
goog.ui.TabBar.prototype.getSelectedTab=function(){return this.selectedTab_};goog.ui.TabBar.prototype.setSelectedTab=function(a){a?a.setSelected(!0):this.getSelectedTab()&&this.getSelectedTab().setSelected(!1)};goog.ui.TabBar.prototype.getSelectedTabIndex=function(){return this.indexOfChild(this.getSelectedTab())};goog.ui.TabBar.prototype.setSelectedTabIndex=function(a){this.setSelectedTab(this.getChildAt(a))};
goog.ui.TabBar.prototype.deselectIfSelected=function(a){if(a&&a==this.getSelectedTab()){for(var b=this.indexOfChild(a),c=b-1;a=this.getChildAt(c);c--)if(this.isSelectableTab(a)){this.setSelectedTab(a);return}for(b+=1;a=this.getChildAt(b);b++)if(this.isSelectableTab(a)){this.setSelectedTab(a);return}this.setSelectedTab(null)}};goog.ui.TabBar.prototype.isSelectableTab=function(a){return a.isVisible()&&a.isEnabled()};
goog.ui.TabBar.prototype.handleTabSelect=function(a){this.selectedTab_&&this.selectedTab_!=a.target&&this.selectedTab_.setSelected(!1);this.selectedTab_=a.target};goog.ui.TabBar.prototype.handleTabUnselect=function(a){a.target==this.selectedTab_&&(this.selectedTab_=null)};goog.ui.TabBar.prototype.handleTabDisable=function(a){this.deselectIfSelected(a.target)};goog.ui.TabBar.prototype.handleTabHide=function(a){this.deselectIfSelected(a.target)};
goog.ui.TabBar.prototype.handleFocus=function(a){this.getHighlighted()||this.setHighlighted(this.getSelectedTab()||this.getChildAt(0))};goog.ui.TabBar.prototype.listenToTabEvents_=function(){this.getHandler().listen(this,goog.ui.Component.EventType.SELECT,this.handleTabSelect).listen(this,goog.ui.Component.EventType.UNSELECT,this.handleTabUnselect).listen(this,goog.ui.Component.EventType.DISABLE,this.handleTabDisable).listen(this,goog.ui.Component.EventType.HIDE,this.handleTabHide)};
goog.ui.TabBar.getOrientationFromLocation=function(a){return a==goog.ui.TabBar.Location.START||a==goog.ui.TabBar.Location.END?goog.ui.Container.Orientation.VERTICAL:goog.ui.Container.Orientation.HORIZONTAL};goog.ui.registry.setDecoratorByClassName(goog.ui.TabBarRenderer.CSS_CLASS,function(){return new goog.ui.TabBar});goog.net={};goog.net.ErrorCode={NO_ERROR:0,ACCESS_DENIED:1,FILE_NOT_FOUND:2,FF_SILENT_ERROR:3,CUSTOM_ERROR:4,EXCEPTION:5,HTTP_ERROR:6,ABORT:7,TIMEOUT:8,OFFLINE:9};
goog.net.ErrorCode.getDebugMessage=function(a){switch(a){case goog.net.ErrorCode.NO_ERROR:return"No Error";case goog.net.ErrorCode.ACCESS_DENIED:return"Access denied to content document";case goog.net.ErrorCode.FILE_NOT_FOUND:return"File not found";case goog.net.ErrorCode.FF_SILENT_ERROR:return"Firefox silently errored";case goog.net.ErrorCode.CUSTOM_ERROR:return"Application custom error";case goog.net.ErrorCode.EXCEPTION:return"An exception occurred";case goog.net.ErrorCode.HTTP_ERROR:return"Http response at 400 or 500 level";
case goog.net.ErrorCode.ABORT:return"Request was aborted";case goog.net.ErrorCode.TIMEOUT:return"Request timed out";case goog.net.ErrorCode.OFFLINE:return"The resource is not available offline";default:return"Unrecognized error code"}};goog.net.HttpStatus={CONTINUE:100,SWITCHING_PROTOCOLS:101,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFORMATION:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,USE_PROXY:305,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,
PRECONDITION_FAILED:412,REQUEST_ENTITY_TOO_LARGE:413,REQUEST_URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,REQUEST_RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,QUIRK_IE_NO_CONTENT:1223};
goog.net.HttpStatus.isSuccess=function(a){switch(a){case goog.net.HttpStatus.OK:case goog.net.HttpStatus.CREATED:case goog.net.HttpStatus.ACCEPTED:case goog.net.HttpStatus.NO_CONTENT:case goog.net.HttpStatus.PARTIAL_CONTENT:case goog.net.HttpStatus.NOT_MODIFIED:case goog.net.HttpStatus.QUIRK_IE_NO_CONTENT:return!0;default:return!1}};goog.json={};goog.json.isValid_=function(a){return/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))};goog.json.parse=function(a){a=String(a);if(goog.json.isValid_(a))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};goog.json.unsafeParse=function(a){return eval("("+a+")")};
goog.json.serialize=function(a,b){return(new goog.json.Serializer(b)).serialize(a)};goog.json.Serializer=function(a){this.replacer_=a};goog.json.Serializer.prototype.serialize=function(a){var b=[];this.serialize_(a,b);return b.join("")};
goog.json.Serializer.prototype.serialize_=function(a,b){switch(typeof a){case "string":this.serializeString_(a,b);break;case "number":this.serializeNumber_(a,b);break;case "boolean":b.push(a);break;case "undefined":b.push("null");break;case "object":if(null==a){b.push("null");break}if(goog.isArray(a)){this.serializeArray(a,b);break}this.serializeObject_(a,b);break;case "function":break;default:throw Error("Unknown type: "+typeof a);}};
goog.json.Serializer.charToJsonCharCache_={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"};goog.json.Serializer.charsToReplace_=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
goog.json.Serializer.prototype.serializeString_=function(a,b){b.push('"',a.replace(goog.json.Serializer.charsToReplace_,function(a){if(a in goog.json.Serializer.charToJsonCharCache_)return goog.json.Serializer.charToJsonCharCache_[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return goog.json.Serializer.charToJsonCharCache_[a]=e+b.toString(16)}),'"')};goog.json.Serializer.prototype.serializeNumber_=function(a,b){b.push(isFinite(a)&&!isNaN(a)?a:"null")};
goog.json.Serializer.prototype.serializeArray=function(a,b){var c=a.length;b.push("[");for(var d="",e=0;e<c;e++)b.push(d),d=a[e],this.serialize_(this.replacer_?this.replacer_.call(a,String(e),d):d,b),d=",";b.push("]")};
goog.json.Serializer.prototype.serializeObject_=function(a,b){b.push("{");var c="",d;for(d in a)if(Object.prototype.hasOwnProperty.call(a,d)){var e=a[d];"function"!=typeof e&&(b.push(c),this.serializeString_(d,b),b.push(":"),this.serialize_(this.replacer_?this.replacer_.call(a,d,e):e,b),c=",")}b.push("}")};goog.net.XmlHttpFactory=function(){};goog.net.XmlHttpFactory.prototype.cachedOptions_=null;goog.net.XmlHttpFactory.prototype.getOptions=function(){return this.cachedOptions_||(this.cachedOptions_=this.internalGetOptions())};goog.net.WrapperXmlHttpFactory=function(a,b){goog.net.XmlHttpFactory.call(this);this.xhrFactory_=a;this.optionsFactory_=b};goog.inherits(goog.net.WrapperXmlHttpFactory,goog.net.XmlHttpFactory);goog.net.WrapperXmlHttpFactory.prototype.createInstance=function(){return this.xhrFactory_()};goog.net.WrapperXmlHttpFactory.prototype.getOptions=function(){return this.optionsFactory_()};goog.net.XmlHttp=function(){return goog.net.XmlHttp.factory_.createInstance()};goog.net.XmlHttp.ASSUME_NATIVE_XHR=!1;goog.net.XmlHttp.getOptions=function(){return goog.net.XmlHttp.factory_.getOptions()};goog.net.XmlHttp.OptionType={USE_NULL_FUNCTION:0,LOCAL_REQUEST_ERROR:1};goog.net.XmlHttp.ReadyState={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETE:4};goog.net.XmlHttp.setFactory=function(a,b){goog.net.XmlHttp.setGlobalFactory(new goog.net.WrapperXmlHttpFactory(a,b))};
goog.net.XmlHttp.setGlobalFactory=function(a){goog.net.XmlHttp.factory_=a};goog.net.DefaultXmlHttpFactory=function(){goog.net.XmlHttpFactory.call(this)};goog.inherits(goog.net.DefaultXmlHttpFactory,goog.net.XmlHttpFactory);goog.net.DefaultXmlHttpFactory.prototype.createInstance=function(){var a=this.getProgId_();return a?new ActiveXObject(a):new XMLHttpRequest};
goog.net.DefaultXmlHttpFactory.prototype.internalGetOptions=function(){var a={};this.getProgId_()&&(a[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]=!0,a[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]=!0);return a};
goog.net.DefaultXmlHttpFactory.prototype.getProgId_=function(){if(goog.net.XmlHttp.ASSUME_NATIVE_XHR)return"";if(!this.ieProgId_&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],b=0;b<a.length;b++){var c=a[b];try{return new ActiveXObject(c),this.ieProgId_=c}catch(d){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return this.ieProgId_};
goog.net.XmlHttp.setGlobalFactory(new goog.net.DefaultXmlHttpFactory);goog.net.EventType={COMPLETE:"complete",SUCCESS:"success",ERROR:"error",ABORT:"abort",READY:"ready",READY_STATE_CHANGE:"readystatechange",TIMEOUT:"timeout",INCREMENTAL_DATA:"incrementaldata",PROGRESS:"progress"};goog.net.XhrIo=function(a){goog.events.EventTarget.call(this);this.headers=new goog.structs.Map;this.xmlHttpFactory_=a||null;this.active_=!1;this.xhrOptions_=this.xhr_=null;this.lastMethod_=this.lastUri_="";this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.lastError_="";this.inAbort_=this.inOpen_=this.inSend_=this.errorDispatched_=!1;this.timeoutInterval_=0;this.timeoutId_=null;this.responseType_=goog.net.XhrIo.ResponseType.DEFAULT;this.useXhr2Timeout_=this.withCredentials_=!1};
goog.inherits(goog.net.XhrIo,goog.events.EventTarget);goog.net.XhrIo.ResponseType={DEFAULT:"",TEXT:"text",DOCUMENT:"document",BLOB:"blob",ARRAY_BUFFER:"arraybuffer"};goog.net.XhrIo.prototype.logger_=goog.log.getLogger("goog.net.XhrIo");goog.net.XhrIo.CONTENT_TYPE_HEADER="Content-Type";goog.net.XhrIo.HTTP_SCHEME_PATTERN=/^https?$/i;goog.net.XhrIo.METHODS_WITH_FORM_DATA=["POST","PUT"];goog.net.XhrIo.FORM_CONTENT_TYPE="application/x-www-form-urlencoded;charset=utf-8";goog.net.XhrIo.XHR2_TIMEOUT_="timeout";
goog.net.XhrIo.XHR2_ON_TIMEOUT_="ontimeout";goog.net.XhrIo.sendInstances_=[];goog.net.XhrIo.send=function(a,b,c,d,e,f,g){var k=new goog.net.XhrIo;goog.net.XhrIo.sendInstances_.push(k);b&&k.listen(goog.net.EventType.COMPLETE,b);k.listenOnce(goog.net.EventType.READY,k.cleanupSend_);f&&k.setTimeoutInterval(f);g&&k.setWithCredentials(g);k.send(a,c,d,e)};goog.net.XhrIo.cleanup=function(){for(var a=goog.net.XhrIo.sendInstances_;a.length;)a.pop().dispose()};
goog.net.XhrIo.protectEntryPoints=function(a){goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=a.protectEntryPoint(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_)};goog.net.XhrIo.prototype.cleanupSend_=function(){this.dispose();goog.array.remove(goog.net.XhrIo.sendInstances_,this)};goog.net.XhrIo.prototype.getTimeoutInterval=function(){return this.timeoutInterval_};goog.net.XhrIo.prototype.setTimeoutInterval=function(a){this.timeoutInterval_=Math.max(0,a)};
goog.net.XhrIo.prototype.setResponseType=function(a){this.responseType_=a};goog.net.XhrIo.prototype.getResponseType=function(){return this.responseType_};goog.net.XhrIo.prototype.setWithCredentials=function(a){this.withCredentials_=a};goog.net.XhrIo.prototype.getWithCredentials=function(){return this.withCredentials_};
goog.net.XhrIo.prototype.send=function(a,b,c,d){if(this.xhr_)throw Error("[goog.net.XhrIo] Object is active with another request="+this.lastUri_+"; newUri="+a);b=b?b.toUpperCase():"GET";this.lastUri_=a;this.lastError_="";this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.lastMethod_=b;this.errorDispatched_=!1;this.active_=!0;this.xhr_=this.createXhr();this.xhrOptions_=this.xmlHttpFactory_?this.xmlHttpFactory_.getOptions():goog.net.XmlHttp.getOptions();this.xhr_.onreadystatechange=goog.bind(this.onReadyStateChange_,
this);try{goog.log.fine(this.logger_,this.formatMsg_("Opening Xhr")),this.inOpen_=!0,this.xhr_.open(b,a,!0),this.inOpen_=!1}catch(e){goog.log.fine(this.logger_,this.formatMsg_("Error opening Xhr: "+e.message));this.error_(goog.net.ErrorCode.EXCEPTION,e);return}a=c||"";var f=this.headers.clone();d&&goog.structs.forEach(d,function(a,b){f.set(b,a)});d=goog.array.find(f.getKeys(),goog.net.XhrIo.isContentTypeHeader_);c=goog.global.FormData&&a instanceof goog.global.FormData;goog.array.contains(goog.net.XhrIo.METHODS_WITH_FORM_DATA,
b)&&(!d&&!c)&&f.set(goog.net.XhrIo.CONTENT_TYPE_HEADER,goog.net.XhrIo.FORM_CONTENT_TYPE);goog.structs.forEach(f,function(a,b){this.xhr_.setRequestHeader(b,a)},this);this.responseType_&&(this.xhr_.responseType=this.responseType_);goog.object.containsKey(this.xhr_,"withCredentials")&&(this.xhr_.withCredentials=this.withCredentials_);try{this.cleanUpTimeoutTimer_(),0<this.timeoutInterval_&&(this.useXhr2Timeout_=goog.net.XhrIo.shouldUseXhr2Timeout_(this.xhr_),goog.log.fine(this.logger_,this.formatMsg_("Will abort after "+
this.timeoutInterval_+"ms if incomplete, xhr2 "+this.useXhr2Timeout_)),this.useXhr2Timeout_?(this.xhr_[goog.net.XhrIo.XHR2_TIMEOUT_]=this.timeoutInterval_,this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_]=goog.bind(this.timeout_,this)):this.timeoutId_=goog.Timer.callOnce(this.timeout_,this.timeoutInterval_,this)),goog.log.fine(this.logger_,this.formatMsg_("Sending request")),this.inSend_=!0,this.xhr_.send(a),this.inSend_=!1}catch(g){goog.log.fine(this.logger_,this.formatMsg_("Send error: "+g.message)),this.error_(goog.net.ErrorCode.EXCEPTION,
g)}};goog.net.XhrIo.shouldUseXhr2Timeout_=function(a){return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher(9)&&goog.isNumber(a[goog.net.XhrIo.XHR2_TIMEOUT_])&&goog.isDef(a[goog.net.XhrIo.XHR2_ON_TIMEOUT_])};goog.net.XhrIo.isContentTypeHeader_=function(a){return goog.string.caseInsensitiveEquals(goog.net.XhrIo.CONTENT_TYPE_HEADER,a)};goog.net.XhrIo.prototype.createXhr=function(){return this.xmlHttpFactory_?this.xmlHttpFactory_.createInstance():goog.net.XmlHttp()};
goog.net.XhrIo.prototype.timeout_=function(){"undefined"!=typeof goog&&this.xhr_&&(this.lastError_="Timed out after "+this.timeoutInterval_+"ms, aborting",this.lastErrorCode_=goog.net.ErrorCode.TIMEOUT,goog.log.fine(this.logger_,this.formatMsg_(this.lastError_)),this.dispatchEvent(goog.net.EventType.TIMEOUT),this.abort(goog.net.ErrorCode.TIMEOUT))};
goog.net.XhrIo.prototype.error_=function(a,b){this.active_=!1;this.xhr_&&(this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1);this.lastError_=b;this.lastErrorCode_=a;this.dispatchErrors_();this.cleanUpXhr_()};goog.net.XhrIo.prototype.dispatchErrors_=function(){this.errorDispatched_||(this.errorDispatched_=!0,this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.ERROR))};
goog.net.XhrIo.prototype.abort=function(a){this.xhr_&&this.active_&&(goog.log.fine(this.logger_,this.formatMsg_("Aborting")),this.active_=!1,this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1,this.lastErrorCode_=a||goog.net.ErrorCode.ABORT,this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.ABORT),this.cleanUpXhr_())};
goog.net.XhrIo.prototype.disposeInternal=function(){this.xhr_&&(this.active_&&(this.active_=!1,this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1),this.cleanUpXhr_(!0));goog.net.XhrIo.superClass_.disposeInternal.call(this)};goog.net.XhrIo.prototype.onReadyStateChange_=function(){if(!this.isDisposed())if(!this.inOpen_&&!this.inSend_&&!this.inAbort_)this.onReadyStateChangeEntryPoint_();else this.onReadyStateChangeHelper_()};goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=function(){this.onReadyStateChangeHelper_()};
goog.net.XhrIo.prototype.onReadyStateChangeHelper_=function(){if(this.active_&&"undefined"!=typeof goog)if(this.xhrOptions_[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]&&this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE&&2==this.getStatus())goog.log.fine(this.logger_,this.formatMsg_("Local request error detected and ignored"));else if(this.inSend_&&this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE)goog.Timer.callOnce(this.onReadyStateChange_,0,this);else if(this.dispatchEvent(goog.net.EventType.READY_STATE_CHANGE),
this.isComplete()){goog.log.fine(this.logger_,this.formatMsg_("Request complete"));this.active_=!1;try{this.isSuccess()?(this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.SUCCESS)):(this.lastErrorCode_=goog.net.ErrorCode.HTTP_ERROR,this.lastError_=this.getStatusText()+" ["+this.getStatus()+"]",this.dispatchErrors_())}finally{this.cleanUpXhr_()}}};
goog.net.XhrIo.prototype.cleanUpXhr_=function(a){if(this.xhr_){this.cleanUpTimeoutTimer_();var b=this.xhr_,c=this.xhrOptions_[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]?goog.nullFunction:null;this.xhrOptions_=this.xhr_=null;a||this.dispatchEvent(goog.net.EventType.READY);try{b.onreadystatechange=c}catch(d){goog.log.error(this.logger_,"Problem encountered resetting onreadystatechange: "+d.message)}}};
goog.net.XhrIo.prototype.cleanUpTimeoutTimer_=function(){this.xhr_&&this.useXhr2Timeout_&&(this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_]=null);goog.isNumber(this.timeoutId_)&&(goog.Timer.clear(this.timeoutId_),this.timeoutId_=null)};goog.net.XhrIo.prototype.isActive=function(){return!!this.xhr_};goog.net.XhrIo.prototype.isComplete=function(){return this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE};
goog.net.XhrIo.prototype.isSuccess=function(){var a=this.getStatus();return goog.net.HttpStatus.isSuccess(a)||0===a&&!this.isLastUriEffectiveSchemeHttp_()};goog.net.XhrIo.prototype.isLastUriEffectiveSchemeHttp_=function(){var a=goog.uri.utils.getEffectiveScheme(String(this.lastUri_));return goog.net.XhrIo.HTTP_SCHEME_PATTERN.test(a)};goog.net.XhrIo.prototype.getReadyState=function(){return this.xhr_?this.xhr_.readyState:goog.net.XmlHttp.ReadyState.UNINITIALIZED};
goog.net.XhrIo.prototype.getStatus=function(){try{return this.getReadyState()>goog.net.XmlHttp.ReadyState.LOADED?this.xhr_.status:-1}catch(a){return goog.log.warning(this.logger_,"Can not get status: "+a.message),-1}};goog.net.XhrIo.prototype.getStatusText=function(){try{return this.getReadyState()>goog.net.XmlHttp.ReadyState.LOADED?this.xhr_.statusText:""}catch(a){return goog.log.fine(this.logger_,"Can not get status: "+a.message),""}};goog.net.XhrIo.prototype.getLastUri=function(){return String(this.lastUri_)};
goog.net.XhrIo.prototype.getResponseText=function(){try{return this.xhr_?this.xhr_.responseText:""}catch(a){return goog.log.fine(this.logger_,"Can not get responseText: "+a.message),""}};goog.net.XhrIo.prototype.getResponseBody=function(){try{if(this.xhr_&&"responseBody"in this.xhr_)return this.xhr_.responseBody}catch(a){goog.log.fine(this.logger_,"Can not get responseBody: "+a.message)}return null};
goog.net.XhrIo.prototype.getResponseXml=function(){try{return this.xhr_?this.xhr_.responseXML:null}catch(a){return goog.log.fine(this.logger_,"Can not get responseXML: "+a.message),null}};goog.net.XhrIo.prototype.getResponseJson=function(a){if(this.xhr_){var b=this.xhr_.responseText;a&&0==b.indexOf(a)&&(b=b.substring(a.length));return goog.json.parse(b)}};
goog.net.XhrIo.prototype.getResponse=function(){try{if(!this.xhr_)return null;if("response"in this.xhr_)return this.xhr_.response;switch(this.responseType_){case goog.net.XhrIo.ResponseType.DEFAULT:case goog.net.XhrIo.ResponseType.TEXT:return this.xhr_.responseText;case goog.net.XhrIo.ResponseType.ARRAY_BUFFER:if("mozResponseArrayBuffer"in this.xhr_)return this.xhr_.mozResponseArrayBuffer}goog.log.error(this.logger_,"Response type "+this.responseType_+" is not supported on this browser");return null}catch(a){return goog.log.fine(this.logger_,
"Can not get response: "+a.message),null}};goog.net.XhrIo.prototype.getResponseHeader=function(a){return this.xhr_&&this.isComplete()?this.xhr_.getResponseHeader(a):void 0};goog.net.XhrIo.prototype.getAllResponseHeaders=function(){return this.xhr_&&this.isComplete()?this.xhr_.getAllResponseHeaders():""};goog.net.XhrIo.prototype.getLastErrorCode=function(){return this.lastErrorCode_};goog.net.XhrIo.prototype.getLastError=function(){return goog.isString(this.lastError_)?this.lastError_:String(this.lastError_)};
goog.net.XhrIo.prototype.formatMsg_=function(a){return a+" ["+this.lastMethod_+" "+this.lastUri_+" "+this.getStatus()+"]"};goog.debug.entryPointRegistry.register(function(a){goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=a(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_)});Ray.UI.serialize=function(){console.log("Serializing!");var a=goog.dom.createDom("xml"),b=Blockly.Xml.workspaceToDom(Ray.Shared.MainBlockly.mainWorkspace);goog.dom.xml.setAttributes(b,{kind:"main"});goog.dom.appendChild(a,b);goog.array.forEach(Ray.Shared.FunDefBlocklys,function(b){var d=goog.dom.createDom("user_function");goog.dom.xml.setAttributes(d,{fun_id:String(b.funId)});var e=Ray.UserFun.funSpecToXml(b);goog.dom.appendChild(d,e);e=b.Xml.workspaceToDom(b.mainWorkspace);goog.dom.xml.setAttributes(e,
{kind:"user_function",fun_id:String(b.funId)});goog.dom.appendChild(d,e);goog.dom.appendChild(a,d)},this);console.log(a);return a};Ray.UI.loadXmlString=function(a){a=goog.dom.xml.loadXml(a);Ray.UI.deserialize(a.childNodes[0])};Ray.UI.toXmlString=function(){var a=Ray.UI.serialize();return goog.dom.xml.serialize(a)};
Ray.UI.deserialize=function(a){console.log("Deserializing");var b=goog.dom.getFirstElementChild(a);a=goog.array.toArray(goog.dom.getChildren(a)).slice(1);goog.array.forEach(a,function(a){if("user_function"!==a.tagName)throw"Unknown tag!";var b=Ray.UserFun.xmlToFunSpec(a.childNodes[0]);Ray.UI.createFunBlockly(b,a.childNodes[1])});Ray.Shared.MainBlockly.Xml.domToWorkspace(Ray.Shared.MainBlockly.mainWorkspace,b)};
Ray.UI.saveCurrentProgram=function(){var a=new goog.net.XhrIo,b=new goog.Uri.QueryData;b.add("source",Ray.UI.toXmlString());a.send("/","POST",b.toString())};Ray.UI.VISIBLE_CONTAINER_CLASS="container";Ray.UI.HIDDEN_CONTAINER_CLASS="hidden_container";Ray.UI.isDisplayedContainer=function(a){return goog.dom.classes.has(goog.dom.getParentElement(a),"container")};Ray.UI.mainDom=function(){return goog.dom.getElement("blockly_main")};
Ray.UI.resetTabBarPadding=function(){goog.style.setStyle(Ray.UI.tabBar.getContentElement(),"padding-top","")};Ray.UI.setTabBarPadding=function(a){goog.style.setStyle(Ray.UI.tabBar.getContentElement(),"paddingTop",a)};Ray.UI.getTabBarPadding=function(){return goog.style.getCascadedStyle(Ray.UI.tabBar.getContentElement(),"padding-top")};
Ray.UI.resizePage=function(){Ray.UI.resultsBox.resetSize();Ray.UI.resetTabBarPadding();var a=goog.dom.getElement("header-left").offsetHeight,b=goog.dom.getElement("header-right").offsetHeight,c=goog.dom.getElement("header-right").offsetWidth;a<=b?Ray.UI.setTabBarPadding(Ray.UI.getTabBarPadding()+(b-a)):(b=a-b,a=Ray.UI.resultsBox.getSize(),Ray.UI.resultsBox.setSize(a.width,a.height+b));a=Ray.UI.resultsBox.getSize();b=Ray.UI.resultsBox.getMarginWidth();Ray.UI.resultsBox.setSize(c-b,a.height);goog.style.setHeight(Ray.UI.workspaceContainer,
window.innerHeight-Ray.UI.header.offsetHeight)};Ray.UI.setupResizeListener=function(){goog.events.listen(window,goog.events.EventType.RESIZE,Ray.UI.resizePage)};Ray.UI.saveWorkspaceHeaderTabsContainer=function(a,b,c){Ray.UI.header=a;Ray.UI.tabs=b;Ray.UI.workspaceContainer=c};
Ray.UI.setupTabBar=function(a,b){var c=new goog.ui.TabBar;c.decorate(goog.dom.getElement(a));c.getSelectedTab().workspaceId_=b;Ray.UI.mainBlocklyTabId=b;Ray.UI.tabBar=c;Ray.UI.mainTab=c.getSelectedTab();Ray.UI.currentTab=c.getSelectedTab();return c};Ray.UI.setMainBlockly=function(a){Ray.UI.mainTab.Blockly=a;Ray.UI.runButton.watchMainWorkspace(Ray.UI.mainTab)};
Ray.UI.listenForTabChanges=function(){goog.events.listen(Ray.UI.tabBar,goog.ui.Component.EventType.SELECT,function(a){Ray.UI.selectTab(a.target)});goog.events.listen(Ray.UI.tabBar,goog.ui.Component.EventType.UNSELECT,function(a){Ray.UI.deselectTab(a.target)})};Ray.UI.setupFunDefDialog=function(a){a=Ray.UI.FunDef.makeDialog(a);a.createDom();a.testPopulate_();return Ray.UI.funDefDialog=a};Ray.UI.setupDialogCreateFunListener=function(){Ray.UI.funDefDialog.onCreate(Ray.UI.createFunBlockly)};
Ray.UI.setupCreateFunButton=function(a){var b=new goog.ui.Button(void 0,goog.ui.FlatButtonRenderer.getInstance());b.decorate(a);b.setContent(Ray.UI.Util.CREATE_FUN_BUTTON_TEXT);b.setTooltip(Ray.UI.Util.CREATE_FUN_BUTTON_TOOLTIP);goog.events.listen(b,goog.ui.Component.EventType.ACTION,function(a){Ray.UI.funDefDialog.asCreate();Ray.UI.funDefDialog.setVisible(!0)});return Ray.UI.createFunButton=b};
Ray.UI.setupRunButton=function(a){a=new Ray.UI.RunButton(a);Ray.UI.runButton=a;goog.events.listen(Ray.UI.runButton,goog.ui.Component.EventType.ACTION,function(a){Ray.UI.Util.isMainWorkspaceOpen()?(a=Ray.Evaluation.checkAllAndEval(Ray.UI.runButton),a.error_?Ray.UI.resultsBox.showError(a):Ray.UI.resultsBox.showValue(a)):(a=Ray.UI.tabBar.getSelectedTab().Blockly,Ray.Evaluation.checkFunTab(Ray.UI.runButton,a))});return a};
Ray.UI.setupLogoutButton=function(a){var b=new goog.ui.Button(void 0,goog.ui.FlatButtonRenderer.getInstance());b.decorate(a);b.logoutUrl=goog.dom.dataset.get(a,"logoutUrl");goog.events.listen(b,goog.ui.Component.EventType.ACTION,function(a){console.log("logging out!");Ray.UI.saveCurrentProgram();window.location=b.logoutUrl})};Ray.UI.setupResultsBox=function(a){a=new Ray.UI.ResultsBox(a);return Ray.UI.resultsBox=a};
Ray.UI.switchDisplayedWorkspace=function(a,b){goog.dom.classes.swap(goog.dom.getParentElement(a),Ray.UI.VISIBLE_CONTAINER_CLASS,Ray.UI.HIDDEN_CONTAINER_CLASS);goog.dom.classes.swap(goog.dom.getParentElement(b),Ray.UI.HIDDEN_CONTAINER_CLASS,Ray.UI.VISIBLE_CONTAINER_CLASS)};
Ray.UI.selectTab=function(a){Ray.UI.currentTab=a;var b=a.workspaceId_,c=goog.dom.getChildren(Ray.UI.workspaceContainer);goog.array.forEach(c,function(a){goog.dom.getFirstElementChild(a).id===b?goog.dom.classes.swap(a,Ray.UI.HIDDEN_CONTAINER_CLASS,Ray.UI.VISIBLE_CONTAINER_CLASS):goog.dom.classes.swap(a,Ray.UI.VISIBLE_CONTAINER_CLASS,Ray.UI.HIDDEN_CONTAINER_CLASS)});a.activate&&a.activate()};Ray.UI.deselectTab=function(a){a.deactivate&&a.deactivate()};
Ray.UI.loadMainBlockly=function(a,b){b&&(window._loadString=b);goog.dom.setProperties(a,{src:Ray.UI.Util.DIRECTORY_PREFIX+"main_blockly.html"})};Ray.UI.loadFunDefBlockly=function(a,b,c){c&&(window._initialWorkspaceXml=c);window._funDefInfo=b;goog.dom.setProperties(a,{src:Ray.UI.Util.DIRECTORY_PREFIX+"fun_def_blockly.html"})};
Ray.UI.initializeFunDefBlocklyDom=function(){var a=goog.dom.createDom("div",Ray.UI.HIDDEN_CONTAINER_CLASS,goog.dom.createDom("iframe",{id:Ray.UI.Util.FUN_DEF_BLOCKLY_ID,src:"Javascript:''"}));goog.dom.appendChild(document.body,a)};Ray.UI.addFunDefWorkspaceDom=function(a){var b=goog.dom.createDom("div","hidden_container");a=goog.dom.createDom("iframe",{id:Ray.UI.Util.funDefDomId(a),src:"Javascript:''"});goog.dom.appendChild(b,a);goog.dom.appendChild(Ray.UI.workspaceContainer,b);return a};
Ray.UI.funDefCount_=0;Ray.UI.getFunId=function(){return Ray.UI.funDefCount_++};Ray.UI.addFunDefWorkspaceTab=function(a){var b=Ray.Shared.lookupFunDefBlockly(a);a=new Ray.UI.FunTab(b);Ray.UI.tabBar.addChild(a,!0);b.funDefTab=a;a.onEdit(function(a){Ray.UI.openFunDefEditor(b)});Ray.UI.resizePage();return a};
Ray.UI.removeFunDef=function(a,b){b.getParent().removeChild(b,!0);b.dispose();var c=goog.dom.getElement(Ray.UI.Util.funDefDomId(a));Ray.UI.isDisplayedContainer(c)&&Ray.UI.switchDisplayedWorkspace(c,Ray.UI.mainDom());goog.dom.removeNode(goog.dom.getParentElement(c))};
Ray.UI.openFunDefEditor=function(a){var b=Ray.UI.dialog;b.asEdit();b.onApplyChanges(function(b){console.log("'Apply changes' clicked!");b=this.getFunSpec();Ray.Shared.applyFunDefChanges(a.funId,b)});b.onDelete(function(b){console.log("'Delete' clicked!");Ray.UI.currentTab===a.funDefTab&&Ray.UI.currentTab.stopPollingForStatus();Ray.Shared.destroyFunGlobally(a,a.funId);Ray.UI.removeFunDef(a.funId,a.funDefTab)});b.setFunSpec(a.funSpec);b.setVisible(!0)};
Ray.UI.createFunBlockly=function(a,b){a.funId=Ray.UI.getFunId();var c=Ray.UserFun.makeFunAppAndArgBlocks(a),d=c.args,c=c.app;Ray.Shared.addToSavedBlocks(c);var e=Ray.UI.addFunDefWorkspaceDom(a.funId);Ray.UI.loadFunDefBlockly(e,{funId:a.funId,funArgBlockProtos:d,funAppBlockProto:c,funName:a.name,funSpec:a},b);Ray.UI.resizePage()};Ray.Main={};Ray.Main.runTest=function(){return Ray.Test()};Ray.Main.initializeLibrary=function(){Ray.Lib.initialize()};Ray.Main.blockToWorkspaceXml=function(a,b){var c=new Ray.Main.Block(a,b,!1),d=goog.dom.createDom("xml"),c=Blockly.Xml.blockToDom_(c);c.setAttribute("x",0);c.setAttribute("y",0);d.appendChild(c);return d};Ray.Main.blocksToXml=function(a){return goog.array.map(a,function(a){return'<block type="'+a+'"></block>'}).join("\n")};Ray.Main.createBlocks=function(){return Ray.Blocks.generateAllBlocks()};
Ray.Main.atomicTypeToTypeInstance=function(a){return new (Ray.Types.getAtomicType(a))};Ray.Main.getFunBlockName=function(a){return Ray.Blocks.blockName(a)};Ray.Main.getFunBlock=function(a,b){return b[Ray.Blocks.blockName(a)]};Ray.Main.setupLanguage=function(a,b){a.Language=goog.object.clone(b)};Ray.Main.setupToolbox=function(a,b){a.__toolbox__=Ray.Blocks.generateToolbox(b)};
Ray.Main.Block=function(a,b,c){this.previousConnection=this.nextConnection=this.outputConnection=null;this.inputList=[];this.inputsInline=!0;this.disabled=this.collapsed=this.rendered=!1;this.deletable=this.editable=c;this.tooltip="";this.contextMenu=!0;this.parentBlock_=null;this.childBlocks_=[];this.isInFlyout=!1;this.workspace=null;this.type=a;goog.mixin(this,b);goog.isFunction(this.init)&&this.init()};Ray.App={};
function loadPage(a){Ray.Main.initializeLibrary();var b=Ray.Main.createBlocks();Ray.Shared.setBlocks(b);Ray.Shared.attachToBlockly(Blockly);Ray.UI.setupFunDefDialog(goog.dom.getDomHelper(document.body));Ray.UI.setupTabBar("workspace_tabs","blockly_main");Ray.UI.saveWorkspaceHeaderTabsContainer(goog.dom.getElement("header"),goog.dom.getElement("workspace_tabs"),goog.dom.getElement("workspace_container"));Ray.UI.setupCreateFunButton(goog.dom.getElement("create_function_button"));Ray.UI.setupRunButton(goog.dom.getElement("run_button"));Ray.UI.setupLogoutButton(goog.dom.getElement("logout_button"));
Ray.UI.setupResultsBox(goog.dom.getElement("results_box"));Ray.UI.resizePage();Ray.UI.setupResizeListener();Ray.UI.setupDialogCreateFunListener();Ray.UI.listenForTabChanges();Ray.UI.loadMainBlockly(Ray.UI.Util.mainBlockly(),a);goog.events.listen(window,goog.events.EventType.BEFOREUNLOAD,function(a){return"If you leave the page, any unsaved programs will be lost!"})};
