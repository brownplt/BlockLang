Blockly.Ray=Blockly.Generator.get("Ray");Blockly.Ray.addReservedWords("Blockly,break,case,catch,continue,debugger,default,delete,do,else,finally,for,function,if,in,instanceof,new,return,switch,this,throw,try,typeof,var,void,while,with,class,enum,export,extends,import,super,implements,interface,let,package,private,protected,public,static,yield,const,null,true,false,Array,ArrayBuffer,Boolean,Date,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Error,eval,EvalError,Float32Array,Float64Array,Function,Infinity,Int16Array,Int32Array,Int8Array,isFinite,isNaN,Iterator,JSON,Math,NaN,Number,Object,parseFloat,parseInt,RangeError,ReferenceError,RegExp,StopIteration,String,SyntaxError,TypeError,Uint16Array,Uint32Array,Uint8Array,Uint8ClampedArray,undefined,uneval,URIError,applicationCache,closed,Components,content,_content,controllers,crypto,defaultStatus,dialogArguments,directories,document,frameElement,frames,fullScreen,globalStorage,history,innerHeight,innerWidth,length,location,locationbar,localStorage,menubar,messageManager,mozAnimationStartTime,mozInnerScreenX,mozInnerScreenY,mozPaintCount,name,navigator,opener,outerHeight,outerWidth,pageXOffset,pageYOffset,parent,performance,personalbar,pkcs11,returnValue,screen,screenX,screenY,scrollbars,scrollMaxX,scrollMaxY,scrollX,scrollY,self,sessionStorage,sidebar,status,statusbar,toolbar,top,URL,window,addEventListener,alert,atob,back,blur,btoa,captureEvents,clearImmediate,clearInterval,clearTimeout,close,confirm,disableExternalCapture,dispatchEvent,dump,enableExternalCapture,escape,find,focus,forward,GeckoActiveXObject,getAttention,getAttentionWithCycleCount,getComputedStyle,getSelection,home,matchMedia,maximize,minimize,moveBy,moveTo,mozRequestAnimationFrame,open,openDialog,postMessage,print,prompt,QueryInterface,releaseEvents,removeEventListener,resizeBy,resizeTo,restore,routeEvent,scroll,scrollBy,scrollByLines,scrollByPages,scrollTo,setCursor,setImmediate,setInterval,setResizable,setTimeout,showModalDialog,sizeToContent,stop,unescape,updateCommands,XPCNativeWrapper,XPCSafeJSObjectWrapper,onabort,onbeforeunload,onblur,onchange,onclick,onclose,oncontextmenu,ondevicemotion,ondeviceorientation,ondragdrop,onerror,onfocus,onhashchange,onkeydown,onkeypress,onkeyup,onload,onmousedown,onmousemove,onmouseout,onmouseover,onmouseup,onmozbeforepaint,onpaint,onpopstate,onreset,onresize,onscroll,onselect,onsubmit,onunload,onpageshow,onpagehide,Image,Option,Worker,Event,Range,File,FileReader,Blob,BlobBuilder,Attr,CDATASection,CharacterData,Comment,console,DocumentFragment,DocumentType,DomConfiguration,DOMError,DOMErrorHandler,DOMException,DOMImplementation,DOMImplementationList,DOMImplementationRegistry,DOMImplementationSource,DOMLocator,DOMObject,DOMString,DOMStringList,DOMTimeStamp,DOMUserData,Entity,EntityReference,MediaQueryList,MediaQueryListListener,NameList,NamedNodeMap,Node,NodeFilter,NodeIterator,NodeList,Notation,Plugin,PluginArray,ProcessingInstruction,SharedWorker,Text,TimeRanges,Treewalker,TypeInfo,UserDataHandler,Worker,WorkerGlobalScope,HTMLDocument,HTMLElement,HTMLAnchorElement,HTMLAppletElement,HTMLAudioElement,HTMLAreaElement,HTMLBaseElement,HTMLBaseFontElement,HTMLBodyElement,HTMLBRElement,HTMLButtonElement,HTMLCanvasElement,HTMLDirectoryElement,HTMLDivElement,HTMLDListElement,HTMLEmbedElement,HTMLFieldSetElement,HTMLFontElement,HTMLFormElement,HTMLFrameElement,HTMLFrameSetElement,HTMLHeadElement,HTMLHeadingElement,HTMLHtmlElement,HTMLHRElement,HTMLIFrameElement,HTMLImageElement,HTMLInputElement,HTMLKeygenElement,HTMLLabelElement,HTMLLIElement,HTMLLinkElement,HTMLMapElement,HTMLMenuElement,HTMLMetaElement,HTMLModElement,HTMLObjectElement,HTMLOListElement,HTMLOptGroupElement,HTMLOptionElement,HTMLOutputElement,HTMLParagraphElement,HTMLParamElement,HTMLPreElement,HTMLQuoteElement,HTMLScriptElement,HTMLSelectElement,HTMLSourceElement,HTMLSpanElement,HTMLStyleElement,HTMLTableElement,HTMLTableCaptionElement,HTMLTableCellElement,HTMLTableDataCellElement,HTMLTableHeaderCellElement,HTMLTableColElement,HTMLTableRowElement,HTMLTableSectionElement,HTMLTextAreaElement,HTMLTimeElement,HTMLTitleElement,HTMLTrackElement,HTMLUListElement,HTMLUnknownElement,HTMLVideoElement,HTMLCanvasElement,CanvasRenderingContext2D,CanvasGradient,CanvasPattern,TextMetrics,ImageData,CanvasPixelArray,HTMLAudioElement,HTMLVideoElement,NotifyAudioAvailableEvent,HTMLCollection,HTMLAllCollection,HTMLFormControlsCollection,HTMLOptionsCollection,HTMLPropertiesCollection,DOMTokenList,DOMSettableTokenList,DOMStringMap,RadioNodeList,SVGDocument,SVGElement,SVGAElement,SVGAltGlyphElement,SVGAltGlyphDefElement,SVGAltGlyphItemElement,SVGAnimationElement,SVGAnimateElement,SVGAnimateColorElement,SVGAnimateMotionElement,SVGAnimateTransformElement,SVGSetElement,SVGCircleElement,SVGClipPathElement,SVGColorProfileElement,SVGCursorElement,SVGDefsElement,SVGDescElement,SVGEllipseElement,SVGFilterElement,SVGFilterPrimitiveStandardAttributes,SVGFEBlendElement,SVGFEColorMatrixElement,SVGFEComponentTransferElement,SVGFECompositeElement,SVGFEConvolveMatrixElement,SVGFEDiffuseLightingElement,SVGFEDisplacementMapElement,SVGFEDistantLightElement,SVGFEFloodElement,SVGFEGaussianBlurElement,SVGFEImageElement,SVGFEMergeElement,SVGFEMergeNodeElement,SVGFEMorphologyElement,SVGFEOffsetElement,SVGFEPointLightElement,SVGFESpecularLightingElement,SVGFESpotLightElement,SVGFETileElement,SVGFETurbulenceElement,SVGComponentTransferFunctionElement,SVGFEFuncRElement,SVGFEFuncGElement,SVGFEFuncBElement,SVGFEFuncAElement,SVGFontElement,SVGFontFaceElement,SVGFontFaceFormatElement,SVGFontFaceNameElement,SVGFontFaceSrcElement,SVGFontFaceUriElement,SVGForeignObjectElement,SVGGElement,SVGGlyphElement,SVGGlyphRefElement,SVGGradientElement,SVGLinearGradientElement,SVGRadialGradientElement,SVGHKernElement,SVGImageElement,SVGLineElement,SVGMarkerElement,SVGMaskElement,SVGMetadataElement,SVGMissingGlyphElement,SVGMPathElement,SVGPathElement,SVGPatternElement,SVGPolylineElement,SVGPolygonElement,SVGRectElement,SVGScriptElement,SVGStopElement,SVGStyleElement,SVGSVGElement,SVGSwitchElement,SVGSymbolElement,SVGTextElement,SVGTextPathElement,SVGTitleElement,SVGTRefElement,SVGTSpanElement,SVGUseElement,SVGViewElement,SVGVKernElement,SVGAngle,SVGColor,SVGICCColor,SVGElementInstance,SVGElementInstanceList,SVGLength,SVGLengthList,SVGMatrix,SVGNumber,SVGNumberList,SVGPaint,SVGPoint,SVGPointList,SVGPreserveAspectRatio,SVGRect,SVGStringList,SVGTransform,SVGTransformList,SVGAnimatedAngle,SVGAnimatedBoolean,SVGAnimatedEnumeration,SVGAnimatedInteger,SVGAnimatedLength,SVGAnimatedLengthList,SVGAnimatedNumber,SVGAnimatedNumberList,SVGAnimatedPreserveAspectRatio,SVGAnimatedRect,SVGAnimatedString,SVGAnimatedTransformList,SVGPathSegList,SVGPathSeg,SVGPathSegArcAbs,SVGPathSegArcRel,SVGPathSegClosePath,SVGPathSegCurvetoCubicAbs,SVGPathSegCurvetoCubicRel,SVGPathSegCurvetoCubicSmoothAbs,SVGPathSegCurvetoCubicSmoothRel,SVGPathSegCurvetoQuadraticAbs,SVGPathSegCurvetoQuadraticRel,SVGPathSegCurvetoQuadraticSmoothAbs,SVGPathSegCurvetoQuadraticSmoothRel,SVGPathSegLinetoAbs,SVGPathSegLinetoHorizontalAbs,SVGPathSegLinetoHorizontalRel,SVGPathSegLinetoRel,SVGPathSegLinetoVerticalAbs,SVGPathSegLinetoVerticalRel,SVGPathSegMovetoAbs,SVGPathSegMovetoRel,ElementTimeControl,TimeEvent,SVGAnimatedPathData,SVGAnimatedPoints,SVGColorProfileRule,SVGCSSRule,SVGExternalResourcesRequired,SVGFitToViewBox,SVGLangSpace,SVGLocatable,SVGRenderingIntent,SVGStylable,SVGTests,SVGTextContentElement,SVGTextPositioningElement,SVGTransformable,SVGUnitTypes,SVGURIReference,SVGViewSpec,SVGZoomAndPan");
Blockly.Ray.ORDER_ATOMIC=0;Blockly.Ray.ORDER_MEMBER=1;Blockly.Ray.ORDER_NEW=1;Blockly.Ray.ORDER_FUNCTION_CALL=2;Blockly.Ray.ORDER_INCREMENT=3;Blockly.Ray.ORDER_DECREMENT=3;Blockly.Ray.ORDER_LOGICAL_NOT=4;Blockly.Ray.ORDER_BITWISE_NOT=4;Blockly.Ray.ORDER_UNARY_PLUS=4;Blockly.Ray.ORDER_UNARY_NEGATION=4;Blockly.Ray.ORDER_TYPEOF=4;Blockly.Ray.ORDER_VOID=4;Blockly.Ray.ORDER_DELETE=4;Blockly.Ray.ORDER_MULTIPLICATION=5;Blockly.Ray.ORDER_DIVISION=5;Blockly.Ray.ORDER_MODULUS=5;Blockly.Ray.ORDER_ADDITION=6;
Blockly.Ray.ORDER_SUBTRACTION=6;Blockly.Ray.ORDER_BITWISE_SHIFT=7;Blockly.Ray.ORDER_RELATIONAL=8;Blockly.Ray.ORDER_IN=8;Blockly.Ray.ORDER_INSTANCEOF=8;Blockly.Ray.ORDER_EQUALITY=9;Blockly.Ray.ORDER_BITWISE_AND=10;Blockly.Ray.ORDER_BITWISE_XOR=11;Blockly.Ray.ORDER_BITWISE_OR=12;Blockly.Ray.ORDER_LOGICAL_AND=13;Blockly.Ray.ORDER_LOGICAL_OR=14;Blockly.Ray.ORDER_CONDITIONAL=15;Blockly.Ray.ORDER_ASSIGNMENT=16;Blockly.Ray.ORDER_COMMA=17;Blockly.Ray.ORDER_NONE=99;Blockly.Ray.INFINITE_LOOP_TRAP=null;
Blockly.Ray.not_implemented=function(a){throw{message:"NOT YET IMPLEMENTED: "+a};};Blockly.Ray.lib_={};Blockly.Ray.initialization_code='goog.require("ray.ray");\ngoog.require("ray.lib");\n';Blockly.Ray.ray_apply=function(a){var b=Array.prototype.slice.call(arguments,1),c="r.name("+Blockly.Ray.quote_(a)+")",b="r.p_args("+b.join(", ")+")";return"r.app("+[c,b].join(", ")+")"};
Blockly.Ray.init=function(){Blockly.Ray.definitions_={};if(Blockly.Variables){Blockly.Ray.variableDB_?Blockly.Ray.variableDB_.reset():Blockly.Ray.variableDB_=new Blockly.Names(Blockly.Ray.RESERVED_WORDS_);for(var a=["var _temp;"],b=Blockly.Variables.allVariables(),c=1;c<=b.length;c++)a[c]="var "+Blockly.Ray.variableDB_.getName(b[c],Blockly.Variables.NAME_TYPE)+";";Blockly.Ray.definitions_.variables=a.join("\n")}};
Blockly.Ray.finish=function(a){var b=[],c;for(c in Blockly.Ray.definitions_)b.push(Blockly.Ray.definitions_[c]);c=[];for(var e in Blockly.Ray.lib_)c.push("var "+e+" = "+Blockly.Ray.lib_[e]+";");return b.join("\n")+"\n\n"+c.join("\n")+"\n\n"+a};Blockly.Ray.scrubNakedValue=function(a){return a+";\n"};Blockly.Ray.quote_=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return"'"+a+"'"};
Blockly.Ray.scrub_=function(a,b){if(null===b)return"";var c="";if(!a.outputConnection||!a.outputConnection.targetConnection){var e=a.getCommentText();e&&(c+=Blockly.Generator.prefixLines(e,"// ")+"\n");for(var d=0;d<a.inputList.length;d++)if(a.inputList[d].type==Blockly.INPUT_VALUE&&(e=a.inputList[d].connection.targetBlock()))(e=Blockly.Generator.allNestedComments(e))&&(c+=Blockly.Generator.prefixLines(e,"// "))}d=a.nextConnection&&a.nextConnection.targetBlock();d=this.blockToCode(d);return c+b+d};Blockly.Ray.colour={};Blockly.Ray.colour_picker=function(){return["'"+this.getTitleValue("COLOUR")+"'",Blockly.Ray.ORDER_ATOMIC]};
Blockly.Ray.colour_random=function(){if(!Blockly.Ray.definitions_.colour_random){var a=Blockly.Ray.variableDB_.getDistinctName("colour_random",Blockly.Generator.NAME_TYPE);Blockly.Ray.colour_random.functionName=a;var b=[];b.push("function "+a+"() {");b.push("  var num = Math.floor(Math.random() * Math.pow(2, 24));");b.push("  return '#' + ('00000' + num.toString(16)).substr(-6);");b.push("}");Blockly.Ray.definitions_.colour_random=b.join("\n")}return[Blockly.Ray.colour_random.functionName+"()",Blockly.Ray.ORDER_FUNCTION_CALL]};
Blockly.Ray.colour_rgb=function(){var a=Blockly.Ray.valueToCode(this,"RED",Blockly.Ray.ORDER_COMMA)||0,b=Blockly.Ray.valueToCode(this,"GREEN",Blockly.Ray.ORDER_COMMA)||0,c=Blockly.Ray.valueToCode(this,"BLUE",Blockly.Ray.ORDER_COMMA)||0;if(!Blockly.Ray.definitions_.colour_rgb){var e=Blockly.Ray.variableDB_.getDistinctName("colour_rgb",Blockly.Generator.NAME_TYPE);Blockly.Ray.colour_rgb.functionName=e;var d=[];d.push("function "+e+"(r, g, b) {");d.push("  r = Math.round(Math.max(Math.min(Number(r), 100), 0) * 2.55);");
d.push("  g = Math.round(Math.max(Math.min(Number(g), 100), 0) * 2.55);");d.push("  b = Math.round(Math.max(Math.min(Number(b), 100), 0) * 2.55);");d.push("  r = ('0' + (r || 0).toString(16)).slice(-2);");d.push("  g = ('0' + (g || 0).toString(16)).slice(-2);");d.push("  b = ('0' + (b || 0).toString(16)).slice(-2);");d.push("  return '#' + r + g + b;");d.push("}");Blockly.Ray.definitions_.colour_rgb=d.join("\n")}return[Blockly.Ray.colour_rgb.functionName+"("+a+", "+b+", "+c+")",Blockly.Ray.ORDER_FUNCTION_CALL]};
Blockly.Ray.colour_blend=function(){var a=Blockly.Ray.valueToCode(this,"COLOUR1",Blockly.Ray.ORDER_COMMA)||"'#000000'",b=Blockly.Ray.valueToCode(this,"COLOUR2",Blockly.Ray.ORDER_COMMA)||"'#000000'",c=Blockly.Ray.valueToCode(this,"RATIO",Blockly.Ray.ORDER_COMMA)||0.5;if(!Blockly.Ray.definitions_.colour_blend){var e=Blockly.Ray.variableDB_.getDistinctName("colour_blend",Blockly.Generator.NAME_TYPE);Blockly.Ray.colour_blend.functionName=e;var d=[];d.push("function "+e+"(c1, c2, ratio) {");d.push("  ratio = Math.max(Math.min(Number(ratio), 1), 0);");
d.push("  var r1 = parseInt(c1.substring(1, 3), 16);");d.push("  var g1 = parseInt(c1.substring(3, 5), 16);");d.push("  var b1 = parseInt(c1.substring(5, 7), 16);");d.push("  var r2 = parseInt(c2.substring(1, 3), 16);");d.push("  var g2 = parseInt(c2.substring(3, 5), 16);");d.push("  var b2 = parseInt(c2.substring(5, 7), 16);");d.push("  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);");d.push("  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);");d.push("  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);");
d.push("  r = ('0' + (r || 0).toString(16)).slice(-2);");d.push("  g = ('0' + (g || 0).toString(16)).slice(-2);");d.push("  b = ('0' + (b || 0).toString(16)).slice(-2);");d.push("  return '#' + r + g + b;");d.push("}");Blockly.Ray.definitions_.colour_blend=d.join("\n")}return[Blockly.Ray.colour_blend.functionName+"("+a+", "+b+", "+c+")",Blockly.Ray.ORDER_FUNCTION_CALL]};Blockly.Ray.control={};Blockly.Ray.controls_if=function(){for(var a=0,b=Blockly.Ray.valueToCode(this,"IF"+a,Blockly.Ray.ORDER_NONE)||"false",c=Blockly.Ray.statementToCode(this,"DO"+a),e="if ("+b+") {\n"+c+"}",a=1;a<=this.elseifCount_;a++)b=Blockly.Ray.valueToCode(this,"IF"+a,Blockly.Ray.ORDER_NONE)||"false",c=Blockly.Ray.statementToCode(this,"DO"+a),e+=" else if ("+b+") {\n"+c+"}";this.elseCount_&&(c=Blockly.Ray.statementToCode(this,"ELSE"),e+=" else {\n"+c+"}");return e+"\n"};
Blockly.Ray.controls_repeat=function(){var a=Number(this.getTitleValue("TIMES")),b=Blockly.Ray.statementToCode(this,"DO");Blockly.Ray.INFINITE_LOOP_TRAP&&(b=Blockly.Ray.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+b);var c=Blockly.Ray.variableDB_.getDistinctName("count",Blockly.Variables.NAME_TYPE);return"for (var "+c+" = 0; "+c+" < "+a+"; "+c+"++) {\n"+b+"}\n"};
Blockly.Ray.controls_whileUntil=function(){var a="UNTIL"==this.getTitleValue("MODE"),b=Blockly.Ray.valueToCode(this,"BOOL",a?Blockly.Ray.ORDER_LOGICAL_NOT:Blockly.Ray.ORDER_NONE)||"false",c=Blockly.Ray.statementToCode(this,"DO");Blockly.Ray.INFINITE_LOOP_TRAP&&(c=Blockly.Ray.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+c);a&&(b="!"+b);return"while ("+b+") {\n"+c+"}\n"};
Blockly.Ray.controls_for=function(){var a=Blockly.Ray.variableDB_.getName(this.getTitleValue("VAR"),Blockly.Variables.NAME_TYPE),b=Blockly.Ray.valueToCode(this,"FROM",Blockly.Ray.ORDER_ASSIGNMENT)||"0",c=Blockly.Ray.valueToCode(this,"TO",Blockly.Ray.ORDER_ASSIGNMENT)||"0",e=Blockly.Ray.statementToCode(this,"DO");Blockly.Ray.INFINITE_LOOP_TRAP&&(e=Blockly.Ray.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+e);var d;if(b.match(/^-?\d+(\.\d+)?$/)&&c.match(/^-?\d+(\.\d+)?$/))d=parseFloat(b)<=parseFloat(c),
d="for ("+a+" = "+b+"; "+a+(d?" <= ":" >= ")+c+"; "+a+(d?"++":"--")+") {\n"+e+"}\n";else{d="";var f=b;!b.match(/^\w+$/)&&!b.match(/^-?\d+(\.\d+)?$/)&&(f=Blockly.Ray.variableDB_.getDistinctName(a+"_start",Blockly.Variables.NAME_TYPE),d+="var "+f+" = "+b+";\n");b=c;!c.match(/^\w+$/)&&!c.match(/^-?\d+(\.\d+)?$/)&&(b=Blockly.Ray.variableDB_.getDistinctName(a+"_end",Blockly.Variables.NAME_TYPE),d+="var "+b+" = "+c+";\n");d+="for ("+a+" = "+f+";\n    ("+f+" <= "+b+") ? "+a+" <= "+b+" : "+a+" >= "+b+";\n    "+
a+" += ("+f+" <= "+b+") ? 1 : -1) {\n"+e+"}\n"}return d};
Blockly.Ray.controls_forEach=function(){var a=Blockly.Ray.variableDB_.getName(this.getTitleValue("VAR"),Blockly.Variables.NAME_TYPE),b=Blockly.Ray.valueToCode(this,"LIST",Blockly.Ray.ORDER_ASSIGNMENT)||"[]",c=Blockly.Ray.statementToCode(this,"DO");Blockly.Ray.INFINITE_LOOP_TRAP&&(c=Blockly.Ray.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+c);var e=Blockly.Ray.variableDB_.getDistinctName(a+"_index",Blockly.Variables.NAME_TYPE);if(b.match(/^\w+$/))a="for (var "+e+" in  "+b+") {\n"+("  "+a+" = "+
b+"["+e+"];\n"+c)+"}\n";else var d=Blockly.Ray.variableDB_.getDistinctName(a+"_list",Blockly.Variables.NAME_TYPE),c="  "+a+" = "+d+"["+e+"];\n"+c,a="var "+d+" = "+b+";\nfor (var "+e+" in "+d+") {\n"+c+"}\n";return a};Blockly.Ray.controls_flow_statements=function(){switch(this.getTitleValue("FLOW")){case "BREAK":return"break;\n";case "CONTINUE":return"continue;\n"}throw"Unknown flow statement.";};Blockly.Ray.lists={};Blockly.Ray.lists_create_empty=function(){return["r.null()",Blockly.Ray.ORDER_MEMBER]};Blockly.Ray.lists_create_with=function(){for(var a=Array(this.itemCount_),b=0;b<this.itemCount_;b++)a[b]=Blockly.Ray.valueToCode(this,"ADD"+b,Blockly.Ray.ORDER_COMMA)||"r.null()";return[Blockly.Ray.ray_apply.apply(null,["list"].concat(a)),Blockly.Ray.ORDER_FUNCTION_CALL]};Blockly.Ray.lists_repeat=function(){return Blockly.Ray.not_implemented()};
Blockly.Ray.lists_length=function(){var a=Blockly.Ray.valueToCode(this,"VALUE",Blockly.Ray.ORDER_COMMA)||"''";return[Blockly.Ray.ray_apply("length",a),Blockly.Ray.ORDER_FUNCTION_CALL]};Blockly.Ray.lists_isEmpty=function(){var a=Blockly.Ray.valueToCode(this,"VALUE",Blockly.Ray.ORDER_COMMA)||"[]";return[Blockly.Ray.ray_apply("empty?",a),Blockly.Ray.ORDER_FUNCTION_CALL]};Blockly.Ray.lists_indexOf=function(){return Blockly.Ray.not_implemented()};
Blockly.Ray.lists_getIndex=function(){var a=this.getTitleValue("MODE")||"GET",b=this.getTitleValue("WHERE")||"FROM_START",c=Blockly.Ray.valueToCode(this,"AT",Blockly.Ray.ORDER_COMMA)||"1",e=Blockly.Ray.valueToCode(this,"VALUE",Blockly.Ray.ORDER_COMMA)||"[]";return"GET"===a&&"FROM_START"===b?[Blockly.Ray.ray_apply("list-ref",e,c),Blockly.Ray.ORDER_FUNCTION_CALL]:Blockly.Ray.not_implemented()};Blockly.Ray.lists_setIndex=function(){return Blockly.Ray.not_implemented()};Blockly.Ray.lists_getSublist=function(){return Blockly.Ray.not_implemented()};Blockly.Ray.logic={};Blockly.Ray.logic_compare=function(){var a=this.getTitleValue("OP"),b=Blockly.Ray.valueToCode(this,"A",order)||"0",c=Blockly.Ray.valueToCode(this,"B",order)||"0";switch(a){case NEQ:a=Blockly.Ray.ray_apply("not",Blockly.Ray.ray_apply("=",b,c));break;case EQ:case LT:case LTE:case GT:case GTE:a=Blockly.Ray.ray_apply(Blockly.Ray.logic_compare[a],b,c);break;default:return Blockly.Ray.not_implemented("Unsupported operator for comparison!")}return[a,Blockly.Ray.ORDER_COMMA]};
Blockly.Ray.logic_compare.OPERATORS={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="};Blockly.Ray.logic_operation=function(){var a=this.getTitleValue("OP").toLocaleLowerCase(),b=Blockly.Ray.valueToCode(this,"A",order)||"false",c=Blockly.Ray.valueToCode(this,"B",order)||"false";return[Blockly.Ray.ray_apply(a,b,c),Blockly.Ray.ORDER_COMMA]};Blockly.Ray.logic_negate=function(){var a=Blockly.Ray.valueToCode(this,"BOOL",order)||"false";return[Blockly.Ray.ray_apply("not",a),Blockly.Ray.ORDER_COMMA]};
Blockly.Ray.logic_boolean=function(){return["r.bool("+("TRUE"==this.getTitleValue("BOOL")?"true":"false")+")",Blockly.Ray.ORDER_ATOMIC]};Blockly.Ray.logic_null=function(){return["r.null()",Blockly.Ray.ORDER_ATOMIC]};Blockly.Ray.logic_ternary=function(){return Blockly.Ray.not_implemented()};Blockly.Ray.math={};Blockly.Ray.math_number=function(){return["r.num("+window.parseFloat(this.getTitleValue("NUM"))+")",Blockly.Ray.ORDER_ATOMIC]};Blockly.Ray.math_arithmetic=function(){var a=this.getTitleValue("OP"),a=Blockly.Ray.math_arithmetic.BASIC_OPERATIONS[a],b=Blockly.Ray.valueToCode(this,"A",Blockly.Ray.ORDER_COMMA)||"0",c=Blockly.Ray.valueToCode(this,"B",Blockly.Ray.ORDER_COMMA)||"0";return[Blockly.Ray.ray_apply(a,b,c),Blockly.Ray.ORDER_FUNCTION_CALL]};
Blockly.Ray.math_arithmetic.BASIC_OPERATIONS={ADD:"+",MINUS:"-",MULTIPLY:"*",DIVIDE:"/",POWER:"expt"};
Blockly.Ray.math_single=function(){var a=this.getTitleValue("OP"),b;if("NEG"==a)return b=Blockly.Ray.valueToCode(this,"NUM",Blockly.Ray.ORDER_UNARY_NEGATION)||"0","-"==b[0]&&(b=" "+b),["-"+b,Blockly.Ray.ORDER_UNARY_NEGATION];b="SIN"==a||"COS"==a||"TAN"==a?Blockly.Ray.valueToCode(this,"NUM",Blockly.Ray.ORDER_DIVISION)||"0":Blockly.Ray.valueToCode(this,"NUM",Blockly.Ray.ORDER_NONE)||"0";switch(a){case "ABS":case "ROOT":case "LN":case "EXP":case "ROUND":case "ROUNDUP":case "ROUNDDOWN":a=Blockly.Ray.ray_apply(Blockly.Ray.UNARY_OPERATORS[a],
b);break;case "SIN":case "COS":case "TAN":a=Blockly.Ray.ray_apply(Blockly.Ray.TRIGONOMETRIC_OPERATORS[a],b);break;case "ASIN":case "ACOS":case "ATAN":a=Blockly.Ray.ray_apply(Blockly.Ray.TRIGONOMETRIC_OPERATORS[a],b);break;default:throw"Unknown math operator: "+a;}return[a,Blockly.Ray.ORDER_FUNCTION_CALL]};Blockly.Ray.UNARY_OPERATORS={ABS:"abs",ROOT:"sqrt",LN:"log",EXP:"exp",ROUND:"round",ROUNDUP:"ceiling",ROUNDDOWN:"floor"};
Blockly.Ray.TRIGONOMETRIC_OPERATORS={SIN:"sin",COS:"cos",TAN:"tan",ASIN:"asin",ACOS:"acos",ATAN:"atan"};Blockly.Ray.math_constant=function(){var a=this.getTitleValue("CONSTANT");return"GOLDEN_RATIO"===a?[Blockly.Ray.ray_apply("/",Blockly.Ray.ray_apply("+",1,Blockly.Ray.ray_apply("sqrt",5)),2),Blockly.Ray.ORDER_FUNCTION_CALL]:Blockly.Ray.math_constant.CONSTANTS[a]};
Blockly.Ray.math_constant.CONSTANTS={PI:["Math.PI",Blockly.Ray.ORDER_MEMBER],E:["Math.E",Blockly.Ray.ORDER_MEMBER],SQRT2:["Math.SQRT2",Blockly.Ray.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",Blockly.Ray.ORDER_MEMBER],INFINITY:["Infinity",Blockly.Ray.ORDER_ATOMIC]};
Blockly.Ray.math_number_property=function(){var a=Blockly.Ray.valueToCode(this,"NUMBER_TO_CHECK",Blockly.Ray.ORDER_FUNCTION_CALL)||"NaN",b=this.getTitleValue("PROPERTY"),c;if("PRIME"==b)return Blockly.Ray.not_implemented();switch(b){case "EVEN":c=Blockly.Ray.ray_apply("even?",a);break;case "ODD":c=Blockly.Ray.ray_apply("odd?",a);break;case "WHOLE":c=Blockly.Ray.ray_apply("equal?",Blockly.Ray.ray_apply("floor",a),Blockly.Ray.ray_apply("ceiling",a));break;case "POSITIVE":c=Blockly.Ray.ray_apply(">",
a,0);break;case "NEGATIVE":c=Blockly.Ray.ray_apply("<",a,0);break;case "DIVISIBLE_BY":b=Blockly.Ray.valueToCode(this,"DIVISOR",Blockly.Ray.ORDER_FUNCTION_CALL)||"NaN",c=Blockly.Ray.ray_apply("equal?",Blockly.Ray.ray_apply("remainder",a,b),0)}return[c,Blockly.Ray.ORDER_FUNCTION_CALL]};
Blockly.Ray.math_change=function(){var a=Blockly.Ray.valueToCode(this,"DELTA",Blockly.Ray.ORDER_ADDITION)||"0",b=Blockly.Ray.variableDB_.getName(this.getTitleValue("VAR"),Blockly.Variables.NAME_TYPE);return b+" = (typeof "+b+" == 'number' ? "+b+" : 0) + "+a+";\n"};Blockly.Ray.math_round=Blockly.Ray.math_single;Blockly.Ray.math_trig=Blockly.Ray.math_single;
Blockly.Ray.math_on_list=function(){var a;switch(this.getTitleValue("OP")){case "SUM":return Blockly.Ray.valueToCode(this,"LIST",Blockly.Ray.ORDER_MEMBER),Blockly.Ray.not_implemented();case "MIN":a=Blockly.Ray.valueToCode(this,"LIST",Blockly.Ray.ORDER_COMMA)||"[]";a=Blockly.Ray.ray_apply("apply",Blockly.Ray.ray_prim("min"),a);break;case "MAX":a=Blockly.Ray.valueToCode(this,"LIST",Blockly.Ray.ORDER_COMMA)||"[]";a=Blockly.Ray.ray_apply("apply",Blockly.Ray.ray_prim("max"),a);break;case "AVERAGE":return Blockly.Ray.not_implemented();
case "MEDIAN":return Blockly.Ray.not_implemented();case "MODE":return Blockly.Ray.not_implemented();case "STD_DEV":return Blockly.Ray.not_implemented();case "RANDOM":a=Blockly.Ray.valueToCode(this,"LIST",Blockly.Ray.ORDER_NONE)||"[]";a=Blockly.Ray.ray_apply("list-ref",a,Blockly.Ray.ray_apply("random",Blockly.Ray.ray_apply("length",a)));break;default:return Blockly.Ray.not_implemented()}return[a,Blockly.Ray.ORDER_FUNCTION_CALL]};
Blockly.Ray.math_modulo=function(){var a=Blockly.Ray.valueToCode(this,"DIVIDEND",Blockly.Ray.ORDER_FUNCTION_CALL)||"0",b=Blockly.Ray.valueToCode(this,"DIVISOR",Blockly.Ray.ORDER_FUNCTION_CALL)||"0";return[Blockly.Ray.ray_apply("modulo",a,b),Blockly.Ray.ORDER_FUNCTION_CALL]};
Blockly.Ray.math_constrain=function(){var a=Blockly.Ray.valueToCode(this,"VALUE",Blockly.Ray.ORDER_FUNCTION_CALL)||"0",b=Blockly.Ray.valueToCode(this,"LOW",Blockly.Ray.ORDER_FUNCTION_CALL)||"0",c=Blockly.Ray.valueToCode(this,"HIGH",Blockly.Ray.ORDER_FUNCTION_CALL)||"Infinity";return[Blockly.Ray.ray_apply("min",Blockly.Ray.ray_apply("max",a,b),c),Blockly.Ray.ORDER_FUNCTION_CALL]};
Blockly.Ray.math_random_int=function(){var a=Blockly.Ray.valueToCode(this,"FROM",Blockly.Ray.ORDER_COMMA)||"0",b=Blockly.Ray.valueToCode(this,"TO",Blockly.Ray.ORDER_COMMA)||"0";return[Blockly.Ray.ray_apply("random",a,b),Blockly.Ray.ORDER_FUNCTION_CALL]};Blockly.Ray.math_random_float=function(){return[Blockly.Ray.ray_apply("random"),Blockly.Ray.ORDER_FUNCTION_CALL]};Blockly.Ray.procedures={};
Blockly.Ray.procedures_defreturn=function(){var a=Blockly.Ray.variableDB_.getName(this.getTitleValue("NAME"),Blockly.Procedures.NAME_TYPE),b=Blockly.Ray.statementToCode(this,"STACK");Blockly.Ray.INFINITE_LOOP_TRAP&&(b=Blockly.Ray.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+b);var c=Blockly.Ray.valueToCode(this,"RETURN",Blockly.Ray.ORDER_NONE)||"";c&&(c="  return "+c+";\n");for(var e=[],d=0;d<this.arguments_.length;d++)e[d]=Blockly.Ray.variableDB_.getName(this.arguments_[d],Blockly.Variables.NAME_TYPE);
b="function "+a+"("+e.join(", ")+") {\n"+b+c+"}";b=Blockly.Ray.scrub_(this,b);Blockly.Ray.definitions_[a]=b;return null};Blockly.Ray.procedures_defnoreturn=Blockly.Ray.procedures_defreturn;Blockly.Ray.procedures_callreturn=function(){for(var a=Blockly.Ray.variableDB_.getName(this.getTitleValue("NAME"),Blockly.Procedures.NAME_TYPE),b=[],c=0;c<this.arguments_.length;c++)b[c]=Blockly.Ray.valueToCode(this,"ARG"+c,Blockly.Ray.ORDER_COMMA)||"null";return[a+"("+b.join(", ")+")",Blockly.Ray.ORDER_FUNCTION_CALL]};
Blockly.Ray.procedures_callnoreturn=function(){for(var a=Blockly.Ray.variableDB_.getName(this.getTitleValue("NAME"),Blockly.Procedures.NAME_TYPE),b=[],c=0;c<this.arguments_.length;c++)b[c]=Blockly.Ray.valueToCode(this,"ARG"+c,Blockly.Ray.ORDER_COMMA)||"null";return a+"("+b.join(", ")+");\n"};
Blockly.Ray.procedures_ifreturn=function(){var a="if ("+(Blockly.Ray.valueToCode(this,"CONDITION",Blockly.Ray.ORDER_NONE)||"false")+") {\n";if(this.hasReturnValue_)var b=Blockly.Ray.valueToCode(this,"VALUE",Blockly.Ray.ORDER_NONE)||"null",a=a+("  return "+b+";\n");else a+="  return;\n";return a+"}\n"};Blockly.Ray.text={};Blockly.Ray.text=function(){return[Blockly.Ray.quote_(this.getTitleValue("TEXT")),Blockly.Ray.ORDER_ATOMIC]};Blockly.Ray.text_join=function(){return Blockly.Ray.not_implemented()};Blockly.Ray.text_append=function(){return Blockly.Ray.not_implemented()};Blockly.Ray.text_length=function(){var a=Blockly.Ray.valueToCode(this,"VALUE",Blockly.Ray.ORDER_COMMA)||"''";return[Blockly.Ray.ray_apply("string-length",a),Blockly.Ray.ORDER_FUNCTION_CALL]};
Blockly.Ray.text_isEmpty=function(){var a=Blockly.Ray.valueToCode(this,"VALUE",Blockly.Ray.ORDER_COMMA)||"''";return[Blockly.Ray.ray_apply("=",Blockly.Ray.ray_apply("string-length",a),0),Blockly.Ray.ORDER_FUNCTION_CALL]};Blockly.Ray.text_indexOf=function(){return Blockly.Ray.not_implemented()};
Blockly.Ray.text_charAt=function(){var a=this.getTitleValue("WHERE")||"FROM_START",b=Blockly.Ray.valueToCode(this,"AT",Blockly.Ray.ORDER_UNARY_NEGATION)||"1",c=Blockly.Ray.valueToCode(this,"VALUE",Blockly.Ray.ORDER_COMMA)||"''";return"FIRST"===a?[Blockly.Ray.ray_apply("string-ref",b,c),Blockly.Ray.ORDER_FUNCTION_CALL]:Blockly.Ray.not_implemented()};
Blockly.Ray.text_getSubstring=function(){Blockly.Ray.valueToCode(this,"STRING",Blockly.Ray.ORDER_COMMA);var a=this.getTitleValue("WHERE1"),b=this.getTitleValue("WHERE2"),c=Blockly.Ray.valueToCode(this,"AT1",Blockly.Ray.ORDER_NONE)||"1",e=Blockly.Ray.valueToCode(this,"AT2",Blockly.Ray.ORDER_NONE)||"1";return"FROM_START"===a&&"FROM_START"===b?[Blockly.Ray.ray_apply("substring",c,e),Blockly.Ray.ORDER_FUNCTION_CALL]:Blockly.Ray.not_implemented()};
Blockly.Ray.text_changeCase=function(){var a=this.getTitleValue("CASE"),a=Blockly.Ray.text_changeCase.OPERATORS[a],b=Blockly.Ray.text_trim(this,"TEXT",Blockly.Ray.ORDER_COMMA)||"''";return a?[Blockly.Ray.ray_apply(a,b),Blockly.Ray.ORDER_FUNCTION_CALL]:Blockly.Ray.not_implemented()};Blockly.Ray.text_changeCase.OPERATORS={UPPERCASE:"string-upcase",LOWERCASE:"string-downcase",TITLECASE:"string-titlecase"};Blockly.Ray.text_trim=function(){return Blockly.Ray.not_implemented()};
Blockly.Ray.text_trim.OPERATORS={LEFT:".trimLeft()",RIGHT:".trimRight()",BOTH:".trim()"};Blockly.Ray.text_print=function(){return Blockly.Ray.not_implemented()};Blockly.Ray.text_prompt=function(){return Blockly.Ray.not_implemented()};Blockly.Ray.variables={};Blockly.Ray.variables_get=function(){return[Blockly.Ray.variableDB_.getName(this.getTitleValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.Ray.ORDER_ATOMIC]};Blockly.Ray.variables_set=function(){var a=Blockly.Ray.valueToCode(this,"VALUE",Blockly.Ray.ORDER_ASSIGNMENT)||"0";return Blockly.Ray.variableDB_.getName(this.getTitleValue("VAR"),Blockly.Variables.NAME_TYPE)+" = "+a+";\n"};
